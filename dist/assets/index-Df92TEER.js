(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function K2(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var U0={exports:{}},nu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lw;function iN(){if(lw)return nu;lw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:n,type:r,key:c,ref:a!==void 0?a:null,props:l}}return nu.Fragment=e,nu.jsx=t,nu.jsxs=t,nu}var cw;function aN(){return cw||(cw=1,U0.exports=iN()),U0.exports}var d=aN(),B0={exports:{}},De={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uw;function oN(){if(uw)return De;uw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.iterator;function _(U){return U===null||typeof U!="object"?null:(U=b&&U[b]||U["@@iterator"],typeof U=="function"?U:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,D={};function N(U,le,Z){this.props=U,this.context=le,this.refs=D,this.updater=Z||A}N.prototype.isReactComponent={},N.prototype.setState=function(U,le){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,le,"setState")},N.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function V(){}V.prototype=N.prototype;function B(U,le,Z){this.props=U,this.context=le,this.refs=D,this.updater=Z||A}var H=B.prototype=new V;H.constructor=B,I(H,N.prototype),H.isPureReactComponent=!0;var te=Array.isArray,ee={H:null,A:null,T:null,S:null,V:null},se=Object.prototype.hasOwnProperty;function O(U,le,Z,ae,ge,Ae){return Z=Ae.ref,{$$typeof:n,type:U,key:le,ref:Z!==void 0?Z:null,props:Ae}}function k(U,le){return O(U.type,le,void 0,void 0,void 0,U.props)}function R(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function j(U){var le={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(Z){return le[Z]})}var L=/\/+/g;function F(U,le){return typeof U=="object"&&U!==null&&U.key!=null?j(""+U.key):le.toString(36)}function P(){}function Ze(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(P,P):(U.status="pending",U.then(function(le){U.status==="pending"&&(U.status="fulfilled",U.value=le)},function(le){U.status==="pending"&&(U.status="rejected",U.reason=le)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function Ke(U,le,Z,ae,ge){var Ae=typeof U;(Ae==="undefined"||Ae==="boolean")&&(U=null);var ye=!1;if(U===null)ye=!0;else switch(Ae){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(U.$$typeof){case n:case e:ye=!0;break;case v:return ye=U._init,Ke(ye(U._payload),le,Z,ae,ge)}}if(ye)return ge=ge(U),ye=ae===""?"."+F(U,0):ae,te(ge)?(Z="",ye!=null&&(Z=ye.replace(L,"$&/")+"/"),Ke(ge,le,Z,"",function(Dt){return Dt})):ge!=null&&(R(ge)&&(ge=k(ge,Z+(ge.key==null||U&&U.key===ge.key?"":(""+ge.key).replace(L,"$&/")+"/")+ye)),le.push(ge)),1;ye=0;var je=ae===""?".":ae+":";if(te(U))for(var Be=0;Be<U.length;Be++)ae=U[Be],Ae=je+F(ae,Be),ye+=Ke(ae,le,Z,Ae,ge);else if(Be=_(U),typeof Be=="function")for(U=Be.call(U),Be=0;!(ae=U.next()).done;)ae=ae.value,Ae=je+F(ae,Be++),ye+=Ke(ae,le,Z,Ae,ge);else if(Ae==="object"){if(typeof U.then=="function")return Ke(Ze(U),le,Z,ae,ge);throw le=String(U),Error("Objects are not valid as a React child (found: "+(le==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":le)+"). If you meant to render a collection of children, use an array instead.")}return ye}function J(U,le,Z){if(U==null)return U;var ae=[],ge=0;return Ke(U,ae,"","",function(Ae){return le.call(Z,Ae,ge++)}),ae}function ue(U){if(U._status===-1){var le=U._result;le=le(),le.then(function(Z){(U._status===0||U._status===-1)&&(U._status=1,U._result=Z)},function(Z){(U._status===0||U._status===-1)&&(U._status=2,U._result=Z)}),U._status===-1&&(U._status=0,U._result=le)}if(U._status===1)return U._result.default;throw U._result}var me=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var le=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(le))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)};function Le(){}return De.Children={map:J,forEach:function(U,le,Z){J(U,function(){le.apply(this,arguments)},Z)},count:function(U){var le=0;return J(U,function(){le++}),le},toArray:function(U){return J(U,function(le){return le})||[]},only:function(U){if(!R(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},De.Component=N,De.Fragment=t,De.Profiler=a,De.PureComponent=B,De.StrictMode=r,De.Suspense=m,De.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ee,De.__COMPILER_RUNTIME={__proto__:null,c:function(U){return ee.H.useMemoCache(U)}},De.cache=function(U){return function(){return U.apply(null,arguments)}},De.cloneElement=function(U,le,Z){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var ae=I({},U.props),ge=U.key,Ae=void 0;if(le!=null)for(ye in le.ref!==void 0&&(Ae=void 0),le.key!==void 0&&(ge=""+le.key),le)!se.call(le,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&le.ref===void 0||(ae[ye]=le[ye]);var ye=arguments.length-2;if(ye===1)ae.children=Z;else if(1<ye){for(var je=Array(ye),Be=0;Be<ye;Be++)je[Be]=arguments[Be+2];ae.children=je}return O(U.type,ge,void 0,void 0,Ae,ae)},De.createContext=function(U){return U={$$typeof:c,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:l,_context:U},U},De.createElement=function(U,le,Z){var ae,ge={},Ae=null;if(le!=null)for(ae in le.key!==void 0&&(Ae=""+le.key),le)se.call(le,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(ge[ae]=le[ae]);var ye=arguments.length-2;if(ye===1)ge.children=Z;else if(1<ye){for(var je=Array(ye),Be=0;Be<ye;Be++)je[Be]=arguments[Be+2];ge.children=je}if(U&&U.defaultProps)for(ae in ye=U.defaultProps,ye)ge[ae]===void 0&&(ge[ae]=ye[ae]);return O(U,Ae,void 0,void 0,null,ge)},De.createRef=function(){return{current:null}},De.forwardRef=function(U){return{$$typeof:h,render:U}},De.isValidElement=R,De.lazy=function(U){return{$$typeof:v,_payload:{_status:-1,_result:U},_init:ue}},De.memo=function(U,le){return{$$typeof:p,type:U,compare:le===void 0?null:le}},De.startTransition=function(U){var le=ee.T,Z={};ee.T=Z;try{var ae=U(),ge=ee.S;ge!==null&&ge(Z,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(Le,me)}catch(Ae){me(Ae)}finally{ee.T=le}},De.unstable_useCacheRefresh=function(){return ee.H.useCacheRefresh()},De.use=function(U){return ee.H.use(U)},De.useActionState=function(U,le,Z){return ee.H.useActionState(U,le,Z)},De.useCallback=function(U,le){return ee.H.useCallback(U,le)},De.useContext=function(U){return ee.H.useContext(U)},De.useDebugValue=function(){},De.useDeferredValue=function(U,le){return ee.H.useDeferredValue(U,le)},De.useEffect=function(U,le,Z){var ae=ee.H;if(typeof Z=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ae.useEffect(U,le)},De.useId=function(){return ee.H.useId()},De.useImperativeHandle=function(U,le,Z){return ee.H.useImperativeHandle(U,le,Z)},De.useInsertionEffect=function(U,le){return ee.H.useInsertionEffect(U,le)},De.useLayoutEffect=function(U,le){return ee.H.useLayoutEffect(U,le)},De.useMemo=function(U,le){return ee.H.useMemo(U,le)},De.useOptimistic=function(U,le){return ee.H.useOptimistic(U,le)},De.useReducer=function(U,le,Z){return ee.H.useReducer(U,le,Z)},De.useRef=function(U){return ee.H.useRef(U)},De.useState=function(U){return ee.H.useState(U)},De.useSyncExternalStore=function(U,le,Z){return ee.H.useSyncExternalStore(U,le,Z)},De.useTransition=function(){return ee.H.useTransition()},De.version="19.1.0",De}var dw;function ly(){return dw||(dw=1,B0.exports=oN()),B0.exports}var C=ly();const lN=K2(C);var z0={exports:{}},ru={},F0={exports:{}},q0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hw;function cN(){return hw||(hw=1,function(n){function e(J,ue){var me=J.length;J.push(ue);e:for(;0<me;){var Le=me-1>>>1,U=J[Le];if(0<a(U,ue))J[Le]=ue,J[me]=U,me=Le;else break e}}function t(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var ue=J[0],me=J.pop();if(me!==ue){J[0]=me;e:for(var Le=0,U=J.length,le=U>>>1;Le<le;){var Z=2*(Le+1)-1,ae=J[Z],ge=Z+1,Ae=J[ge];if(0>a(ae,me))ge<U&&0>a(Ae,ae)?(J[Le]=Ae,J[ge]=me,Le=ge):(J[Le]=ae,J[Z]=me,Le=Z);else if(ge<U&&0>a(Ae,me))J[Le]=Ae,J[ge]=me,Le=ge;else break e}}return ue}function a(J,ue){var me=J.sortIndex-ue.sortIndex;return me!==0?me:J.id-ue.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var m=[],p=[],v=1,b=null,_=3,A=!1,I=!1,D=!1,N=!1,V=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function te(J){for(var ue=t(p);ue!==null;){if(ue.callback===null)r(p);else if(ue.startTime<=J)r(p),ue.sortIndex=ue.expirationTime,e(m,ue);else break;ue=t(p)}}function ee(J){if(D=!1,te(J),!I)if(t(m)!==null)I=!0,se||(se=!0,F());else{var ue=t(p);ue!==null&&Ke(ee,ue.startTime-J)}}var se=!1,O=-1,k=5,R=-1;function j(){return N?!0:!(n.unstable_now()-R<k)}function L(){if(N=!1,se){var J=n.unstable_now();R=J;var ue=!0;try{e:{I=!1,D&&(D=!1,B(O),O=-1),A=!0;var me=_;try{t:{for(te(J),b=t(m);b!==null&&!(b.expirationTime>J&&j());){var Le=b.callback;if(typeof Le=="function"){b.callback=null,_=b.priorityLevel;var U=Le(b.expirationTime<=J);if(J=n.unstable_now(),typeof U=="function"){b.callback=U,te(J),ue=!0;break t}b===t(m)&&r(m),te(J)}else r(m);b=t(m)}if(b!==null)ue=!0;else{var le=t(p);le!==null&&Ke(ee,le.startTime-J),ue=!1}}break e}finally{b=null,_=me,A=!1}ue=void 0}}finally{ue?F():se=!1}}}var F;if(typeof H=="function")F=function(){H(L)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,Ze=P.port2;P.port1.onmessage=L,F=function(){Ze.postMessage(null)}}else F=function(){V(L,0)};function Ke(J,ue){O=V(function(){J(n.unstable_now())},ue)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(J){switch(_){case 1:case 2:case 3:var ue=3;break;default:ue=_}var me=_;_=ue;try{return J()}finally{_=me}},n.unstable_requestPaint=function(){N=!0},n.unstable_runWithPriority=function(J,ue){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var me=_;_=J;try{return ue()}finally{_=me}},n.unstable_scheduleCallback=function(J,ue,me){var Le=n.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Le+me:Le):me=Le,J){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=me+U,J={id:v++,callback:ue,priorityLevel:J,startTime:me,expirationTime:U,sortIndex:-1},me>Le?(J.sortIndex=me,e(p,J),t(m)===null&&J===t(p)&&(D?(B(O),O=-1):D=!0,Ke(ee,me-Le))):(J.sortIndex=U,e(m,J),I||A||(I=!0,se||(se=!0,F()))),J},n.unstable_shouldYield=j,n.unstable_wrapCallback=function(J){var ue=_;return function(){var me=_;_=ue;try{return J.apply(this,arguments)}finally{_=me}}}}(q0)),q0}var fw;function uN(){return fw||(fw=1,F0.exports=cN()),F0.exports}var H0={exports:{}},un={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mw;function dN(){if(mw)return un;mw=1;var n=ly();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,p,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:b==null?null:""+b,children:m,containerInfo:p,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return un.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,un.createPortal=function(m,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(m,p,null,v)},un.flushSync=function(m){var p=c.T,v=r.p;try{if(c.T=null,r.p=2,m)return m()}finally{c.T=p,r.p=v,r.d.f()}},un.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(m,p))},un.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},un.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var v=p.as,b=h(v,p.crossOrigin),_=typeof p.integrity=="string"?p.integrity:void 0,A=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?r.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:b,integrity:_,fetchPriority:A}):v==="script"&&r.d.X(m,{crossOrigin:b,integrity:_,fetchPriority:A,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},un.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=h(p.as,p.crossOrigin);r.d.M(m,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(m)},un.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,b=h(v,p.crossOrigin);r.d.L(m,v,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},un.preloadModule=function(m,p){if(typeof m=="string")if(p){var v=h(p.as,p.crossOrigin);r.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(m)},un.requestFormReset=function(m){r.d.r(m)},un.unstable_batchedUpdates=function(m,p){return m(p)},un.useFormState=function(m,p,v){return c.H.useFormState(m,p,v)},un.useFormStatus=function(){return c.H.useHostTransitionStatus()},un.version="19.1.0",un}var gw;function hN(){if(gw)return H0.exports;gw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),H0.exports=dN(),H0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pw;function fN(){if(pw)return ru;pw=1;var n=uN(),e=ly(),t=hN();function r(s){var i="https://react.dev/errors/"+s;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var i=s,o=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(o=i.return),s=i.return;while(s)}return i.tag===3?o:null}function c(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function h(s){if(l(s)!==s)throw Error(r(188))}function m(s){var i=s.alternate;if(!i){if(i=l(s),i===null)throw Error(r(188));return i!==s?null:s}for(var o=s,u=i;;){var g=o.return;if(g===null)break;var y=g.alternate;if(y===null){if(u=g.return,u!==null){o=u;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===o)return h(g),s;if(y===u)return h(g),i;y=y.sibling}throw Error(r(188))}if(o.return!==u.return)o=g,u=y;else{for(var E=!1,T=g.child;T;){if(T===o){E=!0,o=g,u=y;break}if(T===u){E=!0,u=g,o=y;break}T=T.sibling}if(!E){for(T=y.child;T;){if(T===o){E=!0,o=y,u=g;break}if(T===u){E=!0,u=y,o=g;break}T=T.sibling}if(!E)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?s:i}function p(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s;for(s=s.child;s!==null;){if(i=p(s),i!==null)return i;s=s.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),B=Symbol.for("react.consumer"),H=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function F(s){return s===null||typeof s!="object"?null:(s=L&&s[L]||s["@@iterator"],typeof s=="function"?s:null)}var P=Symbol.for("react.client.reference");function Ze(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===P?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case I:return"Fragment";case N:return"Profiler";case D:return"StrictMode";case ee:return"Suspense";case se:return"SuspenseList";case R:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case A:return"Portal";case H:return(s.displayName||"Context")+".Provider";case B:return(s._context.displayName||"Context")+".Consumer";case te:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case O:return i=s.displayName||null,i!==null?i:Ze(s.type)||"Memo";case k:i=s._payload,s=s._init;try{return Ze(s(i))}catch{}}return null}var Ke=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},Le=[],U=-1;function le(s){return{current:s}}function Z(s){0>U||(s.current=Le[U],Le[U]=null,U--)}function ae(s,i){U++,Le[U]=s.current,s.current=i}var ge=le(null),Ae=le(null),ye=le(null),je=le(null);function Be(s,i){switch(ae(ye,i),ae(Ae,s),ae(ge,null),i.nodeType){case 9:case 11:s=(s=i.documentElement)&&(s=s.namespaceURI)?M_(s):0;break;default:if(s=i.tagName,i=i.namespaceURI)i=M_(i),s=V_(i,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Z(ge),ae(ge,s)}function Dt(){Z(ge),Z(Ae),Z(ye)}function ve(s){s.memoizedState!==null&&ae(je,s);var i=ge.current,o=V_(i,s.type);i!==o&&(ae(Ae,s),ae(ge,o))}function Te(s){Ae.current===s&&(Z(ge),Z(Ae)),je.current===s&&(Z(je),Xc._currentValue=me)}var Re=Object.prototype.hasOwnProperty,Oe=n.unstable_scheduleCallback,Dn=n.unstable_cancelCallback,Ql=n.unstable_shouldYield,vd=n.unstable_requestPaint,Yn=n.unstable_now,Um=n.unstable_getCurrentPriorityLevel,Yl=n.unstable_ImmediatePriority,no=n.unstable_UserBlockingPriority,zi=n.unstable_NormalPriority,Bm=n.unstable_LowPriority,ro=n.unstable_IdlePriority,Wl=n.log,xd=n.unstable_setDisableYieldValue,wt=null,nt=null;function Pn(s){if(typeof Wl=="function"&&xd(s),nt&&typeof nt.setStrictMode=="function")try{nt.setStrictMode(wt,s)}catch{}}var ln=Math.clz32?Math.clz32:Fi,bd=Math.log,zm=Math.LN2;function Fi(s){return s>>>=0,s===0?32:31-(bd(s)/zm|0)|0}var qi=256,Hi=4194304;function dr(s){var i=s&42;if(i!==0)return i;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function so(s,i,o){var u=s.pendingLanes;if(u===0)return 0;var g=0,y=s.suspendedLanes,E=s.pingedLanes;s=s.warmLanes;var T=u&134217727;return T!==0?(u=T&~y,u!==0?g=dr(u):(E&=T,E!==0?g=dr(E):o||(o=T&~s,o!==0&&(g=dr(o))))):(T=u&~y,T!==0?g=dr(T):E!==0?g=dr(E):o||(o=u&~s,o!==0&&(g=dr(o)))),g===0?0:i!==0&&i!==g&&(i&y)===0&&(y=g&-g,o=i&-i,y>=o||y===32&&(o&4194048)!==0)?i:g}function Gi(s,i){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&i)===0}function Xl(s,i){switch(s){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jl(){var s=qi;return qi<<=1,(qi&4194048)===0&&(qi=256),s}function Zl(){var s=Hi;return Hi<<=1,(Hi&62914560)===0&&(Hi=4194304),s}function Zr(s){for(var i=[],o=0;31>o;o++)i.push(s);return i}function es(s,i){s.pendingLanes|=i,i!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function ec(s,i,o,u,g,y){var E=s.pendingLanes;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=o,s.entangledLanes&=o,s.errorRecoveryDisabledLanes&=o,s.shellSuspendCounter=0;var T=s.entanglements,M=s.expirationTimes,Q=s.hiddenUpdates;for(o=E&~o;0<o;){var re=31-ln(o),oe=1<<re;T[re]=0,M[re]=-1;var Y=Q[re];if(Y!==null)for(Q[re]=null,re=0;re<Y.length;re++){var W=Y[re];W!==null&&(W.lane&=-536870913)}o&=~oe}u!==0&&Ir(s,u,0),y!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=y&~(E&~i))}function Ir(s,i,o){s.pendingLanes|=i,s.suspendedLanes&=~i;var u=31-ln(i);s.entangledLanes|=i,s.entanglements[u]=s.entanglements[u]|1073741824|o&4194090}function tc(s,i){var o=s.entangledLanes|=i;for(s=s.entanglements;o;){var u=31-ln(o),g=1<<u;g&i|s[u]&i&&(s[u]|=i),o&=~g}}function Bs(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function io(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function zs(){var s=ue.p;return s!==0?s:(s=window.event,s===void 0?32:nw(s.type))}function _d(s,i){var o=ue.p;try{return ue.p=s,i()}finally{ue.p=o}}var gt=Math.random().toString(36).slice(2),Bt="__reactFiber$"+gt,Pt="__reactProps$"+gt,Wn="__reactContainer$"+gt,nc="__reactEvents$"+gt,Fm="__reactListeners$"+gt,Fs="__reactHandles$"+gt,wd="__reactResources$"+gt,Ki="__reactMarker$"+gt;function qs(s){delete s[Bt],delete s[Pt],delete s[nc],delete s[Fm],delete s[Fs]}function ts(s){var i=s[Bt];if(i)return i;for(var o=s.parentNode;o;){if(i=o[Wn]||o[Bt]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(s=z_(s);s!==null;){if(o=s[Bt])return o;s=z_(s)}return i}s=o,o=s.parentNode}return null}function Nr(s){if(s=s[Bt]||s[Wn]){var i=s.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return s}return null}function Cr(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s.stateNode;throw Error(r(33))}function bn(s){var i=s[wd];return i||(i=s[wd]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function It(s){s[Ki]=!0}var rc=new Set,ao={};function hr(s,i){ns(s,i),ns(s+"Capture",i)}function ns(s,i){for(ao[s]=i,s=0;s<i.length;s++)rc.add(i[s])}var Ed=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Td={},$i={};function Ad(s){return Re.call($i,s)?!0:Re.call(Td,s)?!1:Ed.test(s)?$i[s]=!0:(Td[s]=!0,!1)}function Hs(s,i,o){if(Ad(i))if(o===null)s.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":s.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(i);return}}s.setAttribute(i,""+o)}}function Rr(s,i,o){if(o===null)s.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(i);return}s.setAttribute(i,""+o)}}function en(s,i,o,u){if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttributeNS(i,o,""+u)}}var Qi,Sd;function rs(s){if(Qi===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);Qi=i&&i[1]||"",Sd=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qi+s+Sd}var oo=!1;function lo(s,i){if(!s||oo)return"";oo=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(W){var Y=W}Reflect.construct(s,[],oe)}else{try{oe.call()}catch(W){Y=W}s.call(oe.prototype)}}else{try{throw Error()}catch(W){Y=W}(oe=s())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(W){if(W&&Y&&typeof W.stack=="string")return[W.stack,Y.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),E=y[0],T=y[1];if(E&&T){var M=E.split(`
`),Q=T.split(`
`);for(g=u=0;u<M.length&&!M[u].includes("DetermineComponentFrameRoot");)u++;for(;g<Q.length&&!Q[g].includes("DetermineComponentFrameRoot");)g++;if(u===M.length||g===Q.length)for(u=M.length-1,g=Q.length-1;1<=u&&0<=g&&M[u]!==Q[g];)g--;for(;1<=u&&0<=g;u--,g--)if(M[u]!==Q[g]){if(u!==1||g!==1)do if(u--,g--,0>g||M[u]!==Q[g]){var re=`
`+M[u].replace(" at new "," at ");return s.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",s.displayName)),re}while(1<=u&&0<=g);break}}}finally{oo=!1,Error.prepareStackTrace=o}return(o=s?s.displayName||s.name:"")?rs(o):""}function sc(s){switch(s.tag){case 26:case 27:case 5:return rs(s.type);case 16:return rs("Lazy");case 13:return rs("Suspense");case 19:return rs("SuspenseList");case 0:case 15:return lo(s.type,!1);case 11:return lo(s.type.render,!1);case 1:return lo(s.type,!0);case 31:return rs("Activity");default:return""}}function co(s){try{var i="";do i+=sc(s),s=s.return;while(s);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function _n(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ic(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function qm(s){var i=ic(s)?"checked":"value",o=Object.getOwnPropertyDescriptor(s.constructor.prototype,i),u=""+s[i];if(!s.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var g=o.get,y=o.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return g.call(this)},set:function(E){u=""+E,y.call(this,E)}}),Object.defineProperty(s,i,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function uo(s){s._valueTracker||(s._valueTracker=qm(s))}function ac(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return s&&(u=ic(s)?s.checked?"true":"false":s.value),s=u,s!==o?(i.setValue(s),!0):!1}function Yi(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Hm=/[\n"\\]/g;function Ot(s){return s.replace(Hm,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function On(s,i,o,u,g,y,E,T){s.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?s.type=E:s.removeAttribute("type"),i!=null?E==="number"?(i===0&&s.value===""||s.value!=i)&&(s.value=""+_n(i)):s.value!==""+_n(i)&&(s.value=""+_n(i)):E!=="submit"&&E!=="reset"||s.removeAttribute("value"),i!=null?Gs(s,E,_n(i)):o!=null?Gs(s,E,_n(o)):u!=null&&s.removeAttribute("value"),g==null&&y!=null&&(s.defaultChecked=!!y),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?s.name=""+_n(T):s.removeAttribute("name")}function Wi(s,i,o,u,g,y,E,T){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(s.type=y),i!=null||o!=null){if(!(y!=="submit"&&y!=="reset"||i!=null))return;o=o!=null?""+_n(o):"",i=i!=null?""+_n(i):o,T||i===s.value||(s.value=i),s.defaultValue=i}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=T?s.checked:!!u,s.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(s.name=E)}function Gs(s,i,o){i==="number"&&Yi(s.ownerDocument)===s||s.defaultValue===""+o||(s.defaultValue=""+o)}function ss(s,i,o,u){if(s=s.options,i){i={};for(var g=0;g<o.length;g++)i["$"+o[g]]=!0;for(o=0;o<s.length;o++)g=i.hasOwnProperty("$"+s[o].value),s[o].selected!==g&&(s[o].selected=g),g&&u&&(s[o].defaultSelected=!0)}else{for(o=""+_n(o),i=null,g=0;g<s.length;g++){if(s[g].value===o){s[g].selected=!0,u&&(s[g].defaultSelected=!0);return}i!==null||s[g].disabled||(i=s[g])}i!==null&&(i.selected=!0)}}function ot(s,i,o){if(i!=null&&(i=""+_n(i),i!==s.value&&(s.value=i),o==null)){s.defaultValue!==i&&(s.defaultValue=i);return}s.defaultValue=o!=null?""+_n(o):""}function Xi(s,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(r(92));if(Ke(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=_n(i),s.defaultValue=o,u=s.textContent,u===o&&u!==""&&u!==null&&(s.value=u)}function Xn(s,i){if(i){var o=s.firstChild;if(o&&o===s.lastChild&&o.nodeType===3){o.nodeValue=i;return}}s.textContent=i}var Ji=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kd(s,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?s.setProperty(i,""):i==="float"?s.cssFloat="":s[i]="":u?s.setProperty(i,o):typeof o!="number"||o===0||Ji.has(i)?i==="float"?s.cssFloat=o:s[i]=(""+o).trim():s[i]=o+"px"}function oc(s,i,o){if(i!=null&&typeof i!="object")throw Error(r(62));if(s=s.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var g in i)u=i[g],i.hasOwnProperty(g)&&o[g]!==u&&kd(s,g,u)}else for(var y in i)i.hasOwnProperty(y)&&kd(s,y,i[y])}function lc(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Km=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ho(s){return Km.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var is=null;function Jn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var as=null,os=null;function cc(s){var i=Nr(s);if(i&&(s=i.stateNode)){var o=s[Pt]||null;e:switch(s=i.stateNode,i.type){case"input":if(On(s,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=s;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Ot(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==s&&u.form===s.form){var g=u[Pt]||null;if(!g)throw Error(r(90));On(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===s.form&&ac(u)}break e;case"textarea":ot(s,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&ss(s,!!o.multiple,i,!1)}}}var jr=!1;function Id(s,i,o){if(jr)return s(i,o);jr=!0;try{var u=s(i);return u}finally{if(jr=!1,(as!==null||os!==null)&&(_h(),as&&(i=as,s=os,os=as=null,cc(i),s)))for(i=0;i<s.length;i++)cc(s[i])}}function Zi(s,i){var o=s.stateNode;if(o===null)return null;var u=o[Pt]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break e;default:s=!1}if(s)return null;if(o&&typeof o!="function")throw Error(r(231,i,typeof o));return o}var fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zn=!1;if(fr)try{var ea={};Object.defineProperty(ea,"passive",{get:function(){Zn=!0}}),window.addEventListener("test",ea,ea),window.removeEventListener("test",ea,ea)}catch{Zn=!1}var Dr=null,Ks=null,ls=null;function uc(){if(ls)return ls;var s,i=Ks,o=i.length,u,g="value"in Dr?Dr.value:Dr.textContent,y=g.length;for(s=0;s<o&&i[s]===g[s];s++);var E=o-s;for(u=1;u<=E&&i[o-u]===g[y-u];u++);return ls=g.slice(s,1<u?1-u:void 0)}function Pr(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function Or(){return!0}function dc(){return!1}function $t(s){function i(o,u,g,y,E){this._reactName=o,this._targetInst=g,this.type=u,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var T in s)s.hasOwnProperty(T)&&(o=s[T],this[T]=o?o(y):y[T]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Or:dc,this.isPropagationStopped=dc,this}return v(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Or)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Or)},persist:function(){},isPersistent:Or}),i}var et={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fo=$t(et),ta=v({},et,{view:0,detail:0}),Nd=$t(ta),mo,go,Mr,na=v({},ta,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ia,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Mr&&(Mr&&s.type==="mousemove"?(mo=s.screenX-Mr.screenX,go=s.screenY-Mr.screenY):go=mo=0,Mr=s),mo)},movementY:function(s){return"movementY"in s?s.movementY:go}}),er=$t(na),Cd=v({},na,{dataTransfer:0}),$m=$t(Cd),ra=v({},ta,{relatedTarget:0}),po=$t(ra),hc=v({},et,{animationName:0,elapsedTime:0,pseudoElement:0}),yo=$t(hc),Rd=v({},et,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),vo=$t(Rd),Qm=v({},et,{data:0}),fc=$t(Qm),sa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mc(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=Dd[s])?!!i[s]:!1}function ia(){return mc}var Pd=v({},ta,{key:function(s){if(s.key){var i=sa[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=Pr(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?jd[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ia,charCode:function(s){return s.type==="keypress"?Pr(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Pr(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),xo=$t(Pd),Od=v({},na,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gc=$t(Od),cs=v({},ta,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ia}),Md=$t(cs),Vd=v({},et,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ld=$t(Vd),Ud=v({},na,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),bo=$t(Ud),wn=v({},et,{newState:0,oldState:0}),Bd=$t(wn),zd=[9,13,27,32],Vr=fr&&"CompositionEvent"in window,f=null;fr&&"documentMode"in document&&(f=document.documentMode);var x=fr&&"TextEvent"in window&&!f,w=fr&&(!Vr||f&&8<f&&11>=f),S=" ",G=!1;function X(s,i){switch(s){case"keyup":return zd.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function de(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var $e=!1;function zt(s,i){switch(s){case"compositionend":return de(i);case"keypress":return i.which!==32?null:(G=!0,S);case"textInput":return s=i.data,s===S&&G?null:s;default:return null}}function Qe(s,i){if($e)return s==="compositionend"||!Vr&&X(s,i)?(s=uc(),ls=Ks=Dr=null,$e=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return w&&i.locale!=="ko"?null:i.data;default:return null}}var Qt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ft(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!Qt[s.type]:i==="textarea"}function us(s,i,o,u){as?os?os.push(u):os=[u]:as=u,i=kh(i,"onChange"),0<i.length&&(o=new fo("onChange","change",null,o,u),s.push({event:o,listeners:i}))}var tn=null,Lr=null;function pc(s){R_(s,0)}function Fd(s){var i=Cr(s);if(ac(i))return s}function Jv(s,i){if(s==="change")return i}var Zv=!1;if(fr){var Ym;if(fr){var Wm="oninput"in document;if(!Wm){var ex=document.createElement("div");ex.setAttribute("oninput","return;"),Wm=typeof ex.oninput=="function"}Ym=Wm}else Ym=!1;Zv=Ym&&(!document.documentMode||9<document.documentMode)}function tx(){tn&&(tn.detachEvent("onpropertychange",nx),Lr=tn=null)}function nx(s){if(s.propertyName==="value"&&Fd(Lr)){var i=[];us(i,Lr,s,Jn(s)),Id(pc,i)}}function Ok(s,i,o){s==="focusin"?(tx(),tn=i,Lr=o,tn.attachEvent("onpropertychange",nx)):s==="focusout"&&tx()}function Mk(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Fd(Lr)}function Vk(s,i){if(s==="click")return Fd(i)}function Lk(s,i){if(s==="input"||s==="change")return Fd(i)}function Uk(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var Mn=typeof Object.is=="function"?Object.is:Uk;function yc(s,i){if(Mn(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var o=Object.keys(s),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var g=o[u];if(!Re.call(i,g)||!Mn(s[g],i[g]))return!1}return!0}function rx(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function sx(s,i){var o=rx(s);s=0;for(var u;o;){if(o.nodeType===3){if(u=s+o.textContent.length,s<=i&&u>=i)return{node:o,offset:i-s};s=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=rx(o)}}function ix(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?ix(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function ax(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var i=Yi(s.document);i instanceof s.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)s=i.contentWindow;else break;i=Yi(s.document)}return i}function Xm(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}var Bk=fr&&"documentMode"in document&&11>=document.documentMode,_o=null,Jm=null,vc=null,Zm=!1;function ox(s,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Zm||_o==null||_o!==Yi(u)||(u=_o,"selectionStart"in u&&Xm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),vc&&yc(vc,u)||(vc=u,u=kh(Jm,"onSelect"),0<u.length&&(i=new fo("onSelect","select",null,i,o),s.push({event:i,listeners:u}),i.target=_o)))}function aa(s,i){var o={};return o[s.toLowerCase()]=i.toLowerCase(),o["Webkit"+s]="webkit"+i,o["Moz"+s]="moz"+i,o}var wo={animationend:aa("Animation","AnimationEnd"),animationiteration:aa("Animation","AnimationIteration"),animationstart:aa("Animation","AnimationStart"),transitionrun:aa("Transition","TransitionRun"),transitionstart:aa("Transition","TransitionStart"),transitioncancel:aa("Transition","TransitionCancel"),transitionend:aa("Transition","TransitionEnd")},eg={},lx={};fr&&(lx=document.createElement("div").style,"AnimationEvent"in window||(delete wo.animationend.animation,delete wo.animationiteration.animation,delete wo.animationstart.animation),"TransitionEvent"in window||delete wo.transitionend.transition);function oa(s){if(eg[s])return eg[s];if(!wo[s])return s;var i=wo[s],o;for(o in i)if(i.hasOwnProperty(o)&&o in lx)return eg[s]=i[o];return s}var cx=oa("animationend"),ux=oa("animationiteration"),dx=oa("animationstart"),zk=oa("transitionrun"),Fk=oa("transitionstart"),qk=oa("transitioncancel"),hx=oa("transitionend"),fx=new Map,tg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");tg.push("scrollEnd");function mr(s,i){fx.set(s,i),hr(i,[s])}var mx=new WeakMap;function tr(s,i){if(typeof s=="object"&&s!==null){var o=mx.get(s);return o!==void 0?o:(i={value:s,source:i,stack:co(i)},mx.set(s,i),i)}return{value:s,source:i,stack:co(i)}}var nr=[],Eo=0,ng=0;function qd(){for(var s=Eo,i=ng=Eo=0;i<s;){var o=nr[i];nr[i++]=null;var u=nr[i];nr[i++]=null;var g=nr[i];nr[i++]=null;var y=nr[i];if(nr[i++]=null,u!==null&&g!==null){var E=u.pending;E===null?g.next=g:(g.next=E.next,E.next=g),u.pending=g}y!==0&&gx(o,g,y)}}function Hd(s,i,o,u){nr[Eo++]=s,nr[Eo++]=i,nr[Eo++]=o,nr[Eo++]=u,ng|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function rg(s,i,o,u){return Hd(s,i,o,u),Gd(s)}function To(s,i){return Hd(s,null,null,i),Gd(s)}function gx(s,i,o){s.lanes|=o;var u=s.alternate;u!==null&&(u.lanes|=o);for(var g=!1,y=s.return;y!==null;)y.childLanes|=o,u=y.alternate,u!==null&&(u.childLanes|=o),y.tag===22&&(s=y.stateNode,s===null||s._visibility&1||(g=!0)),s=y,y=y.return;return s.tag===3?(y=s.stateNode,g&&i!==null&&(g=31-ln(o),s=y.hiddenUpdates,u=s[g],u===null?s[g]=[i]:u.push(i),i.lane=o|536870912),y):null}function Gd(s){if(50<qc)throw qc=0,c0=null,Error(r(185));for(var i=s.return;i!==null;)s=i,i=s.return;return s.tag===3?s.stateNode:null}var Ao={};function Hk(s,i,o,u){this.tag=s,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(s,i,o,u){return new Hk(s,i,o,u)}function sg(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ds(s,i){var o=s.alternate;return o===null?(o=Vn(s.tag,i,s.key,s.mode),o.elementType=s.elementType,o.type=s.type,o.stateNode=s.stateNode,o.alternate=s,s.alternate=o):(o.pendingProps=i,o.type=s.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=s.flags&65011712,o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,i=s.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=s.sibling,o.index=s.index,o.ref=s.ref,o.refCleanup=s.refCleanup,o}function px(s,i){s.flags&=65011714;var o=s.alternate;return o===null?(s.childLanes=0,s.lanes=i,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,i=o.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),s}function Kd(s,i,o,u,g,y){var E=0;if(u=s,typeof s=="function")sg(s)&&(E=1);else if(typeof s=="string")E=KI(s,o,ge.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case R:return s=Vn(31,o,i,g),s.elementType=R,s.lanes=y,s;case I:return la(o.children,g,y,i);case D:E=8,g|=24;break;case N:return s=Vn(12,o,i,g|2),s.elementType=N,s.lanes=y,s;case ee:return s=Vn(13,o,i,g),s.elementType=ee,s.lanes=y,s;case se:return s=Vn(19,o,i,g),s.elementType=se,s.lanes=y,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case V:case H:E=10;break e;case B:E=9;break e;case te:E=11;break e;case O:E=14;break e;case k:E=16,u=null;break e}E=29,o=Error(r(130,s===null?"null":typeof s,"")),u=null}return i=Vn(E,o,i,g),i.elementType=s,i.type=u,i.lanes=y,i}function la(s,i,o,u){return s=Vn(7,s,u,i),s.lanes=o,s}function ig(s,i,o){return s=Vn(6,s,null,i),s.lanes=o,s}function ag(s,i,o){return i=Vn(4,s.children!==null?s.children:[],s.key,i),i.lanes=o,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}var So=[],ko=0,$d=null,Qd=0,rr=[],sr=0,ca=null,hs=1,fs="";function ua(s,i){So[ko++]=Qd,So[ko++]=$d,$d=s,Qd=i}function yx(s,i,o){rr[sr++]=hs,rr[sr++]=fs,rr[sr++]=ca,ca=s;var u=hs;s=fs;var g=32-ln(u)-1;u&=~(1<<g),o+=1;var y=32-ln(i)+g;if(30<y){var E=g-g%5;y=(u&(1<<E)-1).toString(32),u>>=E,g-=E,hs=1<<32-ln(i)+g|o<<g|u,fs=y+s}else hs=1<<y|o<<g|u,fs=s}function og(s){s.return!==null&&(ua(s,1),yx(s,1,0))}function lg(s){for(;s===$d;)$d=So[--ko],So[ko]=null,Qd=So[--ko],So[ko]=null;for(;s===ca;)ca=rr[--sr],rr[sr]=null,fs=rr[--sr],rr[sr]=null,hs=rr[--sr],rr[sr]=null}var En=null,Et=null,Je=!1,da=null,Ur=!1,cg=Error(r(519));function ha(s){var i=Error(r(418,""));throw _c(tr(i,s)),cg}function vx(s){var i=s.stateNode,o=s.type,u=s.memoizedProps;switch(i[Bt]=s,i[Pt]=u,o){case"dialog":Fe("cancel",i),Fe("close",i);break;case"iframe":case"object":case"embed":Fe("load",i);break;case"video":case"audio":for(o=0;o<Gc.length;o++)Fe(Gc[o],i);break;case"source":Fe("error",i);break;case"img":case"image":case"link":Fe("error",i),Fe("load",i);break;case"details":Fe("toggle",i);break;case"input":Fe("invalid",i),Wi(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),uo(i);break;case"select":Fe("invalid",i);break;case"textarea":Fe("invalid",i),Xi(i,u.value,u.defaultValue,u.children),uo(i)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||O_(i.textContent,o)?(u.popover!=null&&(Fe("beforetoggle",i),Fe("toggle",i)),u.onScroll!=null&&Fe("scroll",i),u.onScrollEnd!=null&&Fe("scrollend",i),u.onClick!=null&&(i.onclick=Ih),i=!0):i=!1,i||ha(s)}function xx(s){for(En=s.return;En;)switch(En.tag){case 5:case 13:Ur=!1;return;case 27:case 3:Ur=!0;return;default:En=En.return}}function xc(s){if(s!==En)return!1;if(!Je)return xx(s),Je=!0,!1;var i=s.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=s.type,o=!(o!=="form"&&o!=="button")||A0(s.type,s.memoizedProps)),o=!o),o&&Et&&ha(s),xx(s),i===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,i=0;s;){if(s.nodeType===8)if(o=s.data,o==="/$"){if(i===0){Et=pr(s.nextSibling);break e}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++;s=s.nextSibling}Et=null}}else i===27?(i=Et,li(s.type)?(s=N0,N0=null,Et=s):Et=i):Et=En?pr(s.stateNode.nextSibling):null;return!0}function bc(){Et=En=null,Je=!1}function bx(){var s=da;return s!==null&&(Nn===null?Nn=s:Nn.push.apply(Nn,s),da=null),s}function _c(s){da===null?da=[s]:da.push(s)}var ug=le(null),fa=null,ms=null;function $s(s,i,o){ae(ug,i._currentValue),i._currentValue=o}function gs(s){s._currentValue=ug.current,Z(ug)}function dg(s,i,o){for(;s!==null;){var u=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),s===o)break;s=s.return}}function hg(s,i,o,u){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var y=g.dependencies;if(y!==null){var E=g.child;y=y.firstContext;e:for(;y!==null;){var T=y;y=g;for(var M=0;M<i.length;M++)if(T.context===i[M]){y.lanes|=o,T=y.alternate,T!==null&&(T.lanes|=o),dg(y.return,o,s),u||(E=null);break e}y=T.next}}else if(g.tag===18){if(E=g.return,E===null)throw Error(r(341));E.lanes|=o,y=E.alternate,y!==null&&(y.lanes|=o),dg(E,o,s),E=null}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===s){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}}function wc(s,i,o,u){s=null;for(var g=i,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var E=g.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var T=g.type;Mn(g.pendingProps.value,E.value)||(s!==null?s.push(T):s=[T])}}else if(g===je.current){if(E=g.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(Xc):s=[Xc])}g=g.return}s!==null&&hg(i,s,o,u),i.flags|=262144}function Yd(s){for(s=s.firstContext;s!==null;){if(!Mn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function ma(s){fa=s,ms=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function cn(s){return _x(fa,s)}function Wd(s,i){return fa===null&&ma(s),_x(s,i)}function _x(s,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},ms===null){if(s===null)throw Error(r(308));ms=i,s.dependencies={lanes:0,firstContext:i},s.flags|=524288}else ms=ms.next=i;return o}var Gk=typeof AbortController<"u"?AbortController:function(){var s=[],i=this.signal={aborted:!1,addEventListener:function(o,u){s.push(u)}};this.abort=function(){i.aborted=!0,s.forEach(function(o){return o()})}},Kk=n.unstable_scheduleCallback,$k=n.unstable_NormalPriority,qt={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fg(){return{controller:new Gk,data:new Map,refCount:0}}function Ec(s){s.refCount--,s.refCount===0&&Kk($k,function(){s.controller.abort()})}var Tc=null,mg=0,Io=0,No=null;function Qk(s,i){if(Tc===null){var o=Tc=[];mg=0,Io=p0(),No={status:"pending",value:void 0,then:function(u){o.push(u)}}}return mg++,i.then(wx,wx),i}function wx(){if(--mg===0&&Tc!==null){No!==null&&(No.status="fulfilled");var s=Tc;Tc=null,Io=0,No=null;for(var i=0;i<s.length;i++)(0,s[i])()}}function Yk(s,i){var o=[],u={status:"pending",value:null,reason:null,then:function(g){o.push(g)}};return s.then(function(){u.status="fulfilled",u.value=i;for(var g=0;g<o.length;g++)(0,o[g])(i)},function(g){for(u.status="rejected",u.reason=g,g=0;g<o.length;g++)(0,o[g])(void 0)}),u}var Ex=J.S;J.S=function(s,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&Qk(s,i),Ex!==null&&Ex(s,i)};var ga=le(null);function gg(){var s=ga.current;return s!==null?s:ft.pooledCache}function Xd(s,i){i===null?ae(ga,ga.current):ae(ga,i.pool)}function Tx(){var s=gg();return s===null?null:{parent:qt._currentValue,pool:s}}var Ac=Error(r(460)),Ax=Error(r(474)),Jd=Error(r(542)),pg={then:function(){}};function Sx(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Zd(){}function kx(s,i,o){switch(o=s[o],o===void 0?s.push(i):o!==i&&(i.then(Zd,Zd),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,Nx(s),s;default:if(typeof i.status=="string")i.then(Zd,Zd);else{if(s=ft,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=i,s.status="pending",s.then(function(u){if(i.status==="pending"){var g=i;g.status="fulfilled",g.value=u}},function(u){if(i.status==="pending"){var g=i;g.status="rejected",g.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,Nx(s),s}throw Sc=i,Ac}}var Sc=null;function Ix(){if(Sc===null)throw Error(r(459));var s=Sc;return Sc=null,s}function Nx(s){if(s===Ac||s===Jd)throw Error(r(483))}var Qs=!1;function yg(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vg(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Ys(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ws(s,i,o){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(rt&2)!==0){var g=u.pending;return g===null?i.next=i:(i.next=g.next,g.next=i),u.pending=i,i=Gd(s),gx(s,null,o),i}return Hd(s,u,i,o),Gd(s)}function kc(s,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=s.pendingLanes,o|=u,i.lanes=o,tc(s,o)}}function xg(s,i){var o=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var g=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};y===null?g=y=E:y=y.next=E,o=o.next}while(o!==null);y===null?g=y=i:y=y.next=i}else g=y=i;o={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},s.updateQueue=o;return}s=o.lastBaseUpdate,s===null?o.firstBaseUpdate=i:s.next=i,o.lastBaseUpdate=i}var bg=!1;function Ic(){if(bg){var s=No;if(s!==null)throw s}}function Nc(s,i,o,u){bg=!1;var g=s.updateQueue;Qs=!1;var y=g.firstBaseUpdate,E=g.lastBaseUpdate,T=g.shared.pending;if(T!==null){g.shared.pending=null;var M=T,Q=M.next;M.next=null,E===null?y=Q:E.next=Q,E=M;var re=s.alternate;re!==null&&(re=re.updateQueue,T=re.lastBaseUpdate,T!==E&&(T===null?re.firstBaseUpdate=Q:T.next=Q,re.lastBaseUpdate=M))}if(y!==null){var oe=g.baseState;E=0,re=Q=M=null,T=y;do{var Y=T.lane&-536870913,W=Y!==T.lane;if(W?(Ye&Y)===Y:(u&Y)===Y){Y!==0&&Y===Io&&(bg=!0),re!==null&&(re=re.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Ce=s,Se=T;Y=i;var ut=o;switch(Se.tag){case 1:if(Ce=Se.payload,typeof Ce=="function"){oe=Ce.call(ut,oe,Y);break e}oe=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=Se.payload,Y=typeof Ce=="function"?Ce.call(ut,oe,Y):Ce,Y==null)break e;oe=v({},oe,Y);break e;case 2:Qs=!0}}Y=T.callback,Y!==null&&(s.flags|=64,W&&(s.flags|=8192),W=g.callbacks,W===null?g.callbacks=[Y]:W.push(Y))}else W={lane:Y,tag:T.tag,payload:T.payload,callback:T.callback,next:null},re===null?(Q=re=W,M=oe):re=re.next=W,E|=Y;if(T=T.next,T===null){if(T=g.shared.pending,T===null)break;W=T,T=W.next,W.next=null,g.lastBaseUpdate=W,g.shared.pending=null}}while(!0);re===null&&(M=oe),g.baseState=M,g.firstBaseUpdate=Q,g.lastBaseUpdate=re,y===null&&(g.shared.lanes=0),si|=E,s.lanes=E,s.memoizedState=oe}}function Cx(s,i){if(typeof s!="function")throw Error(r(191,s));s.call(i)}function Rx(s,i){var o=s.callbacks;if(o!==null)for(s.callbacks=null,s=0;s<o.length;s++)Cx(o[s],i)}var Co=le(null),eh=le(0);function jx(s,i){s=ws,ae(eh,s),ae(Co,i),ws=s|i.baseLanes}function _g(){ae(eh,ws),ae(Co,Co.current)}function wg(){ws=eh.current,Z(Co),Z(eh)}var Xs=0,Me=null,lt=null,Mt=null,th=!1,Ro=!1,pa=!1,nh=0,Cc=0,jo=null,Wk=0;function Nt(){throw Error(r(321))}function Eg(s,i){if(i===null)return!1;for(var o=0;o<i.length&&o<s.length;o++)if(!Mn(s[o],i[o]))return!1;return!0}function Tg(s,i,o,u,g,y){return Xs=y,Me=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,J.H=s===null||s.memoizedState===null?gb:pb,pa=!1,y=o(u,g),pa=!1,Ro&&(y=Px(i,o,u,g)),Dx(s),y}function Dx(s){J.H=lh;var i=lt!==null&&lt.next!==null;if(Xs=0,Mt=lt=Me=null,th=!1,Cc=0,jo=null,i)throw Error(r(300));s===null||Yt||(s=s.dependencies,s!==null&&Yd(s)&&(Yt=!0))}function Px(s,i,o,u){Me=s;var g=0;do{if(Ro&&(jo=null),Cc=0,Ro=!1,25<=g)throw Error(r(301));if(g+=1,Mt=lt=null,s.updateQueue!=null){var y=s.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}J.H=rI,y=i(o,u)}while(Ro);return y}function Xk(){var s=J.H,i=s.useState()[0];return i=typeof i.then=="function"?Rc(i):i,s=s.useState()[0],(lt!==null?lt.memoizedState:null)!==s&&(Me.flags|=1024),i}function Ag(){var s=nh!==0;return nh=0,s}function Sg(s,i,o){i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~o}function kg(s){if(th){for(s=s.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}th=!1}Xs=0,Mt=lt=Me=null,Ro=!1,Cc=nh=0,jo=null}function kn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?Me.memoizedState=Mt=s:Mt=Mt.next=s,Mt}function Vt(){if(lt===null){var s=Me.alternate;s=s!==null?s.memoizedState:null}else s=lt.next;var i=Mt===null?Me.memoizedState:Mt.next;if(i!==null)Mt=i,lt=s;else{if(s===null)throw Me.alternate===null?Error(r(467)):Error(r(310));lt=s,s={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},Mt===null?Me.memoizedState=Mt=s:Mt=Mt.next=s}return Mt}function Ig(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Rc(s){var i=Cc;return Cc+=1,jo===null&&(jo=[]),s=kx(jo,s,i),i=Me,(Mt===null?i.memoizedState:Mt.next)===null&&(i=i.alternate,J.H=i===null||i.memoizedState===null?gb:pb),s}function rh(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Rc(s);if(s.$$typeof===H)return cn(s)}throw Error(r(438,String(s)))}function Ng(s){var i=null,o=Me.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=Me.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(g){return g.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=Ig(),Me.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(s),u=0;u<s;u++)o[u]=j;return i.index++,o}function ps(s,i){return typeof i=="function"?i(s):i}function sh(s){var i=Vt();return Cg(i,lt,s)}function Cg(s,i,o){var u=s.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var g=s.baseQueue,y=u.pending;if(y!==null){if(g!==null){var E=g.next;g.next=y.next,y.next=E}i.baseQueue=g=y,u.pending=null}if(y=s.baseState,g===null)s.memoizedState=y;else{i=g.next;var T=E=null,M=null,Q=i,re=!1;do{var oe=Q.lane&-536870913;if(oe!==Q.lane?(Ye&oe)===oe:(Xs&oe)===oe){var Y=Q.revertLane;if(Y===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),oe===Io&&(re=!0);else if((Xs&Y)===Y){Q=Q.next,Y===Io&&(re=!0);continue}else oe={lane:0,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},M===null?(T=M=oe,E=y):M=M.next=oe,Me.lanes|=Y,si|=Y;oe=Q.action,pa&&o(y,oe),y=Q.hasEagerState?Q.eagerState:o(y,oe)}else Y={lane:oe,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},M===null?(T=M=Y,E=y):M=M.next=Y,Me.lanes|=oe,si|=oe;Q=Q.next}while(Q!==null&&Q!==i);if(M===null?E=y:M.next=T,!Mn(y,s.memoizedState)&&(Yt=!0,re&&(o=No,o!==null)))throw o;s.memoizedState=y,s.baseState=E,s.baseQueue=M,u.lastRenderedState=y}return g===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function Rg(s){var i=Vt(),o=i.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=s;var u=o.dispatch,g=o.pending,y=i.memoizedState;if(g!==null){o.pending=null;var E=g=g.next;do y=s(y,E.action),E=E.next;while(E!==g);Mn(y,i.memoizedState)||(Yt=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),o.lastRenderedState=y}return[y,u]}function Ox(s,i,o){var u=Me,g=Vt(),y=Je;if(y){if(o===void 0)throw Error(r(407));o=o()}else o=i();var E=!Mn((lt||g).memoizedState,o);E&&(g.memoizedState=o,Yt=!0),g=g.queue;var T=Lx.bind(null,u,g,s);if(jc(2048,8,T,[s]),g.getSnapshot!==i||E||Mt!==null&&Mt.memoizedState.tag&1){if(u.flags|=2048,Do(9,ih(),Vx.bind(null,u,g,o,i),null),ft===null)throw Error(r(349));y||(Xs&124)!==0||Mx(u,i,o)}return o}function Mx(s,i,o){s.flags|=16384,s={getSnapshot:i,value:o},i=Me.updateQueue,i===null?(i=Ig(),Me.updateQueue=i,i.stores=[s]):(o=i.stores,o===null?i.stores=[s]:o.push(s))}function Vx(s,i,o,u){i.value=o,i.getSnapshot=u,Ux(i)&&Bx(s)}function Lx(s,i,o){return o(function(){Ux(i)&&Bx(s)})}function Ux(s){var i=s.getSnapshot;s=s.value;try{var o=i();return!Mn(s,o)}catch{return!0}}function Bx(s){var i=To(s,2);i!==null&&Fn(i,s,2)}function jg(s){var i=kn();if(typeof s=="function"){var o=s;if(s=o(),pa){Pn(!0);try{o()}finally{Pn(!1)}}}return i.memoizedState=i.baseState=s,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:s},i}function zx(s,i,o,u){return s.baseState=o,Cg(s,lt,typeof u=="function"?u:ps)}function Jk(s,i,o,u,g){if(oh(s))throw Error(r(485));if(s=i.action,s!==null){var y={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){y.listeners.push(E)}};J.T!==null?o(!0):y.isTransition=!1,u(y),o=i.pending,o===null?(y.next=i.pending=y,Fx(i,y)):(y.next=o.next,i.pending=o.next=y)}}function Fx(s,i){var o=i.action,u=i.payload,g=s.state;if(i.isTransition){var y=J.T,E={};J.T=E;try{var T=o(g,u),M=J.S;M!==null&&M(E,T),qx(s,i,T)}catch(Q){Dg(s,i,Q)}finally{J.T=y}}else try{y=o(g,u),qx(s,i,y)}catch(Q){Dg(s,i,Q)}}function qx(s,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Hx(s,i,u)},function(u){return Dg(s,i,u)}):Hx(s,i,o)}function Hx(s,i,o){i.status="fulfilled",i.value=o,Gx(i),s.state=o,i=s.pending,i!==null&&(o=i.next,o===i?s.pending=null:(o=o.next,i.next=o,Fx(s,o)))}function Dg(s,i,o){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,Gx(i),i=i.next;while(i!==u)}s.action=null}function Gx(s){s=s.listeners;for(var i=0;i<s.length;i++)(0,s[i])()}function Kx(s,i){return i}function $x(s,i){if(Je){var o=ft.formState;if(o!==null){e:{var u=Me;if(Je){if(Et){t:{for(var g=Et,y=Ur;g.nodeType!==8;){if(!y){g=null;break t}if(g=pr(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){Et=pr(g.nextSibling),u=g.data==="F!";break e}}ha(u)}u=!1}u&&(i=o[0])}}return o=kn(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kx,lastRenderedState:i},o.queue=u,o=hb.bind(null,Me,u),u.dispatch=o,u=jg(!1),y=Lg.bind(null,Me,!1,u.queue),u=kn(),g={state:i,dispatch:null,action:s,pending:null},u.queue=g,o=Jk.bind(null,Me,g,y,o),g.dispatch=o,u.memoizedState=s,[i,o,!1]}function Qx(s){var i=Vt();return Yx(i,lt,s)}function Yx(s,i,o){if(i=Cg(s,i,Kx)[0],s=sh(ps)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=Rc(i)}catch(E){throw E===Ac?Jd:E}else u=i;i=Vt();var g=i.queue,y=g.dispatch;return o!==i.memoizedState&&(Me.flags|=2048,Do(9,ih(),Zk.bind(null,g,o),null)),[u,y,s]}function Zk(s,i){s.action=i}function Wx(s){var i=Vt(),o=lt;if(o!==null)return Yx(i,o,s);Vt(),i=i.memoizedState,o=Vt();var u=o.queue.dispatch;return o.memoizedState=s,[i,u,!1]}function Do(s,i,o,u){return s={tag:s,create:o,deps:u,inst:i,next:null},i=Me.updateQueue,i===null&&(i=Ig(),Me.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=s.next=s:(u=o.next,o.next=s,s.next=u,i.lastEffect=s),s}function ih(){return{destroy:void 0,resource:void 0}}function Xx(){return Vt().memoizedState}function ah(s,i,o,u){var g=kn();u=u===void 0?null:u,Me.flags|=s,g.memoizedState=Do(1|i,ih(),o,u)}function jc(s,i,o,u){var g=Vt();u=u===void 0?null:u;var y=g.memoizedState.inst;lt!==null&&u!==null&&Eg(u,lt.memoizedState.deps)?g.memoizedState=Do(i,y,o,u):(Me.flags|=s,g.memoizedState=Do(1|i,y,o,u))}function Jx(s,i){ah(8390656,8,s,i)}function Zx(s,i){jc(2048,8,s,i)}function eb(s,i){return jc(4,2,s,i)}function tb(s,i){return jc(4,4,s,i)}function nb(s,i){if(typeof i=="function"){s=s();var o=i(s);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function rb(s,i,o){o=o!=null?o.concat([s]):null,jc(4,4,nb.bind(null,i,s),o)}function Pg(){}function sb(s,i){var o=Vt();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&Eg(i,u[1])?u[0]:(o.memoizedState=[s,i],s)}function ib(s,i){var o=Vt();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&Eg(i,u[1]))return u[0];if(u=s(),pa){Pn(!0);try{s()}finally{Pn(!1)}}return o.memoizedState=[u,i],u}function Og(s,i,o){return o===void 0||(Xs&1073741824)!==0?s.memoizedState=i:(s.memoizedState=o,s=l_(),Me.lanes|=s,si|=s,o)}function ab(s,i,o,u){return Mn(o,i)?o:Co.current!==null?(s=Og(s,o,u),Mn(s,i)||(Yt=!0),s):(Xs&42)===0?(Yt=!0,s.memoizedState=o):(s=l_(),Me.lanes|=s,si|=s,i)}function ob(s,i,o,u,g){var y=ue.p;ue.p=y!==0&&8>y?y:8;var E=J.T,T={};J.T=T,Lg(s,!1,i,o);try{var M=g(),Q=J.S;if(Q!==null&&Q(T,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var re=Yk(M,u);Dc(s,i,re,zn(s))}else Dc(s,i,u,zn(s))}catch(oe){Dc(s,i,{then:function(){},status:"rejected",reason:oe},zn())}finally{ue.p=y,J.T=E}}function eI(){}function Mg(s,i,o,u){if(s.tag!==5)throw Error(r(476));var g=lb(s).queue;ob(s,g,i,me,o===null?eI:function(){return cb(s),o(u)})}function lb(s){var i=s.memoizedState;if(i!==null)return i;i={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:me},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:o},next:null},s.memoizedState=i,s=s.alternate,s!==null&&(s.memoizedState=i),i}function cb(s){var i=lb(s).next.queue;Dc(s,i,{},zn())}function Vg(){return cn(Xc)}function ub(){return Vt().memoizedState}function db(){return Vt().memoizedState}function tI(s){for(var i=s.return;i!==null;){switch(i.tag){case 24:case 3:var o=zn();s=Ys(o);var u=Ws(i,s,o);u!==null&&(Fn(u,i,o),kc(u,i,o)),i={cache:fg()},s.payload=i;return}i=i.return}}function nI(s,i,o){var u=zn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},oh(s)?fb(i,o):(o=rg(s,i,o,u),o!==null&&(Fn(o,s,u),mb(o,i,u)))}function hb(s,i,o){var u=zn();Dc(s,i,o,u)}function Dc(s,i,o,u){var g={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(oh(s))fb(i,g);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var E=i.lastRenderedState,T=y(E,o);if(g.hasEagerState=!0,g.eagerState=T,Mn(T,E))return Hd(s,i,g,0),ft===null&&qd(),!1}catch{}finally{}if(o=rg(s,i,g,u),o!==null)return Fn(o,s,u),mb(o,i,u),!0}return!1}function Lg(s,i,o,u){if(u={lane:2,revertLane:p0(),action:u,hasEagerState:!1,eagerState:null,next:null},oh(s)){if(i)throw Error(r(479))}else i=rg(s,o,u,2),i!==null&&Fn(i,s,2)}function oh(s){var i=s.alternate;return s===Me||i!==null&&i===Me}function fb(s,i){Ro=th=!0;var o=s.pending;o===null?i.next=i:(i.next=o.next,o.next=i),s.pending=i}function mb(s,i,o){if((o&4194048)!==0){var u=i.lanes;u&=s.pendingLanes,o|=u,i.lanes=o,tc(s,o)}}var lh={readContext:cn,use:rh,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useLayoutEffect:Nt,useInsertionEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useSyncExternalStore:Nt,useId:Nt,useHostTransitionStatus:Nt,useFormState:Nt,useActionState:Nt,useOptimistic:Nt,useMemoCache:Nt,useCacheRefresh:Nt},gb={readContext:cn,use:rh,useCallback:function(s,i){return kn().memoizedState=[s,i===void 0?null:i],s},useContext:cn,useEffect:Jx,useImperativeHandle:function(s,i,o){o=o!=null?o.concat([s]):null,ah(4194308,4,nb.bind(null,i,s),o)},useLayoutEffect:function(s,i){return ah(4194308,4,s,i)},useInsertionEffect:function(s,i){ah(4,2,s,i)},useMemo:function(s,i){var o=kn();i=i===void 0?null:i;var u=s();if(pa){Pn(!0);try{s()}finally{Pn(!1)}}return o.memoizedState=[u,i],u},useReducer:function(s,i,o){var u=kn();if(o!==void 0){var g=o(i);if(pa){Pn(!0);try{o(i)}finally{Pn(!1)}}}else g=i;return u.memoizedState=u.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},u.queue=s,s=s.dispatch=nI.bind(null,Me,s),[u.memoizedState,s]},useRef:function(s){var i=kn();return s={current:s},i.memoizedState=s},useState:function(s){s=jg(s);var i=s.queue,o=hb.bind(null,Me,i);return i.dispatch=o,[s.memoizedState,o]},useDebugValue:Pg,useDeferredValue:function(s,i){var o=kn();return Og(o,s,i)},useTransition:function(){var s=jg(!1);return s=ob.bind(null,Me,s.queue,!0,!1),kn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,i,o){var u=Me,g=kn();if(Je){if(o===void 0)throw Error(r(407));o=o()}else{if(o=i(),ft===null)throw Error(r(349));(Ye&124)!==0||Mx(u,i,o)}g.memoizedState=o;var y={value:o,getSnapshot:i};return g.queue=y,Jx(Lx.bind(null,u,y,s),[s]),u.flags|=2048,Do(9,ih(),Vx.bind(null,u,y,o,i),null),o},useId:function(){var s=kn(),i=ft.identifierPrefix;if(Je){var o=fs,u=hs;o=(u&~(1<<32-ln(u)-1)).toString(32)+o,i=""+i+"R"+o,o=nh++,0<o&&(i+="H"+o.toString(32)),i+=""}else o=Wk++,i=""+i+"r"+o.toString(32)+"";return s.memoizedState=i},useHostTransitionStatus:Vg,useFormState:$x,useActionState:$x,useOptimistic:function(s){var i=kn();i.memoizedState=i.baseState=s;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Lg.bind(null,Me,!0,o),o.dispatch=i,[s,i]},useMemoCache:Ng,useCacheRefresh:function(){return kn().memoizedState=tI.bind(null,Me)}},pb={readContext:cn,use:rh,useCallback:sb,useContext:cn,useEffect:Zx,useImperativeHandle:rb,useInsertionEffect:eb,useLayoutEffect:tb,useMemo:ib,useReducer:sh,useRef:Xx,useState:function(){return sh(ps)},useDebugValue:Pg,useDeferredValue:function(s,i){var o=Vt();return ab(o,lt.memoizedState,s,i)},useTransition:function(){var s=sh(ps)[0],i=Vt().memoizedState;return[typeof s=="boolean"?s:Rc(s),i]},useSyncExternalStore:Ox,useId:ub,useHostTransitionStatus:Vg,useFormState:Qx,useActionState:Qx,useOptimistic:function(s,i){var o=Vt();return zx(o,lt,s,i)},useMemoCache:Ng,useCacheRefresh:db},rI={readContext:cn,use:rh,useCallback:sb,useContext:cn,useEffect:Zx,useImperativeHandle:rb,useInsertionEffect:eb,useLayoutEffect:tb,useMemo:ib,useReducer:Rg,useRef:Xx,useState:function(){return Rg(ps)},useDebugValue:Pg,useDeferredValue:function(s,i){var o=Vt();return lt===null?Og(o,s,i):ab(o,lt.memoizedState,s,i)},useTransition:function(){var s=Rg(ps)[0],i=Vt().memoizedState;return[typeof s=="boolean"?s:Rc(s),i]},useSyncExternalStore:Ox,useId:ub,useHostTransitionStatus:Vg,useFormState:Wx,useActionState:Wx,useOptimistic:function(s,i){var o=Vt();return lt!==null?zx(o,lt,s,i):(o.baseState=s,[s,o.queue.dispatch])},useMemoCache:Ng,useCacheRefresh:db},Po=null,Pc=0;function ch(s){var i=Pc;return Pc+=1,Po===null&&(Po=[]),kx(Po,s,i)}function Oc(s,i){i=i.props.ref,s.ref=i!==void 0?i:null}function uh(s,i){throw i.$$typeof===b?Error(r(525)):(s=Object.prototype.toString.call(i),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s)))}function yb(s){var i=s._init;return i(s._payload)}function vb(s){function i(q,z){if(s){var $=q.deletions;$===null?(q.deletions=[z],q.flags|=16):$.push(z)}}function o(q,z){if(!s)return null;for(;z!==null;)i(q,z),z=z.sibling;return null}function u(q){for(var z=new Map;q!==null;)q.key!==null?z.set(q.key,q):z.set(q.index,q),q=q.sibling;return z}function g(q,z){return q=ds(q,z),q.index=0,q.sibling=null,q}function y(q,z,$){return q.index=$,s?($=q.alternate,$!==null?($=$.index,$<z?(q.flags|=67108866,z):$):(q.flags|=67108866,z)):(q.flags|=1048576,z)}function E(q){return s&&q.alternate===null&&(q.flags|=67108866),q}function T(q,z,$,ie){return z===null||z.tag!==6?(z=ig($,q.mode,ie),z.return=q,z):(z=g(z,$),z.return=q,z)}function M(q,z,$,ie){var xe=$.type;return xe===I?re(q,z,$.props.children,ie,$.key):z!==null&&(z.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===k&&yb(xe)===z.type)?(z=g(z,$.props),Oc(z,$),z.return=q,z):(z=Kd($.type,$.key,$.props,null,q.mode,ie),Oc(z,$),z.return=q,z)}function Q(q,z,$,ie){return z===null||z.tag!==4||z.stateNode.containerInfo!==$.containerInfo||z.stateNode.implementation!==$.implementation?(z=ag($,q.mode,ie),z.return=q,z):(z=g(z,$.children||[]),z.return=q,z)}function re(q,z,$,ie,xe){return z===null||z.tag!==7?(z=la($,q.mode,ie,xe),z.return=q,z):(z=g(z,$),z.return=q,z)}function oe(q,z,$){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=ig(""+z,q.mode,$),z.return=q,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case _:return $=Kd(z.type,z.key,z.props,null,q.mode,$),Oc($,z),$.return=q,$;case A:return z=ag(z,q.mode,$),z.return=q,z;case k:var ie=z._init;return z=ie(z._payload),oe(q,z,$)}if(Ke(z)||F(z))return z=la(z,q.mode,$,null),z.return=q,z;if(typeof z.then=="function")return oe(q,ch(z),$);if(z.$$typeof===H)return oe(q,Wd(q,z),$);uh(q,z)}return null}function Y(q,z,$,ie){var xe=z!==null?z.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return xe!==null?null:T(q,z,""+$,ie);if(typeof $=="object"&&$!==null){switch($.$$typeof){case _:return $.key===xe?M(q,z,$,ie):null;case A:return $.key===xe?Q(q,z,$,ie):null;case k:return xe=$._init,$=xe($._payload),Y(q,z,$,ie)}if(Ke($)||F($))return xe!==null?null:re(q,z,$,ie,null);if(typeof $.then=="function")return Y(q,z,ch($),ie);if($.$$typeof===H)return Y(q,z,Wd(q,$),ie);uh(q,$)}return null}function W(q,z,$,ie,xe){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return q=q.get($)||null,T(z,q,""+ie,xe);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case _:return q=q.get(ie.key===null?$:ie.key)||null,M(z,q,ie,xe);case A:return q=q.get(ie.key===null?$:ie.key)||null,Q(z,q,ie,xe);case k:var Ue=ie._init;return ie=Ue(ie._payload),W(q,z,$,ie,xe)}if(Ke(ie)||F(ie))return q=q.get($)||null,re(z,q,ie,xe,null);if(typeof ie.then=="function")return W(q,z,$,ch(ie),xe);if(ie.$$typeof===H)return W(q,z,$,Wd(z,ie),xe);uh(z,ie)}return null}function Ce(q,z,$,ie){for(var xe=null,Ue=null,we=z,ke=z=0,Xt=null;we!==null&&ke<$.length;ke++){we.index>ke?(Xt=we,we=null):Xt=we.sibling;var Xe=Y(q,we,$[ke],ie);if(Xe===null){we===null&&(we=Xt);break}s&&we&&Xe.alternate===null&&i(q,we),z=y(Xe,z,ke),Ue===null?xe=Xe:Ue.sibling=Xe,Ue=Xe,we=Xt}if(ke===$.length)return o(q,we),Je&&ua(q,ke),xe;if(we===null){for(;ke<$.length;ke++)we=oe(q,$[ke],ie),we!==null&&(z=y(we,z,ke),Ue===null?xe=we:Ue.sibling=we,Ue=we);return Je&&ua(q,ke),xe}for(we=u(we);ke<$.length;ke++)Xt=W(we,q,ke,$[ke],ie),Xt!==null&&(s&&Xt.alternate!==null&&we.delete(Xt.key===null?ke:Xt.key),z=y(Xt,z,ke),Ue===null?xe=Xt:Ue.sibling=Xt,Ue=Xt);return s&&we.forEach(function(fi){return i(q,fi)}),Je&&ua(q,ke),xe}function Se(q,z,$,ie){if($==null)throw Error(r(151));for(var xe=null,Ue=null,we=z,ke=z=0,Xt=null,Xe=$.next();we!==null&&!Xe.done;ke++,Xe=$.next()){we.index>ke?(Xt=we,we=null):Xt=we.sibling;var fi=Y(q,we,Xe.value,ie);if(fi===null){we===null&&(we=Xt);break}s&&we&&fi.alternate===null&&i(q,we),z=y(fi,z,ke),Ue===null?xe=fi:Ue.sibling=fi,Ue=fi,we=Xt}if(Xe.done)return o(q,we),Je&&ua(q,ke),xe;if(we===null){for(;!Xe.done;ke++,Xe=$.next())Xe=oe(q,Xe.value,ie),Xe!==null&&(z=y(Xe,z,ke),Ue===null?xe=Xe:Ue.sibling=Xe,Ue=Xe);return Je&&ua(q,ke),xe}for(we=u(we);!Xe.done;ke++,Xe=$.next())Xe=W(we,q,ke,Xe.value,ie),Xe!==null&&(s&&Xe.alternate!==null&&we.delete(Xe.key===null?ke:Xe.key),z=y(Xe,z,ke),Ue===null?xe=Xe:Ue.sibling=Xe,Ue=Xe);return s&&we.forEach(function(sN){return i(q,sN)}),Je&&ua(q,ke),xe}function ut(q,z,$,ie){if(typeof $=="object"&&$!==null&&$.type===I&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case _:e:{for(var xe=$.key;z!==null;){if(z.key===xe){if(xe=$.type,xe===I){if(z.tag===7){o(q,z.sibling),ie=g(z,$.props.children),ie.return=q,q=ie;break e}}else if(z.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===k&&yb(xe)===z.type){o(q,z.sibling),ie=g(z,$.props),Oc(ie,$),ie.return=q,q=ie;break e}o(q,z);break}else i(q,z);z=z.sibling}$.type===I?(ie=la($.props.children,q.mode,ie,$.key),ie.return=q,q=ie):(ie=Kd($.type,$.key,$.props,null,q.mode,ie),Oc(ie,$),ie.return=q,q=ie)}return E(q);case A:e:{for(xe=$.key;z!==null;){if(z.key===xe)if(z.tag===4&&z.stateNode.containerInfo===$.containerInfo&&z.stateNode.implementation===$.implementation){o(q,z.sibling),ie=g(z,$.children||[]),ie.return=q,q=ie;break e}else{o(q,z);break}else i(q,z);z=z.sibling}ie=ag($,q.mode,ie),ie.return=q,q=ie}return E(q);case k:return xe=$._init,$=xe($._payload),ut(q,z,$,ie)}if(Ke($))return Ce(q,z,$,ie);if(F($)){if(xe=F($),typeof xe!="function")throw Error(r(150));return $=xe.call($),Se(q,z,$,ie)}if(typeof $.then=="function")return ut(q,z,ch($),ie);if($.$$typeof===H)return ut(q,z,Wd(q,$),ie);uh(q,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,z!==null&&z.tag===6?(o(q,z.sibling),ie=g(z,$),ie.return=q,q=ie):(o(q,z),ie=ig($,q.mode,ie),ie.return=q,q=ie),E(q)):o(q,z)}return function(q,z,$,ie){try{Pc=0;var xe=ut(q,z,$,ie);return Po=null,xe}catch(we){if(we===Ac||we===Jd)throw we;var Ue=Vn(29,we,null,q.mode);return Ue.lanes=ie,Ue.return=q,Ue}finally{}}}var Oo=vb(!0),xb=vb(!1),ir=le(null),Br=null;function Js(s){var i=s.alternate;ae(Ht,Ht.current&1),ae(ir,s),Br===null&&(i===null||Co.current!==null||i.memoizedState!==null)&&(Br=s)}function bb(s){if(s.tag===22){if(ae(Ht,Ht.current),ae(ir,s),Br===null){var i=s.alternate;i!==null&&i.memoizedState!==null&&(Br=s)}}else Zs()}function Zs(){ae(Ht,Ht.current),ae(ir,ir.current)}function ys(s){Z(ir),Br===s&&(Br=null),Z(Ht)}var Ht=le(0);function dh(s){for(var i=s;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||I0(o)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Ug(s,i,o,u){i=s.memoizedState,o=o(u,i),o=o==null?i:v({},i,o),s.memoizedState=o,s.lanes===0&&(s.updateQueue.baseState=o)}var Bg={enqueueSetState:function(s,i,o){s=s._reactInternals;var u=zn(),g=Ys(u);g.payload=i,o!=null&&(g.callback=o),i=Ws(s,g,u),i!==null&&(Fn(i,s,u),kc(i,s,u))},enqueueReplaceState:function(s,i,o){s=s._reactInternals;var u=zn(),g=Ys(u);g.tag=1,g.payload=i,o!=null&&(g.callback=o),i=Ws(s,g,u),i!==null&&(Fn(i,s,u),kc(i,s,u))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var o=zn(),u=Ys(o);u.tag=2,i!=null&&(u.callback=i),i=Ws(s,u,o),i!==null&&(Fn(i,s,o),kc(i,s,o))}};function _b(s,i,o,u,g,y,E){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,y,E):i.prototype&&i.prototype.isPureReactComponent?!yc(o,u)||!yc(g,y):!0}function wb(s,i,o,u){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==s&&Bg.enqueueReplaceState(i,i.state,null)}function ya(s,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(s=s.defaultProps){o===i&&(o=v({},o));for(var g in s)o[g]===void 0&&(o[g]=s[g])}return o}var hh=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function Eb(s){hh(s)}function Tb(s){console.error(s)}function Ab(s){hh(s)}function fh(s,i){try{var o=s.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function Sb(s,i,o){try{var u=s.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function zg(s,i,o){return o=Ys(o),o.tag=3,o.payload={element:null},o.callback=function(){fh(s,i)},o}function kb(s){return s=Ys(s),s.tag=3,s}function Ib(s,i,o,u){var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var y=u.value;s.payload=function(){return g(y)},s.callback=function(){Sb(i,o,u)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(s.callback=function(){Sb(i,o,u),typeof g!="function"&&(ii===null?ii=new Set([this]):ii.add(this));var T=u.stack;this.componentDidCatch(u.value,{componentStack:T!==null?T:""})})}function sI(s,i,o,u,g){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&wc(i,o,g,!0),o=ir.current,o!==null){switch(o.tag){case 13:return Br===null?d0():o.alternate===null&&Tt===0&&(Tt=3),o.flags&=-257,o.flags|=65536,o.lanes=g,u===pg?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),f0(s,u,g)),!1;case 22:return o.flags|=65536,u===pg?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),f0(s,u,g)),!1}throw Error(r(435,o.tag))}return f0(s,u,g),d0(),!1}if(Je)return i=ir.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=g,u!==cg&&(s=Error(r(422),{cause:u}),_c(tr(s,o)))):(u!==cg&&(i=Error(r(423),{cause:u}),_c(tr(i,o))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,u=tr(u,o),g=zg(s.stateNode,u,g),xg(s,g),Tt!==4&&(Tt=2)),!1;var y=Error(r(520),{cause:u});if(y=tr(y,o),Fc===null?Fc=[y]:Fc.push(y),Tt!==4&&(Tt=2),i===null)return!0;u=tr(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,s=g&-g,o.lanes|=s,s=zg(o.stateNode,u,s),xg(o,s),!1;case 1:if(i=o.type,y=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ii===null||!ii.has(y))))return o.flags|=65536,g&=-g,o.lanes|=g,g=kb(g),Ib(g,s,o,u),xg(o,g),!1}o=o.return}while(o!==null);return!1}var Nb=Error(r(461)),Yt=!1;function nn(s,i,o,u){i.child=s===null?xb(i,null,o,u):Oo(i,s.child,o,u)}function Cb(s,i,o,u,g){o=o.render;var y=i.ref;if("ref"in u){var E={};for(var T in u)T!=="ref"&&(E[T]=u[T])}else E=u;return ma(i),u=Tg(s,i,o,E,y,g),T=Ag(),s!==null&&!Yt?(Sg(s,i,g),vs(s,i,g)):(Je&&T&&og(i),i.flags|=1,nn(s,i,u,g),i.child)}function Rb(s,i,o,u,g){if(s===null){var y=o.type;return typeof y=="function"&&!sg(y)&&y.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=y,jb(s,i,y,u,g)):(s=Kd(o.type,null,u,i,i.mode,g),s.ref=i.ref,s.return=i,i.child=s)}if(y=s.child,!Yg(s,g)){var E=y.memoizedProps;if(o=o.compare,o=o!==null?o:yc,o(E,u)&&s.ref===i.ref)return vs(s,i,g)}return i.flags|=1,s=ds(y,u),s.ref=i.ref,s.return=i,i.child=s}function jb(s,i,o,u,g){if(s!==null){var y=s.memoizedProps;if(yc(y,u)&&s.ref===i.ref)if(Yt=!1,i.pendingProps=u=y,Yg(s,g))(s.flags&131072)!==0&&(Yt=!0);else return i.lanes=s.lanes,vs(s,i,g)}return Fg(s,i,o,u,g)}function Db(s,i,o){var u=i.pendingProps,g=u.children,y=s!==null?s.memoizedState:null;if(u.mode==="hidden"){if((i.flags&128)!==0){if(u=y!==null?y.baseLanes|o:o,s!==null){for(g=i.child=s.child,y=0;g!==null;)y=y|g.lanes|g.childLanes,g=g.sibling;i.childLanes=y&~u}else i.childLanes=0,i.child=null;return Pb(s,i,u,o)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},s!==null&&Xd(i,y!==null?y.cachePool:null),y!==null?jx(i,y):_g(),bb(i);else return i.lanes=i.childLanes=536870912,Pb(s,i,y!==null?y.baseLanes|o:o,o)}else y!==null?(Xd(i,y.cachePool),jx(i,y),Zs(),i.memoizedState=null):(s!==null&&Xd(i,null),_g(),Zs());return nn(s,i,g,o),i.child}function Pb(s,i,o,u){var g=gg();return g=g===null?null:{parent:qt._currentValue,pool:g},i.memoizedState={baseLanes:o,cachePool:g},s!==null&&Xd(i,null),_g(),bb(i),s!==null&&wc(s,i,u,!0),null}function mh(s,i){var o=i.ref;if(o===null)s!==null&&s.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(s===null||s.ref!==o)&&(i.flags|=4194816)}}function Fg(s,i,o,u,g){return ma(i),o=Tg(s,i,o,u,void 0,g),u=Ag(),s!==null&&!Yt?(Sg(s,i,g),vs(s,i,g)):(Je&&u&&og(i),i.flags|=1,nn(s,i,o,g),i.child)}function Ob(s,i,o,u,g,y){return ma(i),i.updateQueue=null,o=Px(i,u,o,g),Dx(s),u=Ag(),s!==null&&!Yt?(Sg(s,i,y),vs(s,i,y)):(Je&&u&&og(i),i.flags|=1,nn(s,i,o,y),i.child)}function Mb(s,i,o,u,g){if(ma(i),i.stateNode===null){var y=Ao,E=o.contextType;typeof E=="object"&&E!==null&&(y=cn(E)),y=new o(u,y),i.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Bg,i.stateNode=y,y._reactInternals=i,y=i.stateNode,y.props=u,y.state=i.memoizedState,y.refs={},yg(i),E=o.contextType,y.context=typeof E=="object"&&E!==null?cn(E):Ao,y.state=i.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(Ug(i,o,E,u),y.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(E=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),E!==y.state&&Bg.enqueueReplaceState(y,y.state,null),Nc(i,u,y,g),Ic(),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(s===null){y=i.stateNode;var T=i.memoizedProps,M=ya(o,T);y.props=M;var Q=y.context,re=o.contextType;E=Ao,typeof re=="object"&&re!==null&&(E=cn(re));var oe=o.getDerivedStateFromProps;re=typeof oe=="function"||typeof y.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,re||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T||Q!==E)&&wb(i,y,u,E),Qs=!1;var Y=i.memoizedState;y.state=Y,Nc(i,u,y,g),Ic(),Q=i.memoizedState,T||Y!==Q||Qs?(typeof oe=="function"&&(Ug(i,o,oe,u),Q=i.memoizedState),(M=Qs||_b(i,o,M,u,Y,Q,E))?(re||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(i.flags|=4194308)):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=Q),y.props=u,y.state=Q,y.context=E,u=M):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{y=i.stateNode,vg(s,i),E=i.memoizedProps,re=ya(o,E),y.props=re,oe=i.pendingProps,Y=y.context,Q=o.contextType,M=Ao,typeof Q=="object"&&Q!==null&&(M=cn(Q)),T=o.getDerivedStateFromProps,(Q=typeof T=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E!==oe||Y!==M)&&wb(i,y,u,M),Qs=!1,Y=i.memoizedState,y.state=Y,Nc(i,u,y,g),Ic();var W=i.memoizedState;E!==oe||Y!==W||Qs||s!==null&&s.dependencies!==null&&Yd(s.dependencies)?(typeof T=="function"&&(Ug(i,o,T,u),W=i.memoizedState),(re=Qs||_b(i,o,re,u,Y,W,M)||s!==null&&s.dependencies!==null&&Yd(s.dependencies))?(Q||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,W,M),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,W,M)),typeof y.componentDidUpdate=="function"&&(i.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof y.componentDidUpdate!="function"||E===s.memoizedProps&&Y===s.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&Y===s.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=W),y.props=u,y.state=W,y.context=M,u=re):(typeof y.componentDidUpdate!="function"||E===s.memoizedProps&&Y===s.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&Y===s.memoizedState||(i.flags|=1024),u=!1)}return y=u,mh(s,i),u=(i.flags&128)!==0,y||u?(y=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:y.render(),i.flags|=1,s!==null&&u?(i.child=Oo(i,s.child,null,g),i.child=Oo(i,null,o,g)):nn(s,i,o,g),i.memoizedState=y.state,s=i.child):s=vs(s,i,g),s}function Vb(s,i,o,u){return bc(),i.flags|=256,nn(s,i,o,u),i.child}var qg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Hg(s){return{baseLanes:s,cachePool:Tx()}}function Gg(s,i,o){return s=s!==null?s.childLanes&~o:0,i&&(s|=ar),s}function Lb(s,i,o){var u=i.pendingProps,g=!1,y=(i.flags&128)!==0,E;if((E=y)||(E=s!==null&&s.memoizedState===null?!1:(Ht.current&2)!==0),E&&(g=!0,i.flags&=-129),E=(i.flags&32)!==0,i.flags&=-33,s===null){if(Je){if(g?Js(i):Zs(),Je){var T=Et,M;if(M=T){e:{for(M=T,T=Ur;M.nodeType!==8;){if(!T){T=null;break e}if(M=pr(M.nextSibling),M===null){T=null;break e}}T=M}T!==null?(i.memoizedState={dehydrated:T,treeContext:ca!==null?{id:hs,overflow:fs}:null,retryLane:536870912,hydrationErrors:null},M=Vn(18,null,null,0),M.stateNode=T,M.return=i,i.child=M,En=i,Et=null,M=!0):M=!1}M||ha(i)}if(T=i.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return I0(T)?i.lanes=32:i.lanes=536870912,null;ys(i)}return T=u.children,u=u.fallback,g?(Zs(),g=i.mode,T=gh({mode:"hidden",children:T},g),u=la(u,g,o,null),T.return=i,u.return=i,T.sibling=u,i.child=T,g=i.child,g.memoizedState=Hg(o),g.childLanes=Gg(s,E,o),i.memoizedState=qg,u):(Js(i),Kg(i,T))}if(M=s.memoizedState,M!==null&&(T=M.dehydrated,T!==null)){if(y)i.flags&256?(Js(i),i.flags&=-257,i=$g(s,i,o)):i.memoizedState!==null?(Zs(),i.child=s.child,i.flags|=128,i=null):(Zs(),g=u.fallback,T=i.mode,u=gh({mode:"visible",children:u.children},T),g=la(g,T,o,null),g.flags|=2,u.return=i,g.return=i,u.sibling=g,i.child=u,Oo(i,s.child,null,o),u=i.child,u.memoizedState=Hg(o),u.childLanes=Gg(s,E,o),i.memoizedState=qg,i=g);else if(Js(i),I0(T)){if(E=T.nextSibling&&T.nextSibling.dataset,E)var Q=E.dgst;E=Q,u=Error(r(419)),u.stack="",u.digest=E,_c({value:u,source:null,stack:null}),i=$g(s,i,o)}else if(Yt||wc(s,i,o,!1),E=(o&s.childLanes)!==0,Yt||E){if(E=ft,E!==null&&(u=o&-o,u=(u&42)!==0?1:Bs(u),u=(u&(E.suspendedLanes|o))!==0?0:u,u!==0&&u!==M.retryLane))throw M.retryLane=u,To(s,u),Fn(E,s,u),Nb;T.data==="$?"||d0(),i=$g(s,i,o)}else T.data==="$?"?(i.flags|=192,i.child=s.child,i=null):(s=M.treeContext,Et=pr(T.nextSibling),En=i,Je=!0,da=null,Ur=!1,s!==null&&(rr[sr++]=hs,rr[sr++]=fs,rr[sr++]=ca,hs=s.id,fs=s.overflow,ca=i),i=Kg(i,u.children),i.flags|=4096);return i}return g?(Zs(),g=u.fallback,T=i.mode,M=s.child,Q=M.sibling,u=ds(M,{mode:"hidden",children:u.children}),u.subtreeFlags=M.subtreeFlags&65011712,Q!==null?g=ds(Q,g):(g=la(g,T,o,null),g.flags|=2),g.return=i,u.return=i,u.sibling=g,i.child=u,u=g,g=i.child,T=s.child.memoizedState,T===null?T=Hg(o):(M=T.cachePool,M!==null?(Q=qt._currentValue,M=M.parent!==Q?{parent:Q,pool:Q}:M):M=Tx(),T={baseLanes:T.baseLanes|o,cachePool:M}),g.memoizedState=T,g.childLanes=Gg(s,E,o),i.memoizedState=qg,u):(Js(i),o=s.child,s=o.sibling,o=ds(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,s!==null&&(E=i.deletions,E===null?(i.deletions=[s],i.flags|=16):E.push(s)),i.child=o,i.memoizedState=null,o)}function Kg(s,i){return i=gh({mode:"visible",children:i},s.mode),i.return=s,s.child=i}function gh(s,i){return s=Vn(22,s,null,i),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function $g(s,i,o){return Oo(i,s.child,null,o),s=Kg(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function Ub(s,i,o){s.lanes|=i;var u=s.alternate;u!==null&&(u.lanes|=i),dg(s.return,i,o)}function Qg(s,i,o,u,g){var y=s.memoizedState;y===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:g}:(y.isBackwards=i,y.rendering=null,y.renderingStartTime=0,y.last=u,y.tail=o,y.tailMode=g)}function Bb(s,i,o){var u=i.pendingProps,g=u.revealOrder,y=u.tail;if(nn(s,i,u.children,o),u=Ht.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Ub(s,o,i);else if(s.tag===19)Ub(s,o,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}u&=1}switch(ae(Ht,u),g){case"forwards":for(o=i.child,g=null;o!==null;)s=o.alternate,s!==null&&dh(s)===null&&(g=o),o=o.sibling;o=g,o===null?(g=i.child,i.child=null):(g=o.sibling,o.sibling=null),Qg(i,!1,g,o,y);break;case"backwards":for(o=null,g=i.child,i.child=null;g!==null;){if(s=g.alternate,s!==null&&dh(s)===null){i.child=g;break}s=g.sibling,g.sibling=o,o=g,g=s}Qg(i,!0,o,null,y);break;case"together":Qg(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function vs(s,i,o){if(s!==null&&(i.dependencies=s.dependencies),si|=i.lanes,(o&i.childLanes)===0)if(s!==null){if(wc(s,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(s!==null&&i.child!==s.child)throw Error(r(153));if(i.child!==null){for(s=i.child,o=ds(s,s.pendingProps),i.child=o,o.return=i;s.sibling!==null;)s=s.sibling,o=o.sibling=ds(s,s.pendingProps),o.return=i;o.sibling=null}return i.child}function Yg(s,i){return(s.lanes&i)!==0?!0:(s=s.dependencies,!!(s!==null&&Yd(s)))}function iI(s,i,o){switch(i.tag){case 3:Be(i,i.stateNode.containerInfo),$s(i,qt,s.memoizedState.cache),bc();break;case 27:case 5:ve(i);break;case 4:Be(i,i.stateNode.containerInfo);break;case 10:$s(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Js(i),i.flags|=128,null):(o&i.child.childLanes)!==0?Lb(s,i,o):(Js(i),s=vs(s,i,o),s!==null?s.sibling:null);Js(i);break;case 19:var g=(s.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(wc(s,i,o,!1),u=(o&i.childLanes)!==0),g){if(u)return Bb(s,i,o);i.flags|=128}if(g=i.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ae(Ht,Ht.current),u)break;return null;case 22:case 23:return i.lanes=0,Db(s,i,o);case 24:$s(i,qt,s.memoizedState.cache)}return vs(s,i,o)}function zb(s,i,o){if(s!==null)if(s.memoizedProps!==i.pendingProps)Yt=!0;else{if(!Yg(s,o)&&(i.flags&128)===0)return Yt=!1,iI(s,i,o);Yt=(s.flags&131072)!==0}else Yt=!1,Je&&(i.flags&1048576)!==0&&yx(i,Qd,i.index);switch(i.lanes=0,i.tag){case 16:e:{s=i.pendingProps;var u=i.elementType,g=u._init;if(u=g(u._payload),i.type=u,typeof u=="function")sg(u)?(s=ya(u,s),i.tag=1,i=Mb(null,i,u,s,o)):(i.tag=0,i=Fg(null,i,u,s,o));else{if(u!=null){if(g=u.$$typeof,g===te){i.tag=11,i=Cb(null,i,u,s,o);break e}else if(g===O){i.tag=14,i=Rb(null,i,u,s,o);break e}}throw i=Ze(u)||u,Error(r(306,i,""))}}return i;case 0:return Fg(s,i,i.type,i.pendingProps,o);case 1:return u=i.type,g=ya(u,i.pendingProps),Mb(s,i,u,g,o);case 3:e:{if(Be(i,i.stateNode.containerInfo),s===null)throw Error(r(387));u=i.pendingProps;var y=i.memoizedState;g=y.element,vg(s,i),Nc(i,u,null,o);var E=i.memoizedState;if(u=E.cache,$s(i,qt,u),u!==y.cache&&hg(i,[qt],o,!0),Ic(),u=E.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:E.cache},i.updateQueue.baseState=y,i.memoizedState=y,i.flags&256){i=Vb(s,i,u,o);break e}else if(u!==g){g=tr(Error(r(424)),i),_c(g),i=Vb(s,i,u,o);break e}else{switch(s=i.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Et=pr(s.firstChild),En=i,Je=!0,da=null,Ur=!0,o=xb(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(bc(),u===g){i=vs(s,i,o);break e}nn(s,i,u,o)}i=i.child}return i;case 26:return mh(s,i),s===null?(o=G_(i.type,null,i.pendingProps,null))?i.memoizedState=o:Je||(o=i.type,s=i.pendingProps,u=Nh(ye.current).createElement(o),u[Bt]=i,u[Pt]=s,sn(u,o,s),It(u),i.stateNode=u):i.memoizedState=G_(i.type,s.memoizedProps,i.pendingProps,s.memoizedState),null;case 27:return ve(i),s===null&&Je&&(u=i.stateNode=F_(i.type,i.pendingProps,ye.current),En=i,Ur=!0,g=Et,li(i.type)?(N0=g,Et=pr(u.firstChild)):Et=g),nn(s,i,i.pendingProps.children,o),mh(s,i),s===null&&(i.flags|=4194304),i.child;case 5:return s===null&&Je&&((g=u=Et)&&(u=DI(u,i.type,i.pendingProps,Ur),u!==null?(i.stateNode=u,En=i,Et=pr(u.firstChild),Ur=!1,g=!0):g=!1),g||ha(i)),ve(i),g=i.type,y=i.pendingProps,E=s!==null?s.memoizedProps:null,u=y.children,A0(g,y)?u=null:E!==null&&A0(g,E)&&(i.flags|=32),i.memoizedState!==null&&(g=Tg(s,i,Xk,null,null,o),Xc._currentValue=g),mh(s,i),nn(s,i,u,o),i.child;case 6:return s===null&&Je&&((s=o=Et)&&(o=PI(o,i.pendingProps,Ur),o!==null?(i.stateNode=o,En=i,Et=null,s=!0):s=!1),s||ha(i)),null;case 13:return Lb(s,i,o);case 4:return Be(i,i.stateNode.containerInfo),u=i.pendingProps,s===null?i.child=Oo(i,null,u,o):nn(s,i,u,o),i.child;case 11:return Cb(s,i,i.type,i.pendingProps,o);case 7:return nn(s,i,i.pendingProps,o),i.child;case 8:return nn(s,i,i.pendingProps.children,o),i.child;case 12:return nn(s,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,$s(i,i.type,u.value),nn(s,i,u.children,o),i.child;case 9:return g=i.type._context,u=i.pendingProps.children,ma(i),g=cn(g),u=u(g),i.flags|=1,nn(s,i,u,o),i.child;case 14:return Rb(s,i,i.type,i.pendingProps,o);case 15:return jb(s,i,i.type,i.pendingProps,o);case 19:return Bb(s,i,o);case 31:return u=i.pendingProps,o=i.mode,u={mode:u.mode,children:u.children},s===null?(o=gh(u,o),o.ref=i.ref,i.child=o,o.return=i,i=o):(o=ds(s.child,u),o.ref=i.ref,i.child=o,o.return=i,i=o),i;case 22:return Db(s,i,o);case 24:return ma(i),u=cn(qt),s===null?(g=gg(),g===null&&(g=ft,y=fg(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=o),g=y),i.memoizedState={parent:u,cache:g},yg(i),$s(i,qt,g)):((s.lanes&o)!==0&&(vg(s,i),Nc(i,null,null,o),Ic()),g=s.memoizedState,y=i.memoizedState,g.parent!==u?(g={parent:u,cache:u},i.memoizedState=g,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=g),$s(i,qt,u)):(u=y.cache,$s(i,qt,u),u!==g.cache&&hg(i,[qt],o,!0))),nn(s,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function xs(s){s.flags|=4}function Fb(s,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!W_(i)){if(i=ir.current,i!==null&&((Ye&4194048)===Ye?Br!==null:(Ye&62914560)!==Ye&&(Ye&536870912)===0||i!==Br))throw Sc=pg,Ax;s.flags|=8192}}function ph(s,i){i!==null&&(s.flags|=4),s.flags&16384&&(i=s.tag!==22?Zl():536870912,s.lanes|=i,Uo|=i)}function Mc(s,i){if(!Je)switch(s.tailMode){case"hidden":i=s.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?s.tail=null:o.sibling=null;break;case"collapsed":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function xt(s){var i=s.alternate!==null&&s.alternate.child===s.child,o=0,u=0;if(i)for(var g=s.child;g!==null;)o|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)o|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=u,s.childLanes=o,i}function aI(s,i,o){var u=i.pendingProps;switch(lg(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(i),null;case 1:return xt(i),null;case 3:return o=i.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),gs(qt),Dt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(s===null||s.child===null)&&(xc(i)?xs(i):s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,bx())),xt(i),null;case 26:return o=i.memoizedState,s===null?(xs(i),o!==null?(xt(i),Fb(i,o)):(xt(i),i.flags&=-16777217)):o?o!==s.memoizedState?(xs(i),xt(i),Fb(i,o)):(xt(i),i.flags&=-16777217):(s.memoizedProps!==u&&xs(i),xt(i),i.flags&=-16777217),null;case 27:Te(i),o=ye.current;var g=i.type;if(s!==null&&i.stateNode!=null)s.memoizedProps!==u&&xs(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return xt(i),null}s=ge.current,xc(i)?vx(i):(s=F_(g,u,o),i.stateNode=s,xs(i))}return xt(i),null;case 5:if(Te(i),o=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==u&&xs(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return xt(i),null}if(s=ge.current,xc(i))vx(i);else{switch(g=Nh(ye.current),s){case 1:s=g.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:s=g.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":s=g.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":s=g.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":s=g.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof u.is=="string"?g.createElement("select",{is:u.is}):g.createElement("select"),u.multiple?s.multiple=!0:u.size&&(s.size=u.size);break;default:s=typeof u.is=="string"?g.createElement(o,{is:u.is}):g.createElement(o)}}s[Bt]=i,s[Pt]=u;e:for(g=i.child;g!==null;){if(g.tag===5||g.tag===6)s.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===i)break e;for(;g.sibling===null;){if(g.return===null||g.return===i)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}i.stateNode=s;e:switch(sn(s,o,u),o){case"button":case"input":case"select":case"textarea":s=!!u.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&xs(i)}}return xt(i),i.flags&=-16777217,null;case 6:if(s&&i.stateNode!=null)s.memoizedProps!==u&&xs(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(r(166));if(s=ye.current,xc(i)){if(s=i.stateNode,o=i.memoizedProps,u=null,g=En,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}s[Bt]=i,s=!!(s.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||O_(s.nodeValue,o)),s||ha(i)}else s=Nh(s).createTextNode(u),s[Bt]=i,i.stateNode=s}return xt(i),null;case 13:if(u=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=xc(i),u!==null&&u.dehydrated!==null){if(s===null){if(!g)throw Error(r(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[Bt]=i}else bc(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;xt(i),g=!1}else g=bx(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),g=!0;if(!g)return i.flags&256?(ys(i),i):(ys(i),null)}if(ys(i),(i.flags&128)!==0)return i.lanes=o,i;if(o=u!==null,s=s!==null&&s.memoizedState!==null,o){u=i.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool);var y=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==g&&(u.flags|=2048)}return o!==s&&o&&(i.child.flags|=8192),ph(i,i.updateQueue),xt(i),null;case 4:return Dt(),s===null&&b0(i.stateNode.containerInfo),xt(i),null;case 10:return gs(i.type),xt(i),null;case 19:if(Z(Ht),g=i.memoizedState,g===null)return xt(i),null;if(u=(i.flags&128)!==0,y=g.rendering,y===null)if(u)Mc(g,!1);else{if(Tt!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(y=dh(s),y!==null){for(i.flags|=128,Mc(g,!1),s=y.updateQueue,i.updateQueue=s,ph(i,s),i.subtreeFlags=0,s=o,o=i.child;o!==null;)px(o,s),o=o.sibling;return ae(Ht,Ht.current&1|2),i.child}s=s.sibling}g.tail!==null&&Yn()>xh&&(i.flags|=128,u=!0,Mc(g,!1),i.lanes=4194304)}else{if(!u)if(s=dh(y),s!==null){if(i.flags|=128,u=!0,s=s.updateQueue,i.updateQueue=s,ph(i,s),Mc(g,!0),g.tail===null&&g.tailMode==="hidden"&&!y.alternate&&!Je)return xt(i),null}else 2*Yn()-g.renderingStartTime>xh&&o!==536870912&&(i.flags|=128,u=!0,Mc(g,!1),i.lanes=4194304);g.isBackwards?(y.sibling=i.child,i.child=y):(s=g.last,s!==null?s.sibling=y:i.child=y,g.last=y)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=Yn(),i.sibling=null,s=Ht.current,ae(Ht,u?s&1|2:s&1),i):(xt(i),null);case 22:case 23:return ys(i),wg(),u=i.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(xt(i),i.subtreeFlags&6&&(i.flags|=8192)):xt(i),o=i.updateQueue,o!==null&&ph(i,o.retryQueue),o=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),s!==null&&Z(ga),null;case 24:return o=null,s!==null&&(o=s.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),gs(qt),xt(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function oI(s,i){switch(lg(i),i.tag){case 1:return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return gs(qt),Dt(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 26:case 27:case 5:return Te(i),null;case 13:if(ys(i),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(r(340));bc()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return Z(Ht),null;case 4:return Dt(),null;case 10:return gs(i.type),null;case 22:case 23:return ys(i),wg(),s!==null&&Z(ga),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 24:return gs(qt),null;case 25:return null;default:return null}}function qb(s,i){switch(lg(i),i.tag){case 3:gs(qt),Dt();break;case 26:case 27:case 5:Te(i);break;case 4:Dt();break;case 13:ys(i);break;case 19:Z(Ht);break;case 10:gs(i.type);break;case 22:case 23:ys(i),wg(),s!==null&&Z(ga);break;case 24:gs(qt)}}function Vc(s,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var g=u.next;o=g;do{if((o.tag&s)===s){u=void 0;var y=o.create,E=o.inst;u=y(),E.destroy=u}o=o.next}while(o!==g)}}catch(T){ht(i,i.return,T)}}function ei(s,i,o){try{var u=i.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var y=g.next;u=y;do{if((u.tag&s)===s){var E=u.inst,T=E.destroy;if(T!==void 0){E.destroy=void 0,g=i;var M=o,Q=T;try{Q()}catch(re){ht(g,M,re)}}}u=u.next}while(u!==y)}}catch(re){ht(i,i.return,re)}}function Hb(s){var i=s.updateQueue;if(i!==null){var o=s.stateNode;try{Rx(i,o)}catch(u){ht(s,s.return,u)}}}function Gb(s,i,o){o.props=ya(s.type,s.memoizedProps),o.state=s.memoizedState;try{o.componentWillUnmount()}catch(u){ht(s,i,u)}}function Lc(s,i){try{var o=s.ref;if(o!==null){switch(s.tag){case 26:case 27:case 5:var u=s.stateNode;break;case 30:u=s.stateNode;break;default:u=s.stateNode}typeof o=="function"?s.refCleanup=o(u):o.current=u}}catch(g){ht(s,i,g)}}function zr(s,i){var o=s.ref,u=s.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(g){ht(s,i,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(g){ht(s,i,g)}else o.current=null}function Kb(s){var i=s.type,o=s.memoizedProps,u=s.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(g){ht(s,s.return,g)}}function Wg(s,i,o){try{var u=s.stateNode;II(u,s.type,o,i),u[Pt]=i}catch(g){ht(s,s.return,g)}}function $b(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&li(s.type)||s.tag===4}function Xg(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||$b(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&li(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Jg(s,i,o){var u=s.tag;if(u===5||u===6)s=s.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(s,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(s),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Ih));else if(u!==4&&(u===27&&li(s.type)&&(o=s.stateNode,i=null),s=s.child,s!==null))for(Jg(s,i,o),s=s.sibling;s!==null;)Jg(s,i,o),s=s.sibling}function yh(s,i,o){var u=s.tag;if(u===5||u===6)s=s.stateNode,i?o.insertBefore(s,i):o.appendChild(s);else if(u!==4&&(u===27&&li(s.type)&&(o=s.stateNode),s=s.child,s!==null))for(yh(s,i,o),s=s.sibling;s!==null;)yh(s,i,o),s=s.sibling}function Qb(s){var i=s.stateNode,o=s.memoizedProps;try{for(var u=s.type,g=i.attributes;g.length;)i.removeAttributeNode(g[0]);sn(i,u,o),i[Bt]=s,i[Pt]=o}catch(y){ht(s,s.return,y)}}var bs=!1,Ct=!1,Zg=!1,Yb=typeof WeakSet=="function"?WeakSet:Set,Wt=null;function lI(s,i){if(s=s.containerInfo,E0=Oh,s=ax(s),Xm(s)){if("selectionStart"in s)var o={start:s.selectionStart,end:s.selectionEnd};else e:{o=(o=s.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var g=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var E=0,T=-1,M=-1,Q=0,re=0,oe=s,Y=null;t:for(;;){for(var W;oe!==o||g!==0&&oe.nodeType!==3||(T=E+g),oe!==y||u!==0&&oe.nodeType!==3||(M=E+u),oe.nodeType===3&&(E+=oe.nodeValue.length),(W=oe.firstChild)!==null;)Y=oe,oe=W;for(;;){if(oe===s)break t;if(Y===o&&++Q===g&&(T=E),Y===y&&++re===u&&(M=E),(W=oe.nextSibling)!==null)break;oe=Y,Y=oe.parentNode}oe=W}o=T===-1||M===-1?null:{start:T,end:M}}else o=null}o=o||{start:0,end:0}}else o=null;for(T0={focusedElem:s,selectionRange:o},Oh=!1,Wt=i;Wt!==null;)if(i=Wt,s=i.child,(i.subtreeFlags&1024)!==0&&s!==null)s.return=i,Wt=s;else for(;Wt!==null;){switch(i=Wt,y=i.alternate,s=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&y!==null){s=void 0,o=i,g=y.memoizedProps,y=y.memoizedState,u=o.stateNode;try{var Ce=ya(o.type,g,o.elementType===o.type);s=u.getSnapshotBeforeUpdate(Ce,y),u.__reactInternalSnapshotBeforeUpdate=s}catch(Se){ht(o,o.return,Se)}}break;case 3:if((s&1024)!==0){if(s=i.stateNode.containerInfo,o=s.nodeType,o===9)k0(s);else if(o===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":k0(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=i.sibling,s!==null){s.return=i.return,Wt=s;break}Wt=i.return}}function Wb(s,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:ti(s,o),u&4&&Vc(5,o);break;case 1:if(ti(s,o),u&4)if(s=o.stateNode,i===null)try{s.componentDidMount()}catch(E){ht(o,o.return,E)}else{var g=ya(o.type,i.memoizedProps);i=i.memoizedState;try{s.componentDidUpdate(g,i,s.__reactInternalSnapshotBeforeUpdate)}catch(E){ht(o,o.return,E)}}u&64&&Hb(o),u&512&&Lc(o,o.return);break;case 3:if(ti(s,o),u&64&&(s=o.updateQueue,s!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{Rx(s,i)}catch(E){ht(o,o.return,E)}}break;case 27:i===null&&u&4&&Qb(o);case 26:case 5:ti(s,o),i===null&&u&4&&Kb(o),u&512&&Lc(o,o.return);break;case 12:ti(s,o);break;case 13:ti(s,o),u&4&&Zb(s,o),u&64&&(s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(o=yI.bind(null,o),OI(s,o))));break;case 22:if(u=o.memoizedState!==null||bs,!u){i=i!==null&&i.memoizedState!==null||Ct,g=bs;var y=Ct;bs=u,(Ct=i)&&!y?ni(s,o,(o.subtreeFlags&8772)!==0):ti(s,o),bs=g,Ct=y}break;case 30:break;default:ti(s,o)}}function Xb(s){var i=s.alternate;i!==null&&(s.alternate=null,Xb(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&qs(i)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var pt=null,In=!1;function _s(s,i,o){for(o=o.child;o!==null;)Jb(s,i,o),o=o.sibling}function Jb(s,i,o){if(nt&&typeof nt.onCommitFiberUnmount=="function")try{nt.onCommitFiberUnmount(wt,o)}catch{}switch(o.tag){case 26:Ct||zr(o,i),_s(s,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Ct||zr(o,i);var u=pt,g=In;li(o.type)&&(pt=o.stateNode,In=!1),_s(s,i,o),$c(o.stateNode),pt=u,In=g;break;case 5:Ct||zr(o,i);case 6:if(u=pt,g=In,pt=null,_s(s,i,o),pt=u,In=g,pt!==null)if(In)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(o.stateNode)}catch(y){ht(o,i,y)}else try{pt.removeChild(o.stateNode)}catch(y){ht(o,i,y)}break;case 18:pt!==null&&(In?(s=pt,B_(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,o.stateNode),tu(s)):B_(pt,o.stateNode));break;case 4:u=pt,g=In,pt=o.stateNode.containerInfo,In=!0,_s(s,i,o),pt=u,In=g;break;case 0:case 11:case 14:case 15:Ct||ei(2,o,i),Ct||ei(4,o,i),_s(s,i,o);break;case 1:Ct||(zr(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Gb(o,i,u)),_s(s,i,o);break;case 21:_s(s,i,o);break;case 22:Ct=(u=Ct)||o.memoizedState!==null,_s(s,i,o),Ct=u;break;default:_s(s,i,o)}}function Zb(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{tu(s)}catch(o){ht(i,i.return,o)}}function cI(s){switch(s.tag){case 13:case 19:var i=s.stateNode;return i===null&&(i=s.stateNode=new Yb),i;case 22:return s=s.stateNode,i=s._retryCache,i===null&&(i=s._retryCache=new Yb),i;default:throw Error(r(435,s.tag))}}function e0(s,i){var o=cI(s);i.forEach(function(u){var g=vI.bind(null,s,u);o.has(u)||(o.add(u),u.then(g,g))})}function Ln(s,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var g=o[u],y=s,E=i,T=E;e:for(;T!==null;){switch(T.tag){case 27:if(li(T.type)){pt=T.stateNode,In=!1;break e}break;case 5:pt=T.stateNode,In=!1;break e;case 3:case 4:pt=T.stateNode.containerInfo,In=!0;break e}T=T.return}if(pt===null)throw Error(r(160));Jb(y,E,g),pt=null,In=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)e_(i,s),i=i.sibling}var gr=null;function e_(s,i){var o=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Ln(i,s),Un(s),u&4&&(ei(3,s,s.return),Vc(3,s),ei(5,s,s.return));break;case 1:Ln(i,s),Un(s),u&512&&(Ct||o===null||zr(o,o.return)),u&64&&bs&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(o=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var g=gr;if(Ln(i,s),Un(s),u&512&&(Ct||o===null||zr(o,o.return)),u&4){var y=o!==null?o.memoizedState:null;if(u=s.memoizedState,o===null)if(u===null)if(s.stateNode===null){e:{u=s.type,o=s.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":y=g.getElementsByTagName("title")[0],(!y||y[Ki]||y[Bt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(u),g.head.insertBefore(y,g.querySelector("head > title"))),sn(y,u,o),y[Bt]=s,It(y),u=y;break e;case"link":var E=Q_("link","href",g).get(u+(o.href||""));if(E){for(var T=0;T<E.length;T++)if(y=E[T],y.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&y.getAttribute("rel")===(o.rel==null?null:o.rel)&&y.getAttribute("title")===(o.title==null?null:o.title)&&y.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(T,1);break t}}y=g.createElement(u),sn(y,u,o),g.head.appendChild(y);break;case"meta":if(E=Q_("meta","content",g).get(u+(o.content||""))){for(T=0;T<E.length;T++)if(y=E[T],y.getAttribute("content")===(o.content==null?null:""+o.content)&&y.getAttribute("name")===(o.name==null?null:o.name)&&y.getAttribute("property")===(o.property==null?null:o.property)&&y.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&y.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(T,1);break t}}y=g.createElement(u),sn(y,u,o),g.head.appendChild(y);break;default:throw Error(r(468,u))}y[Bt]=s,It(y),u=y}s.stateNode=u}else Y_(g,s.type,s.stateNode);else s.stateNode=$_(g,u,s.memoizedProps);else y!==u?(y===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):y.count--,u===null?Y_(g,s.type,s.stateNode):$_(g,u,s.memoizedProps)):u===null&&s.stateNode!==null&&Wg(s,s.memoizedProps,o.memoizedProps)}break;case 27:Ln(i,s),Un(s),u&512&&(Ct||o===null||zr(o,o.return)),o!==null&&u&4&&Wg(s,s.memoizedProps,o.memoizedProps);break;case 5:if(Ln(i,s),Un(s),u&512&&(Ct||o===null||zr(o,o.return)),s.flags&32){g=s.stateNode;try{Xn(g,"")}catch(W){ht(s,s.return,W)}}u&4&&s.stateNode!=null&&(g=s.memoizedProps,Wg(s,g,o!==null?o.memoizedProps:g)),u&1024&&(Zg=!0);break;case 6:if(Ln(i,s),Un(s),u&4){if(s.stateNode===null)throw Error(r(162));u=s.memoizedProps,o=s.stateNode;try{o.nodeValue=u}catch(W){ht(s,s.return,W)}}break;case 3:if(jh=null,g=gr,gr=Ch(i.containerInfo),Ln(i,s),gr=g,Un(s),u&4&&o!==null&&o.memoizedState.isDehydrated)try{tu(i.containerInfo)}catch(W){ht(s,s.return,W)}Zg&&(Zg=!1,t_(s));break;case 4:u=gr,gr=Ch(s.stateNode.containerInfo),Ln(i,s),Un(s),gr=u;break;case 12:Ln(i,s),Un(s);break;case 13:Ln(i,s),Un(s),s.child.flags&8192&&s.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(a0=Yn()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,e0(s,u)));break;case 22:g=s.memoizedState!==null;var M=o!==null&&o.memoizedState!==null,Q=bs,re=Ct;if(bs=Q||g,Ct=re||M,Ln(i,s),Ct=re,bs=Q,Un(s),u&8192)e:for(i=s.stateNode,i._visibility=g?i._visibility&-2:i._visibility|1,g&&(o===null||M||bs||Ct||va(s)),o=null,i=s;;){if(i.tag===5||i.tag===26){if(o===null){M=o=i;try{if(y=M.stateNode,g)E=y.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{T=M.stateNode;var oe=M.memoizedProps.style,Y=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;T.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(W){ht(M,M.return,W)}}}else if(i.tag===6){if(o===null){M=i;try{M.stateNode.nodeValue=g?"":M.memoizedProps}catch(W){ht(M,M.return,W)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===s)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=s.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,e0(s,o))));break;case 19:Ln(i,s),Un(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,e0(s,u)));break;case 30:break;case 21:break;default:Ln(i,s),Un(s)}}function Un(s){var i=s.flags;if(i&2){try{for(var o,u=s.return;u!==null;){if($b(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var g=o.stateNode,y=Xg(s);yh(s,y,g);break;case 5:var E=o.stateNode;o.flags&32&&(Xn(E,""),o.flags&=-33);var T=Xg(s);yh(s,T,E);break;case 3:case 4:var M=o.stateNode.containerInfo,Q=Xg(s);Jg(s,Q,M);break;default:throw Error(r(161))}}catch(re){ht(s,s.return,re)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function t_(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var i=s;t_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),s=s.sibling}}function ti(s,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Wb(s,i.alternate,i),i=i.sibling}function va(s){for(s=s.child;s!==null;){var i=s;switch(i.tag){case 0:case 11:case 14:case 15:ei(4,i,i.return),va(i);break;case 1:zr(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&Gb(i,i.return,o),va(i);break;case 27:$c(i.stateNode);case 26:case 5:zr(i,i.return),va(i);break;case 22:i.memoizedState===null&&va(i);break;case 30:va(i);break;default:va(i)}s=s.sibling}}function ni(s,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,g=s,y=i,E=y.flags;switch(y.tag){case 0:case 11:case 15:ni(g,y,o),Vc(4,y);break;case 1:if(ni(g,y,o),u=y,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(Q){ht(u,u.return,Q)}if(u=y,g=u.updateQueue,g!==null){var T=u.stateNode;try{var M=g.shared.hiddenCallbacks;if(M!==null)for(g.shared.hiddenCallbacks=null,g=0;g<M.length;g++)Cx(M[g],T)}catch(Q){ht(u,u.return,Q)}}o&&E&64&&Hb(y),Lc(y,y.return);break;case 27:Qb(y);case 26:case 5:ni(g,y,o),o&&u===null&&E&4&&Kb(y),Lc(y,y.return);break;case 12:ni(g,y,o);break;case 13:ni(g,y,o),o&&E&4&&Zb(g,y);break;case 22:y.memoizedState===null&&ni(g,y,o),Lc(y,y.return);break;case 30:break;default:ni(g,y,o)}i=i.sibling}}function t0(s,i){var o=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==o&&(s!=null&&s.refCount++,o!=null&&Ec(o))}function n0(s,i){s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&Ec(s))}function Fr(s,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)n_(s,i,o,u),i=i.sibling}function n_(s,i,o,u){var g=i.flags;switch(i.tag){case 0:case 11:case 15:Fr(s,i,o,u),g&2048&&Vc(9,i);break;case 1:Fr(s,i,o,u);break;case 3:Fr(s,i,o,u),g&2048&&(s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&Ec(s)));break;case 12:if(g&2048){Fr(s,i,o,u),s=i.stateNode;try{var y=i.memoizedProps,E=y.id,T=y.onPostCommit;typeof T=="function"&&T(E,i.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(M){ht(i,i.return,M)}}else Fr(s,i,o,u);break;case 13:Fr(s,i,o,u);break;case 23:break;case 22:y=i.stateNode,E=i.alternate,i.memoizedState!==null?y._visibility&2?Fr(s,i,o,u):Uc(s,i):y._visibility&2?Fr(s,i,o,u):(y._visibility|=2,Mo(s,i,o,u,(i.subtreeFlags&10256)!==0)),g&2048&&t0(E,i);break;case 24:Fr(s,i,o,u),g&2048&&n0(i.alternate,i);break;default:Fr(s,i,o,u)}}function Mo(s,i,o,u,g){for(g=g&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var y=s,E=i,T=o,M=u,Q=E.flags;switch(E.tag){case 0:case 11:case 15:Mo(y,E,T,M,g),Vc(8,E);break;case 23:break;case 22:var re=E.stateNode;E.memoizedState!==null?re._visibility&2?Mo(y,E,T,M,g):Uc(y,E):(re._visibility|=2,Mo(y,E,T,M,g)),g&&Q&2048&&t0(E.alternate,E);break;case 24:Mo(y,E,T,M,g),g&&Q&2048&&n0(E.alternate,E);break;default:Mo(y,E,T,M,g)}i=i.sibling}}function Uc(s,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=s,u=i,g=u.flags;switch(u.tag){case 22:Uc(o,u),g&2048&&t0(u.alternate,u);break;case 24:Uc(o,u),g&2048&&n0(u.alternate,u);break;default:Uc(o,u)}i=i.sibling}}var Bc=8192;function Vo(s){if(s.subtreeFlags&Bc)for(s=s.child;s!==null;)r_(s),s=s.sibling}function r_(s){switch(s.tag){case 26:Vo(s),s.flags&Bc&&s.memoizedState!==null&&QI(gr,s.memoizedState,s.memoizedProps);break;case 5:Vo(s);break;case 3:case 4:var i=gr;gr=Ch(s.stateNode.containerInfo),Vo(s),gr=i;break;case 22:s.memoizedState===null&&(i=s.alternate,i!==null&&i.memoizedState!==null?(i=Bc,Bc=16777216,Vo(s),Bc=i):Vo(s));break;default:Vo(s)}}function s_(s){var i=s.alternate;if(i!==null&&(s=i.child,s!==null)){i.child=null;do i=s.sibling,s.sibling=null,s=i;while(s!==null)}}function zc(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Wt=u,a_(u,s)}s_(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)i_(s),s=s.sibling}function i_(s){switch(s.tag){case 0:case 11:case 15:zc(s),s.flags&2048&&ei(9,s,s.return);break;case 3:zc(s);break;case 12:zc(s);break;case 22:var i=s.stateNode;s.memoizedState!==null&&i._visibility&2&&(s.return===null||s.return.tag!==13)?(i._visibility&=-3,vh(s)):zc(s);break;default:zc(s)}}function vh(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Wt=u,a_(u,s)}s_(s)}for(s=s.child;s!==null;){switch(i=s,i.tag){case 0:case 11:case 15:ei(8,i,i.return),vh(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,vh(i));break;default:vh(i)}s=s.sibling}}function a_(s,i){for(;Wt!==null;){var o=Wt;switch(o.tag){case 0:case 11:case 15:ei(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Ec(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Wt=u;else e:for(o=s;Wt!==null;){u=Wt;var g=u.sibling,y=u.return;if(Xb(u),u===o){Wt=null;break e}if(g!==null){g.return=y,Wt=g;break e}Wt=y}}}var uI={getCacheForType:function(s){var i=cn(qt),o=i.data.get(s);return o===void 0&&(o=s(),i.data.set(s,o)),o}},dI=typeof WeakMap=="function"?WeakMap:Map,rt=0,ft=null,ze=null,Ye=0,st=0,Bn=null,ri=!1,Lo=!1,r0=!1,ws=0,Tt=0,si=0,xa=0,s0=0,ar=0,Uo=0,Fc=null,Nn=null,i0=!1,a0=0,xh=1/0,bh=null,ii=null,rn=0,ai=null,Bo=null,zo=0,o0=0,l0=null,o_=null,qc=0,c0=null;function zn(){if((rt&2)!==0&&Ye!==0)return Ye&-Ye;if(J.T!==null){var s=Io;return s!==0?s:p0()}return zs()}function l_(){ar===0&&(ar=(Ye&536870912)===0||Je?Jl():536870912);var s=ir.current;return s!==null&&(s.flags|=32),ar}function Fn(s,i,o){(s===ft&&(st===2||st===9)||s.cancelPendingCommit!==null)&&(Fo(s,0),oi(s,Ye,ar,!1)),es(s,o),((rt&2)===0||s!==ft)&&(s===ft&&((rt&2)===0&&(xa|=o),Tt===4&&oi(s,Ye,ar,!1)),qr(s))}function c_(s,i,o){if((rt&6)!==0)throw Error(r(327));var u=!o&&(i&124)===0&&(i&s.expiredLanes)===0||Gi(s,i),g=u?mI(s,i):h0(s,i,!0),y=u;do{if(g===0){Lo&&!u&&oi(s,i,0,!1);break}else{if(o=s.current.alternate,y&&!hI(o)){g=h0(s,i,!1),y=!1;continue}if(g===2){if(y=i,s.errorRecoveryDisabledLanes&y)var E=0;else E=s.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){i=E;e:{var T=s;g=Fc;var M=T.current.memoizedState.isDehydrated;if(M&&(Fo(T,E).flags|=256),E=h0(T,E,!1),E!==2){if(r0&&!M){T.errorRecoveryDisabledLanes|=y,xa|=y,g=4;break e}y=Nn,Nn=g,y!==null&&(Nn===null?Nn=y:Nn.push.apply(Nn,y))}g=E}if(y=!1,g!==2)continue}}if(g===1){Fo(s,0),oi(s,i,0,!0);break}e:{switch(u=s,y=g,y){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:oi(u,i,ar,!ri);break e;case 2:Nn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(g=a0+300-Yn(),10<g)){if(oi(u,i,ar,!ri),so(u,0,!0)!==0)break e;u.timeoutHandle=L_(u_.bind(null,u,o,Nn,bh,i0,i,ar,xa,Uo,ri,y,2,-0,0),g);break e}u_(u,o,Nn,bh,i0,i,ar,xa,Uo,ri,y,0,-0,0)}}break}while(!0);qr(s)}function u_(s,i,o,u,g,y,E,T,M,Q,re,oe,Y,W){if(s.timeoutHandle=-1,oe=i.subtreeFlags,(oe&8192||(oe&16785408)===16785408)&&(Wc={stylesheets:null,count:0,unsuspend:$I},r_(i),oe=YI(),oe!==null)){s.cancelPendingCommit=oe(y_.bind(null,s,i,y,o,u,g,E,T,M,re,1,Y,W)),oi(s,y,E,!Q);return}y_(s,i,y,o,u,g,E,T,M)}function hI(s){for(var i=s;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var g=o[u],y=g.getSnapshot;g=g.value;try{if(!Mn(y(),g))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function oi(s,i,o,u){i&=~s0,i&=~xa,s.suspendedLanes|=i,s.pingedLanes&=~i,u&&(s.warmLanes|=i),u=s.expirationTimes;for(var g=i;0<g;){var y=31-ln(g),E=1<<y;u[y]=-1,g&=~E}o!==0&&Ir(s,o,i)}function _h(){return(rt&6)===0?(Hc(0),!1):!0}function u0(){if(ze!==null){if(st===0)var s=ze.return;else s=ze,ms=fa=null,kg(s),Po=null,Pc=0,s=ze;for(;s!==null;)qb(s.alternate,s),s=s.return;ze=null}}function Fo(s,i){var o=s.timeoutHandle;o!==-1&&(s.timeoutHandle=-1,CI(o)),o=s.cancelPendingCommit,o!==null&&(s.cancelPendingCommit=null,o()),u0(),ft=s,ze=o=ds(s.current,null),Ye=i,st=0,Bn=null,ri=!1,Lo=Gi(s,i),r0=!1,Uo=ar=s0=xa=si=Tt=0,Nn=Fc=null,i0=!1,(i&8)!==0&&(i|=i&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=i;0<u;){var g=31-ln(u),y=1<<g;i|=s[g],u&=~y}return ws=i,qd(),o}function d_(s,i){Me=null,J.H=lh,i===Ac||i===Jd?(i=Ix(),st=3):i===Ax?(i=Ix(),st=4):st=i===Nb?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Bn=i,ze===null&&(Tt=1,fh(s,tr(i,s.current)))}function h_(){var s=J.H;return J.H=lh,s===null?lh:s}function f_(){var s=J.A;return J.A=uI,s}function d0(){Tt=4,ri||(Ye&4194048)!==Ye&&ir.current!==null||(Lo=!0),(si&134217727)===0&&(xa&134217727)===0||ft===null||oi(ft,Ye,ar,!1)}function h0(s,i,o){var u=rt;rt|=2;var g=h_(),y=f_();(ft!==s||Ye!==i)&&(bh=null,Fo(s,i)),i=!1;var E=Tt;e:do try{if(st!==0&&ze!==null){var T=ze,M=Bn;switch(st){case 8:u0(),E=6;break e;case 3:case 2:case 9:case 6:ir.current===null&&(i=!0);var Q=st;if(st=0,Bn=null,qo(s,T,M,Q),o&&Lo){E=0;break e}break;default:Q=st,st=0,Bn=null,qo(s,T,M,Q)}}fI(),E=Tt;break}catch(re){d_(s,re)}while(!0);return i&&s.shellSuspendCounter++,ms=fa=null,rt=u,J.H=g,J.A=y,ze===null&&(ft=null,Ye=0,qd()),E}function fI(){for(;ze!==null;)m_(ze)}function mI(s,i){var o=rt;rt|=2;var u=h_(),g=f_();ft!==s||Ye!==i?(bh=null,xh=Yn()+500,Fo(s,i)):Lo=Gi(s,i);e:do try{if(st!==0&&ze!==null){i=ze;var y=Bn;t:switch(st){case 1:st=0,Bn=null,qo(s,i,y,1);break;case 2:case 9:if(Sx(y)){st=0,Bn=null,g_(i);break}i=function(){st!==2&&st!==9||ft!==s||(st=7),qr(s)},y.then(i,i);break e;case 3:st=7;break e;case 4:st=5;break e;case 7:Sx(y)?(st=0,Bn=null,g_(i)):(st=0,Bn=null,qo(s,i,y,7));break;case 5:var E=null;switch(ze.tag){case 26:E=ze.memoizedState;case 5:case 27:var T=ze;if(!E||W_(E)){st=0,Bn=null;var M=T.sibling;if(M!==null)ze=M;else{var Q=T.return;Q!==null?(ze=Q,wh(Q)):ze=null}break t}}st=0,Bn=null,qo(s,i,y,5);break;case 6:st=0,Bn=null,qo(s,i,y,6);break;case 8:u0(),Tt=6;break e;default:throw Error(r(462))}}gI();break}catch(re){d_(s,re)}while(!0);return ms=fa=null,J.H=u,J.A=g,rt=o,ze!==null?0:(ft=null,Ye=0,qd(),Tt)}function gI(){for(;ze!==null&&!Ql();)m_(ze)}function m_(s){var i=zb(s.alternate,s,ws);s.memoizedProps=s.pendingProps,i===null?wh(s):ze=i}function g_(s){var i=s,o=i.alternate;switch(i.tag){case 15:case 0:i=Ob(o,i,i.pendingProps,i.type,void 0,Ye);break;case 11:i=Ob(o,i,i.pendingProps,i.type.render,i.ref,Ye);break;case 5:kg(i);default:qb(o,i),i=ze=px(i,ws),i=zb(o,i,ws)}s.memoizedProps=s.pendingProps,i===null?wh(s):ze=i}function qo(s,i,o,u){ms=fa=null,kg(i),Po=null,Pc=0;var g=i.return;try{if(sI(s,g,i,o,Ye)){Tt=1,fh(s,tr(o,s.current)),ze=null;return}}catch(y){if(g!==null)throw ze=g,y;Tt=1,fh(s,tr(o,s.current)),ze=null;return}i.flags&32768?(Je||u===1?s=!0:Lo||(Ye&536870912)!==0?s=!1:(ri=s=!0,(u===2||u===9||u===3||u===6)&&(u=ir.current,u!==null&&u.tag===13&&(u.flags|=16384))),p_(i,s)):wh(i)}function wh(s){var i=s;do{if((i.flags&32768)!==0){p_(i,ri);return}s=i.return;var o=aI(i.alternate,i,ws);if(o!==null){ze=o;return}if(i=i.sibling,i!==null){ze=i;return}ze=i=s}while(i!==null);Tt===0&&(Tt=5)}function p_(s,i){do{var o=oI(s.alternate,s);if(o!==null){o.flags&=32767,ze=o;return}if(o=s.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(s=s.sibling,s!==null)){ze=s;return}ze=s=o}while(s!==null);Tt=6,ze=null}function y_(s,i,o,u,g,y,E,T,M){s.cancelPendingCommit=null;do Eh();while(rn!==0);if((rt&6)!==0)throw Error(r(327));if(i!==null){if(i===s.current)throw Error(r(177));if(y=i.lanes|i.childLanes,y|=ng,ec(s,o,y,E,T,M),s===ft&&(ze=ft=null,Ye=0),Bo=i,ai=s,zo=o,o0=y,l0=g,o_=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,xI(zi,function(){return w_(),null})):(s.callbackNode=null,s.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=J.T,J.T=null,g=ue.p,ue.p=2,E=rt,rt|=4;try{lI(s,i,o)}finally{rt=E,ue.p=g,J.T=u}}rn=1,v_(),x_(),b_()}}function v_(){if(rn===1){rn=0;var s=ai,i=Bo,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=J.T,J.T=null;var u=ue.p;ue.p=2;var g=rt;rt|=4;try{e_(i,s);var y=T0,E=ax(s.containerInfo),T=y.focusedElem,M=y.selectionRange;if(E!==T&&T&&T.ownerDocument&&ix(T.ownerDocument.documentElement,T)){if(M!==null&&Xm(T)){var Q=M.start,re=M.end;if(re===void 0&&(re=Q),"selectionStart"in T)T.selectionStart=Q,T.selectionEnd=Math.min(re,T.value.length);else{var oe=T.ownerDocument||document,Y=oe&&oe.defaultView||window;if(Y.getSelection){var W=Y.getSelection(),Ce=T.textContent.length,Se=Math.min(M.start,Ce),ut=M.end===void 0?Se:Math.min(M.end,Ce);!W.extend&&Se>ut&&(E=ut,ut=Se,Se=E);var q=sx(T,Se),z=sx(T,ut);if(q&&z&&(W.rangeCount!==1||W.anchorNode!==q.node||W.anchorOffset!==q.offset||W.focusNode!==z.node||W.focusOffset!==z.offset)){var $=oe.createRange();$.setStart(q.node,q.offset),W.removeAllRanges(),Se>ut?(W.addRange($),W.extend(z.node,z.offset)):($.setEnd(z.node,z.offset),W.addRange($))}}}}for(oe=[],W=T;W=W.parentNode;)W.nodeType===1&&oe.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<oe.length;T++){var ie=oe[T];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}Oh=!!E0,T0=E0=null}finally{rt=g,ue.p=u,J.T=o}}s.current=i,rn=2}}function x_(){if(rn===2){rn=0;var s=ai,i=Bo,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=J.T,J.T=null;var u=ue.p;ue.p=2;var g=rt;rt|=4;try{Wb(s,i.alternate,i)}finally{rt=g,ue.p=u,J.T=o}}rn=3}}function b_(){if(rn===4||rn===3){rn=0,vd();var s=ai,i=Bo,o=zo,u=o_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?rn=5:(rn=0,Bo=ai=null,__(s,s.pendingLanes));var g=s.pendingLanes;if(g===0&&(ii=null),io(o),i=i.stateNode,nt&&typeof nt.onCommitFiberRoot=="function")try{nt.onCommitFiberRoot(wt,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=J.T,g=ue.p,ue.p=2,J.T=null;try{for(var y=s.onRecoverableError,E=0;E<u.length;E++){var T=u[E];y(T.value,{componentStack:T.stack})}}finally{J.T=i,ue.p=g}}(zo&3)!==0&&Eh(),qr(s),g=s.pendingLanes,(o&4194090)!==0&&(g&42)!==0?s===c0?qc++:(qc=0,c0=s):qc=0,Hc(0)}}function __(s,i){(s.pooledCacheLanes&=i)===0&&(i=s.pooledCache,i!=null&&(s.pooledCache=null,Ec(i)))}function Eh(s){return v_(),x_(),b_(),w_()}function w_(){if(rn!==5)return!1;var s=ai,i=o0;o0=0;var o=io(zo),u=J.T,g=ue.p;try{ue.p=32>o?32:o,J.T=null,o=l0,l0=null;var y=ai,E=zo;if(rn=0,Bo=ai=null,zo=0,(rt&6)!==0)throw Error(r(331));var T=rt;if(rt|=4,i_(y.current),n_(y,y.current,E,o),rt=T,Hc(0,!1),nt&&typeof nt.onPostCommitFiberRoot=="function")try{nt.onPostCommitFiberRoot(wt,y)}catch{}return!0}finally{ue.p=g,J.T=u,__(s,i)}}function E_(s,i,o){i=tr(o,i),i=zg(s.stateNode,i,2),s=Ws(s,i,2),s!==null&&(es(s,2),qr(s))}function ht(s,i,o){if(s.tag===3)E_(s,s,o);else for(;i!==null;){if(i.tag===3){E_(i,s,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ii===null||!ii.has(u))){s=tr(o,s),o=kb(2),u=Ws(i,o,2),u!==null&&(Ib(o,u,i,s),es(u,2),qr(u));break}}i=i.return}}function f0(s,i,o){var u=s.pingCache;if(u===null){u=s.pingCache=new dI;var g=new Set;u.set(i,g)}else g=u.get(i),g===void 0&&(g=new Set,u.set(i,g));g.has(o)||(r0=!0,g.add(o),s=pI.bind(null,s,i,o),i.then(s,s))}function pI(s,i,o){var u=s.pingCache;u!==null&&u.delete(i),s.pingedLanes|=s.suspendedLanes&o,s.warmLanes&=~o,ft===s&&(Ye&o)===o&&(Tt===4||Tt===3&&(Ye&62914560)===Ye&&300>Yn()-a0?(rt&2)===0&&Fo(s,0):s0|=o,Uo===Ye&&(Uo=0)),qr(s)}function T_(s,i){i===0&&(i=Zl()),s=To(s,i),s!==null&&(es(s,i),qr(s))}function yI(s){var i=s.memoizedState,o=0;i!==null&&(o=i.retryLane),T_(s,o)}function vI(s,i){var o=0;switch(s.tag){case 13:var u=s.stateNode,g=s.memoizedState;g!==null&&(o=g.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(i),T_(s,o)}function xI(s,i){return Oe(s,i)}var Th=null,Ho=null,m0=!1,Ah=!1,g0=!1,ba=0;function qr(s){s!==Ho&&s.next===null&&(Ho===null?Th=Ho=s:Ho=Ho.next=s),Ah=!0,m0||(m0=!0,_I())}function Hc(s,i){if(!g0&&Ah){g0=!0;do for(var o=!1,u=Th;u!==null;){if(s!==0){var g=u.pendingLanes;if(g===0)var y=0;else{var E=u.suspendedLanes,T=u.pingedLanes;y=(1<<31-ln(42|s)+1)-1,y&=g&~(E&~T),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(o=!0,I_(u,y))}else y=Ye,y=so(u,u===ft?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||Gi(u,y)||(o=!0,I_(u,y));u=u.next}while(o);g0=!1}}function bI(){A_()}function A_(){Ah=m0=!1;var s=0;ba!==0&&(NI()&&(s=ba),ba=0);for(var i=Yn(),o=null,u=Th;u!==null;){var g=u.next,y=S_(u,i);y===0?(u.next=null,o===null?Th=g:o.next=g,g===null&&(Ho=o)):(o=u,(s!==0||(y&3)!==0)&&(Ah=!0)),u=g}Hc(s)}function S_(s,i){for(var o=s.suspendedLanes,u=s.pingedLanes,g=s.expirationTimes,y=s.pendingLanes&-62914561;0<y;){var E=31-ln(y),T=1<<E,M=g[E];M===-1?((T&o)===0||(T&u)!==0)&&(g[E]=Xl(T,i)):M<=i&&(s.expiredLanes|=T),y&=~T}if(i=ft,o=Ye,o=so(s,s===i?o:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u=s.callbackNode,o===0||s===i&&(st===2||st===9)||s.cancelPendingCommit!==null)return u!==null&&u!==null&&Dn(u),s.callbackNode=null,s.callbackPriority=0;if((o&3)===0||Gi(s,o)){if(i=o&-o,i===s.callbackPriority)return i;switch(u!==null&&Dn(u),io(o)){case 2:case 8:o=no;break;case 32:o=zi;break;case 268435456:o=ro;break;default:o=zi}return u=k_.bind(null,s),o=Oe(o,u),s.callbackPriority=i,s.callbackNode=o,i}return u!==null&&u!==null&&Dn(u),s.callbackPriority=2,s.callbackNode=null,2}function k_(s,i){if(rn!==0&&rn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var o=s.callbackNode;if(Eh()&&s.callbackNode!==o)return null;var u=Ye;return u=so(s,s===ft?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u===0?null:(c_(s,u,i),S_(s,Yn()),s.callbackNode!=null&&s.callbackNode===o?k_.bind(null,s):null)}function I_(s,i){if(Eh())return null;c_(s,i,!0)}function _I(){RI(function(){(rt&6)!==0?Oe(Yl,bI):A_()})}function p0(){return ba===0&&(ba=Jl()),ba}function N_(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:ho(""+s)}function C_(s,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,s.id&&o.setAttribute("form",s.id),i.parentNode.insertBefore(o,i),s=new FormData(s),o.parentNode.removeChild(o),s}function wI(s,i,o,u,g){if(i==="submit"&&o&&o.stateNode===g){var y=N_((g[Pt]||null).action),E=u.submitter;E&&(i=(i=E[Pt]||null)?N_(i.formAction):E.getAttribute("formAction"),i!==null&&(y=i,E=null));var T=new fo("action","action",null,u,g);s.push({event:T,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ba!==0){var M=E?C_(g,E):new FormData(g);Mg(o,{pending:!0,data:M,method:g.method,action:y},null,M)}}else typeof y=="function"&&(T.preventDefault(),M=E?C_(g,E):new FormData(g),Mg(o,{pending:!0,data:M,method:g.method,action:y},y,M))},currentTarget:g}]})}}for(var y0=0;y0<tg.length;y0++){var v0=tg[y0],EI=v0.toLowerCase(),TI=v0[0].toUpperCase()+v0.slice(1);mr(EI,"on"+TI)}mr(cx,"onAnimationEnd"),mr(ux,"onAnimationIteration"),mr(dx,"onAnimationStart"),mr("dblclick","onDoubleClick"),mr("focusin","onFocus"),mr("focusout","onBlur"),mr(zk,"onTransitionRun"),mr(Fk,"onTransitionStart"),mr(qk,"onTransitionCancel"),mr(hx,"onTransitionEnd"),ns("onMouseEnter",["mouseout","mouseover"]),ns("onMouseLeave",["mouseout","mouseover"]),ns("onPointerEnter",["pointerout","pointerover"]),ns("onPointerLeave",["pointerout","pointerover"]),hr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hr("onBeforeInput",["compositionend","keypress","textInput","paste"]),hr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Gc));function R_(s,i){i=(i&4)!==0;for(var o=0;o<s.length;o++){var u=s[o],g=u.event;u=u.listeners;e:{var y=void 0;if(i)for(var E=u.length-1;0<=E;E--){var T=u[E],M=T.instance,Q=T.currentTarget;if(T=T.listener,M!==y&&g.isPropagationStopped())break e;y=T,g.currentTarget=Q;try{y(g)}catch(re){hh(re)}g.currentTarget=null,y=M}else for(E=0;E<u.length;E++){if(T=u[E],M=T.instance,Q=T.currentTarget,T=T.listener,M!==y&&g.isPropagationStopped())break e;y=T,g.currentTarget=Q;try{y(g)}catch(re){hh(re)}g.currentTarget=null,y=M}}}}function Fe(s,i){var o=i[nc];o===void 0&&(o=i[nc]=new Set);var u=s+"__bubble";o.has(u)||(j_(i,s,2,!1),o.add(u))}function x0(s,i,o){var u=0;i&&(u|=4),j_(o,s,u,i)}var Sh="_reactListening"+Math.random().toString(36).slice(2);function b0(s){if(!s[Sh]){s[Sh]=!0,rc.forEach(function(o){o!=="selectionchange"&&(AI.has(o)||x0(o,!1,s),x0(o,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[Sh]||(i[Sh]=!0,x0("selectionchange",!1,i))}}function j_(s,i,o,u){switch(nw(i)){case 2:var g=JI;break;case 8:g=ZI;break;default:g=P0}o=g.bind(null,i,o,s),g=void 0,!Zn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(g=!0),u?g!==void 0?s.addEventListener(i,o,{capture:!0,passive:g}):s.addEventListener(i,o,!0):g!==void 0?s.addEventListener(i,o,{passive:g}):s.addEventListener(i,o,!1)}function _0(s,i,o,u,g){var y=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var T=u.stateNode.containerInfo;if(T===g)break;if(E===4)for(E=u.return;E!==null;){var M=E.tag;if((M===3||M===4)&&E.stateNode.containerInfo===g)return;E=E.return}for(;T!==null;){if(E=ts(T),E===null)return;if(M=E.tag,M===5||M===6||M===26||M===27){u=y=E;continue e}T=T.parentNode}}u=u.return}Id(function(){var Q=y,re=Jn(o),oe=[];e:{var Y=fx.get(s);if(Y!==void 0){var W=fo,Ce=s;switch(s){case"keypress":if(Pr(o)===0)break e;case"keydown":case"keyup":W=xo;break;case"focusin":Ce="focus",W=po;break;case"focusout":Ce="blur",W=po;break;case"beforeblur":case"afterblur":W=po;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=er;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=$m;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=Md;break;case cx:case ux:case dx:W=yo;break;case hx:W=Ld;break;case"scroll":case"scrollend":W=Nd;break;case"wheel":W=bo;break;case"copy":case"cut":case"paste":W=vo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=gc;break;case"toggle":case"beforetoggle":W=Bd}var Se=(i&4)!==0,ut=!Se&&(s==="scroll"||s==="scrollend"),q=Se?Y!==null?Y+"Capture":null:Y;Se=[];for(var z=Q,$;z!==null;){var ie=z;if($=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||$===null||q===null||(ie=Zi(z,q),ie!=null&&Se.push(Kc(z,ie,$))),ut)break;z=z.return}0<Se.length&&(Y=new W(Y,Ce,null,o,re),oe.push({event:Y,listeners:Se}))}}if((i&7)===0){e:{if(Y=s==="mouseover"||s==="pointerover",W=s==="mouseout"||s==="pointerout",Y&&o!==is&&(Ce=o.relatedTarget||o.fromElement)&&(ts(Ce)||Ce[Wn]))break e;if((W||Y)&&(Y=re.window===re?re:(Y=re.ownerDocument)?Y.defaultView||Y.parentWindow:window,W?(Ce=o.relatedTarget||o.toElement,W=Q,Ce=Ce?ts(Ce):null,Ce!==null&&(ut=l(Ce),Se=Ce.tag,Ce!==ut||Se!==5&&Se!==27&&Se!==6)&&(Ce=null)):(W=null,Ce=Q),W!==Ce)){if(Se=er,ie="onMouseLeave",q="onMouseEnter",z="mouse",(s==="pointerout"||s==="pointerover")&&(Se=gc,ie="onPointerLeave",q="onPointerEnter",z="pointer"),ut=W==null?Y:Cr(W),$=Ce==null?Y:Cr(Ce),Y=new Se(ie,z+"leave",W,o,re),Y.target=ut,Y.relatedTarget=$,ie=null,ts(re)===Q&&(Se=new Se(q,z+"enter",Ce,o,re),Se.target=$,Se.relatedTarget=ut,ie=Se),ut=ie,W&&Ce)t:{for(Se=W,q=Ce,z=0,$=Se;$;$=Go($))z++;for($=0,ie=q;ie;ie=Go(ie))$++;for(;0<z-$;)Se=Go(Se),z--;for(;0<$-z;)q=Go(q),$--;for(;z--;){if(Se===q||q!==null&&Se===q.alternate)break t;Se=Go(Se),q=Go(q)}Se=null}else Se=null;W!==null&&D_(oe,Y,W,Se,!1),Ce!==null&&ut!==null&&D_(oe,ut,Ce,Se,!0)}}e:{if(Y=Q?Cr(Q):window,W=Y.nodeName&&Y.nodeName.toLowerCase(),W==="select"||W==="input"&&Y.type==="file")var xe=Jv;else if(Ft(Y))if(Zv)xe=Lk;else{xe=Mk;var Ue=Ok}else W=Y.nodeName,!W||W.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?Q&&lc(Q.elementType)&&(xe=Jv):xe=Vk;if(xe&&(xe=xe(s,Q))){us(oe,xe,o,re);break e}Ue&&Ue(s,Y,Q),s==="focusout"&&Q&&Y.type==="number"&&Q.memoizedProps.value!=null&&Gs(Y,"number",Y.value)}switch(Ue=Q?Cr(Q):window,s){case"focusin":(Ft(Ue)||Ue.contentEditable==="true")&&(_o=Ue,Jm=Q,vc=null);break;case"focusout":vc=Jm=_o=null;break;case"mousedown":Zm=!0;break;case"contextmenu":case"mouseup":case"dragend":Zm=!1,ox(oe,o,re);break;case"selectionchange":if(Bk)break;case"keydown":case"keyup":ox(oe,o,re)}var we;if(Vr)e:{switch(s){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else $e?X(s,o)&&(ke="onCompositionEnd"):s==="keydown"&&o.keyCode===229&&(ke="onCompositionStart");ke&&(w&&o.locale!=="ko"&&($e||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&$e&&(we=uc()):(Dr=re,Ks="value"in Dr?Dr.value:Dr.textContent,$e=!0)),Ue=kh(Q,ke),0<Ue.length&&(ke=new fc(ke,s,null,o,re),oe.push({event:ke,listeners:Ue}),we?ke.data=we:(we=de(o),we!==null&&(ke.data=we)))),(we=x?zt(s,o):Qe(s,o))&&(ke=kh(Q,"onBeforeInput"),0<ke.length&&(Ue=new fc("onBeforeInput","beforeinput",null,o,re),oe.push({event:Ue,listeners:ke}),Ue.data=we)),wI(oe,s,Q,o,re)}R_(oe,i)})}function Kc(s,i,o){return{instance:s,listener:i,currentTarget:o}}function kh(s,i){for(var o=i+"Capture",u=[];s!==null;){var g=s,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=Zi(s,o),g!=null&&u.unshift(Kc(s,g,y)),g=Zi(s,i),g!=null&&u.push(Kc(s,g,y))),s.tag===3)return u;s=s.return}return[]}function Go(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function D_(s,i,o,u,g){for(var y=i._reactName,E=[];o!==null&&o!==u;){var T=o,M=T.alternate,Q=T.stateNode;if(T=T.tag,M!==null&&M===u)break;T!==5&&T!==26&&T!==27||Q===null||(M=Q,g?(Q=Zi(o,y),Q!=null&&E.unshift(Kc(o,Q,M))):g||(Q=Zi(o,y),Q!=null&&E.push(Kc(o,Q,M)))),o=o.return}E.length!==0&&s.push({event:i,listeners:E})}var SI=/\r\n?/g,kI=/\u0000|\uFFFD/g;function P_(s){return(typeof s=="string"?s:""+s).replace(SI,`
`).replace(kI,"")}function O_(s,i){return i=P_(i),P_(s)===i}function Ih(){}function ct(s,i,o,u,g,y){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||Xn(s,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&Xn(s,""+u);break;case"className":Rr(s,"class",u);break;case"tabIndex":Rr(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Rr(s,o,u);break;case"style":oc(s,u,y);break;case"data":if(i!=="object"){Rr(s,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){s.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(o);break}u=ho(""+u),s.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(o==="formAction"?(i!=="input"&&ct(s,i,"name",g.name,g,null),ct(s,i,"formEncType",g.formEncType,g,null),ct(s,i,"formMethod",g.formMethod,g,null),ct(s,i,"formTarget",g.formTarget,g,null)):(ct(s,i,"encType",g.encType,g,null),ct(s,i,"method",g.method,g,null),ct(s,i,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(o);break}u=ho(""+u),s.setAttribute(o,u);break;case"onClick":u!=null&&(s.onclick=Ih);break;case"onScroll":u!=null&&Fe("scroll",s);break;case"onScrollEnd":u!=null&&Fe("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(g.children!=null)throw Error(r(60));s.innerHTML=o}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}o=ho(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,""+u):s.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,""):s.removeAttribute(o);break;case"capture":case"download":u===!0?s.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,u):s.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(o,u):s.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(o):s.setAttribute(o,u);break;case"popover":Fe("beforetoggle",s),Fe("toggle",s),Hs(s,"popover",u);break;case"xlinkActuate":en(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":en(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":en(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":en(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":en(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":en(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":en(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":en(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":en(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Hs(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Gm.get(o)||o,Hs(s,o,u))}}function w0(s,i,o,u,g,y){switch(o){case"style":oc(s,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(g.children!=null)throw Error(r(60));s.innerHTML=o}}break;case"children":typeof u=="string"?Xn(s,u):(typeof u=="number"||typeof u=="bigint")&&Xn(s,""+u);break;case"onScroll":u!=null&&Fe("scroll",s);break;case"onScrollEnd":u!=null&&Fe("scrollend",s);break;case"onClick":u!=null&&(s.onclick=Ih);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ao.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(g=o.endsWith("Capture"),i=o.slice(2,g?o.length-7:void 0),y=s[Pt]||null,y=y!=null?y[o]:null,typeof y=="function"&&s.removeEventListener(i,y,g),typeof u=="function")){typeof y!="function"&&y!==null&&(o in s?s[o]=null:s.hasAttribute(o)&&s.removeAttribute(o)),s.addEventListener(i,u,g);break e}o in s?s[o]=u:u===!0?s.setAttribute(o,""):Hs(s,o,u)}}}function sn(s,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fe("error",s),Fe("load",s);var u=!1,g=!1,y;for(y in o)if(o.hasOwnProperty(y)){var E=o[y];if(E!=null)switch(y){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:ct(s,i,y,E,o,null)}}g&&ct(s,i,"srcSet",o.srcSet,o,null),u&&ct(s,i,"src",o.src,o,null);return;case"input":Fe("invalid",s);var T=y=E=g=null,M=null,Q=null;for(u in o)if(o.hasOwnProperty(u)){var re=o[u];if(re!=null)switch(u){case"name":g=re;break;case"type":E=re;break;case"checked":M=re;break;case"defaultChecked":Q=re;break;case"value":y=re;break;case"defaultValue":T=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,i));break;default:ct(s,i,u,re,o,null)}}Wi(s,y,T,M,Q,E,g,!1),uo(s);return;case"select":Fe("invalid",s),u=E=y=null;for(g in o)if(o.hasOwnProperty(g)&&(T=o[g],T!=null))switch(g){case"value":y=T;break;case"defaultValue":E=T;break;case"multiple":u=T;default:ct(s,i,g,T,o,null)}i=y,o=E,s.multiple=!!u,i!=null?ss(s,!!u,i,!1):o!=null&&ss(s,!!u,o,!0);return;case"textarea":Fe("invalid",s),y=g=u=null;for(E in o)if(o.hasOwnProperty(E)&&(T=o[E],T!=null))switch(E){case"value":u=T;break;case"defaultValue":g=T;break;case"children":y=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:ct(s,i,E,T,o,null)}Xi(s,u,g,y),uo(s);return;case"option":for(M in o)if(o.hasOwnProperty(M)&&(u=o[M],u!=null))switch(M){case"selected":s.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ct(s,i,M,u,o,null)}return;case"dialog":Fe("beforetoggle",s),Fe("toggle",s),Fe("cancel",s),Fe("close",s);break;case"iframe":case"object":Fe("load",s);break;case"video":case"audio":for(u=0;u<Gc.length;u++)Fe(Gc[u],s);break;case"image":Fe("error",s),Fe("load",s);break;case"details":Fe("toggle",s);break;case"embed":case"source":case"link":Fe("error",s),Fe("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in o)if(o.hasOwnProperty(Q)&&(u=o[Q],u!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:ct(s,i,Q,u,o,null)}return;default:if(lc(i)){for(re in o)o.hasOwnProperty(re)&&(u=o[re],u!==void 0&&w0(s,i,re,u,o,void 0));return}}for(T in o)o.hasOwnProperty(T)&&(u=o[T],u!=null&&ct(s,i,T,u,o,null))}function II(s,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,E=null,T=null,M=null,Q=null,re=null;for(W in o){var oe=o[W];if(o.hasOwnProperty(W)&&oe!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":M=oe;default:u.hasOwnProperty(W)||ct(s,i,W,null,u,oe)}}for(var Y in u){var W=u[Y];if(oe=o[Y],u.hasOwnProperty(Y)&&(W!=null||oe!=null))switch(Y){case"type":y=W;break;case"name":g=W;break;case"checked":Q=W;break;case"defaultChecked":re=W;break;case"value":E=W;break;case"defaultValue":T=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(137,i));break;default:W!==oe&&ct(s,i,Y,W,u,oe)}}On(s,E,T,M,Q,re,y,g);return;case"select":W=E=T=Y=null;for(y in o)if(M=o[y],o.hasOwnProperty(y)&&M!=null)switch(y){case"value":break;case"multiple":W=M;default:u.hasOwnProperty(y)||ct(s,i,y,null,u,M)}for(g in u)if(y=u[g],M=o[g],u.hasOwnProperty(g)&&(y!=null||M!=null))switch(g){case"value":Y=y;break;case"defaultValue":T=y;break;case"multiple":E=y;default:y!==M&&ct(s,i,g,y,u,M)}i=T,o=E,u=W,Y!=null?ss(s,!!o,Y,!1):!!u!=!!o&&(i!=null?ss(s,!!o,i,!0):ss(s,!!o,o?[]:"",!1));return;case"textarea":W=Y=null;for(T in o)if(g=o[T],o.hasOwnProperty(T)&&g!=null&&!u.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:ct(s,i,T,null,u,g)}for(E in u)if(g=u[E],y=o[E],u.hasOwnProperty(E)&&(g!=null||y!=null))switch(E){case"value":Y=g;break;case"defaultValue":W=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==y&&ct(s,i,E,g,u,y)}ot(s,Y,W);return;case"option":for(var Ce in o)if(Y=o[Ce],o.hasOwnProperty(Ce)&&Y!=null&&!u.hasOwnProperty(Ce))switch(Ce){case"selected":s.selected=!1;break;default:ct(s,i,Ce,null,u,Y)}for(M in u)if(Y=u[M],W=o[M],u.hasOwnProperty(M)&&Y!==W&&(Y!=null||W!=null))switch(M){case"selected":s.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:ct(s,i,M,Y,u,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in o)Y=o[Se],o.hasOwnProperty(Se)&&Y!=null&&!u.hasOwnProperty(Se)&&ct(s,i,Se,null,u,Y);for(Q in u)if(Y=u[Q],W=o[Q],u.hasOwnProperty(Q)&&Y!==W&&(Y!=null||W!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,i));break;default:ct(s,i,Q,Y,u,W)}return;default:if(lc(i)){for(var ut in o)Y=o[ut],o.hasOwnProperty(ut)&&Y!==void 0&&!u.hasOwnProperty(ut)&&w0(s,i,ut,void 0,u,Y);for(re in u)Y=u[re],W=o[re],!u.hasOwnProperty(re)||Y===W||Y===void 0&&W===void 0||w0(s,i,re,Y,u,W);return}}for(var q in o)Y=o[q],o.hasOwnProperty(q)&&Y!=null&&!u.hasOwnProperty(q)&&ct(s,i,q,null,u,Y);for(oe in u)Y=u[oe],W=o[oe],!u.hasOwnProperty(oe)||Y===W||Y==null&&W==null||ct(s,i,oe,Y,u,W)}var E0=null,T0=null;function Nh(s){return s.nodeType===9?s:s.ownerDocument}function M_(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function V_(s,i){if(s===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&i==="foreignObject"?0:s}function A0(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var S0=null;function NI(){var s=window.event;return s&&s.type==="popstate"?s===S0?!1:(S0=s,!0):(S0=null,!1)}var L_=typeof setTimeout=="function"?setTimeout:void 0,CI=typeof clearTimeout=="function"?clearTimeout:void 0,U_=typeof Promise=="function"?Promise:void 0,RI=typeof queueMicrotask=="function"?queueMicrotask:typeof U_<"u"?function(s){return U_.resolve(null).then(s).catch(jI)}:L_;function jI(s){setTimeout(function(){throw s})}function li(s){return s==="head"}function B_(s,i){var o=i,u=0,g=0;do{var y=o.nextSibling;if(s.removeChild(o),y&&y.nodeType===8)if(o=y.data,o==="/$"){if(0<u&&8>u){o=u;var E=s.ownerDocument;if(o&1&&$c(E.documentElement),o&2&&$c(E.body),o&4)for(o=E.head,$c(o),E=o.firstChild;E;){var T=E.nextSibling,M=E.nodeName;E[Ki]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&E.rel.toLowerCase()==="stylesheet"||o.removeChild(E),E=T}}if(g===0){s.removeChild(y),tu(i);return}g--}else o==="$"||o==="$?"||o==="$!"?g++:u=o.charCodeAt(0)-48;else u=0;o=y}while(o);tu(i)}function k0(s){var i=s.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":k0(o),qs(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}s.removeChild(o)}}function DI(s,i,o,u){for(;s.nodeType===1;){var g=o;if(s.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[Ki])switch(i){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(y=s.getAttribute("rel"),y==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(y!==g.rel||s.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(y=s.getAttribute("src"),(y!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(i==="input"&&s.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===y)return s}else return s;if(s=pr(s.nextSibling),s===null)break}return null}function PI(s,i,o){if(i==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=pr(s.nextSibling),s===null))return null;return s}function I0(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function OI(s,i){var o=s.ownerDocument;if(s.data!=="$?"||o.readyState==="complete")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),s._reactRetry=u}}function pr(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return s}var N0=null;function z_(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var o=s.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return s;i--}else o==="/$"&&i++}s=s.previousSibling}return null}function F_(s,i,o){switch(i=Nh(o),s){case"html":if(s=i.documentElement,!s)throw Error(r(452));return s;case"head":if(s=i.head,!s)throw Error(r(453));return s;case"body":if(s=i.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function $c(s){for(var i=s.attributes;i.length;)s.removeAttributeNode(i[0]);qs(s)}var or=new Map,q_=new Set;function Ch(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Es=ue.d;ue.d={f:MI,r:VI,D:LI,C:UI,L:BI,m:zI,X:qI,S:FI,M:HI};function MI(){var s=Es.f(),i=_h();return s||i}function VI(s){var i=Nr(s);i!==null&&i.tag===5&&i.type==="form"?cb(i):Es.r(s)}var Ko=typeof document>"u"?null:document;function H_(s,i,o){var u=Ko;if(u&&typeof i=="string"&&i){var g=Ot(i);g='link[rel="'+s+'"][href="'+g+'"]',typeof o=="string"&&(g+='[crossorigin="'+o+'"]'),q_.has(g)||(q_.add(g),s={rel:s,crossOrigin:o,href:i},u.querySelector(g)===null&&(i=u.createElement("link"),sn(i,"link",s),It(i),u.head.appendChild(i)))}}function LI(s){Es.D(s),H_("dns-prefetch",s,null)}function UI(s,i){Es.C(s,i),H_("preconnect",s,i)}function BI(s,i,o){Es.L(s,i,o);var u=Ko;if(u&&s&&i){var g='link[rel="preload"][as="'+Ot(i)+'"]';i==="image"&&o&&o.imageSrcSet?(g+='[imagesrcset="'+Ot(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(g+='[imagesizes="'+Ot(o.imageSizes)+'"]')):g+='[href="'+Ot(s)+'"]';var y=g;switch(i){case"style":y=$o(s);break;case"script":y=Qo(s)}or.has(y)||(s=v({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:s,as:i},o),or.set(y,s),u.querySelector(g)!==null||i==="style"&&u.querySelector(Qc(y))||i==="script"&&u.querySelector(Yc(y))||(i=u.createElement("link"),sn(i,"link",s),It(i),u.head.appendChild(i)))}}function zI(s,i){Es.m(s,i);var o=Ko;if(o&&s){var u=i&&typeof i.as=="string"?i.as:"script",g='link[rel="modulepreload"][as="'+Ot(u)+'"][href="'+Ot(s)+'"]',y=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Qo(s)}if(!or.has(y)&&(s=v({rel:"modulepreload",href:s},i),or.set(y,s),o.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Yc(y)))return}u=o.createElement("link"),sn(u,"link",s),It(u),o.head.appendChild(u)}}}function FI(s,i,o){Es.S(s,i,o);var u=Ko;if(u&&s){var g=bn(u).hoistableStyles,y=$o(s);i=i||"default";var E=g.get(y);if(!E){var T={loading:0,preload:null};if(E=u.querySelector(Qc(y)))T.loading=5;else{s=v({rel:"stylesheet",href:s,"data-precedence":i},o),(o=or.get(y))&&C0(s,o);var M=E=u.createElement("link");It(M),sn(M,"link",s),M._p=new Promise(function(Q,re){M.onload=Q,M.onerror=re}),M.addEventListener("load",function(){T.loading|=1}),M.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Rh(E,i,u)}E={type:"stylesheet",instance:E,count:1,state:T},g.set(y,E)}}}function qI(s,i){Es.X(s,i);var o=Ko;if(o&&s){var u=bn(o).hoistableScripts,g=Qo(s),y=u.get(g);y||(y=o.querySelector(Yc(g)),y||(s=v({src:s,async:!0},i),(i=or.get(g))&&R0(s,i),y=o.createElement("script"),It(y),sn(y,"link",s),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(g,y))}}function HI(s,i){Es.M(s,i);var o=Ko;if(o&&s){var u=bn(o).hoistableScripts,g=Qo(s),y=u.get(g);y||(y=o.querySelector(Yc(g)),y||(s=v({src:s,async:!0,type:"module"},i),(i=or.get(g))&&R0(s,i),y=o.createElement("script"),It(y),sn(y,"link",s),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(g,y))}}function G_(s,i,o,u){var g=(g=ye.current)?Ch(g):null;if(!g)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=$o(o.href),o=bn(g).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){s=$o(o.href);var y=bn(g).hoistableStyles,E=y.get(s);if(E||(g=g.ownerDocument||g,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(s,E),(y=g.querySelector(Qc(s)))&&!y._p&&(E.instance=y,E.state.loading=5),or.has(s)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},or.set(s,o),y||GI(g,s,o,E.state))),i&&u===null)throw Error(r(528,""));return E}if(i&&u!==null)throw Error(r(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Qo(o),o=bn(g).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function $o(s){return'href="'+Ot(s)+'"'}function Qc(s){return'link[rel="stylesheet"]['+s+"]"}function K_(s){return v({},s,{"data-precedence":s.precedence,precedence:null})}function GI(s,i,o,u){s.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=s.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),sn(i,"link",o),It(i),s.head.appendChild(i))}function Qo(s){return'[src="'+Ot(s)+'"]'}function Yc(s){return"script[async]"+s}function $_(s,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=s.querySelector('style[data-href~="'+Ot(o.href)+'"]');if(u)return i.instance=u,It(u),u;var g=v({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),It(u),sn(u,"style",g),Rh(u,o.precedence,s),i.instance=u;case"stylesheet":g=$o(o.href);var y=s.querySelector(Qc(g));if(y)return i.state.loading|=4,i.instance=y,It(y),y;u=K_(o),(g=or.get(g))&&C0(u,g),y=(s.ownerDocument||s).createElement("link"),It(y);var E=y;return E._p=new Promise(function(T,M){E.onload=T,E.onerror=M}),sn(y,"link",u),i.state.loading|=4,Rh(y,o.precedence,s),i.instance=y;case"script":return y=Qo(o.src),(g=s.querySelector(Yc(y)))?(i.instance=g,It(g),g):(u=o,(g=or.get(y))&&(u=v({},o),R0(u,g)),s=s.ownerDocument||s,g=s.createElement("script"),It(g),sn(g,"link",u),s.head.appendChild(g),i.instance=g);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Rh(u,o.precedence,s));return i.instance}function Rh(s,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,y=g,E=0;E<u.length;E++){var T=u[E];if(T.dataset.precedence===i)y=T;else if(y!==g)break}y?y.parentNode.insertBefore(s,y.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(s,i.firstChild))}function C0(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.title==null&&(s.title=i.title)}function R0(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.integrity==null&&(s.integrity=i.integrity)}var jh=null;function Q_(s,i,o){if(jh===null){var u=new Map,g=jh=new Map;g.set(o,u)}else g=jh,u=g.get(o),u||(u=new Map,g.set(o,u));if(u.has(s))return u;for(u.set(s,null),o=o.getElementsByTagName(s),g=0;g<o.length;g++){var y=o[g];if(!(y[Ki]||y[Bt]||s==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var E=y.getAttribute(i)||"";E=s+E;var T=u.get(E);T?T.push(y):u.set(E,[y])}}return u}function Y_(s,i,o){s=s.ownerDocument||s,s.head.insertBefore(o,i==="title"?s.querySelector("head > title"):null)}function KI(s,i,o){if(o===1||i.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return s=i.disabled,typeof i.precedence=="string"&&s==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function W_(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Wc=null;function $I(){}function QI(s,i,o){if(Wc===null)throw Error(r(475));var u=Wc;if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var g=$o(o.href),y=s.querySelector(Qc(g));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(u.count++,u=Dh.bind(u),s.then(u,u)),i.state.loading|=4,i.instance=y,It(y);return}y=s.ownerDocument||s,o=K_(o),(g=or.get(g))&&C0(o,g),y=y.createElement("link"),It(y);var E=y;E._p=new Promise(function(T,M){E.onload=T,E.onerror=M}),sn(y,"link",o),i.instance=y}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,s),(s=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=Dh.bind(u),s.addEventListener("load",i),s.addEventListener("error",i))}}function YI(){if(Wc===null)throw Error(r(475));var s=Wc;return s.stylesheets&&s.count===0&&j0(s,s.stylesheets),0<s.count?function(i){var o=setTimeout(function(){if(s.stylesheets&&j0(s,s.stylesheets),s.unsuspend){var u=s.unsuspend;s.unsuspend=null,u()}},6e4);return s.unsuspend=i,function(){s.unsuspend=null,clearTimeout(o)}}:null}function Dh(){if(this.count--,this.count===0){if(this.stylesheets)j0(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Ph=null;function j0(s,i){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Ph=new Map,i.forEach(WI,s),Ph=null,Dh.call(s))}function WI(s,i){if(!(i.state.loading&4)){var o=Ph.get(s);if(o)var u=o.get(null);else{o=new Map,Ph.set(s,o);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var E=g[y];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),u=E)}u&&o.set(null,u)}g=i.instance,E=g.getAttribute("data-precedence"),y=o.get(E)||u,y===u&&o.set(null,g),o.set(E,g),this.count++,u=Dh.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),y?y.parentNode.insertBefore(g,y.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),i.state.loading|=4}}var Xc={$$typeof:H,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function XI(s,i,o,u,g,y,E,T){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Zr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zr(0),this.hiddenUpdates=Zr(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function X_(s,i,o,u,g,y,E,T,M,Q,re,oe){return s=new XI(s,i,o,E,T,M,Q,oe),i=1,y===!0&&(i|=24),y=Vn(3,null,null,i),s.current=y,y.stateNode=s,i=fg(),i.refCount++,s.pooledCache=i,i.refCount++,y.memoizedState={element:u,isDehydrated:o,cache:i},yg(y),s}function J_(s){return s?(s=Ao,s):Ao}function Z_(s,i,o,u,g,y){g=J_(g),u.context===null?u.context=g:u.pendingContext=g,u=Ys(i),u.payload={element:o},y=y===void 0?null:y,y!==null&&(u.callback=y),o=Ws(s,u,i),o!==null&&(Fn(o,s,i),kc(o,s,i))}function ew(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var o=s.retryLane;s.retryLane=o!==0&&o<i?o:i}}function D0(s,i){ew(s,i),(s=s.alternate)&&ew(s,i)}function tw(s){if(s.tag===13){var i=To(s,67108864);i!==null&&Fn(i,s,67108864),D0(s,67108864)}}var Oh=!0;function JI(s,i,o,u){var g=J.T;J.T=null;var y=ue.p;try{ue.p=2,P0(s,i,o,u)}finally{ue.p=y,J.T=g}}function ZI(s,i,o,u){var g=J.T;J.T=null;var y=ue.p;try{ue.p=8,P0(s,i,o,u)}finally{ue.p=y,J.T=g}}function P0(s,i,o,u){if(Oh){var g=O0(u);if(g===null)_0(s,i,u,Mh,o),rw(s,u);else if(tN(g,s,i,o,u))u.stopPropagation();else if(rw(s,u),i&4&&-1<eN.indexOf(s)){for(;g!==null;){var y=Nr(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var E=dr(y.pendingLanes);if(E!==0){var T=y;for(T.pendingLanes|=2,T.entangledLanes|=2;E;){var M=1<<31-ln(E);T.entanglements[1]|=M,E&=~M}qr(y),(rt&6)===0&&(xh=Yn()+500,Hc(0))}}break;case 13:T=To(y,2),T!==null&&Fn(T,y,2),_h(),D0(y,2)}if(y=O0(u),y===null&&_0(s,i,u,Mh,o),y===g)break;g=y}g!==null&&u.stopPropagation()}else _0(s,i,u,null,o)}}function O0(s){return s=Jn(s),M0(s)}var Mh=null;function M0(s){if(Mh=null,s=ts(s),s!==null){var i=l(s);if(i===null)s=null;else{var o=i.tag;if(o===13){if(s=c(i),s!==null)return s;s=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null)}}return Mh=s,null}function nw(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Um()){case Yl:return 2;case no:return 8;case zi:case Bm:return 32;case ro:return 268435456;default:return 32}default:return 32}}var V0=!1,ci=null,ui=null,di=null,Jc=new Map,Zc=new Map,hi=[],eN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function rw(s,i){switch(s){case"focusin":case"focusout":ci=null;break;case"dragenter":case"dragleave":ui=null;break;case"mouseover":case"mouseout":di=null;break;case"pointerover":case"pointerout":Jc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zc.delete(i.pointerId)}}function eu(s,i,o,u,g,y){return s===null||s.nativeEvent!==y?(s={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:y,targetContainers:[g]},i!==null&&(i=Nr(i),i!==null&&tw(i)),s):(s.eventSystemFlags|=u,i=s.targetContainers,g!==null&&i.indexOf(g)===-1&&i.push(g),s)}function tN(s,i,o,u,g){switch(i){case"focusin":return ci=eu(ci,s,i,o,u,g),!0;case"dragenter":return ui=eu(ui,s,i,o,u,g),!0;case"mouseover":return di=eu(di,s,i,o,u,g),!0;case"pointerover":var y=g.pointerId;return Jc.set(y,eu(Jc.get(y)||null,s,i,o,u,g)),!0;case"gotpointercapture":return y=g.pointerId,Zc.set(y,eu(Zc.get(y)||null,s,i,o,u,g)),!0}return!1}function sw(s){var i=ts(s.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){s.blockedOn=i,_d(s.priority,function(){if(o.tag===13){var u=zn();u=Bs(u);var g=To(o,u);g!==null&&Fn(g,o,u),D0(o,u)}});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){s.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Vh(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var o=O0(s.nativeEvent);if(o===null){o=s.nativeEvent;var u=new o.constructor(o.type,o);is=u,o.target.dispatchEvent(u),is=null}else return i=Nr(o),i!==null&&tw(i),s.blockedOn=o,!1;i.shift()}return!0}function iw(s,i,o){Vh(s)&&o.delete(i)}function nN(){V0=!1,ci!==null&&Vh(ci)&&(ci=null),ui!==null&&Vh(ui)&&(ui=null),di!==null&&Vh(di)&&(di=null),Jc.forEach(iw),Zc.forEach(iw)}function Lh(s,i){s.blockedOn===i&&(s.blockedOn=null,V0||(V0=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,nN)))}var Uh=null;function aw(s){Uh!==s&&(Uh=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Uh===s&&(Uh=null);for(var i=0;i<s.length;i+=3){var o=s[i],u=s[i+1],g=s[i+2];if(typeof u!="function"){if(M0(u||o)===null)continue;break}var y=Nr(o);y!==null&&(s.splice(i,3),i-=3,Mg(y,{pending:!0,data:g,method:o.method,action:u},u,g))}}))}function tu(s){function i(M){return Lh(M,s)}ci!==null&&Lh(ci,s),ui!==null&&Lh(ui,s),di!==null&&Lh(di,s),Jc.forEach(i),Zc.forEach(i);for(var o=0;o<hi.length;o++){var u=hi[o];u.blockedOn===s&&(u.blockedOn=null)}for(;0<hi.length&&(o=hi[0],o.blockedOn===null);)sw(o),o.blockedOn===null&&hi.shift();if(o=(s.ownerDocument||s).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var g=o[u],y=o[u+1],E=g[Pt]||null;if(typeof y=="function")E||aw(o);else if(E){var T=null;if(y&&y.hasAttribute("formAction")){if(g=y,E=y[Pt]||null)T=E.formAction;else if(M0(g)!==null)continue}else T=E.action;typeof T=="function"?o[u+1]=T:(o.splice(u,3),u-=3),aw(o)}}}function L0(s){this._internalRoot=s}Bh.prototype.render=L0.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(r(409));var o=i.current,u=zn();Z_(o,u,s,i,null,null)},Bh.prototype.unmount=L0.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;Z_(s.current,2,null,s,null,null),_h(),i[Wn]=null}};function Bh(s){this._internalRoot=s}Bh.prototype.unstable_scheduleHydration=function(s){if(s){var i=zs();s={blockedOn:null,target:s,priority:i};for(var o=0;o<hi.length&&i!==0&&i<hi[o].priority;o++);hi.splice(o,0,s),o===0&&sw(s)}};var ow=e.version;if(ow!=="19.1.0")throw Error(r(527,ow,"19.1.0"));ue.findDOMNode=function(s){var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=m(i),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var rN={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zh.isDisabled&&zh.supportsFiber)try{wt=zh.inject(rN),nt=zh}catch{}}return ru.createRoot=function(s,i){if(!a(s))throw Error(r(299));var o=!1,u="",g=Eb,y=Tb,E=Ab,T=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(g=i.onUncaughtError),i.onCaughtError!==void 0&&(y=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(T=i.unstable_transitionCallbacks)),i=X_(s,1,!1,null,null,o,u,g,y,E,T,null),s[Wn]=i.current,b0(s),new L0(i)},ru.hydrateRoot=function(s,i,o){if(!a(s))throw Error(r(299));var u=!1,g="",y=Eb,E=Tb,T=Ab,M=null,Q=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(M=o.unstable_transitionCallbacks),o.formState!==void 0&&(Q=o.formState)),i=X_(s,1,!0,i,o??null,u,g,y,E,T,M,Q),i.context=J_(null),o=i.current,u=zn(),u=Bs(u),g=Ys(u),g.callback=null,Ws(o,g,u),o=u,i.current.lanes=o,es(i,o),qr(i),s[Wn]=i.current,b0(s),new Bh(i)},ru.version="19.1.0",ru}var yw;function mN(){if(yw)return z0.exports;yw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),z0.exports=fN(),z0.exports}var gN=mN();const pN=K2(gN);var su={},vw;function yN(){if(vw)return su;vw=1,Object.defineProperty(su,"__esModule",{value:!0}),su.parse=c,su.serialize=p;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,l=(()=>{const _=function(){};return _.prototype=Object.create(null),_})();function c(_,A){const I=new l,D=_.length;if(D<2)return I;const N=(A==null?void 0:A.decode)||v;let V=0;do{const B=_.indexOf("=",V);if(B===-1)break;const H=_.indexOf(";",V),te=H===-1?D:H;if(B>te){V=_.lastIndexOf(";",B-1)+1;continue}const ee=h(_,V,B),se=m(_,B,ee),O=_.slice(ee,se);if(I[O]===void 0){let k=h(_,B+1,te),R=m(_,te,k);const j=N(_.slice(k,R));I[O]=j}V=te+1}while(V<D);return I}function h(_,A,I){do{const D=_.charCodeAt(A);if(D!==32&&D!==9)return A}while(++A<I);return I}function m(_,A,I){for(;A>I;){const D=_.charCodeAt(--A);if(D!==32&&D!==9)return A+1}return I}function p(_,A,I){const D=(I==null?void 0:I.encode)||encodeURIComponent;if(!n.test(_))throw new TypeError(`argument name is invalid: ${_}`);const N=D(A);if(!e.test(N))throw new TypeError(`argument val is invalid: ${A}`);let V=_+"="+N;if(!I)return V;if(I.maxAge!==void 0){if(!Number.isInteger(I.maxAge))throw new TypeError(`option maxAge is invalid: ${I.maxAge}`);V+="; Max-Age="+I.maxAge}if(I.domain){if(!t.test(I.domain))throw new TypeError(`option domain is invalid: ${I.domain}`);V+="; Domain="+I.domain}if(I.path){if(!r.test(I.path))throw new TypeError(`option path is invalid: ${I.path}`);V+="; Path="+I.path}if(I.expires){if(!b(I.expires)||!Number.isFinite(I.expires.valueOf()))throw new TypeError(`option expires is invalid: ${I.expires}`);V+="; Expires="+I.expires.toUTCString()}if(I.httpOnly&&(V+="; HttpOnly"),I.secure&&(V+="; Secure"),I.partitioned&&(V+="; Partitioned"),I.priority)switch(typeof I.priority=="string"?I.priority.toLowerCase():void 0){case"low":V+="; Priority=Low";break;case"medium":V+="; Priority=Medium";break;case"high":V+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${I.priority}`)}if(I.sameSite)switch(typeof I.sameSite=="string"?I.sameSite.toLowerCase():I.sameSite){case!0:case"strict":V+="; SameSite=Strict";break;case"lax":V+="; SameSite=Lax";break;case"none":V+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${I.sameSite}`)}return V}function v(_){if(_.indexOf("%")===-1)return _;try{return decodeURIComponent(_)}catch{return _}}function b(_){return a.call(_)==="[object Date]"}return su}yN();var xw="popstate";function vN(n={}){function e(r,a){let{pathname:l,search:c,hash:h}=r.location;return _p("",{pathname:l,search:c,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(r,a){return typeof a=="string"?a:Pu(a)}return bN(e,t,null,n)}function vt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function _r(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function xN(){return Math.random().toString(36).substring(2,10)}function bw(n,e){return{usr:n.state,key:n.key,idx:e}}function _p(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ml(e):e,state:t,key:e&&e.key||r||xN()}}function Pu({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ml(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function bN(n,e,t,r={}){let{window:a=document.defaultView,v5Compat:l=!1}=r,c=a.history,h="POP",m=null,p=v();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function v(){return(c.state||{idx:null}).idx}function b(){h="POP";let N=v(),V=N==null?null:N-p;p=N,m&&m({action:h,location:D.location,delta:V})}function _(N,V){h="PUSH";let B=_p(D.location,N,V);p=v()+1;let H=bw(B,p),te=D.createHref(B);try{c.pushState(H,"",te)}catch(ee){if(ee instanceof DOMException&&ee.name==="DataCloneError")throw ee;a.location.assign(te)}l&&m&&m({action:h,location:D.location,delta:1})}function A(N,V){h="REPLACE";let B=_p(D.location,N,V);p=v();let H=bw(B,p),te=D.createHref(B);c.replaceState(H,"",te),l&&m&&m({action:h,location:D.location,delta:0})}function I(N){return _N(N)}let D={get action(){return h},get location(){return n(a,c)},listen(N){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(xw,b),m=N,()=>{a.removeEventListener(xw,b),m=null}},createHref(N){return e(a,N)},createURL:I,encodeLocation(N){let V=I(N);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:_,replace:A,go(N){return c.go(N)}};return D}function _N(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),vt(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Pu(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function $2(n,e,t="/"){return wN(n,e,t,!1)}function wN(n,e,t,r){let a=typeof e=="string"?Ml(e):e,l=Rs(a.pathname||"/",t);if(l==null)return null;let c=Q2(n);EN(c);let h=null;for(let m=0;h==null&&m<c.length;++m){let p=PN(l);h=jN(c[m],p,r)}return h}function Q2(n,e=[],t=[],r=""){let a=(l,c,h)=>{let m={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};m.relativePath.startsWith("/")&&(vt(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length));let p=Ns([r,m.relativePath]),v=t.concat(m);l.children&&l.children.length>0&&(vt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),Q2(l.children,e,v,p)),!(l.path==null&&!l.index)&&e.push({path:p,score:CN(p,l.index),routesMeta:v})};return n.forEach((l,c)=>{var h;if(l.path===""||!((h=l.path)!=null&&h.includes("?")))a(l,c);else for(let m of Y2(l.path))a(l,c,m)}),e}function Y2(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let c=Y2(r.join("/")),h=[];return h.push(...c.map(m=>m===""?l:[l,m].join("/"))),a&&h.push(...c),h.map(m=>n.startsWith("/")&&m===""?"/":m)}function EN(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:RN(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var TN=/^:[\w-]+$/,AN=3,SN=2,kN=1,IN=10,NN=-2,_w=n=>n==="*";function CN(n,e){let t=n.split("/"),r=t.length;return t.some(_w)&&(r+=NN),e&&(r+=SN),t.filter(a=>!_w(a)).reduce((a,l)=>a+(TN.test(l)?AN:l===""?kN:IN),r)}function RN(n,e){return n.length===e.length&&n.slice(0,-1).every((r,a)=>r===e[a])?n[n.length-1]-e[e.length-1]:0}function jN(n,e,t=!1){let{routesMeta:r}=n,a={},l="/",c=[];for(let h=0;h<r.length;++h){let m=r[h],p=h===r.length-1,v=l==="/"?e:e.slice(l.length)||"/",b=bf({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},v),_=m.route;if(!b&&p&&t&&!r[r.length-1].route.index&&(b=bf({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},v)),!b)return null;Object.assign(a,b.params),c.push({params:a,pathname:Ns([l,b.pathname]),pathnameBase:LN(Ns([l,b.pathnameBase])),route:_}),b.pathnameBase!=="/"&&(l=Ns([l,b.pathnameBase]))}return c}function bf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=DN(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:r.reduce((p,{paramName:v,isOptional:b},_)=>{if(v==="*"){let I=h[_]||"";c=l.slice(0,l.length-I.length).replace(/(.)\/+$/,"$1")}const A=h[_];return b&&!A?p[v]=void 0:p[v]=(A||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:c,pattern:n}}function DN(n,e=!1,t=!0){_r(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,m)=>(r.push({paramName:h,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function PN(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return _r(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Rs(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function ON(n,e="/"){let{pathname:t,search:r="",hash:a=""}=typeof n=="string"?Ml(n):n;return{pathname:t?t.startsWith("/")?t:MN(t,e):e,search:UN(r),hash:BN(a)}}function MN(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function G0(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function VN(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function cy(n){let e=VN(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function uy(n,e,t,r=!1){let a;typeof n=="string"?a=Ml(n):(a={...n},vt(!a.pathname||!a.pathname.includes("?"),G0("?","pathname","search",a)),vt(!a.pathname||!a.pathname.includes("#"),G0("#","pathname","hash",a)),vt(!a.search||!a.search.includes("#"),G0("#","search","hash",a)));let l=n===""||a.pathname==="",c=l?"/":a.pathname,h;if(c==null)h=t;else{let b=e.length-1;if(!r&&c.startsWith("..")){let _=c.split("/");for(;_[0]==="..";)_.shift(),b-=1;a.pathname=_.join("/")}h=b>=0?e[b]:"/"}let m=ON(a,h),p=c&&c!=="/"&&c.endsWith("/"),v=(l||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(p||v)&&(m.pathname+="/"),m}var Ns=n=>n.join("/").replace(/\/\/+/g,"/"),LN=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),UN=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,BN=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function zN(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var W2=["POST","PUT","PATCH","DELETE"];new Set(W2);var FN=["GET",...W2];new Set(FN);var Vl=C.createContext(null);Vl.displayName="DataRouter";var tm=C.createContext(null);tm.displayName="DataRouterState";var X2=C.createContext({isTransitioning:!1});X2.displayName="ViewTransition";var qN=C.createContext(new Map);qN.displayName="Fetchers";var HN=C.createContext(null);HN.displayName="Await";var Tr=C.createContext(null);Tr.displayName="Navigation";var ed=C.createContext(null);ed.displayName="Location";var ur=C.createContext({outlet:null,matches:[],isDataRoute:!1});ur.displayName="Route";var dy=C.createContext(null);dy.displayName="RouteError";function GN(n,{relative:e}={}){vt(Ll(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=C.useContext(Tr),{hash:a,pathname:l,search:c}=td(n,{relative:e}),h=l;return t!=="/"&&(h=l==="/"?t:Ns([t,l])),r.createHref({pathname:h,search:c,hash:a})}function Ll(){return C.useContext(ed)!=null}function Ar(){return vt(Ll(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(ed).location}var J2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Z2(n){C.useContext(Tr).static||C.useLayoutEffect(n)}function nm(){let{isDataRoute:n}=C.useContext(ur);return n?a5():KN()}function KN(){vt(Ll(),"useNavigate() may be used only in the context of a <Router> component.");let n=C.useContext(Vl),{basename:e,navigator:t}=C.useContext(Tr),{matches:r}=C.useContext(ur),{pathname:a}=Ar(),l=JSON.stringify(cy(r)),c=C.useRef(!1);return Z2(()=>{c.current=!0}),C.useCallback((m,p={})=>{if(_r(c.current,J2),!c.current)return;if(typeof m=="number"){t.go(m);return}let v=uy(m,JSON.parse(l),a,p.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Ns([e,v.pathname])),(p.replace?t.replace:t.push)(v,p.state,p)},[e,t,l,a,n])}var $N=C.createContext(null);function QN(n){let e=C.useContext(ur).outlet;return e&&C.createElement($N.Provider,{value:n},e)}function eE(){let{matches:n}=C.useContext(ur),e=n[n.length-1];return e?e.params:{}}function td(n,{relative:e}={}){let{matches:t}=C.useContext(ur),{pathname:r}=Ar(),a=JSON.stringify(cy(t));return C.useMemo(()=>uy(n,JSON.parse(a),r,e==="path"),[n,a,r,e])}function YN(n,e){return tE(n,e)}function tE(n,e,t,r){var V;vt(Ll(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=C.useContext(Tr),{matches:l}=C.useContext(ur),c=l[l.length-1],h=c?c.params:{},m=c?c.pathname:"/",p=c?c.pathnameBase:"/",v=c&&c.route;{let B=v&&v.path||"";nE(m,!v||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let b=Ar(),_;if(e){let B=typeof e=="string"?Ml(e):e;vt(p==="/"||((V=B.pathname)==null?void 0:V.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${B.pathname}" was given in the \`location\` prop.`),_=B}else _=b;let A=_.pathname||"/",I=A;if(p!=="/"){let B=p.replace(/^\//,"").split("/");I="/"+A.replace(/^\//,"").split("/").slice(B.length).join("/")}let D=$2(n,{pathname:I});_r(v||D!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),_r(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let N=e5(D&&D.map(B=>Object.assign({},B,{params:Object.assign({},h,B.params),pathname:Ns([p,a.encodeLocation?a.encodeLocation(B.pathname).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?p:Ns([p,a.encodeLocation?a.encodeLocation(B.pathnameBase).pathname:B.pathnameBase])})),l,t,r);return e&&N?C.createElement(ed.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},N):N}function WN(){let n=i5(),e=zN(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:l},"ErrorBoundary")," or"," ",C.createElement("code",{style:l},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),t?C.createElement("pre",{style:a},t):null,c)}var XN=C.createElement(WN,null),JN=class extends C.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?C.createElement(ur.Provider,{value:this.props.routeContext},C.createElement(dy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ZN({routeContext:n,match:e,children:t}){let r=C.useContext(Vl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),C.createElement(ur.Provider,{value:n},t)}function e5(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,l=t==null?void 0:t.errors;if(l!=null){let m=a.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);vt(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,m+1))}let c=!1,h=-1;if(t)for(let m=0;m<a.length;m++){let p=a[m];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=m),p.route.id){let{loaderData:v,errors:b}=t,_=p.route.loader&&!v.hasOwnProperty(p.route.id)&&(!b||b[p.route.id]===void 0);if(p.route.lazy||_){c=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((m,p,v)=>{let b,_=!1,A=null,I=null;t&&(b=l&&p.route.id?l[p.route.id]:void 0,A=p.route.errorElement||XN,c&&(h<0&&v===0?(nE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,I=null):h===v&&(_=!0,I=p.route.hydrateFallbackElement||null)));let D=e.concat(a.slice(0,v+1)),N=()=>{let V;return b?V=A:_?V=I:p.route.Component?V=C.createElement(p.route.Component,null):p.route.element?V=p.route.element:V=m,C.createElement(ZN,{match:p,routeContext:{outlet:m,matches:D,isDataRoute:t!=null},children:V})};return t&&(p.route.ErrorBoundary||p.route.errorElement||v===0)?C.createElement(JN,{location:t.location,revalidation:t.revalidation,component:A,error:b,children:N(),routeContext:{outlet:null,matches:D,isDataRoute:!0}}):N()},null)}function hy(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function t5(n){let e=C.useContext(Vl);return vt(e,hy(n)),e}function n5(n){let e=C.useContext(tm);return vt(e,hy(n)),e}function r5(n){let e=C.useContext(ur);return vt(e,hy(n)),e}function fy(n){let e=r5(n),t=e.matches[e.matches.length-1];return vt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function s5(){return fy("useRouteId")}function i5(){var r;let n=C.useContext(dy),e=n5("useRouteError"),t=fy("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function a5(){let{router:n}=t5("useNavigate"),e=fy("useNavigate"),t=C.useRef(!1);return Z2(()=>{t.current=!0}),C.useCallback(async(a,l={})=>{_r(t.current,J2),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var ww={};function nE(n,e,t){!e&&!ww[n]&&(ww[n]=!0,_r(!1,t))}C.memo(o5);function o5({routes:n,future:e,state:t}){return tE(n,void 0,t,e)}function l5({to:n,replace:e,state:t,relative:r}){vt(Ll(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=C.useContext(Tr);_r(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=C.useContext(ur),{pathname:c}=Ar(),h=nm(),m=uy(n,cy(l),c,r==="path"),p=JSON.stringify(m);return C.useEffect(()=>{h(JSON.parse(p),{replace:e,state:t,relative:r})},[h,p,r,e,t]),null}function c5(n){return QN(n.context)}function hn(n){vt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function u5({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:a,static:l=!1}){vt(!Ll(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),h=C.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof t=="string"&&(t=Ml(t));let{pathname:m="/",search:p="",hash:v="",state:b=null,key:_="default"}=t,A=C.useMemo(()=>{let I=Rs(m,c);return I==null?null:{location:{pathname:I,search:p,hash:v,state:b,key:_},navigationType:r}},[c,m,p,v,b,_,r]);return _r(A!=null,`<Router basename="${c}"> is not able to match the URL "${m}${p}${v}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:C.createElement(Tr.Provider,{value:h},C.createElement(ed.Provider,{children:e,value:A}))}function d5({children:n,location:e}){return YN(wp(n),e)}function wp(n,e=[]){let t=[];return C.Children.forEach(n,(r,a)=>{if(!C.isValidElement(r))return;let l=[...e,a];if(r.type===C.Fragment){t.push.apply(t,wp(r.props.children,l));return}vt(r.type===hn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),vt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=wp(r.props.children,l)),t.push(c)}),t}var ef="get",tf="application/x-www-form-urlencoded";function rm(n){return n!=null&&typeof n.tagName=="string"}function h5(n){return rm(n)&&n.tagName.toLowerCase()==="button"}function f5(n){return rm(n)&&n.tagName.toLowerCase()==="form"}function m5(n){return rm(n)&&n.tagName.toLowerCase()==="input"}function g5(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function p5(n,e){return n.button===0&&(!e||e==="_self")&&!g5(n)}var Fh=null;function y5(){if(Fh===null)try{new FormData(document.createElement("form"),0),Fh=!1}catch{Fh=!0}return Fh}var v5=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function K0(n){return n!=null&&!v5.has(n)?(_r(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${tf}"`),null):n}function x5(n,e){let t,r,a,l,c;if(f5(n)){let h=n.getAttribute("action");r=h?Rs(h,e):null,t=n.getAttribute("method")||ef,a=K0(n.getAttribute("enctype"))||tf,l=new FormData(n)}else if(h5(n)||m5(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||h.getAttribute("action");if(r=m?Rs(m,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||ef,a=K0(n.getAttribute("formenctype"))||K0(h.getAttribute("enctype"))||tf,l=new FormData(h,n),!y5()){let{name:p,type:v,value:b}=n;if(v==="image"){let _=p?`${p}.`:"";l.append(`${_}x`,"0"),l.append(`${_}y`,"0")}else p&&l.append(p,b)}}else{if(rm(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=ef,r=null,a=tf,c=n}return l&&a==="text/plain"&&(c=l,l=void 0),{action:r,method:t.toLowerCase(),encType:a,formData:l,body:c}}function my(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function b5(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function _5(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function w5(n,e,t){let r=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await b5(l,t);return c.links?c.links():[]}return[]}));return S5(r.flat(1).filter(_5).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Ew(n,e,t,r,a,l){let c=(m,p)=>t[p]?m.route.id!==t[p].route.id:!0,h=(m,p)=>{var v;return t[p].pathname!==m.pathname||((v=t[p].route.path)==null?void 0:v.endsWith("*"))&&t[p].params["*"]!==m.params["*"]};return l==="assets"?e.filter((m,p)=>c(m,p)||h(m,p)):l==="data"?e.filter((m,p)=>{var b;let v=r.routes[m.route.id];if(!v||!v.hasLoader)return!1;if(c(m,p)||h(m,p))return!0;if(m.route.shouldRevalidate){let _=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((b=t[0])==null?void 0:b.params)||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function E5(n,e,{includeHydrateFallback:t}={}){return T5(n.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function T5(n){return[...new Set(n)]}function A5(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function S5(n,e){let t=new Set;return new Set(e),n.reduce((r,a)=>{let l=JSON.stringify(A5(a));return t.has(l)||(t.add(l),r.push({key:l,link:a})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var k5=new Set([100,101,204,205]);function I5(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Rs(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function rE(){let n=C.useContext(Vl);return my(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function N5(){let n=C.useContext(tm);return my(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var gy=C.createContext(void 0);gy.displayName="FrameworkContext";function sE(){let n=C.useContext(gy);return my(n,"You must render this element inside a <HydratedRouter> element"),n}function C5(n,e){let t=C.useContext(gy),[r,a]=C.useState(!1),[l,c]=C.useState(!1),{onFocus:h,onBlur:m,onMouseEnter:p,onMouseLeave:v,onTouchStart:b}=e,_=C.useRef(null);C.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let D=V=>{V.forEach(B=>{c(B.isIntersecting)})},N=new IntersectionObserver(D,{threshold:.5});return _.current&&N.observe(_.current),()=>{N.disconnect()}}},[n]),C.useEffect(()=>{if(r){let D=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(D)}}},[r]);let A=()=>{a(!0)},I=()=>{a(!1),c(!1)};return t?n!=="intent"?[l,_,{}]:[l,_,{onFocus:iu(h,A),onBlur:iu(m,I),onMouseEnter:iu(p,A),onMouseLeave:iu(v,I),onTouchStart:iu(b,A)}]:[!1,_,{}]}function iu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function R5({page:n,...e}){let{router:t}=rE(),r=C.useMemo(()=>$2(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?C.createElement(D5,{page:n,matches:r,...e}):null}function j5(n){let{manifest:e,routeModules:t}=sE(),[r,a]=C.useState([]);return C.useEffect(()=>{let l=!1;return w5(n,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[n,e,t]),r}function D5({page:n,matches:e,...t}){let r=Ar(),{manifest:a,routeModules:l}=sE(),{basename:c}=rE(),{loaderData:h,matches:m}=N5(),p=C.useMemo(()=>Ew(n,e,m,a,r,"data"),[n,e,m,a,r]),v=C.useMemo(()=>Ew(n,e,m,a,r,"assets"),[n,e,m,a,r]),b=C.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let I=new Set,D=!1;if(e.forEach(V=>{var H;let B=a.routes[V.route.id];!B||!B.hasLoader||(!p.some(te=>te.route.id===V.route.id)&&V.route.id in h&&((H=l[V.route.id])!=null&&H.shouldRevalidate)||B.hasClientLoader?D=!0:I.add(V.route.id))}),I.size===0)return[];let N=I5(n,c);return D&&I.size>0&&N.searchParams.set("_routes",e.filter(V=>I.has(V.route.id)).map(V=>V.route.id).join(",")),[N.pathname+N.search]},[c,h,r,a,p,e,n,l]),_=C.useMemo(()=>E5(v,a),[v,a]),A=j5(v);return C.createElement(C.Fragment,null,b.map(I=>C.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...t})),_.map(I=>C.createElement("link",{key:I,rel:"modulepreload",href:I,...t})),A.map(({key:I,link:D})=>C.createElement("link",{key:I,...D})))}function P5(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var iE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{iE&&(window.__reactRouterVersion="7.6.2")}catch{}function O5({basename:n,children:e,window:t}){let r=C.useRef();r.current==null&&(r.current=vN({window:t,v5Compat:!0}));let a=r.current,[l,c]=C.useState({action:a.action,location:a.location}),h=C.useCallback(m=>{C.startTransition(()=>c(m))},[c]);return C.useLayoutEffect(()=>a.listen(h),[a,h]),C.createElement(u5,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:a})}var aE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,py=C.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:a,reloadDocument:l,replace:c,state:h,target:m,to:p,preventScrollReset:v,viewTransition:b,..._},A){let{basename:I}=C.useContext(Tr),D=typeof p=="string"&&aE.test(p),N,V=!1;if(typeof p=="string"&&D&&(N=p,iE))try{let R=new URL(window.location.href),j=p.startsWith("//")?new URL(R.protocol+p):new URL(p),L=Rs(j.pathname,I);j.origin===R.origin&&L!=null?p=L+j.search+j.hash:V=!0}catch{_r(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let B=GN(p,{relative:a}),[H,te,ee]=C5(r,_),se=U5(p,{replace:c,state:h,target:m,preventScrollReset:v,relative:a,viewTransition:b});function O(R){e&&e(R),R.defaultPrevented||se(R)}let k=C.createElement("a",{..._,...ee,href:N||B,onClick:V||l?e:O,ref:P5(A,te),target:m,"data-discover":!D&&t==="render"?"true":void 0});return H&&!D?C.createElement(C.Fragment,null,k,C.createElement(R5,{page:B})):k});py.displayName="Link";var M5=C.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:a=!1,style:l,to:c,viewTransition:h,children:m,...p},v){let b=td(c,{relative:p.relative}),_=Ar(),A=C.useContext(tm),{navigator:I,basename:D}=C.useContext(Tr),N=A!=null&&H5(b)&&h===!0,V=I.encodeLocation?I.encodeLocation(b).pathname:b.pathname,B=_.pathname,H=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;t||(B=B.toLowerCase(),H=H?H.toLowerCase():null,V=V.toLowerCase()),H&&D&&(H=Rs(H,D)||H);const te=V!=="/"&&V.endsWith("/")?V.length-1:V.length;let ee=B===V||!a&&B.startsWith(V)&&B.charAt(te)==="/",se=H!=null&&(H===V||!a&&H.startsWith(V)&&H.charAt(V.length)==="/"),O={isActive:ee,isPending:se,isTransitioning:N},k=ee?e:void 0,R;typeof r=="function"?R=r(O):R=[r,ee?"active":null,se?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let j=typeof l=="function"?l(O):l;return C.createElement(py,{...p,"aria-current":k,className:R,ref:v,style:j,to:c,viewTransition:h},typeof m=="function"?m(O):m)});M5.displayName="NavLink";var V5=C.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:a,state:l,method:c=ef,action:h,onSubmit:m,relative:p,preventScrollReset:v,viewTransition:b,..._},A)=>{let I=F5(),D=q5(h,{relative:p}),N=c.toLowerCase()==="get"?"get":"post",V=typeof h=="string"&&aE.test(h),B=H=>{if(m&&m(H),H.defaultPrevented)return;H.preventDefault();let te=H.nativeEvent.submitter,ee=(te==null?void 0:te.getAttribute("formmethod"))||c;I(te||H.currentTarget,{fetcherKey:e,method:ee,navigate:t,replace:a,state:l,relative:p,preventScrollReset:v,viewTransition:b})};return C.createElement("form",{ref:A,method:N,action:D,onSubmit:r?m:B,..._,"data-discover":!V&&n==="render"?"true":void 0})});V5.displayName="Form";function L5(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function oE(n){let e=C.useContext(Vl);return vt(e,L5(n)),e}function U5(n,{target:e,replace:t,state:r,preventScrollReset:a,relative:l,viewTransition:c}={}){let h=nm(),m=Ar(),p=td(n,{relative:l});return C.useCallback(v=>{if(p5(v,e)){v.preventDefault();let b=t!==void 0?t:Pu(m)===Pu(p);h(n,{replace:b,state:r,preventScrollReset:a,relative:l,viewTransition:c})}},[m,h,p,t,r,e,n,a,l,c])}var B5=0,z5=()=>`__${String(++B5)}__`;function F5(){let{router:n}=oE("useSubmit"),{basename:e}=C.useContext(Tr),t=s5();return C.useCallback(async(r,a={})=>{let{action:l,method:c,encType:h,formData:m,body:p}=x5(r,e);if(a.navigate===!1){let v=a.fetcherKey||z5();await n.fetch(v,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:p,formMethod:a.method||c,formEncType:a.encType||h,flushSync:a.flushSync})}else await n.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:p,formMethod:a.method||c,formEncType:a.encType||h,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function q5(n,{relative:e}={}){let{basename:t}=C.useContext(Tr),r=C.useContext(ur);vt(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),l={...td(n||".",{relative:e})},c=Ar();if(n==null){l.search=c.search;let h=new URLSearchParams(l.search),m=h.getAll("index");if(m.some(v=>v==="")){h.delete("index"),m.filter(b=>b).forEach(b=>h.append("index",b));let v=h.toString();l.search=v?`?${v}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Ns([t,l.pathname])),Pu(l)}function H5(n,e={}){let t=C.useContext(X2);vt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=oE("useViewTransitionState"),a=td(n,{relative:e.relative});if(!t.isTransitioning)return!1;let l=Rs(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=Rs(t.nextLocation.pathname,r)||t.nextLocation.pathname;return bf(a.pathname,c)!=null||bf(a.pathname,l)!=null}[...k5];const G5="modulepreload",K5=function(n){return"/"+n},Tw={},$5=function(e,t,r){let a=Promise.resolve();if(t&&t.length>0){let c=function(p){return Promise.all(p.map(v=>Promise.resolve(v).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),m=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));a=c(t.map(p=>{if(p=K5(p),p in Tw)return;Tw[p]=!0;const v=p.endsWith(".css"),b=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${b}`))return;const _=document.createElement("link");if(_.rel=v?"stylesheet":G5,v||(_.as="script"),_.crossOrigin="",_.href=p,m&&_.setAttribute("nonce",m),document.head.appendChild(_),v)return new Promise((A,I)=>{_.addEventListener("load",A),_.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(c){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=c,window.dispatchEvent(h),!h.defaultPrevented)throw c}return a.then(c=>{for(const h of c||[])h.status==="rejected"&&l(h.reason);return e().catch(l)})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var fl;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(fl||(fl={}));class $0 extends Error{constructor(e,t,r){super(e),this.message=e,this.code=t,this.data=r}}const Q5=n=>{var e,t;return n!=null&&n.androidBridge?"android":!((t=(e=n==null?void 0:n.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},Y5=n=>{const e=n.CapacitorCustomPlatform||null,t=n.Capacitor||{},r=t.Plugins=t.Plugins||{},a=()=>e!==null?e.name:Q5(n),l=()=>a()!=="web",c=b=>{const _=p.get(b);return!!(_!=null&&_.platforms.has(a())||h(b))},h=b=>{var _;return(_=t.PluginHeaders)===null||_===void 0?void 0:_.find(A=>A.name===b)},m=b=>n.console.error(b),p=new Map,v=(b,_={})=>{const A=p.get(b);if(A)return console.warn(`Capacitor plugin "${b}" already registered. Cannot register plugins twice.`),A.proxy;const I=a(),D=h(b);let N;const V=async()=>(!N&&I in _?N=typeof _[I]=="function"?N=await _[I]():N=_[I]:e!==null&&!N&&"web"in _&&(N=typeof _.web=="function"?N=await _.web():N=_.web),N),B=(k,R)=>{var j,L;if(D){const F=D==null?void 0:D.methods.find(P=>R===P.name);if(F)return F.rtype==="promise"?P=>t.nativePromise(b,R.toString(),P):(P,Ze)=>t.nativeCallback(b,R.toString(),P,Ze);if(k)return(j=k[R])===null||j===void 0?void 0:j.bind(k)}else{if(k)return(L=k[R])===null||L===void 0?void 0:L.bind(k);throw new $0(`"${b}" plugin is not implemented on ${I}`,fl.Unimplemented)}},H=k=>{let R;const j=(...L)=>{const F=V().then(P=>{const Ze=B(P,k);if(Ze){const Ke=Ze(...L);return R=Ke==null?void 0:Ke.remove,Ke}else throw new $0(`"${b}.${k}()" is not implemented on ${I}`,fl.Unimplemented)});return k==="addListener"&&(F.remove=async()=>R()),F};return j.toString=()=>`${k.toString()}() { [capacitor code] }`,Object.defineProperty(j,"name",{value:k,writable:!1,configurable:!1}),j},te=H("addListener"),ee=H("removeListener"),se=(k,R)=>{const j=te({eventName:k},R),L=async()=>{const P=await j;ee({eventName:k,callbackId:P},R)},F=new Promise(P=>j.then(()=>P({remove:L})));return F.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await L()},F},O=new Proxy({},{get(k,R){switch(R){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return D?se:te;case"removeListener":return ee;default:return H(R)}}});return r[b]=O,p.set(b,{name:b,proxy:O,platforms:new Set([...Object.keys(_),...D?[I]:[]])}),O};return t.convertFileSrc||(t.convertFileSrc=b=>b),t.getPlatform=a,t.handleError=m,t.isNativePlatform=l,t.isPluginAvailable=c,t.registerPlugin=v,t.Exception=$0,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},W5=n=>n.Capacitor=Y5(n),_f=W5(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),sm=_f.registerPlugin;class lE{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(t);const l=this.windowListeners[e];l&&!l.registered&&this.addWindowListener(l),r&&this.sendRetainedArgumentsForEvent(e);const c=async()=>this.removeListener(e,t);return Promise.resolve({remove:c})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,r){const a=this.listeners[e];if(!a){if(r){let l=this.retainedEventArguments[e];l||(l=[]),l.push(t),this.retainedEventArguments[e]=l}return}a.forEach(l=>l(t))}hasListeners(e){var t;return!!(!((t=this.listeners[e])===null||t===void 0)&&t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:r=>{this.notifyListeners(t,r)}}}unimplemented(e="not implemented"){return new _f.Exception(e,fl.Unimplemented)}unavailable(e="not available"){return new _f.Exception(e,fl.Unavailable)}async removeListener(e,t){const r=this.listeners[e];if(!r)return;const a=r.indexOf(t);this.listeners[e].splice(a,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(r=>{this.notifyListeners(e,r)}))}}const Aw=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Sw=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class X5 extends lE{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[a,l]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");a=Sw(a).trim(),l=Sw(l).trim(),t[a]=l}),t}async setCookie(e){try{const t=Aw(e.key),r=Aw(e.value),a=`; expires=${(e.expires||"").replace("expires=","")}`,l=(e.path||"/").replace("path=",""),c=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${r||""}${a}; path=${l}; ${c};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}sm("CapacitorCookies",{web:()=>new X5});const J5=async n=>new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{const a=r.result;e(a.indexOf(",")>=0?a.split(",")[1]:a)},r.onerror=a=>t(a),r.readAsDataURL(n)}),Z5=(n={})=>{const e=Object.keys(n);return Object.keys(n).map(a=>a.toLocaleLowerCase()).reduce((a,l,c)=>(a[l]=n[e[c]],a),{})},eC=(n,e=!0)=>n?Object.entries(n).reduce((r,a)=>{const[l,c]=a;let h,m;return Array.isArray(c)?(m="",c.forEach(p=>{h=e?encodeURIComponent(p):p,m+=`${l}=${h}&`}),m.slice(0,-1)):(h=e?encodeURIComponent(c):c,m=`${l}=${h}`),`${r}&${m}`},"").substr(1):null,tC=(n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),a=Z5(n.headers)["content-type"]||"";if(typeof n.data=="string")t.body=n.data;else if(a.includes("application/x-www-form-urlencoded")){const l=new URLSearchParams;for(const[c,h]of Object.entries(n.data||{}))l.set(c,h);t.body=l.toString()}else if(a.includes("multipart/form-data")||n.data instanceof FormData){const l=new FormData;if(n.data instanceof FormData)n.data.forEach((h,m)=>{l.append(m,h)});else for(const h of Object.keys(n.data))l.append(h,n.data[h]);t.body=l;const c=new Headers(t.headers);c.delete("content-type"),t.headers=c}else(a.includes("application/json")||typeof n.data=="object")&&(t.body=JSON.stringify(n.data));return t};class nC extends lE{async request(e){const t=tC(e,e.webFetchExtra),r=eC(e.params,e.shouldEncodeUrlParams),a=r?`${e.url}?${r}`:e.url,l=await fetch(a,t),c=l.headers.get("content-type")||"";let{responseType:h="text"}=l.ok?e:{};c.includes("application/json")&&(h="json");let m,p;switch(h){case"arraybuffer":case"blob":p=await l.blob(),m=await J5(p);break;case"json":m=await l.json();break;case"document":case"text":default:m=await l.text()}const v={};return l.headers.forEach((b,_)=>{v[_]=b}),{data:m,headers:v,status:l.status,url:l.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}sm("CapacitorHttp",{web:()=>new nC});const kw=sm("App",{web:()=>$5(()=>import("./web-BwKWixZn.js"),[]).then(n=>new n.AppWeb)}),Yo=sm("PushNotifications",{});var nd=(n=>(n.LOGIN="LOGIN",n.SIGNUP="SIGNUP",n.MAIN="MAIN",n.SETTINGS="SETTINGS",n.CART="CART",n.CHAT_DETAIL="CHAT_DETAIL",n.POST_DETAIL="POST_DETAIL",n.PAYMENT_DETAILS="PAYMENT_DETAILS",n.UPI_PAYMENT="UPI_PAYMENT",n.ADMIN_DASHBOARD="admin_dashboard",n))(nd||{}),fn=(n=>(n.HOME="HOME",n.STORE="STORE",n.COMMUNITY="COMMUNITY",n.CHATS="CHATS",n.PROFILE="PROFILE",n))(fn||{}),Pe=(n=>(n.CREATE_POST="CREATE_POST",n.TESTIMONIALS="TESTIMONIALS",n.PRIVACY_POLICY="PRIVACY_POLICY",n.HELP_SUPPORT="HELP_SUPPORT",n.OFFLINE_DOWNLOADS_LIST="OFFLINE_DOWNLOADS_LIST",n.FREE_MATERIAL_LIST="FREE_MATERIAL_LIST",n.ANNOUNCEMENT_DETAIL="ANNOUNCEMENT_DETAIL",n.EVENT_DETAIL="EVENT_DETAIL",n.NOTIFICATION_SETTINGS="NOTIFICATION_SETTINGS",n.CHANGE_PASSWORD="CHANGE_PASSWORD",n.TERMS_AND_CONDITIONS="TERMS_AND_CONDITIONS",n.ACKNOWLEDGEMENTS="ACKNOWLEDGEMENTS",n.ORDER_SUCCESS_MODAL="ORDER_SUCCESS_MODAL",n.FORGOT_PASSWORD="FORGOT_PASSWORD",n.VIEW_FREE_MATERIAL_CONTENT="VIEW_FREE_MATERIAL_CONTENT",n.ADD_PRODUCT="ADD_PRODUCT",n))(Pe||{});const rC=()=>{};var Iw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let a=n.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},sC=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const a=n[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],c=n[t++],h=n[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],c=n[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},uE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<n.length;a+=3){const l=n[a],c=a+1<n.length,h=c?n[a+1]:0,m=a+2<n.length,p=m?n[a+2]:0,v=l>>2,b=(l&3)<<4|h>>4;let _=(h&15)<<2|p>>6,A=p&63;m||(A=64,c||(_=64)),r.push(t[v],t[b],t[_],t[A])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(cE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):sC(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],h=a<n.length?t[n.charAt(a)]:0;++a;const p=a<n.length?t[n.charAt(a)]:64;++a;const b=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||h==null||p==null||b==null)throw new iC;const _=l<<2|h>>4;if(r.push(_),p!==64){const A=h<<4&240|p>>2;if(r.push(A),b!==64){const I=p<<6&192|b;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class iC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const aC=function(n){const e=cE(n);return uE.encodeByteArray(e,!0)},wf=function(n){return aC(n).replace(/\./g,"")},dE=function(n){try{return uE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC=()=>hE().__FIREBASE_DEFAULTS__,lC=()=>{if(typeof process>"u"||typeof Iw>"u")return;const n=Iw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},cC=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&dE(n[1]);return e&&JSON.parse(e)},im=()=>{try{return rC()||oC()||lC()||cC()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},fE=n=>{var e,t;return(t=(e=im())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},uC=n=>{const e=fE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},mE=()=>{var n;return(n=im())===null||n===void 0?void 0:n.config},gE=n=>{var e;return(e=im())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ya(n){return n.endsWith(".cloudworkstations.dev")}async function yy(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[wf(JSON.stringify(t)),wf(JSON.stringify(c)),""].join(".")}const _u={};function fC(){const n={prod:[],emulator:[]};for(const e of Object.keys(_u))_u[e]?n.emulator.push(e):n.prod.push(e);return n}function mC(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Nw=!1;function pE(n,e){if(typeof window>"u"||typeof document>"u"||!Ya(window.location.host)||_u[n]===e||_u[n]||Nw)return;_u[n]=e;function t(_){return`__firebase__banner__${_}`}const r="__firebase__banner",l=fC().prod.length>0;function c(){const _=document.getElementById(r);_&&_.remove()}function h(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function m(_,A){_.setAttribute("width","24"),_.setAttribute("id",A),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function p(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{Nw=!0,c()},_}function v(_,A){_.setAttribute("id",A),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function b(){const _=mC(r),A=t("text"),I=document.getElementById(A)||document.createElement("span"),D=t("learnmore"),N=document.getElementById(D)||document.createElement("a"),V=t("preprendIcon"),B=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const H=_.element;h(H),v(N,D);const te=p();m(B,V),H.append(B,I,N,te),document.body.appendChild(H)}l?(I.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gt())}function yE(){var n;const e=(n=im())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yC(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function vC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function xC(){const n=Gt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function vE(){return!yE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xE(){return!yE()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function vy(){try{return typeof indexedDB=="object"}catch{return!1}}function bE(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}function bC(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C="FirebaseError";class Sr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=_C,Object.setPrototypeOf(this,Sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wa.prototype.create)}}class Wa{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?wC(l,r):"Error",h=`${this.serviceName}: ${c} (${a}).`;return new Sr(a,h,r)}}function wC(n,e){return n.replace(EC,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const EC=/\{\$([^}]+)}/g;function TC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Va(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=n[a],c=e[a];if(Cw(l)&&Cw(c)){if(!Va(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function Cw(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function hu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function fu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function AC(n,e){const t=new SC(n,e);return t.subscribe.bind(t)}class SC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");kC(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=Q0),a.error===void 0&&(a.error=Q0),a.complete===void 0&&(a.complete=Q0);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kC(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Q0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(n){return n&&n._delegate?n._delegate:n}class cr{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new dC;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CC(e))try{this.getOrInitializeService({instanceIdentifier:wa})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=wa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=wa){return this.instances.has(e)}getOptions(e=wa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);r===h&&c.resolve(a)}return a}onInit(e,t){var r;const a=this.normalizeInstanceIdentifier(t),l=(r=this.onInitCallbacks.get(a))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&e(c,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:NC(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=wa){return this.component?this.component.multipleInstances?e:wa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function NC(n){return n===wa?void 0:n}function CC(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new IC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(qe||(qe={}));const jC={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},DC=qe.INFO,PC={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},OC=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),a=PC[e];if(a)console[a](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xy{constructor(e){this.name=e,this._logLevel=DC,this._logHandler=OC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const MC=(n,e)=>e.some(t=>n instanceof t);let Rw,jw;function VC(){return Rw||(Rw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LC(){return jw||(jw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _E=new WeakMap,Ep=new WeakMap,wE=new WeakMap,Y0=new WeakMap,by=new WeakMap;function UC(n){const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Cs(n.result)),a()},c=()=>{r(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&_E.set(t,n)}).catch(()=>{}),by.set(e,n),e}function BC(n){if(Ep.has(n))return;const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Ep.set(n,e)}let Tp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ep.get(n);if(e==="objectStoreNames")return n.objectStoreNames||wE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Cs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function zC(n){Tp=n(Tp)}function FC(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(W0(this),e,...t);return wE.set(r,e.sort?e.sort():[e]),Cs(r)}:LC().includes(n)?function(...e){return n.apply(W0(this),e),Cs(_E.get(this))}:function(...e){return Cs(n.apply(W0(this),e))}}function qC(n){return typeof n=="function"?FC(n):(n instanceof IDBTransaction&&BC(n),MC(n,VC())?new Proxy(n,Tp):n)}function Cs(n){if(n instanceof IDBRequest)return UC(n);if(Y0.has(n))return Y0.get(n);const e=qC(n);return e!==n&&(Y0.set(n,e),by.set(e,n)),e}const W0=n=>by.get(n);function am(n,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(n,e),h=Cs(c);return r&&c.addEventListener("upgradeneeded",m=>{r(Cs(c.result),m.oldVersion,m.newVersion,Cs(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),h.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}function X0(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",r=>e(r.oldVersion,r)),Cs(t).then(()=>{})}const HC=["get","getKey","getAll","getAllKeys","count"],GC=["put","add","delete","clear"],J0=new Map;function Dw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(J0.get(e))return J0.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=GC.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||HC.includes(t)))return;const l=async function(c,...h){const m=this.transaction(c,a?"readwrite":"readonly");let p=m.store;return r&&(p=p.index(h.shift())),(await Promise.all([p[t](...h),a&&m.done]))[0]};return J0.set(e,l),l}zC(n=>({...n,get:(e,t,r)=>Dw(e,t)||n.get(e,t,r),has:(e,t)=>!!Dw(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if($C(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function $C(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ap="@firebase/app",Pw="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=new xy("@firebase/app"),QC="@firebase/app-compat",YC="@firebase/analytics-compat",WC="@firebase/analytics",XC="@firebase/app-check-compat",JC="@firebase/app-check",ZC="@firebase/auth",eR="@firebase/auth-compat",tR="@firebase/database",nR="@firebase/data-connect",rR="@firebase/database-compat",sR="@firebase/functions",iR="@firebase/functions-compat",aR="@firebase/installations",oR="@firebase/installations-compat",lR="@firebase/messaging",cR="@firebase/messaging-compat",uR="@firebase/performance",dR="@firebase/performance-compat",hR="@firebase/remote-config",fR="@firebase/remote-config-compat",mR="@firebase/storage",gR="@firebase/storage-compat",pR="@firebase/firestore",yR="@firebase/ai",vR="@firebase/firestore-compat",xR="firebase",bR="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp="[DEFAULT]",_R={[Ap]:"fire-core",[QC]:"fire-core-compat",[WC]:"fire-analytics",[YC]:"fire-analytics-compat",[JC]:"fire-app-check",[XC]:"fire-app-check-compat",[ZC]:"fire-auth",[eR]:"fire-auth-compat",[tR]:"fire-rtdb",[nR]:"fire-data-connect",[rR]:"fire-rtdb-compat",[sR]:"fire-fn",[iR]:"fire-fn-compat",[aR]:"fire-iid",[oR]:"fire-iid-compat",[lR]:"fire-fcm",[cR]:"fire-fcm-compat",[uR]:"fire-perf",[dR]:"fire-perf-compat",[hR]:"fire-rc",[fR]:"fire-rc-compat",[mR]:"fire-gcs",[gR]:"fire-gcs-compat",[pR]:"fire-fst",[vR]:"fire-fst-compat",[yR]:"fire-vertex","fire-js":"fire-js",[xR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ef=new Map,wR=new Map,kp=new Map;function Ow(n,e){try{n.container.addComponent(e)}catch(t){js.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function wr(n){const e=n.name;if(kp.has(e))return js.debug(`There were multiple attempts to register component ${e}.`),!1;kp.set(e,n);for(const t of Ef.values())Ow(t,n);for(const t of wR.values())Ow(t,n);return!0}function Xa(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function lr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ai=new Wa("app","Firebase",ER);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new cr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ai.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ja=bR;function EE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Sp,automaticDataCollectionEnabled:!0},e),a=r.name;if(typeof a!="string"||!a)throw Ai.create("bad-app-name",{appName:String(a)});if(t||(t=mE()),!t)throw Ai.create("no-options");const l=Ef.get(a);if(l){if(Va(t,l.options)&&Va(r,l.config))return l;throw Ai.create("duplicate-app",{appName:a})}const c=new RC(a);for(const m of kp.values())c.addComponent(m);const h=new TR(t,r,c);return Ef.set(a,h),h}function _y(n=Sp){const e=Ef.get(n);if(!e&&n===Sp&&mE())return EE();if(!e)throw Ai.create("no-app",{appName:n});return e}function jn(n,e,t){var r;let a=(r=_R[n])!==null&&r!==void 0?r:n;t&&(a+=`-${t}`);const l=a.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const h=[`Unable to register library "${a}" with version "${e}":`];l&&h.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),js.warn(h.join(" "));return}wr(new cr(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR="firebase-heartbeat-database",SR=1,Ou="firebase-heartbeat-store";let Z0=null;function TE(){return Z0||(Z0=am(AR,SR,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ou)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ai.create("idb-open",{originalErrorMessage:n.message})})),Z0}async function kR(n){try{const t=(await TE()).transaction(Ou),r=await t.objectStore(Ou).get(AE(n));return await t.done,r}catch(e){if(e instanceof Sr)js.warn(e.message);else{const t=Ai.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});js.warn(t.message)}}}async function Mw(n,e){try{const r=(await TE()).transaction(Ou,"readwrite");await r.objectStore(Ou).put(e,AE(n)),await r.done}catch(t){if(t instanceof Sr)js.warn(t.message);else{const r=Ai.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});js.warn(r.message)}}}function AE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=1024,NR=30;class CR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new jR(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Vw();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>NR){const c=DR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){js.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Vw(),{heartbeatsToSend:r,unsentEntries:a}=RR(this._heartbeatsCache.heartbeats),l=wf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return js.warn(t),""}}}function Vw(){return new Date().toISOString().substring(0,10)}function RR(n,e=IR){const t=[];let r=n.slice();for(const a of n){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),Lw(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),Lw(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class jR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vy()?bE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await kR(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return Mw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return Mw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function Lw(n){return wf(JSON.stringify({version:2,heartbeats:n})).length}function DR(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(n){wr(new cr("platform-logger",e=>new KC(e),"PRIVATE")),wr(new cr("heartbeat",e=>new CR(e),"PRIVATE")),jn(Ap,Pw,n),jn(Ap,Pw,"esm2017"),jn("fire-js","")}PR("");var OR="firebase",MR="11.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jn(OR,MR,"app");function wy(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(n);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(n,r[a])&&(t[r[a]]=n[r[a]]);return t}function SE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const VR=SE,kE=new Wa("auth","Firebase",SE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf=new xy("@firebase/auth");function LR(n,...e){Tf.logLevel<=qe.WARN&&Tf.warn(`Auth (${Ja}): ${n}`,...e)}function nf(n,...e){Tf.logLevel<=qe.ERROR&&Tf.error(`Auth (${Ja}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(n,...e){throw Ey(n,...e)}function Qr(n,...e){return Ey(n,...e)}function IE(n,e,t){const r=Object.assign(Object.assign({},VR()),{[e]:t});return new Wa("auth","Firebase",r).create(e,{appName:n.name})}function Si(n){return IE(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ey(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return kE.create(n,...e)}function Ie(n,e,...t){if(!n)throw Ey(e,...t)}function As(n){const e="INTERNAL ASSERTION FAILED: "+n;throw nf(e),new Error(e)}function Ds(n,e){n||As(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function UR(){return Uw()==="http:"||Uw()==="https:"}function Uw(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(UR()||yC()||"connection"in navigator)?navigator.onLine:!0}function zR(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ds(t>e,"Short delay should be less than long delay!"),this.isMobile=gC()||vC()}get(){return BR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(n,e){Ds(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;As("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;As("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;As("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],HR=new sd(3e4,6e4);function Za(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Oi(n,e,t,r,a={}){return CE(n,a,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const h=rd(Object.assign({key:n.config.apiKey},c)).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:e,headers:m},l);return pC()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&Ya(n.emulatorConfig.host)&&(p.credentials="include"),NE.fetch()(await RE(n,n.config.apiHost,t,h),p)})}async function CE(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},FR),e);try{const a=new KR(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw qh(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const h=l.ok?c.errorMessage:c.error.message,[m,p]=h.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw qh(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw qh(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw qh(n,"user-disabled",c);const v=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw IE(n,v,p);Er(n,v)}}catch(a){if(a instanceof Sr)throw a;Er(n,"network-request-failed",{message:String(a)})}}async function om(n,e,t,r,a={}){const l=await Oi(n,e,t,r,a);return"mfaPendingCredential"in l&&Er(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function RE(n,e,t,r){const a=`${e}${t}?${r}`,l=n,c=l.config.emulator?Ty(n.config,a):`${n.config.apiScheme}://${a}`;return qR.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function GR(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class KR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Qr(this.auth,"network-request-failed")),HR.get())})}}function qh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=Qr(n,e,r);return a.customData._tokenResponse=t,a}function Bw(n){return n!==void 0&&n.enterprise!==void 0}class $R{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return GR(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function QR(n,e){return Oi(n,"GET","/v2/recaptchaConfig",Za(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YR(n,e){return Oi(n,"POST","/v1/accounts:delete",e)}async function Af(n,e){return Oi(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function WR(n,e=!1){const t=dt(n),r=await t.getIdToken(e),a=Ay(r);Ie(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:a,token:r,authTime:wu(ep(a.auth_time)),issuedAtTime:wu(ep(a.iat)),expirationTime:wu(ep(a.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function ep(n){return Number(n)*1e3}function Ay(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return nf("JWT malformed, contained fewer than 3 sections"),null;try{const a=dE(t);return a?JSON.parse(a):(nf("Failed to decode base64 JWT payload"),null)}catch(a){return nf("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function zw(n){const e=Ay(n);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mu(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Sr&&XR(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function XR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=wu(this.lastLoginAt),this.creationTime=wu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sf(n){var e;const t=n.auth,r=await n.getIdToken(),a=await Mu(n,Af(t,{idToken:r}));Ie(a==null?void 0:a.users.length,t,"internal-error");const l=a.users[0];n._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?jE(l.providerUserInfo):[],h=e4(n.providerData,c),m=n.isAnonymous,p=!(n.email&&l.passwordHash)&&!(h!=null&&h.length),v=m?p:!1,b={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new Np(l.createdAt,l.lastLoginAt),isAnonymous:v};Object.assign(n,b)}async function ZR(n){const e=dt(n);await Sf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function e4(n,e){return[...n.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function jE(n){return n.map(e=>{var{providerId:t}=e,r=wy(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t4(n,e){const t=await CE(n,{},async()=>{const r=rd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,c=await RE(n,a,"/v1/token",`key=${l}`),h=await n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",NE.fetch()(c,{method:"POST",headers:h,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function n4(n,e){return Oi(n,"POST","/v2/accounts:revokeToken",Za(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=zw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await t4(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,c=new ll;return r&&(Ie(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),a&&(Ie(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(Ie(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ll,this.toJSON())}_performRefresh(){return As("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(n,e){Ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class vr{constructor(e){var{uid:t,auth:r,stsTokenManager:a}=e,l=wy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new JR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Np(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Mu(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return WR(this,e)}reload(){return ZR(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new vr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Sf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(lr(this.auth.app))return Promise.reject(Si(this.auth));const e=await this.getIdToken();return await Mu(this,YR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,a,l,c,h,m,p,v;const b=(r=t.displayName)!==null&&r!==void 0?r:void 0,_=(a=t.email)!==null&&a!==void 0?a:void 0,A=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,I=(c=t.photoURL)!==null&&c!==void 0?c:void 0,D=(h=t.tenantId)!==null&&h!==void 0?h:void 0,N=(m=t._redirectEventId)!==null&&m!==void 0?m:void 0,V=(p=t.createdAt)!==null&&p!==void 0?p:void 0,B=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:H,emailVerified:te,isAnonymous:ee,providerData:se,stsTokenManager:O}=t;Ie(H&&O,e,"internal-error");const k=ll.fromJSON(this.name,O);Ie(typeof H=="string",e,"internal-error"),mi(b,e.name),mi(_,e.name),Ie(typeof te=="boolean",e,"internal-error"),Ie(typeof ee=="boolean",e,"internal-error"),mi(A,e.name),mi(I,e.name),mi(D,e.name),mi(N,e.name),mi(V,e.name),mi(B,e.name);const R=new vr({uid:H,auth:e,email:_,emailVerified:te,displayName:b,isAnonymous:ee,photoURL:I,phoneNumber:A,tenantId:D,stsTokenManager:k,createdAt:V,lastLoginAt:B});return se&&Array.isArray(se)&&(R.providerData=se.map(j=>Object.assign({},j))),N&&(R._redirectEventId=N),R}static async _fromIdTokenResponse(e,t,r=!1){const a=new ll;a.updateFromServerResponse(t);const l=new vr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await Sf(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];Ie(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?jE(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),h=new ll;h.updateFromIdToken(r);const m=new vr({uid:a.localId,auth:e,stsTokenManager:h,isAnonymous:c}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Np(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,p),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw=new Map;function Ss(n){Ds(n instanceof Function,"Expected a class definition");let e=Fw.get(n);return e?(Ds(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Fw.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}DE.type="NONE";const qw=DE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(n,e,t){return`firebase:${n}:${e}:${t}`}class cl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=rf(this.userKey,a.apiKey,l),this.fullPersistenceKey=rf("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Af(this.auth,{idToken:e}).catch(()=>{});return t?vr._fromGetAccountInfoResponse(this.auth,t,e):null}return vr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new cl(Ss(qw),e,r);const a=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||Ss(qw);const c=rf(r,e.config.apiKey,e.name);let h=null;for(const p of t)try{const v=await p._get(c);if(v){let b;if(typeof v=="string"){const _=await Af(e,{idToken:v}).catch(()=>{});if(!_)break;b=await vr._fromGetAccountInfoResponse(e,_,v)}else b=vr._fromJSON(e,v);p!==l&&(h=b),l=p;break}}catch{}const m=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new cl(l,e,r):(l=m[0],h&&await l._set(c,h.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new cl(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hw(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(VE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(PE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(UE(e))return"Blackberry";if(BE(e))return"Webos";if(OE(e))return"Safari";if((e.includes("chrome/")||ME(e))&&!e.includes("edge/"))return"Chrome";if(LE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function PE(n=Gt()){return/firefox\//i.test(n)}function OE(n=Gt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ME(n=Gt()){return/crios\//i.test(n)}function VE(n=Gt()){return/iemobile/i.test(n)}function LE(n=Gt()){return/android/i.test(n)}function UE(n=Gt()){return/blackberry/i.test(n)}function BE(n=Gt()){return/webos/i.test(n)}function Sy(n=Gt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function r4(n=Gt()){var e;return Sy(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function s4(){return xC()&&document.documentMode===10}function zE(n=Gt()){return Sy(n)||LE(n)||BE(n)||UE(n)||/windows phone/i.test(n)||VE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(n,e=[]){let t;switch(n){case"Browser":t=Hw(Gt());break;case"Worker":t=`${Hw(Gt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ja}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((c,h)=>{try{const m=e(l);c(m)}catch(m){h(m)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a4(n,e={}){return Oi(n,"GET","/v2/passwordPolicy",Za(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4=6;class l4{constructor(e){var t,r,a,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:o4,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,a,l,c,h;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(t=m.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),m.isValid&&(m.isValid=(r=m.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),m.isValid&&(m.isValid=(a=m.containsLowercaseLetter)!==null&&a!==void 0?a:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(c=m.containsNumericCharacter)!==null&&c!==void 0?c:!0),m.isValid&&(m.isValid=(h=m.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),m}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gw(this),this.idTokenSubscription=new Gw(this),this.beforeStateQueue=new i4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ss(t)),this._initializationPromise=this.queue(async()=>{var r,a,l;if(!this._deleted&&(this.persistenceManager=await cl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Af(this,{idToken:e}),r=await vr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(lr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let a=r,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=a==null?void 0:a._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===h)&&(m!=null&&m.user)&&(a=m.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Sf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=zR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(lr(this.app))return Promise.reject(Si(this));const t=e?dt(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return lr(this.app)?Promise.reject(Si(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return lr(this.app)?Promise.reject(Si(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ss(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await a4(this),t=new l4(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wa("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await n4(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ss(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await cl.create(this,[Ss(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(h,this,"internal-error"),h.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,r,a);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=FE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(lr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&LR(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Ul(n){return dt(n)}class Gw{constructor(e){this.auth=e,this.observer=null,this.addObserver=AC(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function u4(n){lm=n}function qE(n){return lm.loadJS(n)}function d4(){return lm.recaptchaEnterpriseScript}function h4(){return lm.gapiScript}function f4(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class m4{constructor(){this.enterprise=new g4}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class g4{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const p4="recaptcha-enterprise",HE="NO_RECAPTCHA";class y4{constructor(e){this.type=p4,this.auth=Ul(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,h)=>{QR(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new $R(m);return l.tenantId==null?l._agentRecaptchaConfig=p:l._tenantRecaptchaConfigs[l.tenantId]=p,c(p.siteKey)}}).catch(m=>{h(m)})})}function a(l,c,h){const m=window.grecaptcha;Bw(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(p=>{c(p)}).catch(()=>{c(HE)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new m4().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{r(this.auth).then(h=>{if(!t&&Bw(window.grecaptcha))a(h,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=d4();m.length!==0&&(m+=h),qE(m).then(()=>{a(h,l,c)}).catch(p=>{c(p)})}}).catch(h=>{c(h)})})}}async function Kw(n,e,t,r=!1,a=!1){const l=new y4(n);let c;if(a)c=HE;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const h=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const m=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const m=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function $w(n,e,t,r,a){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Kw(n,e,t,t==="getOobCode");return r(n,c)}else return r(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await Kw(n,e,t,t==="getOobCode");return r(n,h)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v4(n,e){const t=Xa(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Va(l,e??{}))return a;Er(a,"already-initialized")}return t.initialize({options:e})}function x4(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Ss);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function b4(n,e,t){const r=Ul(n);Ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,l=GE(e),{host:c,port:h}=_4(e),m=h===null?"":`:${h}`,p={url:`${l}//${c}${m}/`},v=Object.freeze({host:c,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){Ie(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ie(Va(p,r.config.emulator)&&Va(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,Ya(c)?(yy(`${l}//${c}${m}`),pE("Auth",!0)):w4()}function GE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function _4(n){const e=GE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:Qw(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:Qw(c)}}}function Qw(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function w4(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return As("not implemented")}_getIdTokenResponse(e){return As("not implemented")}_linkToIdToken(e,t){return As("not implemented")}_getReauthenticationResolver(e){return As("not implemented")}}async function E4(n,e){return Oi(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T4(n,e){return om(n,"POST","/v1/accounts:signInWithPassword",Za(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A4(n,e){return om(n,"POST","/v1/accounts:signInWithEmailLink",Za(n,e))}async function S4(n,e){return om(n,"POST","/v1/accounts:signInWithEmailLink",Za(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu extends ky{constructor(e,t,r,a=null){super("password",r),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Vu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Vu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $w(e,t,"signInWithPassword",T4);case"emailLink":return A4(e,{email:this._email,oobCode:this._password});default:Er(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $w(e,r,"signUpPassword",E4);case"emailLink":return S4(e,{idToken:t,email:this._email,oobCode:this._password});default:Er(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ul(n,e){return om(n,"POST","/v1/accounts:signInWithIdp",Za(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4="http://localhost";class La extends ky{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new La(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Er("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a}=t,l=wy(t,["providerId","signInMethod"]);if(!r||!a)return null;const c=new La(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return ul(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ul(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ul(e,t)}buildRequest(){const e={requestUri:k4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=rd(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I4(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function N4(n){const e=hu(fu(n)).link,t=e?hu(fu(e)).deep_link_id:null,r=hu(fu(n)).deep_link_id;return(r?hu(fu(r)).link:null)||r||t||e||n}class Iy{constructor(e){var t,r,a,l,c,h;const m=hu(fu(e)),p=(t=m.apiKey)!==null&&t!==void 0?t:null,v=(r=m.oobCode)!==null&&r!==void 0?r:null,b=I4((a=m.mode)!==null&&a!==void 0?a:null);Ie(p&&v&&b,"argument-error"),this.apiKey=p,this.operation=b,this.code=v,this.continueUrl=(l=m.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=m.lang)!==null&&c!==void 0?c:null,this.tenantId=(h=m.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const t=N4(e);try{return new Iy(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(){this.providerId=Bl.PROVIDER_ID}static credential(e,t){return Vu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Iy.parseLink(t);return Ie(r,"argument-error"),Vu._fromEmailAndCode(e,r.code,r.tenantId)}}Bl.PROVIDER_ID="password";Bl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Bl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id extends KE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends id{constructor(){super("facebook.com")}static credential(e){return La._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vi.credential(e.oauthAccessToken)}catch{return null}}}vi.FACEBOOK_SIGN_IN_METHOD="facebook.com";vi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends id{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return La._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return xi.credentialFromTaggedObject(e)}static credentialFromError(e){return xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return xi.credential(t,r)}catch{return null}}}xi.GOOGLE_SIGN_IN_METHOD="google.com";xi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends id{constructor(){super("github.com")}static credential(e){return La._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bi.credential(e.oauthAccessToken)}catch{return null}}}bi.GITHUB_SIGN_IN_METHOD="github.com";bi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i extends id{constructor(){super("twitter.com")}static credential(e,t){return La._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return _i.credential(t,r)}catch{return null}}}_i.TWITTER_SIGN_IN_METHOD="twitter.com";_i.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await vr._fromIdTokenResponse(e,r,a),c=Yw(r);return new ml({user:l,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=Yw(r);return new ml({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function Yw(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf extends Sr{constructor(e,t,r,a){var l;super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,kf.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new kf(e,t,r,a)}}function $E(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?kf._fromErrorAndOperation(n,l,e,r):l})}async function C4(n,e,t=!1){const r=await Mu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ml._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R4(n,e,t=!1){const{auth:r}=n;if(lr(r.app))return Promise.reject(Si(r));const a="reauthenticate";try{const l=await Mu(n,$E(r,a,e,n),t);Ie(l.idToken,r,"internal-error");const c=Ay(l.idToken);Ie(c,r,"internal-error");const{sub:h}=c;return Ie(n.uid===h,r,"user-mismatch"),ml._forOperation(n,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Er(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QE(n,e,t=!1){if(lr(n.app))return Promise.reject(Si(n));const r="signIn",a=await $E(n,r,e),l=await ml._fromIdTokenResponse(n,r,a);return t||await n._updateCurrentUser(l.user),l}async function j4(n,e){return QE(Ul(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D4(n){const e=Ul(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function P4(n,e,t){return lr(n.app)?Promise.reject(Si(n)):j4(dt(n),Bl.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&D4(n),r})}function O4(n,e,t,r){return dt(n).onIdTokenChanged(e,t,r)}function M4(n,e,t){return dt(n).beforeAuthStateChanged(e,t)}function V4(n,e,t,r){return dt(n).onAuthStateChanged(e,t,r)}function tp(n){return dt(n).signOut()}const If="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(If,"1"),this.storage.removeItem(If),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4=1e3,U4=10;class WE extends YE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,h,m)=>{this.notifyListeners(c,m)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);s4()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,U4):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},L4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}WE.type="LOCAL";const B4=WE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE extends YE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}XE.type="SESSION";const JE=XE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z4(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new cm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const h=Array.from(c).map(async p=>p(t.origin,l)),m=await z4(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((h,m)=>{const p=Ny("",20);a.port1.start();const v=setTimeout(()=>{m(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(b){const _=b;if(_.data.eventId===p)switch(_.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(_.data.response);break;default:clearTimeout(v),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(){return window}function q4(n){Yr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(){return typeof Yr().WorkerGlobalScope<"u"&&typeof Yr().importScripts=="function"}async function H4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function G4(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function K4(){return ZE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT="firebaseLocalStorageDb",$4=1,Nf="firebaseLocalStorage",tT="fbase_key";class ad{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function um(n,e){return n.transaction([Nf],e?"readwrite":"readonly").objectStore(Nf)}function Q4(){const n=indexedDB.deleteDatabase(eT);return new ad(n).toPromise()}function Cp(){const n=indexedDB.open(eT,$4);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Nf,{keyPath:tT})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Nf)?e(r):(r.close(),await Q4(),e(await Cp()))})})}async function Ww(n,e,t){const r=um(n,!0).put({[tT]:e,value:t});return new ad(r).toPromise()}async function Y4(n,e){const t=um(n,!1).get(e),r=await new ad(t).toPromise();return r===void 0?null:r.value}function Xw(n,e){const t=um(n,!0).delete(e);return new ad(t).toPromise()}const W4=800,X4=3;class nT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Cp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>X4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ZE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cm._getInstance(K4()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await H4(),!this.activeServiceWorker)return;this.sender=new F4(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||G4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Cp();return await Ww(e,If,"1"),await Xw(e,If),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ww(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>Y4(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Xw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=um(a,!1).getAll();return new ad(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),W4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nT.type="LOCAL";const J4=nT;new sd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z4(n,e){return e?Ss(e):(Ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy extends ky{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ul(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ul(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ul(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function e3(n){return QE(n.auth,new Cy(n),n.bypassAuthState)}function t3(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),R4(t,new Cy(n),n.bypassAuthState)}async function n3(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),C4(t,new Cy(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:c,type:h}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return e3;case"linkViaPopup":case"linkViaRedirect":return n3;case"reauthViaPopup":case"reauthViaRedirect":return t3;default:Er(this.auth,"internal-error")}}resolve(e){Ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r3=new sd(2e3,1e4);class ol extends rT{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,ol.currentPopupAction&&ol.currentPopupAction.cancel(),ol.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){Ds(this.filter.length===1,"Popup operations only handle one event");const e=Ny();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Qr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Qr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ol.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,r3.get())};e()}}ol.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3="pendingRedirect",sf=new Map;class i3 extends rT{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=sf.get(this.auth._key());if(!e){try{const r=await a3(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}sf.set(this.auth._key(),e)}return this.bypassAuthState||sf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function a3(n,e){const t=c3(e),r=l3(n);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}function o3(n,e){sf.set(n._key(),e)}function l3(n){return Ss(n._redirectPersistence)}function c3(n){return rf(s3,n.config.apiKey,n.name)}async function u3(n,e,t=!1){if(lr(n.app))return Promise.reject(Si(n));const r=Ul(n),a=Z4(r,e),c=await new i3(r,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d3=10*60*1e3;class h3{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!f3(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!sT(e)){const a=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Qr(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=d3&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jw(e))}saveEventToCache(e){this.cachedEventUids.add(Jw(e)),this.lastProcessedEventTime=Date.now()}}function Jw(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function sT({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function f3(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sT(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m3(n,e={}){return Oi(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,p3=/^https?/;async function y3(n){if(n.config.emulator)return;const{authorizedDomains:e}=await m3(n);for(const t of e)try{if(v3(t))return}catch{}Er(n,"unauthorized-domain")}function v3(n){const e=Ip(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!p3.test(t))return!1;if(g3.test(n))return r===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x3=new sd(3e4,6e4);function Zw(){const n=Yr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function b3(n){return new Promise((e,t)=>{var r,a,l;function c(){Zw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Zw(),t(Qr(n,"network-request-failed"))},timeout:x3.get()})}if(!((a=(r=Yr().gapi)===null||r===void 0?void 0:r.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((l=Yr().gapi)===null||l===void 0)&&l.load)c();else{const h=f4("iframefcb");return Yr()[h]=()=>{gapi.load?c():t(Qr(n,"network-request-failed"))},qE(`${h4()}?onload=${h}`).catch(m=>t(m))}}).catch(e=>{throw af=null,e})}let af=null;function _3(n){return af=af||b3(n),af}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w3=new sd(5e3,15e3),E3="__/auth/iframe",T3="emulator/auth/iframe",A3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},S3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function k3(n){const e=n.config;Ie(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Ty(e,T3):`https://${n.config.authDomain}/${E3}`,r={apiKey:e.apiKey,appName:n.name,v:Ja},a=S3.get(n.config.apiHost);a&&(r.eid=a);const l=n._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${rd(r).slice(1)}`}async function I3(n){const e=await _3(n),t=Yr().gapi;return Ie(t,n,"internal-error"),e.open({where:document.body,url:k3(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:A3,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=Qr(n,"network-request-failed"),h=Yr().setTimeout(()=>{l(c)},w3.get());function m(){Yr().clearTimeout(h),a(r)}r.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},C3=500,R3=600,j3="_blank",D3="http://localhost";class e1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function P3(n,e,t,r=C3,a=R3){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const m=Object.assign(Object.assign({},N3),{width:r.toString(),height:a.toString(),top:l,left:c}),p=Gt().toLowerCase();t&&(h=ME(p)?j3:t),PE(p)&&(e=e||D3,m.scrollbars="yes");const v=Object.entries(m).reduce((_,[A,I])=>`${_}${A}=${I},`,"");if(r4(p)&&h!=="_self")return O3(e||"",h),new e1(null);const b=window.open(e||"",h,v);Ie(b,n,"popup-blocked");try{b.focus()}catch{}return new e1(b)}function O3(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3="__/auth/handler",V3="emulator/auth/handler",L3=encodeURIComponent("fac");async function t1(n,e,t,r,a,l){Ie(n.config.authDomain,n,"auth-domain-config-required"),Ie(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ja,eventId:a};if(e instanceof KE){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",TC(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,b]of Object.entries({}))c[v]=b}if(e instanceof id){const v=e.getScopes().filter(b=>b!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const m=await n._getAppCheckToken(),p=m?`#${L3}=${encodeURIComponent(m)}`:"";return`${U3(n)}?${rd(h).slice(1)}${p}`}function U3({config:n}){return n.emulator?Ty(n,V3):`https://${n.authDomain}/${M3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np="webStorageSupport";class B3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=JE,this._completeRedirectFn=u3,this._overrideRedirectResult=o3}async _openPopup(e,t,r,a){var l;Ds((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await t1(e,t,r,Ip(),a);return P3(e,c,Ny())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await t1(e,t,r,Ip(),a);return q4(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Ds(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await I3(e),r=new h3(e);return t.register("authEvent",a=>(Ie(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(np,{type:np},a=>{var l;const c=(l=a==null?void 0:a[0])===null||l===void 0?void 0:l[np];c!==void 0&&t(!!c),Er(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=y3(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return zE()||OE()||Sy()}}const z3=B3;var n1="@firebase/auth",r1="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q3(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function H3(n){wr(new cr("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=r.options;Ie(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:FE(n)},p=new c4(r,a,l,m);return x4(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),wr(new cr("auth-internal",e=>{const t=Ul(e.getProvider("auth").getImmediate());return(r=>new F3(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),jn(n1,r1,q3(n)),jn(n1,r1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G3=5*60,K3=gE("authIdTokenMaxAge")||G3;let s1=null;const $3=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>K3)return;const a=t==null?void 0:t.token;s1!==a&&(s1=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function Q3(n=_y()){const e=Xa(n,"auth");if(e.isInitialized())return e.getImmediate();const t=v4(n,{popupRedirectResolver:z3,persistence:[J4,B4,JE]}),r=gE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=$3(l.toString());M4(t,c,()=>c(t.currentUser)),O4(t,h=>c(h))}}const a=fE("auth");return a&&b4(t,`http://${a}`),t}function Y3(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}u4({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=a=>{const l=Qr("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",Y3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});H3("Browser");var i1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ki,iT;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,k){function R(){}R.prototype=k.prototype,O.D=k.prototype,O.prototype=new R,O.prototype.constructor=O,O.C=function(j,L,F){for(var P=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)P[Ze-2]=arguments[Ze];return k.prototype[L].apply(j,P)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(O,k,R){R||(R=0);var j=Array(16);if(typeof k=="string")for(var L=0;16>L;++L)j[L]=k.charCodeAt(R++)|k.charCodeAt(R++)<<8|k.charCodeAt(R++)<<16|k.charCodeAt(R++)<<24;else for(L=0;16>L;++L)j[L]=k[R++]|k[R++]<<8|k[R++]<<16|k[R++]<<24;k=O.g[0],R=O.g[1],L=O.g[2];var F=O.g[3],P=k+(F^R&(L^F))+j[0]+3614090360&4294967295;k=R+(P<<7&4294967295|P>>>25),P=F+(L^k&(R^L))+j[1]+3905402710&4294967295,F=k+(P<<12&4294967295|P>>>20),P=L+(R^F&(k^R))+j[2]+606105819&4294967295,L=F+(P<<17&4294967295|P>>>15),P=R+(k^L&(F^k))+j[3]+3250441966&4294967295,R=L+(P<<22&4294967295|P>>>10),P=k+(F^R&(L^F))+j[4]+4118548399&4294967295,k=R+(P<<7&4294967295|P>>>25),P=F+(L^k&(R^L))+j[5]+1200080426&4294967295,F=k+(P<<12&4294967295|P>>>20),P=L+(R^F&(k^R))+j[6]+2821735955&4294967295,L=F+(P<<17&4294967295|P>>>15),P=R+(k^L&(F^k))+j[7]+4249261313&4294967295,R=L+(P<<22&4294967295|P>>>10),P=k+(F^R&(L^F))+j[8]+1770035416&4294967295,k=R+(P<<7&4294967295|P>>>25),P=F+(L^k&(R^L))+j[9]+2336552879&4294967295,F=k+(P<<12&4294967295|P>>>20),P=L+(R^F&(k^R))+j[10]+4294925233&4294967295,L=F+(P<<17&4294967295|P>>>15),P=R+(k^L&(F^k))+j[11]+2304563134&4294967295,R=L+(P<<22&4294967295|P>>>10),P=k+(F^R&(L^F))+j[12]+1804603682&4294967295,k=R+(P<<7&4294967295|P>>>25),P=F+(L^k&(R^L))+j[13]+4254626195&4294967295,F=k+(P<<12&4294967295|P>>>20),P=L+(R^F&(k^R))+j[14]+2792965006&4294967295,L=F+(P<<17&4294967295|P>>>15),P=R+(k^L&(F^k))+j[15]+1236535329&4294967295,R=L+(P<<22&4294967295|P>>>10),P=k+(L^F&(R^L))+j[1]+4129170786&4294967295,k=R+(P<<5&4294967295|P>>>27),P=F+(R^L&(k^R))+j[6]+3225465664&4294967295,F=k+(P<<9&4294967295|P>>>23),P=L+(k^R&(F^k))+j[11]+643717713&4294967295,L=F+(P<<14&4294967295|P>>>18),P=R+(F^k&(L^F))+j[0]+3921069994&4294967295,R=L+(P<<20&4294967295|P>>>12),P=k+(L^F&(R^L))+j[5]+3593408605&4294967295,k=R+(P<<5&4294967295|P>>>27),P=F+(R^L&(k^R))+j[10]+38016083&4294967295,F=k+(P<<9&4294967295|P>>>23),P=L+(k^R&(F^k))+j[15]+3634488961&4294967295,L=F+(P<<14&4294967295|P>>>18),P=R+(F^k&(L^F))+j[4]+3889429448&4294967295,R=L+(P<<20&4294967295|P>>>12),P=k+(L^F&(R^L))+j[9]+568446438&4294967295,k=R+(P<<5&4294967295|P>>>27),P=F+(R^L&(k^R))+j[14]+3275163606&4294967295,F=k+(P<<9&4294967295|P>>>23),P=L+(k^R&(F^k))+j[3]+4107603335&4294967295,L=F+(P<<14&4294967295|P>>>18),P=R+(F^k&(L^F))+j[8]+1163531501&4294967295,R=L+(P<<20&4294967295|P>>>12),P=k+(L^F&(R^L))+j[13]+2850285829&4294967295,k=R+(P<<5&4294967295|P>>>27),P=F+(R^L&(k^R))+j[2]+4243563512&4294967295,F=k+(P<<9&4294967295|P>>>23),P=L+(k^R&(F^k))+j[7]+1735328473&4294967295,L=F+(P<<14&4294967295|P>>>18),P=R+(F^k&(L^F))+j[12]+2368359562&4294967295,R=L+(P<<20&4294967295|P>>>12),P=k+(R^L^F)+j[5]+4294588738&4294967295,k=R+(P<<4&4294967295|P>>>28),P=F+(k^R^L)+j[8]+2272392833&4294967295,F=k+(P<<11&4294967295|P>>>21),P=L+(F^k^R)+j[11]+1839030562&4294967295,L=F+(P<<16&4294967295|P>>>16),P=R+(L^F^k)+j[14]+4259657740&4294967295,R=L+(P<<23&4294967295|P>>>9),P=k+(R^L^F)+j[1]+2763975236&4294967295,k=R+(P<<4&4294967295|P>>>28),P=F+(k^R^L)+j[4]+1272893353&4294967295,F=k+(P<<11&4294967295|P>>>21),P=L+(F^k^R)+j[7]+4139469664&4294967295,L=F+(P<<16&4294967295|P>>>16),P=R+(L^F^k)+j[10]+3200236656&4294967295,R=L+(P<<23&4294967295|P>>>9),P=k+(R^L^F)+j[13]+681279174&4294967295,k=R+(P<<4&4294967295|P>>>28),P=F+(k^R^L)+j[0]+3936430074&4294967295,F=k+(P<<11&4294967295|P>>>21),P=L+(F^k^R)+j[3]+3572445317&4294967295,L=F+(P<<16&4294967295|P>>>16),P=R+(L^F^k)+j[6]+76029189&4294967295,R=L+(P<<23&4294967295|P>>>9),P=k+(R^L^F)+j[9]+3654602809&4294967295,k=R+(P<<4&4294967295|P>>>28),P=F+(k^R^L)+j[12]+3873151461&4294967295,F=k+(P<<11&4294967295|P>>>21),P=L+(F^k^R)+j[15]+530742520&4294967295,L=F+(P<<16&4294967295|P>>>16),P=R+(L^F^k)+j[2]+3299628645&4294967295,R=L+(P<<23&4294967295|P>>>9),P=k+(L^(R|~F))+j[0]+4096336452&4294967295,k=R+(P<<6&4294967295|P>>>26),P=F+(R^(k|~L))+j[7]+1126891415&4294967295,F=k+(P<<10&4294967295|P>>>22),P=L+(k^(F|~R))+j[14]+2878612391&4294967295,L=F+(P<<15&4294967295|P>>>17),P=R+(F^(L|~k))+j[5]+4237533241&4294967295,R=L+(P<<21&4294967295|P>>>11),P=k+(L^(R|~F))+j[12]+1700485571&4294967295,k=R+(P<<6&4294967295|P>>>26),P=F+(R^(k|~L))+j[3]+2399980690&4294967295,F=k+(P<<10&4294967295|P>>>22),P=L+(k^(F|~R))+j[10]+4293915773&4294967295,L=F+(P<<15&4294967295|P>>>17),P=R+(F^(L|~k))+j[1]+2240044497&4294967295,R=L+(P<<21&4294967295|P>>>11),P=k+(L^(R|~F))+j[8]+1873313359&4294967295,k=R+(P<<6&4294967295|P>>>26),P=F+(R^(k|~L))+j[15]+4264355552&4294967295,F=k+(P<<10&4294967295|P>>>22),P=L+(k^(F|~R))+j[6]+2734768916&4294967295,L=F+(P<<15&4294967295|P>>>17),P=R+(F^(L|~k))+j[13]+1309151649&4294967295,R=L+(P<<21&4294967295|P>>>11),P=k+(L^(R|~F))+j[4]+4149444226&4294967295,k=R+(P<<6&4294967295|P>>>26),P=F+(R^(k|~L))+j[11]+3174756917&4294967295,F=k+(P<<10&4294967295|P>>>22),P=L+(k^(F|~R))+j[2]+718787259&4294967295,L=F+(P<<15&4294967295|P>>>17),P=R+(F^(L|~k))+j[9]+3951481745&4294967295,O.g[0]=O.g[0]+k&4294967295,O.g[1]=O.g[1]+(L+(P<<21&4294967295|P>>>11))&4294967295,O.g[2]=O.g[2]+L&4294967295,O.g[3]=O.g[3]+F&4294967295}r.prototype.u=function(O,k){k===void 0&&(k=O.length);for(var R=k-this.blockSize,j=this.B,L=this.h,F=0;F<k;){if(L==0)for(;F<=R;)a(this,O,F),F+=this.blockSize;if(typeof O=="string"){for(;F<k;)if(j[L++]=O.charCodeAt(F++),L==this.blockSize){a(this,j),L=0;break}}else for(;F<k;)if(j[L++]=O[F++],L==this.blockSize){a(this,j),L=0;break}}this.h=L,this.o+=k},r.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var k=1;k<O.length-8;++k)O[k]=0;var R=8*this.o;for(k=O.length-8;k<O.length;++k)O[k]=R&255,R/=256;for(this.u(O),O=Array(16),k=R=0;4>k;++k)for(var j=0;32>j;j+=8)O[R++]=this.g[k]>>>j&255;return O};function l(O,k){var R=h;return Object.prototype.hasOwnProperty.call(R,O)?R[O]:R[O]=k(O)}function c(O,k){this.h=k;for(var R=[],j=!0,L=O.length-1;0<=L;L--){var F=O[L]|0;j&&F==k||(R[L]=F,j=!1)}this.g=R}var h={};function m(O){return-128<=O&&128>O?l(O,function(k){return new c([k|0],0>k?-1:0)}):new c([O|0],0>O?-1:0)}function p(O){if(isNaN(O)||!isFinite(O))return b;if(0>O)return N(p(-O));for(var k=[],R=1,j=0;O>=R;j++)k[j]=O/R|0,R*=4294967296;return new c(k,0)}function v(O,k){if(O.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(O.charAt(0)=="-")return N(v(O.substring(1),k));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=p(Math.pow(k,8)),j=b,L=0;L<O.length;L+=8){var F=Math.min(8,O.length-L),P=parseInt(O.substring(L,L+F),k);8>F?(F=p(Math.pow(k,F)),j=j.j(F).add(p(P))):(j=j.j(R),j=j.add(p(P)))}return j}var b=m(0),_=m(1),A=m(16777216);n=c.prototype,n.m=function(){if(D(this))return-N(this).m();for(var O=0,k=1,R=0;R<this.g.length;R++){var j=this.i(R);O+=(0<=j?j:4294967296+j)*k,k*=4294967296}return O},n.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(I(this))return"0";if(D(this))return"-"+N(this).toString(O);for(var k=p(Math.pow(O,6)),R=this,j="";;){var L=te(R,k).g;R=V(R,L.j(k));var F=((0<R.g.length?R.g[0]:R.h)>>>0).toString(O);if(R=L,I(R))return F+j;for(;6>F.length;)F="0"+F;j=F+j}},n.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function I(O){if(O.h!=0)return!1;for(var k=0;k<O.g.length;k++)if(O.g[k]!=0)return!1;return!0}function D(O){return O.h==-1}n.l=function(O){return O=V(this,O),D(O)?-1:I(O)?0:1};function N(O){for(var k=O.g.length,R=[],j=0;j<k;j++)R[j]=~O.g[j];return new c(R,~O.h).add(_)}n.abs=function(){return D(this)?N(this):this},n.add=function(O){for(var k=Math.max(this.g.length,O.g.length),R=[],j=0,L=0;L<=k;L++){var F=j+(this.i(L)&65535)+(O.i(L)&65535),P=(F>>>16)+(this.i(L)>>>16)+(O.i(L)>>>16);j=P>>>16,F&=65535,P&=65535,R[L]=P<<16|F}return new c(R,R[R.length-1]&-2147483648?-1:0)};function V(O,k){return O.add(N(k))}n.j=function(O){if(I(this)||I(O))return b;if(D(this))return D(O)?N(this).j(N(O)):N(N(this).j(O));if(D(O))return N(this.j(N(O)));if(0>this.l(A)&&0>O.l(A))return p(this.m()*O.m());for(var k=this.g.length+O.g.length,R=[],j=0;j<2*k;j++)R[j]=0;for(j=0;j<this.g.length;j++)for(var L=0;L<O.g.length;L++){var F=this.i(j)>>>16,P=this.i(j)&65535,Ze=O.i(L)>>>16,Ke=O.i(L)&65535;R[2*j+2*L]+=P*Ke,B(R,2*j+2*L),R[2*j+2*L+1]+=F*Ke,B(R,2*j+2*L+1),R[2*j+2*L+1]+=P*Ze,B(R,2*j+2*L+1),R[2*j+2*L+2]+=F*Ze,B(R,2*j+2*L+2)}for(j=0;j<k;j++)R[j]=R[2*j+1]<<16|R[2*j];for(j=k;j<2*k;j++)R[j]=0;return new c(R,0)};function B(O,k){for(;(O[k]&65535)!=O[k];)O[k+1]+=O[k]>>>16,O[k]&=65535,k++}function H(O,k){this.g=O,this.h=k}function te(O,k){if(I(k))throw Error("division by zero");if(I(O))return new H(b,b);if(D(O))return k=te(N(O),k),new H(N(k.g),N(k.h));if(D(k))return k=te(O,N(k)),new H(N(k.g),k.h);if(30<O.g.length){if(D(O)||D(k))throw Error("slowDivide_ only works with positive integers.");for(var R=_,j=k;0>=j.l(O);)R=ee(R),j=ee(j);var L=se(R,1),F=se(j,1);for(j=se(j,2),R=se(R,2);!I(j);){var P=F.add(j);0>=P.l(O)&&(L=L.add(R),F=P),j=se(j,1),R=se(R,1)}return k=V(O,L.j(k)),new H(L,k)}for(L=b;0<=O.l(k);){for(R=Math.max(1,Math.floor(O.m()/k.m())),j=Math.ceil(Math.log(R)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),F=p(R),P=F.j(k);D(P)||0<P.l(O);)R-=j,F=p(R),P=F.j(k);I(F)&&(F=_),L=L.add(F),O=V(O,P)}return new H(L,O)}n.A=function(O){return te(this,O).h},n.and=function(O){for(var k=Math.max(this.g.length,O.g.length),R=[],j=0;j<k;j++)R[j]=this.i(j)&O.i(j);return new c(R,this.h&O.h)},n.or=function(O){for(var k=Math.max(this.g.length,O.g.length),R=[],j=0;j<k;j++)R[j]=this.i(j)|O.i(j);return new c(R,this.h|O.h)},n.xor=function(O){for(var k=Math.max(this.g.length,O.g.length),R=[],j=0;j<k;j++)R[j]=this.i(j)^O.i(j);return new c(R,this.h^O.h)};function ee(O){for(var k=O.g.length+1,R=[],j=0;j<k;j++)R[j]=O.i(j)<<1|O.i(j-1)>>>31;return new c(R,O.h)}function se(O,k){var R=k>>5;k%=32;for(var j=O.g.length-R,L=[],F=0;F<j;F++)L[F]=0<k?O.i(F+R)>>>k|O.i(F+R+1)<<32-k:O.i(F+R);return new c(L,O.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,iT=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=v,ki=c}).apply(typeof i1<"u"?i1:typeof self<"u"?self:typeof window<"u"?window:{});var Hh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var aT,mu,oT,of,Rp,lT,cT,uT;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,x,w){return f==Array.prototype||f==Object.prototype||(f[x]=w.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hh=="object"&&Hh];for(var x=0;x<f.length;++x){var w=f[x];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function a(f,x){if(x)e:{var w=r;f=f.split(".");for(var S=0;S<f.length-1;S++){var G=f[S];if(!(G in w))break e;w=w[G]}f=f[f.length-1],S=w[f],x=x(S),x!=S&&x!=null&&e(w,f,{configurable:!0,writable:!0,value:x})}}function l(f,x){f instanceof String&&(f+="");var w=0,S=!1,G={next:function(){if(!S&&w<f.length){var X=w++;return{value:x(X,f[X]),done:!1}}return S=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}a("Array.prototype.values",function(f){return f||function(){return l(this,function(x,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function m(f){var x=typeof f;return x=x!="object"?x:f?Array.isArray(f)?"array":x:"null",x=="array"||x=="object"&&typeof f.length=="number"}function p(f){var x=typeof f;return x=="object"&&f!=null||x=="function"}function v(f,x,w){return f.call.apply(f.bind,arguments)}function b(f,x,w){if(!f)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,S),f.apply(x,G)}}return function(){return f.apply(x,arguments)}}function _(f,x,w){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:b,_.apply(null,arguments)}function A(f,x){var w=Array.prototype.slice.call(arguments,1);return function(){var S=w.slice();return S.push.apply(S,arguments),f.apply(this,S)}}function I(f,x){function w(){}w.prototype=x.prototype,f.aa=x.prototype,f.prototype=new w,f.prototype.constructor=f,f.Qb=function(S,G,X){for(var de=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)de[$e-2]=arguments[$e];return x.prototype[G].apply(S,de)}}function D(f){const x=f.length;if(0<x){const w=Array(x);for(let S=0;S<x;S++)w[S]=f[S];return w}return[]}function N(f,x){for(let w=1;w<arguments.length;w++){const S=arguments[w];if(m(S)){const G=f.length||0,X=S.length||0;f.length=G+X;for(let de=0;de<X;de++)f[G+de]=S[de]}else f.push(S)}}class V{constructor(x,w){this.i=x,this.j=w,this.h=0,this.g=null}get(){let x;return 0<this.h?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function B(f){return/^[\s\xa0]*$/.test(f)}function H(){var f=h.navigator;return f&&(f=f.userAgent)?f:""}function te(f){return te[" "](f),f}te[" "]=function(){};var ee=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function se(f,x,w){for(const S in f)x.call(w,f[S],S,f)}function O(f,x){for(const w in f)x.call(void 0,f[w],w,f)}function k(f){const x={};for(const w in f)x[w]=f[w];return x}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(f,x){let w,S;for(let G=1;G<arguments.length;G++){S=arguments[G];for(w in S)f[w]=S[w];for(let X=0;X<R.length;X++)w=R[X],Object.prototype.hasOwnProperty.call(S,w)&&(f[w]=S[w])}}function L(f){var x=1;f=f.split(":");const w=[];for(;0<x&&f.length;)w.push(f.shift()),x--;return f.length&&w.push(f.join(":")),w}function F(f){h.setTimeout(()=>{throw f},0)}function P(){var f=Le;let x=null;return f.g&&(x=f.g,f.g=f.g.next,f.g||(f.h=null),x.next=null),x}class Ze{constructor(){this.h=this.g=null}add(x,w){const S=Ke.get();S.set(x,w),this.h?this.h.next=S:this.g=S,this.h=S}}var Ke=new V(()=>new J,f=>f.reset());class J{constructor(){this.next=this.g=this.h=null}set(x,w){this.h=x,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,me=!1,Le=new Ze,U=()=>{const f=h.Promise.resolve(void 0);ue=()=>{f.then(le)}};var le=()=>{for(var f;f=P();){try{f.h.call(f.g)}catch(w){F(w)}var x=Ke;x.j(f),100>x.h&&(x.h++,f.next=x.g,x.g=f)}me=!1};function Z(){this.s=this.s,this.C=this.C}Z.prototype.s=!1,Z.prototype.ma=function(){this.s||(this.s=!0,this.N())},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(f,x){this.type=f,this.g=this.target=x,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var ge=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var f=!1,x=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const w=()=>{};h.addEventListener("test",w,x),h.removeEventListener("test",w,x)}catch{}return f}();function Ae(f,x){if(ae.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var w=this.type=f.type,S=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=x,x=f.relatedTarget){if(ee){e:{try{te(x.nodeName);var G=!0;break e}catch{}G=!1}G||(x=null)}}else w=="mouseover"?x=f.fromElement:w=="mouseout"&&(x=f.toElement);this.relatedTarget=x,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:ye[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Ae.aa.h.call(this)}}I(Ae,ae);var ye={2:"touch",3:"pen",4:"mouse"};Ae.prototype.h=function(){Ae.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var je="closure_listenable_"+(1e6*Math.random()|0),Be=0;function Dt(f,x,w,S,G){this.listener=f,this.proxy=null,this.src=x,this.type=w,this.capture=!!S,this.ha=G,this.key=++Be,this.da=this.fa=!1}function ve(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Te(f){this.src=f,this.g={},this.h=0}Te.prototype.add=function(f,x,w,S,G){var X=f.toString();f=this.g[X],f||(f=this.g[X]=[],this.h++);var de=Oe(f,x,S,G);return-1<de?(x=f[de],w||(x.fa=!1)):(x=new Dt(x,this.src,X,!!S,G),x.fa=w,f.push(x)),x};function Re(f,x){var w=x.type;if(w in f.g){var S=f.g[w],G=Array.prototype.indexOf.call(S,x,void 0),X;(X=0<=G)&&Array.prototype.splice.call(S,G,1),X&&(ve(x),f.g[w].length==0&&(delete f.g[w],f.h--))}}function Oe(f,x,w,S){for(var G=0;G<f.length;++G){var X=f[G];if(!X.da&&X.listener==x&&X.capture==!!w&&X.ha==S)return G}return-1}var Dn="closure_lm_"+(1e6*Math.random()|0),Ql={};function vd(f,x,w,S,G){if(Array.isArray(x)){for(var X=0;X<x.length;X++)vd(f,x[X],w,S,G);return null}return w=xd(w),f&&f[je]?f.K(x,w,p(S)?!!S.capture:!1,G):Yn(f,x,w,!1,S,G)}function Yn(f,x,w,S,G,X){if(!x)throw Error("Invalid event type");var de=p(G)?!!G.capture:!!G,$e=ro(f);if($e||(f[Dn]=$e=new Te(f)),w=$e.add(x,w,S,de,X),w.proxy)return w;if(S=Um(),w.proxy=S,S.src=f,S.listener=w,f.addEventListener)ge||(G=de),G===void 0&&(G=!1),f.addEventListener(x.toString(),S,G);else if(f.attachEvent)f.attachEvent(zi(x.toString()),S);else if(f.addListener&&f.removeListener)f.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Um(){function f(w){return x.call(f.src,f.listener,w)}const x=Bm;return f}function Yl(f,x,w,S,G){if(Array.isArray(x))for(var X=0;X<x.length;X++)Yl(f,x[X],w,S,G);else S=p(S)?!!S.capture:!!S,w=xd(w),f&&f[je]?(f=f.i,x=String(x).toString(),x in f.g&&(X=f.g[x],w=Oe(X,w,S,G),-1<w&&(ve(X[w]),Array.prototype.splice.call(X,w,1),X.length==0&&(delete f.g[x],f.h--)))):f&&(f=ro(f))&&(x=f.g[x.toString()],f=-1,x&&(f=Oe(x,w,S,G)),(w=-1<f?x[f]:null)&&no(w))}function no(f){if(typeof f!="number"&&f&&!f.da){var x=f.src;if(x&&x[je])Re(x.i,f);else{var w=f.type,S=f.proxy;x.removeEventListener?x.removeEventListener(w,S,f.capture):x.detachEvent?x.detachEvent(zi(w),S):x.addListener&&x.removeListener&&x.removeListener(S),(w=ro(x))?(Re(w,f),w.h==0&&(w.src=null,x[Dn]=null)):ve(f)}}}function zi(f){return f in Ql?Ql[f]:Ql[f]="on"+f}function Bm(f,x){if(f.da)f=!0;else{x=new Ae(x,this);var w=f.listener,S=f.ha||f.src;f.fa&&no(f),f=w.call(S,x)}return f}function ro(f){return f=f[Dn],f instanceof Te?f:null}var Wl="__closure_events_fn_"+(1e9*Math.random()>>>0);function xd(f){return typeof f=="function"?f:(f[Wl]||(f[Wl]=function(x){return f.handleEvent(x)}),f[Wl])}function wt(){Z.call(this),this.i=new Te(this),this.M=this,this.F=null}I(wt,Z),wt.prototype[je]=!0,wt.prototype.removeEventListener=function(f,x,w,S){Yl(this,f,x,w,S)};function nt(f,x){var w,S=f.F;if(S)for(w=[];S;S=S.F)w.push(S);if(f=f.M,S=x.type||x,typeof x=="string")x=new ae(x,f);else if(x instanceof ae)x.target=x.target||f;else{var G=x;x=new ae(S,f),j(x,G)}if(G=!0,w)for(var X=w.length-1;0<=X;X--){var de=x.g=w[X];G=Pn(de,S,!0,x)&&G}if(de=x.g=f,G=Pn(de,S,!0,x)&&G,G=Pn(de,S,!1,x)&&G,w)for(X=0;X<w.length;X++)de=x.g=w[X],G=Pn(de,S,!1,x)&&G}wt.prototype.N=function(){if(wt.aa.N.call(this),this.i){var f=this.i,x;for(x in f.g){for(var w=f.g[x],S=0;S<w.length;S++)ve(w[S]);delete f.g[x],f.h--}}this.F=null},wt.prototype.K=function(f,x,w,S){return this.i.add(String(f),x,!1,w,S)},wt.prototype.L=function(f,x,w,S){return this.i.add(String(f),x,!0,w,S)};function Pn(f,x,w,S){if(x=f.i.g[String(x)],!x)return!0;x=x.concat();for(var G=!0,X=0;X<x.length;++X){var de=x[X];if(de&&!de.da&&de.capture==w){var $e=de.listener,zt=de.ha||de.src;de.fa&&Re(f.i,de),G=$e.call(zt,S)!==!1&&G}}return G&&!S.defaultPrevented}function ln(f,x,w){if(typeof f=="function")w&&(f=_(f,w));else if(f&&typeof f.handleEvent=="function")f=_(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(x)?-1:h.setTimeout(f,x||0)}function bd(f){f.g=ln(()=>{f.g=null,f.i&&(f.i=!1,bd(f))},f.l);const x=f.h;f.h=null,f.m.apply(null,x)}class zm extends Z{constructor(x,w){super(),this.m=x,this.l=w,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:bd(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fi(f){Z.call(this),this.h=f,this.g={}}I(Fi,Z);var qi=[];function Hi(f){se(f.g,function(x,w){this.g.hasOwnProperty(w)&&no(x)},f),f.g={}}Fi.prototype.N=function(){Fi.aa.N.call(this),Hi(this)},Fi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var dr=h.JSON.stringify,so=h.JSON.parse,Gi=class{stringify(f){return h.JSON.stringify(f,void 0)}parse(f){return h.JSON.parse(f,void 0)}};function Xl(){}Xl.prototype.h=null;function Jl(f){return f.h||(f.h=f.i())}function Zl(){}var Zr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function es(){ae.call(this,"d")}I(es,ae);function ec(){ae.call(this,"c")}I(ec,ae);var Ir={},tc=null;function Bs(){return tc=tc||new wt}Ir.La="serverreachability";function io(f){ae.call(this,Ir.La,f)}I(io,ae);function zs(f){const x=Bs();nt(x,new io(x))}Ir.STAT_EVENT="statevent";function _d(f,x){ae.call(this,Ir.STAT_EVENT,f),this.stat=x}I(_d,ae);function gt(f){const x=Bs();nt(x,new _d(x,f))}Ir.Ma="timingevent";function Bt(f,x){ae.call(this,Ir.Ma,f),this.size=x}I(Bt,ae);function Pt(f,x){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){f()},x)}function Wn(){this.g=!0}Wn.prototype.xa=function(){this.g=!1};function nc(f,x,w,S,G,X){f.info(function(){if(f.g)if(X)for(var de="",$e=X.split("&"),zt=0;zt<$e.length;zt++){var Qe=$e[zt].split("=");if(1<Qe.length){var Qt=Qe[0];Qe=Qe[1];var Ft=Qt.split("_");de=2<=Ft.length&&Ft[1]=="type"?de+(Qt+"="+Qe+"&"):de+(Qt+"=redacted&")}}else de=null;else de=X;return"XMLHTTP REQ ("+S+") [attempt "+G+"]: "+x+`
`+w+`
`+de})}function Fm(f,x,w,S,G,X,de){f.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+G+"]: "+x+`
`+w+`
`+X+" "+de})}function Fs(f,x,w,S){f.info(function(){return"XMLHTTP TEXT ("+x+"): "+Ki(f,w)+(S?" "+S:"")})}function wd(f,x){f.info(function(){return"TIMEOUT: "+x})}Wn.prototype.info=function(){};function Ki(f,x){if(!f.g)return x;if(!x)return null;try{var w=JSON.parse(x);if(w){for(f=0;f<w.length;f++)if(Array.isArray(w[f])){var S=w[f];if(!(2>S.length)){var G=S[1];if(Array.isArray(G)&&!(1>G.length)){var X=G[0];if(X!="noop"&&X!="stop"&&X!="close")for(var de=1;de<G.length;de++)G[de]=""}}}}return dr(w)}catch{return x}}var qs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ts={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Nr;function Cr(){}I(Cr,Xl),Cr.prototype.g=function(){return new XMLHttpRequest},Cr.prototype.i=function(){return{}},Nr=new Cr;function bn(f,x,w,S){this.j=f,this.i=x,this.l=w,this.R=S||1,this.U=new Fi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new It}function It(){this.i=null,this.g="",this.h=!1}var rc={},ao={};function hr(f,x,w){f.L=1,f.v=Xi(On(x)),f.m=w,f.P=!0,ns(f,null)}function ns(f,x){f.F=Date.now(),$i(f),f.A=On(f.v);var w=f.A,S=f.R;Array.isArray(S)||(S=[String(S)]),cc(w.i,"t",S),f.C=0,w=f.j.J,f.h=new It,f.g=Ld(f.j,w?x:null,!f.m),0<f.O&&(f.M=new zm(_(f.Y,f,f.g),f.O)),x=f.U,w=f.g,S=f.ca;var G="readystatechange";Array.isArray(G)||(G&&(qi[0]=G.toString()),G=qi);for(var X=0;X<G.length;X++){var de=vd(w,G[X],S||x.handleEvent,!1,x.h||x);if(!de)break;x.g[de.key]=de}x=f.H?k(f.H):{},f.m?(f.u||(f.u="POST"),x["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,x)):(f.u="GET",f.g.ea(f.A,f.u,null,x)),zs(),nc(f.i,f.u,f.A,f.l,f.R,f.m)}bn.prototype.ca=function(f){f=f.target;const x=this.M;x&&er(f)==3?x.j():this.Y(f)},bn.prototype.Y=function(f){try{if(f==this.g)e:{const Ft=er(this.g);var x=this.g.Ba();const us=this.g.Z();if(!(3>Ft)&&(Ft!=3||this.g&&(this.h.h||this.g.oa()||Cd(this.g)))){this.J||Ft!=4||x==7||(x==8||0>=us?zs(3):zs(2)),Hs(this);var w=this.g.Z();this.X=w;t:if(Ed(this)){var S=Cd(this.g);f="";var G=S.length,X=er(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){en(this),Rr(this);var de="";break t}this.h.i=new h.TextDecoder}for(x=0;x<G;x++)this.h.h=!0,f+=this.h.i.decode(S[x],{stream:!(X&&x==G-1)});S.length=0,this.h.g+=f,this.C=0,de=this.h.g}else de=this.g.oa();if(this.o=w==200,Fm(this.i,this.u,this.A,this.l,this.R,Ft,w),this.o){if(this.T&&!this.K){t:{if(this.g){var $e,zt=this.g;if(($e=zt.g?zt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B($e)){var Qe=$e;break t}}Qe=null}if(w=Qe)Fs(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qi(this,w);else{this.o=!1,this.s=3,gt(12),en(this),Rr(this);break e}}if(this.P){w=!0;let tn;for(;!this.J&&this.C<de.length;)if(tn=Td(this,de),tn==ao){Ft==4&&(this.s=4,gt(14),w=!1),Fs(this.i,this.l,null,"[Incomplete Response]");break}else if(tn==rc){this.s=4,gt(15),Fs(this.i,this.l,de,"[Invalid Chunk]"),w=!1;break}else Fs(this.i,this.l,tn,null),Qi(this,tn);if(Ed(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ft!=4||de.length!=0||this.h.h||(this.s=1,gt(16),w=!1),this.o=this.o&&w,!w)Fs(this.i,this.l,de,"[Invalid Chunked Response]"),en(this),Rr(this);else if(0<de.length&&!this.W){this.W=!0;var Qt=this.j;Qt.g==this&&Qt.ba&&!Qt.M&&(Qt.j.info("Great, no buffering proxy detected. Bytes received: "+de.length),ia(Qt),Qt.M=!0,gt(11))}}else Fs(this.i,this.l,de,null),Qi(this,de);Ft==4&&en(this),this.o&&!this.J&&(Ft==4?Od(this.j,this):(this.o=!1,$i(this)))}else $m(this.g),w==400&&0<de.indexOf("Unknown SID")?(this.s=3,gt(12)):(this.s=0,gt(13)),en(this),Rr(this)}}}catch{}finally{}};function Ed(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Td(f,x){var w=f.C,S=x.indexOf(`
`,w);return S==-1?ao:(w=Number(x.substring(w,S)),isNaN(w)?rc:(S+=1,S+w>x.length?ao:(x=x.slice(S,S+w),f.C=S+w,x)))}bn.prototype.cancel=function(){this.J=!0,en(this)};function $i(f){f.S=Date.now()+f.I,Ad(f,f.I)}function Ad(f,x){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Pt(_(f.ba,f),x)}function Hs(f){f.B&&(h.clearTimeout(f.B),f.B=null)}bn.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(wd(this.i,this.A),this.L!=2&&(zs(),gt(17)),en(this),this.s=2,Rr(this)):Ad(this,this.S-f)};function Rr(f){f.j.G==0||f.J||Od(f.j,f)}function en(f){Hs(f);var x=f.M;x&&typeof x.ma=="function"&&x.ma(),f.M=null,Hi(f.U),f.g&&(x=f.g,f.g=null,x.abort(),x.ma())}function Qi(f,x){try{var w=f.j;if(w.G!=0&&(w.g==f||sc(w.h,f))){if(!f.K&&sc(w.h,f)&&w.G==3){try{var S=w.Da.g.parse(x)}catch{S=null}if(Array.isArray(S)&&S.length==3){var G=S;if(G[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<f.F)xo(w),yo(w);else break e;mc(w),gt(18)}}else w.za=G[1],0<w.za-w.T&&37500>G[2]&&w.F&&w.v==0&&!w.C&&(w.C=Pt(_(w.Za,w),6e3));if(1>=lo(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else cs(w,11)}else if((f.K||w.g==f)&&xo(w),!B(x))for(G=w.Da.g.parse(x),x=0;x<G.length;x++){let Qe=G[x];if(w.T=Qe[0],Qe=Qe[1],w.G==2)if(Qe[0]=="c"){w.K=Qe[1],w.ia=Qe[2];const Qt=Qe[3];Qt!=null&&(w.la=Qt,w.j.info("VER="+w.la));const Ft=Qe[4];Ft!=null&&(w.Aa=Ft,w.j.info("SVER="+w.Aa));const us=Qe[5];us!=null&&typeof us=="number"&&0<us&&(S=1.5*us,w.L=S,w.j.info("backChannelRequestTimeoutMs_="+S)),S=w;const tn=f.g;if(tn){const Lr=tn.g?tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Lr){var X=S.h;X.g||Lr.indexOf("spdy")==-1&&Lr.indexOf("quic")==-1&&Lr.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(co(X,X.h),X.h=null))}if(S.D){const pc=tn.g?tn.g.getResponseHeader("X-HTTP-Session-Id"):null;pc&&(S.ya=pc,ot(S.I,S.D,pc))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-f.F,w.j.info("Handshake RTT: "+w.R+"ms")),S=w;var de=f;if(S.qa=Vd(S,S.J?S.ia:null,S.W),de.K){_n(S.h,de);var $e=de,zt=S.L;zt&&($e.I=zt),$e.B&&(Hs($e),$i($e)),S.g=de}else Dd(S);0<w.i.length&&vo(w)}else Qe[0]!="stop"&&Qe[0]!="close"||cs(w,7);else w.G==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?cs(w,7):hc(w):Qe[0]!="noop"&&w.l&&w.l.ta(Qe),w.v=0)}}zs(4)}catch{}}var Sd=class{constructor(f,x){this.g=f,this.map=x}};function rs(f){this.l=f||10,h.PerformanceNavigationTiming?(f=h.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function oo(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function lo(f){return f.h?1:f.g?f.g.size:0}function sc(f,x){return f.h?f.h==x:f.g?f.g.has(x):!1}function co(f,x){f.g?f.g.add(x):f.h=x}function _n(f,x){f.h&&f.h==x?f.h=null:f.g&&f.g.has(x)&&f.g.delete(x)}rs.prototype.cancel=function(){if(this.i=ic(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function ic(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let x=f.i;for(const w of f.g.values())x=x.concat(w.D);return x}return D(f.i)}function qm(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(m(f)){for(var x=[],w=f.length,S=0;S<w;S++)x.push(f[S]);return x}x=[],w=0;for(S in f)x[w++]=f[S];return x}function uo(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(m(f)||typeof f=="string"){var x=[];f=f.length;for(var w=0;w<f;w++)x.push(w);return x}x=[],w=0;for(const S in f)x[w++]=S;return x}}}function ac(f,x){if(f.forEach&&typeof f.forEach=="function")f.forEach(x,void 0);else if(m(f)||typeof f=="string")Array.prototype.forEach.call(f,x,void 0);else for(var w=uo(f),S=qm(f),G=S.length,X=0;X<G;X++)x.call(void 0,S[X],w&&w[X],f)}var Yi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Hm(f,x){if(f){f=f.split("&");for(var w=0;w<f.length;w++){var S=f[w].indexOf("="),G=null;if(0<=S){var X=f[w].substring(0,S);G=f[w].substring(S+1)}else X=f[w];x(X,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Ot(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Ot){this.h=f.h,Wi(this,f.j),this.o=f.o,this.g=f.g,Gs(this,f.s),this.l=f.l;var x=f.i,w=new is;w.i=x.i,x.g&&(w.g=new Map(x.g),w.h=x.h),ss(this,w),this.m=f.m}else f&&(x=String(f).match(Yi))?(this.h=!1,Wi(this,x[1]||"",!0),this.o=Xn(x[2]||""),this.g=Xn(x[3]||"",!0),Gs(this,x[4]),this.l=Xn(x[5]||"",!0),ss(this,x[6]||"",!0),this.m=Xn(x[7]||"")):(this.h=!1,this.i=new is(null,this.h))}Ot.prototype.toString=function(){var f=[],x=this.j;x&&f.push(Ji(x,oc,!0),":");var w=this.g;return(w||x=="file")&&(f.push("//"),(x=this.o)&&f.push(Ji(x,oc,!0),"@"),f.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&f.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&f.push("/"),f.push(Ji(w,w.charAt(0)=="/"?Gm:lc,!0))),(w=this.i.toString())&&f.push("?",w),(w=this.m)&&f.push("#",Ji(w,ho)),f.join("")};function On(f){return new Ot(f)}function Wi(f,x,w){f.j=w?Xn(x,!0):x,f.j&&(f.j=f.j.replace(/:$/,""))}function Gs(f,x){if(x){if(x=Number(x),isNaN(x)||0>x)throw Error("Bad port number "+x);f.s=x}else f.s=null}function ss(f,x,w){x instanceof is?(f.i=x,Id(f.i,f.h)):(w||(x=Ji(x,Km)),f.i=new is(x,f.h))}function ot(f,x,w){f.i.set(x,w)}function Xi(f){return ot(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Xn(f,x){return f?x?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Ji(f,x,w){return typeof f=="string"?(f=encodeURI(f).replace(x,kd),w&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function kd(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var oc=/[#\/\?@]/g,lc=/[#\?:]/g,Gm=/[#\?]/g,Km=/[#\?@]/g,ho=/#/g;function is(f,x){this.h=this.g=null,this.i=f||null,this.j=!!x}function Jn(f){f.g||(f.g=new Map,f.h=0,f.i&&Hm(f.i,function(x,w){f.add(decodeURIComponent(x.replace(/\+/g," ")),w)}))}n=is.prototype,n.add=function(f,x){Jn(this),this.i=null,f=jr(this,f);var w=this.g.get(f);return w||this.g.set(f,w=[]),w.push(x),this.h+=1,this};function as(f,x){Jn(f),x=jr(f,x),f.g.has(x)&&(f.i=null,f.h-=f.g.get(x).length,f.g.delete(x))}function os(f,x){return Jn(f),x=jr(f,x),f.g.has(x)}n.forEach=function(f,x){Jn(this),this.g.forEach(function(w,S){w.forEach(function(G){f.call(x,G,S,this)},this)},this)},n.na=function(){Jn(this);const f=Array.from(this.g.values()),x=Array.from(this.g.keys()),w=[];for(let S=0;S<x.length;S++){const G=f[S];for(let X=0;X<G.length;X++)w.push(x[S])}return w},n.V=function(f){Jn(this);let x=[];if(typeof f=="string")os(this,f)&&(x=x.concat(this.g.get(jr(this,f))));else{f=Array.from(this.g.values());for(let w=0;w<f.length;w++)x=x.concat(f[w])}return x},n.set=function(f,x){return Jn(this),this.i=null,f=jr(this,f),os(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[x]),this.h+=1,this},n.get=function(f,x){return f?(f=this.V(f),0<f.length?String(f[0]):x):x};function cc(f,x,w){as(f,x),0<w.length&&(f.i=null,f.g.set(jr(f,x),D(w)),f.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],x=Array.from(this.g.keys());for(var w=0;w<x.length;w++){var S=x[w];const X=encodeURIComponent(String(S)),de=this.V(S);for(S=0;S<de.length;S++){var G=X;de[S]!==""&&(G+="="+encodeURIComponent(String(de[S]))),f.push(G)}}return this.i=f.join("&")};function jr(f,x){return x=String(x),f.j&&(x=x.toLowerCase()),x}function Id(f,x){x&&!f.j&&(Jn(f),f.i=null,f.g.forEach(function(w,S){var G=S.toLowerCase();S!=G&&(as(this,S),cc(this,G,w))},f)),f.j=x}function Zi(f,x){const w=new Wn;if(h.Image){const S=new Image;S.onload=A(Zn,w,"TestLoadImage: loaded",!0,x,S),S.onerror=A(Zn,w,"TestLoadImage: error",!1,x,S),S.onabort=A(Zn,w,"TestLoadImage: abort",!1,x,S),S.ontimeout=A(Zn,w,"TestLoadImage: timeout",!1,x,S),h.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=f}else x(!1)}function fr(f,x){const w=new Wn,S=new AbortController,G=setTimeout(()=>{S.abort(),Zn(w,"TestPingServer: timeout",!1,x)},1e4);fetch(f,{signal:S.signal}).then(X=>{clearTimeout(G),X.ok?Zn(w,"TestPingServer: ok",!0,x):Zn(w,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(G),Zn(w,"TestPingServer: error",!1,x)})}function Zn(f,x,w,S,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),S(w)}catch{}}function ea(){this.g=new Gi}function Dr(f,x,w){const S=w||"";try{ac(f,function(G,X){let de=G;p(G)&&(de=dr(G)),x.push(S+X+"="+encodeURIComponent(de))})}catch(G){throw x.push(S+"type="+encodeURIComponent("_badmap")),G}}function Ks(f){this.l=f.Ub||null,this.j=f.eb||!1}I(Ks,Xl),Ks.prototype.g=function(){return new ls(this.l,this.j)},Ks.prototype.i=function(f){return function(){return f}}({});function ls(f,x){wt.call(this),this.D=f,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(ls,wt),n=ls.prototype,n.open=function(f,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=x,this.readyState=1,Or(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const x={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(x.body=f),(this.D||h).fetch(new Request(this.A,x)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Pr(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Or(this)),this.g&&(this.readyState=3,Or(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;uc(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function uc(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var x=f.value?f.value:new Uint8Array(0);(x=this.v.decode(x,{stream:!f.done}))&&(this.response=this.responseText+=x)}f.done?Pr(this):Or(this),this.readyState==3&&uc(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,Pr(this))},n.Qa=function(f){this.g&&(this.response=f,Pr(this))},n.ga=function(){this.g&&Pr(this)};function Pr(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Or(f)}n.setRequestHeader=function(f,x){this.u.append(f,x)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],x=this.h.entries();for(var w=x.next();!w.done;)w=w.value,f.push(w[0]+": "+w[1]),w=x.next();return f.join(`\r
`)};function Or(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(ls.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function dc(f){let x="";return se(f,function(w,S){x+=S,x+=":",x+=w,x+=`\r
`}),x}function $t(f,x,w){e:{for(S in w){var S=!1;break e}S=!0}S||(w=dc(w),typeof f=="string"?w!=null&&encodeURIComponent(String(w)):ot(f,x,w))}function et(f){wt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(et,wt);var fo=/^https?$/i,ta=["POST","PUT"];n=et.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,x,w,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);x=x?x.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Nr.g(),this.v=this.o?Jl(this.o):Jl(Nr),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(x,String(f),!0),this.B=!1}catch(X){Nd(this,X);return}if(f=w||"",w=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var G in S)w.set(G,S[G]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const X of S.keys())w.set(X,S.get(X));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(w.keys()).find(X=>X.toLowerCase()=="content-type"),G=h.FormData&&f instanceof h.FormData,!(0<=Array.prototype.indexOf.call(ta,x,void 0))||S||G||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,de]of w)this.g.setRequestHeader(X,de);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{na(this),this.u=!0,this.g.send(f),this.u=!1}catch(X){Nd(this,X)}};function Nd(f,x){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=x,f.m=5,mo(f),Mr(f)}function mo(f){f.A||(f.A=!0,nt(f,"complete"),nt(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,nt(this,"complete"),nt(this,"abort"),Mr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mr(this,!0)),et.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?go(this):this.bb())},n.bb=function(){go(this)};function go(f){if(f.h&&typeof c<"u"&&(!f.v[1]||er(f)!=4||f.Z()!=2)){if(f.u&&er(f)==4)ln(f.Ea,0,f);else if(nt(f,"readystatechange"),er(f)==4){f.h=!1;try{const de=f.Z();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var w;if(!(w=x)){var S;if(S=de===0){var G=String(f.D).match(Yi)[1]||null;!G&&h.self&&h.self.location&&(G=h.self.location.protocol.slice(0,-1)),S=!fo.test(G?G.toLowerCase():"")}w=S}if(w)nt(f,"complete"),nt(f,"success");else{f.m=6;try{var X=2<er(f)?f.g.statusText:""}catch{X=""}f.l=X+" ["+f.Z()+"]",mo(f)}}finally{Mr(f)}}}}function Mr(f,x){if(f.g){na(f);const w=f.g,S=f.v[0]?()=>{}:null;f.g=null,f.v=null,x||nt(f,"ready");try{w.onreadystatechange=S}catch{}}}function na(f){f.I&&(h.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function er(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<er(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var x=this.g.responseText;return f&&x.indexOf(f)==0&&(x=x.substring(f.length)),so(x)}};function Cd(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function $m(f){const x={};f=(f.g&&2<=er(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<f.length;S++){if(B(f[S]))continue;var w=L(f[S]);const G=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const X=x[G]||[];x[G]=X,X.push(w)}O(x,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ra(f,x,w){return w&&w.internalChannelParams&&w.internalChannelParams[f]||x}function po(f){this.Aa=0,this.i=[],this.j=new Wn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ra("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ra("baseRetryDelayMs",5e3,f),this.cb=ra("retryDelaySeedMs",1e4,f),this.Wa=ra("forwardChannelMaxRetries",2,f),this.wa=ra("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new rs(f&&f.concurrentRequestLimit),this.Da=new ea,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=po.prototype,n.la=8,n.G=1,n.connect=function(f,x,w,S){gt(0),this.W=f,this.H=x||{},w&&S!==void 0&&(this.H.OSID=w,this.H.OAID=S),this.F=this.X,this.I=Vd(this,null,this.W),vo(this)};function hc(f){if(Rd(f),f.G==3){var x=f.U++,w=On(f.I);if(ot(w,"SID",f.K),ot(w,"RID",x),ot(w,"TYPE","terminate"),sa(f,w),x=new bn(f,f.j,x),x.L=2,x.v=Xi(On(w)),w=!1,h.navigator&&h.navigator.sendBeacon)try{w=h.navigator.sendBeacon(x.v.toString(),"")}catch{}!w&&h.Image&&(new Image().src=x.v,w=!0),w||(x.g=Ld(x.j,null),x.g.ea(x.v)),x.F=Date.now(),$i(x)}Md(f)}function yo(f){f.g&&(ia(f),f.g.cancel(),f.g=null)}function Rd(f){yo(f),f.u&&(h.clearTimeout(f.u),f.u=null),xo(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&h.clearTimeout(f.s),f.s=null)}function vo(f){if(!oo(f.h)&&!f.s){f.s=!0;var x=f.Ga;ue||U(),me||(ue(),me=!0),Le.add(x,f),f.B=0}}function Qm(f,x){return lo(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=x.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Pt(_(f.Ga,f,x),gc(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const G=new bn(this,this.j,f);let X=this.o;if(this.S&&(X?(X=k(X),j(X,this.S)):X=this.S),this.m!==null||this.O||(G.H=X,X=null),this.P)e:{for(var x=0,w=0;w<this.i.length;w++){t:{var S=this.i[w];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(x+=S,4096<x){x=w;break e}if(x===4096||w===this.i.length-1){x=w+1;break e}}x=1e3}else x=1e3;x=jd(this,G,x),w=On(this.I),ot(w,"RID",f),ot(w,"CVER",22),this.D&&ot(w,"X-HTTP-Session-Id",this.D),sa(this,w),X&&(this.O?x="headers="+encodeURIComponent(String(dc(X)))+"&"+x:this.m&&$t(w,this.m,X)),co(this.h,G),this.Ua&&ot(w,"TYPE","init"),this.P?(ot(w,"$req",x),ot(w,"SID","null"),G.T=!0,hr(G,w,null)):hr(G,w,x),this.G=2}}else this.G==3&&(f?fc(this,f):this.i.length==0||oo(this.h)||fc(this))};function fc(f,x){var w;x?w=x.l:w=f.U++;const S=On(f.I);ot(S,"SID",f.K),ot(S,"RID",w),ot(S,"AID",f.T),sa(f,S),f.m&&f.o&&$t(S,f.m,f.o),w=new bn(f,f.j,w,f.B+1),f.m===null&&(w.H=f.o),x&&(f.i=x.D.concat(f.i)),x=jd(f,w,1e3),w.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),co(f.h,w),hr(w,S,x)}function sa(f,x){f.H&&se(f.H,function(w,S){ot(x,S,w)}),f.l&&ac({},function(w,S){ot(x,S,w)})}function jd(f,x,w){w=Math.min(f.i.length,w);var S=f.l?_(f.l.Na,f.l,f):null;e:{var G=f.i;let X=-1;for(;;){const de=["count="+w];X==-1?0<w?(X=G[0].g,de.push("ofs="+X)):X=0:de.push("ofs="+X);let $e=!0;for(let zt=0;zt<w;zt++){let Qe=G[zt].g;const Qt=G[zt].map;if(Qe-=X,0>Qe)X=Math.max(0,G[zt].g-100),$e=!1;else try{Dr(Qt,de,"req"+Qe+"_")}catch{S&&S(Qt)}}if($e){S=de.join("&");break e}}}return f=f.i.splice(0,w),x.D=f,S}function Dd(f){if(!f.g&&!f.u){f.Y=1;var x=f.Fa;ue||U(),me||(ue(),me=!0),Le.add(x,f),f.v=0}}function mc(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Pt(_(f.Fa,f),gc(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,Pd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Pt(_(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gt(10),yo(this),Pd(this))};function ia(f){f.A!=null&&(h.clearTimeout(f.A),f.A=null)}function Pd(f){f.g=new bn(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var x=On(f.qa);ot(x,"RID","rpc"),ot(x,"SID",f.K),ot(x,"AID",f.T),ot(x,"CI",f.F?"0":"1"),!f.F&&f.ja&&ot(x,"TO",f.ja),ot(x,"TYPE","xmlhttp"),sa(f,x),f.m&&f.o&&$t(x,f.m,f.o),f.L&&(f.g.I=f.L);var w=f.g;f=f.ia,w.L=1,w.v=Xi(On(x)),w.m=null,w.P=!0,ns(w,f)}n.Za=function(){this.C!=null&&(this.C=null,yo(this),mc(this),gt(19))};function xo(f){f.C!=null&&(h.clearTimeout(f.C),f.C=null)}function Od(f,x){var w=null;if(f.g==x){xo(f),ia(f),f.g=null;var S=2}else if(sc(f.h,x))w=x.D,_n(f.h,x),S=1;else return;if(f.G!=0){if(x.o)if(S==1){w=x.m?x.m.length:0,x=Date.now()-x.F;var G=f.B;S=Bs(),nt(S,new Bt(S,w)),vo(f)}else Dd(f);else if(G=x.s,G==3||G==0&&0<x.X||!(S==1&&Qm(f,x)||S==2&&mc(f)))switch(w&&0<w.length&&(x=f.h,x.i=x.i.concat(w)),G){case 1:cs(f,5);break;case 4:cs(f,10);break;case 3:cs(f,6);break;default:cs(f,2)}}}function gc(f,x){let w=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(w*=2),w*x}function cs(f,x){if(f.j.info("Error code "+x),x==2){var w=_(f.fb,f),S=f.Xa;const G=!S;S=new Ot(S||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Wi(S,"https"),Xi(S),G?Zi(S.toString(),w):fr(S.toString(),w)}else gt(2);f.G=0,f.l&&f.l.sa(x),Md(f),Rd(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function Md(f){if(f.G=0,f.ka=[],f.l){const x=ic(f.h);(x.length!=0||f.i.length!=0)&&(N(f.ka,x),N(f.ka,f.i),f.h.i.length=0,D(f.i),f.i.length=0),f.l.ra()}}function Vd(f,x,w){var S=w instanceof Ot?On(w):new Ot(w);if(S.g!="")x&&(S.g=x+"."+S.g),Gs(S,S.s);else{var G=h.location;S=G.protocol,x=x?x+"."+G.hostname:G.hostname,G=+G.port;var X=new Ot(null);S&&Wi(X,S),x&&(X.g=x),G&&Gs(X,G),w&&(X.l=w),S=X}return w=f.D,x=f.ya,w&&x&&ot(S,w,x),ot(S,"VER",f.la),sa(f,S),S}function Ld(f,x,w){if(x&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return x=f.Ca&&!f.pa?new et(new Ks({eb:w})):new et(f.pa),x.Ha(f.J),x}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ud(){}n=Ud.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function bo(){}bo.prototype.g=function(f,x){return new wn(f,x)};function wn(f,x){wt.call(this),this.g=new po(x),this.l=f,this.h=x&&x.messageUrlParams||null,f=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(f?f["X-WebChannel-Content-Type"]=x.messageContentType:f={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.va&&(f?f["X-WebChannel-Client-Profile"]=x.va:f={"X-WebChannel-Client-Profile":x.va}),this.g.S=f,(f=x&&x.Sb)&&!B(f)&&(this.g.m=f),this.v=x&&x.supportsCrossDomainXhr||!1,this.u=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!B(x)&&(this.g.D=x,f=this.h,f!==null&&x in f&&(f=this.h,x in f&&delete f[x])),this.j=new Vr(this)}I(wn,wt),wn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},wn.prototype.close=function(){hc(this.g)},wn.prototype.o=function(f){var x=this.g;if(typeof f=="string"){var w={};w.__data__=f,f=w}else this.u&&(w={},w.__data__=dr(f),f=w);x.i.push(new Sd(x.Ya++,f)),x.G==3&&vo(x)},wn.prototype.N=function(){this.g.l=null,delete this.j,hc(this.g),delete this.g,wn.aa.N.call(this)};function Bd(f){es.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var x=f.__sm__;if(x){e:{for(const w in x){f=w;break e}f=void 0}(this.i=f)&&(f=this.i,x=x!==null&&f in x?x[f]:void 0),this.data=x}else this.data=f}I(Bd,es);function zd(){ec.call(this),this.status=1}I(zd,ec);function Vr(f){this.g=f}I(Vr,Ud),Vr.prototype.ua=function(){nt(this.g,"a")},Vr.prototype.ta=function(f){nt(this.g,new Bd(f))},Vr.prototype.sa=function(f){nt(this.g,new zd)},Vr.prototype.ra=function(){nt(this.g,"b")},bo.prototype.createWebChannel=bo.prototype.g,wn.prototype.send=wn.prototype.o,wn.prototype.open=wn.prototype.m,wn.prototype.close=wn.prototype.close,uT=function(){return new bo},cT=function(){return Bs()},lT=Ir,Rp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qs.NO_ERROR=0,qs.TIMEOUT=8,qs.HTTP_ERROR=6,of=qs,ts.COMPLETE="complete",oT=ts,Zl.EventType=Zr,Zr.OPEN="a",Zr.CLOSE="b",Zr.ERROR="c",Zr.MESSAGE="d",wt.prototype.listen=wt.prototype.K,mu=Zl,et.prototype.listenOnce=et.prototype.L,et.prototype.getLastError=et.prototype.Ka,et.prototype.getLastErrorCode=et.prototype.Ba,et.prototype.getStatus=et.prototype.Z,et.prototype.getResponseJson=et.prototype.Oa,et.prototype.getResponseText=et.prototype.oa,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Ha,aT=et}).apply(typeof Hh<"u"?Hh:typeof self<"u"?self:typeof window<"u"?window:{});const a1="@firebase/firestore",o1="4.7.16";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};mn.UNAUTHENTICATED=new mn(null),mn.GOOGLE_CREDENTIALS=new mn("google-credentials-uid"),mn.FIRST_PARTY=new mn("first-party-uid"),mn.MOCK_USER=new mn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zl="11.8.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua=new xy("@firebase/firestore");function nl(){return Ua.logLevel}function ce(n,...e){if(Ua.logLevel<=qe.DEBUG){const t=e.map(Ry);Ua.debug(`Firestore (${zl}): ${n}`,...t)}}function Rt(n,...e){if(Ua.logLevel<=qe.ERROR){const t=e.map(Ry);Ua.error(`Firestore (${zl}): ${n}`,...t)}}function Lu(n,...e){if(Ua.logLevel<=qe.WARN){const t=e.map(Ry);Ua.warn(`Firestore (${zl}): ${n}`,...t)}}function Ry(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,dT(n,r,t)}function dT(n,e,t){let r=`FIRESTORE (${zl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Rt(r),new Error(r)}function _e(n,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,n||dT(e,a,r)}function be(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Sr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class X3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(mn.UNAUTHENTICATED))}shutdown(){}}class J3{constructor(e){this.t=e,this.currentUser=mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){_e(this.o===void 0,42304);let r=this.i;const a=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let l=new Wr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Wr,e.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const m=l;e.enqueueRetryable(async()=>{await m.promise,await a(this.currentUser)})},h=m=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(m=>h(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?h(m):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Wr)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string",31837,{l:r}),new W3(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string",2055,{h:e}),new mn(e)}}class Z3{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=mn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ej{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Z3(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(mn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class l1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tj{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,lr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){_e(this.o===void 0,3512);const r=l=>{l.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ce("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const a=l=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new l1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(_e(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new l1(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nj(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=nj(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function Ne(n,e){return n<e?-1:n>e?1:0}function jp(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),a=e.codePointAt(t);if(r!==a){if(r<128&&a<128)return Ne(r,a);{const l=hT(),c=rj(l.encode(c1(n,t)),l.encode(c1(e,t)));return c!==0?c:Ne(r,a)}}t+=r>65535?2:1}return Ne(n.length,e.length)}function c1(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function rj(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ne(n[t],e[t]);return Ne(n.length,e.length)}function gl(n,e,t){return n.length===e.length&&n.every((r,a)=>t(r,e[a]))}function mT(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1=-62135596800,d1=1e6;class _t{static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*d1);return new _t(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<u1)throw new he(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/d1}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-u1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new _t(0,0))}static max(){return new Ee(new _t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1="__name__";class Hr{constructor(e,t,r){t===void 0?t=0:t>e.length&&pe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&pe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Hr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Hr?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=Hr.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Ne(e.length,t.length)}static compareSegments(e,t){const r=Hr.isNumericId(e),a=Hr.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?Hr.extractNumericId(e).compare(Hr.extractNumericId(t)):jp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ki.fromString(e.substring(4,e.length-2))}}class tt extends Hr{construct(e,t,r){return new tt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(a=>a.length>0))}return new tt(t)}static emptyPath(){return new tt([])}}const sj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bt extends Hr{construct(e,t,r){return new bt(e,t,r)}static isValidIdentifier(e){return sj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===h1}static keyField(){return new bt([h1])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new he(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new he(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new he(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,a+=2}else h==="`"?(c=!c,a++):h!=="."||c?(r+=h,a++):(l(),a++)}if(l(),c)throw new he(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bt(t)}static emptyPath(){return new bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.path=e}static fromPath(e){return new fe(tt.fromString(e))}static fromName(e){return new fe(tt.fromString(e).popFirst(5))}static empty(){return new fe(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return tt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new tt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl=-1;class Cf{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function Dp(n){return n.fields.find(e=>e.kind===2)}function Ea(n){return n.fields.filter(e=>e.kind!==2)}Cf.UNKNOWN_ID=-1;class lf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Uu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Uu(0,Qn.min())}}function gT(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=Ee.fromTimestamp(r===1e9?new _t(t+1,0):new _t(t,r));return new Qn(a,fe.empty(),e)}function pT(n){return new Qn(n.readTime,n.key,pl)}class Qn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Qn(Ee.min(),fe.empty(),pl)}static max(){return new Qn(Ee.max(),fe.empty(),pl)}}function jy(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=fe.comparator(n.documentKey,e.documentKey),t!==0?t:Ne(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mi(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==yT)throw n;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new K((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof K?t:K.resolve(t)}catch(t){return K.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):K.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):K.reject(t)}static resolve(e){return new K((t,r)=>{t(e)})}static reject(e){return new K((t,r)=>{r(e)})}static waitFor(e){return new K((t,r)=>{let a=0,l=0,c=!1;e.forEach(h=>{++a,h.next(()=>{++l,c&&l===a&&t()},m=>r(m))}),c=!0,l===a&&t()})}static or(e){let t=K.resolve(!1);for(const r of e)t=t.next(a=>a?K.resolve(a):r());return t}static forEach(e,t){const r=[];return e.forEach((a,l)=>{r.push(t.call(this,a,l))}),this.waitFor(r)}static mapArray(e,t){return new K((r,a)=>{const l=e.length,c=new Array(l);let h=0;for(let m=0;m<l;m++){const p=m;t(e[p]).next(v=>{c[p]=v,++h,h===l&&r(c)},v=>a(v))}})}static doWhile(e,t){return new K((r,a)=>{const l=()=>{e()===!0?t().next(()=>{l()},a):r()};l()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gn="SimpleDb";class dm{static open(e,t,r,a){try{return new dm(t,e.transaction(a,r))}catch(l){throw new Eu(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Wr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Eu(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const a=Dy(r.target.error);this.S.reject(new Eu(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ce(Gn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new aj(t)}}class Ii{static delete(e){return ce(Gn,"Removing database:",e),Aa(hE().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!vy())return!1;if(Ii.F())return!0;const e=Gt(),t=Ii.M(e),r=0<t&&t<10,a=xT(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.B=r,this.L=null,Ii.M(Gt())===12.2&&Rt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(e){return this.db||(ce(Gn,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;t(c)},a.onblocked=()=>{r(new Eu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?r(new he(ne.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new he(ne.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new Eu(e,c))},a.onupgradeneeded=l=>{ce(Gn,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;if(this.L!==null&&this.L!==l.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${l.oldVersion}, event.newVersion=${l.newVersion}, db.version=${c.version}`);this.B.q(c,a.transaction,l.oldVersion,this.version).next(()=>{ce(Gn,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",t=>{const r=t.target;this.L=r.version},{passive:!0})),this.$&&(this.db.onversionchange=t=>this.$(t)),this.db}U(e){this.$=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,a){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.k(e);const h=dm.open(this.db,e,l?"readonly":"readwrite",r),m=a(h).next(p=>(h.v(),p)).catch(p=>(h.abort(p),K.reject(p))).toPromise();return m.catch(()=>{}),await h.D,m}catch(h){const m=h,p=m.name!=="FirebaseError"&&c<3;if(ce(Gn,"Transaction failed with error:",m.message,"Retrying:",p),this.close(),!p)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function xT(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class ij{constructor(e){this.K=e,this.W=!1,this.G=null}get isDone(){return this.W}get j(){return this.G}set cursor(e){this.K=e}done(){this.W=!0}H(e){this.G=e}delete(){return Aa(this.K.delete())}}class Eu extends he{constructor(e,t){super(ne.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Vi(n){return n.name==="IndexedDbTransactionError"}class aj{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ce(Gn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(ce(Gn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Aa(r)}add(e){return ce(Gn,"ADD",this.store.name,e,e),Aa(this.store.add(e))}get(e){return Aa(this.store.get(e)).next(t=>(t===void 0&&(t=null),ce(Gn,"GET",this.store.name,e,t),t))}delete(e){return ce(Gn,"DELETE",this.store.name,e),Aa(this.store.delete(e))}count(){return ce(Gn,"COUNT",this.store.name),Aa(this.store.count())}J(e,t){const r=this.options(e,t),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(r.range);return new K((c,h)=>{l.onerror=m=>{h(m.target.error)},l.onsuccess=m=>{c(m.target.result)}})}{const l=this.cursor(r),c=[];return this.Y(l,(h,m)=>{c.push(m)}).next(()=>c)}}Z(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new K((a,l)=>{r.onerror=c=>{l(c.target.error)},r.onsuccess=c=>{a(c.target.result)}})}X(e,t){ce(Gn,"DELETE ALL",this.store.name);const r=this.options(e,t);r.ee=!1;const a=this.cursor(r);return this.Y(a,(l,c,h)=>h.delete())}te(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.Y(a,t)}ne(e){const t=this.cursor({});return new K((r,a)=>{t.onerror=l=>{const c=Dy(l.target.error);a(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next(h=>{h?c.continue():r()}):r()}})}Y(e,t){const r=[];return new K((a,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const h=c.target.result;if(!h)return void a();const m=new ij(h),p=t(h.primaryKey,h.value,m);if(p instanceof K){const v=p.catch(b=>(m.done(),K.reject(b)));r.push(v)}m.isDone?a():m.j===null?h.continue():h.continue(m.j)}}).next(()=>K.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.ee?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Aa(n){return new K((e,t)=>{n.onsuccess=r=>{const a=r.target.result;e(a)},n.onerror=r=>{const a=Dy(r.target.error);t(a)}})}let f1=!1;function Dy(n){const e=Ii.M(Gt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new he("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return f1||(f1=!0,setTimeout(()=>{throw r},0)),r}}return n}const Tu="IndexBackfiller";class oj{constructor(e,t){this.asyncQueue=e,this.re=t,this.task=null}start(){this.ie(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ie(e){ce(Tu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.re.se();ce(Tu,`Documents written: ${t}`)}catch(t){Vi(t)?ce(Tu,"Ignoring IndexedDB error during index backfill: ",t):await Mi(t)}await this.ie(6e4)})}}class lj{constructor(e,t){this.localStore=e,this.persistence=t}async se(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.oe(t,e))}oe(e,t){const r=new Set;let a=t,l=!0;return K.doWhile(()=>l===!0&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(c!==null&&!r.has(c))return ce(Tu,`Processing collection: ${c}`),this._e(e,c,a).next(h=>{a-=h,r.add(c)});l=!1})).next(()=>t-a)}_e(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next(l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.ae(a,l)).next(h=>(ce(Tu,`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>c.size)}))}ae(e,t){let r=e;return t.changes.forEach((a,l)=>{const c=pT(l);jy(c,r)>0&&(r=c)}),new Qn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Cn.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da=-1;function hm(n){return n==null}function Bu(n){return n===0&&1/n==-1/0}function bT(n){return typeof n=="number"&&Number.isInteger(n)&&!Bu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rf="";function vn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=m1(e)),e=cj(n.get(t),e);return m1(e)}function cj(n,e){let t=e;const r=n.length;for(let a=0;a<r;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case Rf:t+="";break;default:t+=l}}return t}function m1(n){return n+Rf+""}function Kr(n){const e=n.length;if(_e(e>=2,64408,{path:n}),e===2)return _e(n.charAt(0)===Rf&&n.charAt(1)==="",56145,{path:n}),tt.emptyPath();const t=e-2,r=[];let a="";for(let l=0;l<e;){const c=n.indexOf(Rf,l);switch((c<0||c>t)&&pe(50515,{path:n}),n.charAt(c+1)){case"":const h=n.substring(l,c);let m;a.length===0?m=h:(a+=h,m=a,a=""),r.push(m);break;case"":a+=n.substring(l,c),a+="\0";break;case"":a+=n.substring(l,c+1);break;default:pe(61167,{path:n})}l=c+2}return new tt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta="remoteDocuments",od="owner",Wo="owner",zu="mutationQueues",uj="userId",yr="mutations",g1="batchId",Ca="userMutationsIndex",p1=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(n,e){return[n,vn(e)]}function _T(n,e,t){return[n,vn(e),t]}const dj={},yl="documentMutations",jf="remoteDocumentsV14",hj=["prefixPath","collectionGroup","readTime","documentId"],uf="documentKeyIndex",fj=["prefixPath","collectionGroup","documentId"],wT="collectionGroupIndex",mj=["collectionGroup","readTime","prefixPath","documentId"],Fu="remoteDocumentGlobal",Pp="remoteDocumentGlobalKey",vl="targets",ET="queryTargetsIndex",gj=["canonicalId","targetId"],xl="targetDocuments",pj=["targetId","path"],Py="documentTargetsIndex",yj=["path","targetId"],Df="targetGlobalKey",Pa="targetGlobal",qu="collectionParents",vj=["collectionId","parent"],bl="clientMetadata",xj="clientId",fm="bundles",bj="bundleId",mm="namedQueries",_j="name",Oy="indexConfiguration",wj="indexId",Op="collectionGroupIndex",Ej="collectionGroup",Au="indexState",Tj=["indexId","uid"],TT="sequenceNumberIndex",Aj=["uid","sequenceNumber"],Su="indexEntries",Sj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],AT="documentKeyIndex",kj=["indexId","uid","orderedDocumentKey"],gm="documentOverlays",Ij=["userId","collectionPath","documentId"],Mp="collectionPathOverlayIndex",Nj=["userId","collectionPath","largestBatchId"],ST="collectionGroupOverlayIndex",Cj=["userId","collectionGroup","largestBatchId"],My="globals",Rj="name",kT=[zu,yr,yl,Ta,vl,od,Pa,xl,bl,Fu,qu,fm,mm],jj=[...kT,gm],IT=[zu,yr,yl,jf,vl,od,Pa,xl,bl,Fu,qu,fm,mm,gm],NT=IT,Vy=[...NT,Oy,Au,Su],Dj=Vy,CT=[...Vy,My],Pj=CT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp extends vT{constructor(e,t){super(),this.he=e,this.currentSequenceNumber=t}}function Kt(n,e){const t=be(n);return Ii.N(t.he,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Li(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function RT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,t){this.comparator=e,this.root=t||an.EMPTY}insert(e,t){return new mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,an.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,an.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gh(this.root,e,this.comparator,!0)}}class Gh{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class an{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??an.RED,this.left=a??an.EMPTY,this.right=l??an.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new an(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return an.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return an.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,an.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,an.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw pe(27949);return e+(this.isRed()?0:1)}}an.EMPTY=null,an.RED=!0,an.BLACK=!1;an.EMPTY=new class{constructor(){this.size=0}get key(){throw pe(57766)}get value(){throw pe(16141)}get color(){throw pe(16727)}get left(){throw pe(29726)}get right(){throw pe(36894)}copy(e,t,r,a,l){return this}insert(e,t,r){return new an(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new v1(this.data.getIterator())}getIteratorFrom(e){return new v1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof at)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new at(this.comparator);return t.data=e,t}}class v1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Xo(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.fields=e,e.sort(bt.comparator)}static empty(){return new Rn([])}unionWith(e){let t=new at(bt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Rn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return gl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new jT("Invalid base64 string: "+l):l}}(e);return new jt(t)}static fromUint8Array(e){const t=function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l}(e);return new jt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jt.EMPTY_BYTE_STRING=new jt("");const Oj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ps(n){if(_e(!!n,39018),typeof n=="string"){let e=0;const t=Oj.exec(n);if(_e(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yt(n.seconds),nanos:yt(n.nanos)}}function yt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Os(n){return typeof n=="string"?jt.fromBase64String(n):jt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT="server_timestamp",PT="__type__",OT="__previous_value__",MT="__local_write_time__";function Ly(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[PT])===null||t===void 0?void 0:t.stringValue)===DT}function pm(n){const e=n.mapValue.fields[OT];return Ly(e)?pm(e):e}function Hu(n){const e=Ps(n.mapValue.fields[MT].timestampValue);return new _t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e,t,r,a,l,c,h,m,p,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=p,this.isUsingEmulator=v}}const Pf="(default)";class Ba{constructor(e,t){this.projectId=e,this.database=t||Pf}static empty(){return new Ba("","")}get isDefaultDatabase(){return this.database===Pf}isEqual(e){return e instanceof Ba&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy="__type__",VT="__max__",Ti={mapValue:{fields:{__type__:{stringValue:VT}}}},By="__vector__",_l="value",df={nullValue:"NULL_VALUE"};function Ci(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ly(n)?4:LT(n)?9007199254740991:ym(n)?10:11:pe(28295,{value:n})}function Jr(n,e){if(n===e)return!0;const t=Ci(n);if(t!==Ci(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Hu(n).isEqual(Hu(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Ps(a.timestampValue),h=Ps(l.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(a,l){return Os(a.bytesValue).isEqual(Os(l.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(a,l){return yt(a.geoPointValue.latitude)===yt(l.geoPointValue.latitude)&&yt(a.geoPointValue.longitude)===yt(l.geoPointValue.longitude)}(n,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return yt(a.integerValue)===yt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=yt(a.doubleValue),h=yt(l.doubleValue);return c===h?Bu(c)===Bu(h):isNaN(c)&&isNaN(h)}return!1}(n,e);case 9:return gl(n.arrayValue.values||[],e.arrayValue.values||[],Jr);case 10:case 11:return function(a,l){const c=a.mapValue.fields||{},h=l.mapValue.fields||{};if(y1(c)!==y1(h))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(h[m]===void 0||!Jr(c[m],h[m])))return!1;return!0}(n,e);default:return pe(52216,{left:n})}}function Gu(n,e){return(n.values||[]).find(t=>Jr(t,e))!==void 0}function Ri(n,e){if(n===e)return 0;const t=Ci(n),r=Ci(e);if(t!==r)return Ne(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ne(n.booleanValue,e.booleanValue);case 2:return function(l,c){const h=yt(l.integerValue||l.doubleValue),m=yt(c.integerValue||c.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1}(n,e);case 3:return x1(n.timestampValue,e.timestampValue);case 4:return x1(Hu(n),Hu(e));case 5:return jp(n.stringValue,e.stringValue);case 6:return function(l,c){const h=Os(l),m=Os(c);return h.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(l,c){const h=l.split("/"),m=c.split("/");for(let p=0;p<h.length&&p<m.length;p++){const v=Ne(h[p],m[p]);if(v!==0)return v}return Ne(h.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(l,c){const h=Ne(yt(l.latitude),yt(c.latitude));return h!==0?h:Ne(yt(l.longitude),yt(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return b1(n.arrayValue,e.arrayValue);case 10:return function(l,c){var h,m,p,v;const b=l.fields||{},_=c.fields||{},A=(h=b[_l])===null||h===void 0?void 0:h.arrayValue,I=(m=_[_l])===null||m===void 0?void 0:m.arrayValue,D=Ne(((p=A==null?void 0:A.values)===null||p===void 0?void 0:p.length)||0,((v=I==null?void 0:I.values)===null||v===void 0?void 0:v.length)||0);return D!==0?D:b1(A,I)}(n.mapValue,e.mapValue);case 11:return function(l,c){if(l===Ti.mapValue&&c===Ti.mapValue)return 0;if(l===Ti.mapValue)return 1;if(c===Ti.mapValue)return-1;const h=l.fields||{},m=Object.keys(h),p=c.fields||{},v=Object.keys(p);m.sort(),v.sort();for(let b=0;b<m.length&&b<v.length;++b){const _=jp(m[b],v[b]);if(_!==0)return _;const A=Ri(h[m[b]],p[v[b]]);if(A!==0)return A}return Ne(m.length,v.length)}(n.mapValue,e.mapValue);default:throw pe(23264,{Pe:t})}}function x1(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ne(n,e);const t=Ps(n),r=Ps(e),a=Ne(t.seconds,r.seconds);return a!==0?a:Ne(t.nanos,r.nanos)}function b1(n,e){const t=n.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=Ri(t[a],r[a]);if(l)return l}return Ne(t.length,r.length)}function wl(n){return Lp(n)}function Lp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Ps(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Os(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return fe.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=Lp(l);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${Lp(t.fields[c])}`;return a+"}"}(n.mapValue):pe(61005,{value:n})}function hf(n){switch(Ci(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=pm(n);return e?16+hf(e):16;case 5:return 2*n.stringValue.length;case 6:return Os(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((a,l)=>a+hf(l),0)}(n.arrayValue);case 10:case 11:return function(r){let a=0;return Li(r.fields,(l,c)=>{a+=l.length+hf(c)}),a}(n.mapValue);default:throw pe(13486,{value:n})}}function Ku(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Up(n){return!!n&&"integerValue"in n}function $u(n){return!!n&&"arrayValue"in n}function _1(n){return!!n&&"nullValue"in n}function w1(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ff(n){return!!n&&"mapValue"in n}function ym(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[Uy])===null||t===void 0?void 0:t.stringValue)===By}function ku(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Li(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ku(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ku(n.arrayValue.values[t]);return e}return Object.assign({},n)}function LT(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===VT}const UT={mapValue:{fields:{[Uy]:{stringValue:By},[_l]:{arrayValue:{}}}}};function Vj(n){return"nullValue"in n?df:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ku(Ba.empty(),fe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?ym(n)?UT:{mapValue:{}}:pe(35942,{value:n})}function Lj(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ku(Ba.empty(),fe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?UT:"mapValue"in n?ym(n)?{mapValue:{}}:Ti:pe(61959,{value:n})}function E1(n,e){const t=Ri(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function T1(n,e){const t=Ri(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.value=e}static empty(){return new pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ff(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ku(t)}setAll(e){let t=bt.emptyPath(),r={},a=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,r,a),r={},a=[],t=h.popLast()}c?r[h.lastSegment()]=ku(c):a.push(h.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());ff(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Jr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];ff(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){Li(t,(a,l)=>e[a]=l);for(const a of r)delete e[a]}clone(){return new pn(ku(this.value))}}function BT(n){const e=[];return Li(n.fields,(t,r)=>{const a=new bt([t]);if(ff(r)){const l=BT(r.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)}),new Rn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,t,r,a,l,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=h}static newInvalidDocument(e){return new At(e,0,Ee.min(),Ee.min(),Ee.min(),pn.empty(),0)}static newFoundDocument(e,t,r,a){return new At(e,1,t,Ee.min(),r,a,0)}static newNoDocument(e,t){return new At(e,2,t,Ee.min(),Ee.min(),pn.empty(),0)}static newUnknownDocument(e,t){return new At(e,3,t,Ee.min(),Ee.min(),pn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof At&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new At(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,t){this.position=e,this.inclusive=t}}function A1(n,e,t){let r=0;for(let a=0;a<n.position.length;a++){const l=e[a],c=n.position[a];if(l.field.isKeyField()?r=fe.comparator(fe.fromName(c.referenceValue),t.key):r=Ri(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function S1(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Jr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,t="asc"){this.field=e,this.dir=t}}function Uj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{}class Ge extends zT{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Bj(e,t,r):t==="array-contains"?new qj(e,r):t==="in"?new $T(e,r):t==="not-in"?new Hj(e,r):t==="array-contains-any"?new Gj(e,r):new Ge(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new zj(e,r):new Fj(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ri(t,this.value)):t!==null&&Ci(this.value)===Ci(t)&&this.matchesComparison(Ri(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class it extends zT{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new it(e,t)}matches(e){return Tl(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Tl(n){return n.op==="and"}function Bp(n){return n.op==="or"}function zy(n){return FT(n)&&Tl(n)}function FT(n){for(const e of n.filters)if(e instanceof it)return!1;return!0}function zp(n){if(n instanceof Ge)return n.field.canonicalString()+n.op.toString()+wl(n.value);if(zy(n))return n.filters.map(e=>zp(e)).join(",");{const e=n.filters.map(t=>zp(t)).join(",");return`${n.op}(${e})`}}function qT(n,e){return n instanceof Ge?function(r,a){return a instanceof Ge&&r.op===a.op&&r.field.isEqual(a.field)&&Jr(r.value,a.value)}(n,e):n instanceof it?function(r,a){return a instanceof it&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce((l,c,h)=>l&&qT(c,a.filters[h]),!0):!1}(n,e):void pe(19439)}function HT(n,e){const t=n.filters.concat(e);return it.create(t,n.op)}function GT(n){return n instanceof Ge?function(t){return`${t.field.canonicalString()} ${t.op} ${wl(t.value)}`}(n):n instanceof it?function(t){return t.op.toString()+" {"+t.getFilters().map(GT).join(" ,")+"}"}(n):"Filter"}class Bj extends Ge{constructor(e,t,r){super(e,t,r),this.key=fe.fromName(r.referenceValue)}matches(e){const t=fe.comparator(e.key,this.key);return this.matchesComparison(t)}}class zj extends Ge{constructor(e,t){super(e,"in",t),this.keys=KT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Fj extends Ge{constructor(e,t){super(e,"not-in",t),this.keys=KT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function KT(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>fe.fromName(r.referenceValue))}class qj extends Ge{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $u(t)&&Gu(t.arrayValue,this.value)}}class $T extends Ge{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Gu(this.value.arrayValue,t)}}class Hj extends Ge{constructor(e,t){super(e,"not-in",t)}matches(e){if(Gu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Gu(this.value.arrayValue,t)}}class Gj extends Ge{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$u(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Gu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(e,t=null,r=[],a=[],l=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=h,this.Ie=null}}function Fp(n,e=null,t=[],r=[],a=null,l=null,c=null){return new Kj(n,e,t,r,a,l,c)}function za(n){const e=be(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>zp(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(l){return l.field.canonicalString()+l.dir}(r)).join(","),hm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>wl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>wl(r)).join(",")),e.Ie=t}return e.Ie}function ld(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Uj(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!qT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!S1(n.startAt,e.startAt)&&S1(n.endAt,e.endAt)}function Of(n){return fe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Mf(n,e){return n.filters.filter(t=>t instanceof Ge&&t.field.isEqual(e))}function k1(n,e,t){let r=df,a=!0;for(const l of Mf(n,e)){let c=df,h=!0;switch(l.op){case"<":case"<=":c=Vj(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,h=!1;break;case"!=":case"not-in":c=df}E1({value:r,inclusive:a},{value:c,inclusive:h})<0&&(r=c,a=h)}if(t!==null){for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const c=t.position[l];E1({value:r,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}function I1(n,e,t){let r=Ti,a=!0;for(const l of Mf(n,e)){let c=Ti,h=!0;switch(l.op){case">=":case">":c=Lj(l.value),h=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,h=!1;break;case"!=":case"not-in":c=Ti}T1({value:r,inclusive:a},{value:c,inclusive:h})>0&&(r=c,a=h)}if(t!==null){for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const c=t.position[l];T1({value:r,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e,t=null,r=[],a=[],l=null,c="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=h,this.endAt=m,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function QT(n,e,t,r,a,l,c,h){return new Fl(n,e,t,r,a,l,c,h)}function cd(n){return new Fl(n)}function N1(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function YT(n){return n.collectionGroup!==null}function Iu(n){const e=be(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ee.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new at(bt.comparator);return c.filters.forEach(m=>{m.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ee.push(new Qu(l,r))}),t.has(bt.keyField().canonicalString())||e.Ee.push(new Qu(bt.keyField(),r))}return e.Ee}function $n(n){const e=be(n);return e.de||(e.de=$j(e,Iu(n))),e.de}function $j(n,e){if(n.limitType==="F")return Fp(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new Qu(a.field,l)});const t=n.endAt?new El(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new El(n.startAt.position,n.startAt.inclusive):null;return Fp(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function qp(n,e){const t=n.filters.concat([e]);return new Fl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Hp(n,e,t){return new Fl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function vm(n,e){return ld($n(n),$n(e))&&n.limitType===e.limitType}function WT(n){return`${za($n(n))}|lt:${n.limitType}`}function rl(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(a=>GT(a)).join(", ")}]`),hm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(a=>wl(a)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(a=>wl(a)).join(",")),`Target(${r})`}($n(n))}; limitType=${n.limitType})`}function ud(n,e){return e.isFoundDocument()&&function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):fe.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(n,e)&&function(r,a){for(const l of Iu(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(n,e)&&function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0}(n,e)&&function(r,a){return!(r.startAt&&!function(c,h,m){const p=A1(c,h,m);return c.inclusive?p<=0:p<0}(r.startAt,Iu(r),a)||r.endAt&&!function(c,h,m){const p=A1(c,h,m);return c.inclusive?p>=0:p>0}(r.endAt,Iu(r),a))}(n,e)}function XT(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function JT(n){return(e,t)=>{let r=!1;for(const a of Iu(n)){const l=Qj(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function Qj(n,e,t){const r=n.field.isKeyField()?fe.comparator(e.key,t.key):function(l,c,h){const m=c.data.field(l),p=h.data.field(l);return m!==null&&p!==null?Ri(m,p):pe(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return pe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Li(this.inner,(t,r)=>{for(const[a,l]of r)e(a,l)})}isEmpty(){return RT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yj=new mt(fe.comparator);function Kn(){return Yj}const ZT=new mt(fe.comparator);function gu(...n){let e=ZT;for(const t of n)e=e.insert(t.key,t);return e}function eA(n){let e=ZT;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function $r(){return Nu()}function tA(){return Nu()}function Nu(){return new Ms(n=>n.toString(),(n,e)=>n.isEqual(e))}const Wj=new mt(fe.comparator),Xj=new at(fe.comparator);function Ve(...n){let e=Xj;for(const t of n)e=e.add(t);return e}const Jj=new at(Ne);function Fy(){return Jj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bu(e)?"-0":e}}function nA(n){return{integerValue:""+n}}function rA(n,e){return bT(e)?nA(e):qy(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(){this._=void 0}}function Zj(n,e,t){return n instanceof Al?function(a,l){const c={fields:{[PT]:{stringValue:DT},[MT]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Ly(l)&&(l=pm(l)),l&&(c.fields[OT]=l),{mapValue:c}}(t,e):n instanceof Sl?iA(n,e):n instanceof kl?aA(n,e):function(a,l){const c=sA(a,l),h=C1(c)+C1(a.Re);return Up(c)&&Up(a.Re)?nA(h):qy(a.serializer,h)}(n,e)}function e6(n,e,t){return n instanceof Sl?iA(n,e):n instanceof kl?aA(n,e):t}function sA(n,e){return n instanceof Il?function(r){return Up(r)||function(l){return!!l&&"doubleValue"in l}(r)}(e)?e:{integerValue:0}:null}class Al extends xm{}class Sl extends xm{constructor(e){super(),this.elements=e}}function iA(n,e){const t=oA(e);for(const r of n.elements)t.some(a=>Jr(a,r))||t.push(r);return{arrayValue:{values:t}}}class kl extends xm{constructor(e){super(),this.elements=e}}function aA(n,e){let t=oA(e);for(const r of n.elements)t=t.filter(a=>!Jr(a,r));return{arrayValue:{values:t}}}class Il extends xm{constructor(e,t){super(),this.serializer=e,this.Re=t}}function C1(n){return yt(n.integerValue||n.doubleValue)}function oA(n){return $u(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(e,t){this.field=e,this.transform=t}}function t6(n,e){return n.field.isEqual(e.field)&&function(r,a){return r instanceof Sl&&a instanceof Sl||r instanceof kl&&a instanceof kl?gl(r.elements,a.elements,Jr):r instanceof Il&&a instanceof Il?Jr(r.Re,a.Re):r instanceof Al&&a instanceof Al}(n.transform,e.transform)}class n6{constructor(e,t){this.version=e,this.transformResults=t}}class on{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class bm{}function lA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new _m(n.key,on.none()):new ql(n.key,n.data,on.none());{const t=n.data,r=pn.empty();let a=new at(bt.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new Vs(n.key,r,new Rn(a.toArray()),on.none())}}function r6(n,e,t){n instanceof ql?function(a,l,c){const h=a.value.clone(),m=j1(a.fieldTransforms,l,c.transformResults);h.setAll(m),l.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):n instanceof Vs?function(a,l,c){if(!mf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const h=j1(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(cA(a)),m.setAll(h),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(n,e,t):function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function Cu(n,e,t,r){return n instanceof ql?function(l,c,h,m){if(!mf(l.precondition,c))return h;const p=l.value.clone(),v=D1(l.fieldTransforms,m,c);return p.setAll(v),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof Vs?function(l,c,h,m){if(!mf(l.precondition,c))return h;const p=D1(l.fieldTransforms,m,c),v=c.data;return v.setAll(cA(l)),v.setAll(p),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(b=>b.field))}(n,e,t,r):function(l,c,h){return mf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h}(n,e,t)}function s6(n,e){let t=null;for(const r of n.fieldTransforms){const a=e.data.field(r.field),l=sA(r.transform,a||null);l!=null&&(t===null&&(t=pn.empty()),t.set(r.field,l))}return t||null}function R1(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&gl(r,a,(l,c)=>t6(l,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ql extends bm{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Vs extends bm{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function cA(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function j1(n,e,t){const r=new Map;_e(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let a=0;a<t.length;a++){const l=n[a],c=l.transform,h=e.data.field(l.field);r.set(l.field,e6(c,h,t[a]))}return r}function D1(n,e,t){const r=new Map;for(const a of n){const l=a.transform,c=t.data.field(a.field);r.set(a.field,Zj(l,c,e))}return r}class _m extends bm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uA extends bm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&r6(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Cu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Cu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=tA();return this.mutations.forEach(a=>{const l=e.get(a.key),c=l.overlayedDocument;let h=this.applyToLocalView(c,l.mutatedFields);h=t.has(a.key)?null:h;const m=lA(c,h);m!==null&&r.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(Ee.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ve())}isEqual(e){return this.batchId===e.batchId&&gl(this.mutations,e.mutations,(t,r)=>R1(t,r))&&gl(this.baseMutations,e.baseMutations,(t,r)=>R1(t,r))}}class Ky{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){_e(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let a=function(){return Wj}();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new Ky(e,t,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt,We;function a6(n){switch(n){case ne.OK:return pe(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return pe(15467,{code:n})}}function dA(n){if(n===void 0)return Rt("GRPC error has no .code"),ne.UNKNOWN;switch(n){case Lt.OK:return ne.OK;case Lt.CANCELLED:return ne.CANCELLED;case Lt.UNKNOWN:return ne.UNKNOWN;case Lt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Lt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Lt.INTERNAL:return ne.INTERNAL;case Lt.UNAVAILABLE:return ne.UNAVAILABLE;case Lt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Lt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Lt.NOT_FOUND:return ne.NOT_FOUND;case Lt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Lt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Lt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Lt.ABORTED:return ne.ABORTED;case Lt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Lt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Lt.DATA_LOSS:return ne.DATA_LOSS;default:return pe(39323,{code:n})}}(We=Lt||(Lt={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o6=new ki([4294967295,4294967295],0);function P1(n){const e=hT().encode(n),t=new iT;return t.update(e),new Uint8Array(t.digest())}function O1(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ki([t,r],0),new ki([a,l],0)]}class Qy{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new pu(`Invalid padding: ${t}`);if(r<0)throw new pu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new pu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new pu(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=ki.fromNumber(this.pe)}we(e,t,r){let a=e.add(t.multiply(ki.fromNumber(r)));return a.compare(o6)===1&&(a=new ki([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=P1(e),[r,a]=O1(t);for(let l=0;l<this.hashCount;l++){const c=this.we(r,a,l);if(!this.Se(c))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Qy(l,a,t);return r.forEach(h=>c.insert(h)),c}insert(e){if(this.pe===0)return;const t=P1(e),[r,a]=O1(t);for(let l=0;l<this.hashCount;l++){const c=this.we(r,a,l);this.be(c)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class pu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,hd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new dd(Ee.min(),a,new mt(Ne),Kn(),Ve())}}class hd{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new hd(r,t,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,t,r,a){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=a}}class hA{constructor(e,t){this.targetId=e,this.Ce=t}}class fA{constructor(e,t,r=jt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class M1{constructor(){this.Fe=0,this.Me=V1(),this.xe=jt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Ve(),t=Ve(),r=Ve();return this.Me.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:pe(38017,{changeType:l})}}),new hd(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=V1()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,_e(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class l6{constructor(e){this.ze=e,this.je=new Map,this.He=Kn(),this.Je=Kh(),this.Ye=Kh(),this.Ze=new mt(Ne)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:pe(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,a)=>{this.it(a)&&t(a)})}ot(e){const t=e.targetId,r=e.Ce.count,a=this._t(t);if(a){const l=a.target;if(Of(l))if(r===0){const c=new fe(l.path);this.tt(t,c,At.newNoDocument(c,Ee.min()))}else _e(r===1,20013,{expectedCount:r});else{const c=this.ut(t);if(c!==r){const h=this.ct(e),m=h?this.lt(h,e,c):1;if(m!==0){this.st(t);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,p)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let c,h;try{c=Os(r).toUint8Array()}catch(m){if(m instanceof jT)return Lu("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{h=new Qy(c,a,l)}catch(m){return Lu(m instanceof pu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return h.pe===0?null:h}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let a=0;return r.forEach(l=>{const c=this.ze.Pt(),h=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.tt(t,l,null),a++)}),a}It(e){const t=new Map;this.je.forEach((l,c)=>{const h=this._t(c);if(h){if(l.current&&Of(h.target)){const m=new fe(h.target.path);this.Et(m).has(c)||this.dt(c,m)||this.tt(c,m,At.newNoDocument(m,e))}l.Le&&(t.set(c,l.qe()),l.Qe())}});let r=Ve();this.Ye.forEach((l,c)=>{let h=!0;c.forEachWhile(m=>{const p=this._t(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(l))}),this.He.forEach((l,c)=>c.setReadTime(e));const a=new dd(e,t,this.Ze,this.He,r);return this.He=Kn(),this.Je=Kh(),this.Ye=Kh(),this.Ze=new mt(Ne),a}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const a=this.rt(e);this.dt(e,t)?a.$e(t,1):a.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new M1,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new at(Ne),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new at(Ne),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new M1),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Kh(){return new mt(fe.comparator)}function V1(){return new mt(fe.comparator)}const c6={asc:"ASCENDING",desc:"DESCENDING"},u6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},d6={and:"AND",or:"OR"};class h6{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Gp(n,e){return n.useProto3Json||hm(e)?e:{value:e}}function Nl(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function f6(n,e){return Nl(n,e.toTimestamp())}function An(n){return _e(!!n,49232),Ee.fromTimestamp(function(t){const r=Ps(t);return new _t(r.seconds,r.nanos)}(n))}function Yy(n,e){return Kp(n,e).canonicalString()}function Kp(n,e){const t=function(a){return new tt(["projects",a.projectId,"databases",a.database])}(n).child("documents");return e===void 0?t:t.child(e)}function gA(n){const e=tt.fromString(n);return _e(TA(e),10190,{key:e.toString()}),e}function Vf(n,e){return Yy(n.databaseId,e.path)}function Oa(n,e){const t=gA(e);if(t.get(1)!==n.databaseId.projectId)throw new he(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new he(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new fe(vA(t))}function pA(n,e){return Yy(n.databaseId,e)}function yA(n){const e=gA(n);return e.length===4?tt.emptyPath():vA(e)}function $p(n){return new tt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function vA(n){return _e(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function L1(n,e,t){return{name:Vf(n,e),fields:t.value.mapValue.fields}}function m6(n,e,t){const r=Oa(n,e.name),a=An(e.updateTime),l=e.createTime?An(e.createTime):Ee.min(),c=new pn({mapValue:{fields:e.fields}}),h=At.newFoundDocument(r,a,l,c);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function g6(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:pe(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(p,v){return p.useProto3Json?(_e(v===void 0||typeof v=="string",58123),jt.fromBase64String(v||"")):(_e(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),jt.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(p){const v=p.code===void 0?ne.UNKNOWN:dA(p.code);return new he(v,p.message||"")}(c);t=new fA(r,a,l,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=Oa(n,r.document.name),l=An(r.document.updateTime),c=r.document.createTime?An(r.document.createTime):Ee.min(),h=new pn({mapValue:{fields:r.document.fields}}),m=At.newFoundDocument(a,l,c,h),p=r.targetIds||[],v=r.removedTargetIds||[];t=new gf(p,v,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=Oa(n,r.document),l=r.readTime?An(r.readTime):Ee.min(),c=At.newNoDocument(a,l),h=r.removedTargetIds||[];t=new gf([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=Oa(n,r.document),l=r.removedTargetIds||[];t=new gf([],l,a,null)}else{if(!("filter"in e))return pe(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new i6(a,l),h=r.targetId;t=new hA(h,c)}}return t}function Lf(n,e){let t;if(e instanceof ql)t={update:L1(n,e.key,e.value)};else if(e instanceof _m)t={delete:Vf(n,e.key)};else if(e instanceof Vs)t={update:L1(n,e.key,e.data),updateMask:_6(e.fieldMask)};else{if(!(e instanceof uA))return pe(16599,{ft:e.type});t={verify:Vf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(l,c){const h=c.transform;if(h instanceof Al)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Sl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof kl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Il)return{fieldPath:c.field.canonicalString(),increment:h.Re};throw pe(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:f6(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:pe(27497)}(n,e.precondition)),t}function Qp(n,e){const t=e.currentDocument?function(l){return l.updateTime!==void 0?on.updateTime(An(l.updateTime)):l.exists!==void 0?on.exists(l.exists):on.none()}(e.currentDocument):on.none(),r=e.updateTransforms?e.updateTransforms.map(a=>function(c,h){let m=null;if("setToServerValue"in h)_e(h.setToServerValue==="REQUEST_TIME",16630,{proto:h}),m=new Al;else if("appendMissingElements"in h){const v=h.appendMissingElements.values||[];m=new Sl(v)}else if("removeAllFromArray"in h){const v=h.removeAllFromArray.values||[];m=new kl(v)}else"increment"in h?m=new Il(c,h.increment):pe(16584,{proto:h});const p=bt.fromServerFormat(h.fieldPath);return new Hy(p,m)}(n,a)):[];if(e.update){e.update.name;const a=Oa(n,e.update.name),l=new pn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=function(m){const p=m.fieldPaths||[];return new Rn(p.map(v=>bt.fromServerFormat(v)))}(e.updateMask);return new Vs(a,l,c,t,r)}return new ql(a,l,t,r)}if(e.delete){const a=Oa(n,e.delete);return new _m(a,t)}if(e.verify){const a=Oa(n,e.verify);return new uA(a,t)}return pe(1463,{proto:e})}function p6(n,e){return n&&n.length>0?(_e(e!==void 0,14353),n.map(t=>function(a,l){let c=a.updateTime?An(a.updateTime):An(l);return c.isEqual(Ee.min())&&(c=An(l)),new n6(c,a.transformResults||[])}(t,e))):[]}function xA(n,e){return{documents:[pA(n,e.path)]}}function bA(n,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=pA(n,a);const l=function(p){if(p.length!==0)return EA(it.create(p,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const c=function(p){if(p.length!==0)return p.map(v=>function(_){return{field:sl(_.field),direction:v6(_.dir)}}(v))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=Gp(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{gt:t,parent:a}}function _A(n){let e=yA(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){_e(r===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=function(b){const _=wA(b);return _ instanceof it&&zy(_)?_.getFilters():[_]}(t.where));let c=[];t.orderBy&&(c=function(b){return b.map(_=>function(I){return new Qu(il(I.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(_))}(t.orderBy));let h=null;t.limit&&(h=function(b){let _;return _=typeof b=="object"?b.value:b,hm(_)?null:_}(t.limit));let m=null;t.startAt&&(m=function(b){const _=!!b.before,A=b.values||[];return new El(A,_)}(t.startAt));let p=null;return t.endAt&&(p=function(b){const _=!b.before,A=b.values||[];return new El(A,_)}(t.endAt)),QT(e,a,c,l,h,"F",m,p)}function y6(n,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe(28987,{purpose:a})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function wA(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=il(t.unaryFilter.field);return Ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=il(t.unaryFilter.field);return Ge.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=il(t.unaryFilter.field);return Ge.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=il(t.unaryFilter.field);return Ge.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pe(61313);default:return pe(60726)}}(n):n.fieldFilter!==void 0?function(t){return Ge.create(il(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pe(58110);default:return pe(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return it.create(t.compositeFilter.filters.map(r=>wA(r)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return pe(1026)}}(t.compositeFilter.op))}(n):pe(30097,{filter:n})}function v6(n){return c6[n]}function x6(n){return u6[n]}function b6(n){return d6[n]}function sl(n){return{fieldPath:n.canonicalString()}}function il(n){return bt.fromServerFormat(n.fieldPath)}function EA(n){return n instanceof Ge?function(t){if(t.op==="=="){if(w1(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NAN"}};if(_1(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(w1(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NOT_NAN"}};if(_1(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sl(t.field),op:x6(t.op),value:t.value}}}(n):n instanceof it?function(t){const r=t.getFilters().map(a=>EA(a));return r.length===1?r[0]:{compositeFilter:{op:b6(t.op),filters:r}}}(n):pe(54877,{filter:n})}function _6(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function TA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,t,r,a,l=Ee.min(),c=Ee.min(),h=jt.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(e){return new ks(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e){this.wt=e}}function w6(n,e){let t;if(e.document)t=m6(n.wt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=fe.fromSegments(e.noDocument.path),a=qa(e.noDocument.readTime);t=At.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return pe(56709);{const r=fe.fromSegments(e.unknownDocument.path),a=qa(e.unknownDocument.version);t=At.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime(function(a){const l=new _t(a[0],a[1]);return Ee.fromTimestamp(l)}(e.readTime)),t}function U1(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Uf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(l,c){return{name:Vf(l,c.key),fields:c.data.value.mapValue.fields,updateTime:Nl(l,c.version.toTimestamp()),createTime:Nl(l,c.createTime.toTimestamp())}}(n.wt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Fa(e.version)};else{if(!e.isUnknownDocument())return pe(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Fa(e.version)}}return r}function Uf(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Fa(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function qa(n){const e=new _t(n.seconds,n.nanoseconds);return Ee.fromTimestamp(e)}function Sa(n,e){const t=(e.baseMutations||[]).map(l=>Qp(n.wt,l));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const h=e.mutations[l+1];c.updateTransforms=h.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const r=e.mutations.map(l=>Qp(n.wt,l)),a=_t.fromMillis(e.localWriteTimeMs);return new Gy(e.batchId,a,t,r)}function yu(n){const e=qa(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?qa(n.lastLimboFreeSnapshotVersion):Ee.min();let r;return r=function(l){return l.documents!==void 0}(n.query)?function(l){const c=l.documents.length;return _e(c===1,1966,{count:c}),$n(cd(yA(l.documents[0])))}(n.query):function(l){return $n(_A(l))}(n.query),new ks(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,jt.fromBase64String(n.resumeToken))}function SA(n,e){const t=Fa(e.snapshotVersion),r=Fa(e.lastLimboFreeSnapshotVersion);let a;a=Of(e.target)?xA(n.wt,e.target):bA(n.wt,e.target).gt;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:za(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function kA(n){const e=_A({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Hp(e,e.limit,"L"):e}function rp(n,e){return new $y(e.largestBatchId,Qp(n.wt,e.overlayMutation))}function B1(n,e){const t=e.path.lastSegment();return[n,vn(e.path.popLast()),t]}function z1(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Fa(r.readTime),documentKey:vn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{getBundleMetadata(e,t){return F1(e).get(t).next(r=>{if(r)return function(l){return{id:l.bundleId,createTime:qa(l.createTime),version:l.version}}(r)})}saveBundleMetadata(e,t){return F1(e).put(function(a){return{bundleId:a.id,createTime:Fa(An(a.createTime)),version:a.version}}(t))}getNamedQuery(e,t){return q1(e).get(t).next(r=>{if(r)return function(l){return{name:l.name,query:kA(l.bundledQuery),readTime:qa(l.readTime)}}(r)})}saveNamedQuery(e,t){return q1(e).put(function(a){return{name:a.name,readTime:Fa(An(a.readTime)),bundledQuery:a.bundledQuery}}(t))}}function F1(n){return Kt(n,fm)}function q1(n){return Kt(n,mm)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e,t){this.serializer=e,this.userId=t}static St(e,t){const r=t.uid||"";return new wm(e,r)}getOverlay(e,t){return au(e).get(B1(this.userId,t)).next(r=>r?rp(this.serializer,r):null)}getOverlays(e,t){const r=$r();return K.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&r.set(a,l)})).next(()=>r)}saveOverlays(e,t,r){const a=[];return r.forEach((l,c)=>{const h=new $y(t,c);a.push(this.bt(e,h))}),K.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach(c=>a.add(vn(c.getCollectionPath())));const l=[];return a.forEach(c=>{const h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);l.push(au(e).X(Mp,h))}),K.waitFor(l)}getOverlaysForCollection(e,t,r){const a=$r(),l=vn(t),c=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return au(e).J(Mp,c).next(h=>{for(const m of h){const p=rp(this.serializer,m);a.set(p.getKey(),p)}return a})}getOverlaysForCollectionGroup(e,t,r,a){const l=$r();let c;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return au(e).te({index:ST,range:h},(m,p,v)=>{const b=rp(this.serializer,p);l.size()<a||b.largestBatchId===c?(l.set(b.getKey(),b),c=b.largestBatchId):v.done()}).next(()=>l)}bt(e,t){return au(e).put(function(a,l,c){const[h,m,p]=B1(l,c.mutation.key);return{userId:l,collectionPath:m,documentId:p,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Lf(a.wt,c.mutation)}}(this.serializer,this.userId,t))}}function au(n){return Kt(n,gm)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{Dt(e){return Kt(e,My)}getSessionToken(e){return this.Dt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?jt.fromUint8Array(r):jt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(yt(e.integerValue));else if("doubleValue"in e){const r=yt(e.doubleValue);isNaN(r)?this.Mt(t,13):(this.Mt(t,15),Bu(r)?t.xt(0):t.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(t,20),typeof r=="string"&&(r=Ps(r)),t.Ot(`${r.seconds||""}`),t.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(Os(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Mt(t,45),t.xt(r.latitude||0),t.xt(r.longitude||0)}else"mapValue"in e?LT(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):ym(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):pe(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){const r=e.fields||{};this.Mt(t,55);for(const a of Object.keys(r))this.Nt(a,t),this.Ct(r[a],t)}qt(e,t){var r,a;const l=e.fields||{};this.Mt(t,53);const c=_l,h=((a=(r=l[c].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.length)||0;this.Mt(t,15),t.xt(yt(h)),this.Nt(c,t),this.Ct(l[c],t)}$t(e,t){const r=e.values||[];this.Mt(t,50);for(const a of r)this.Ct(a,t)}kt(e,t){this.Mt(t,37),fe.fromName(e).path.forEach(r=>{this.Mt(t,60),this.Kt(r,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}}ka.Wt=new ka;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo=255;function A6(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function H1(n){const e=64-function(r){let a=0;for(let l=0;l<8;++l){const c=A6(255&r[l]);if(a+=c,c!==8)break}return a}(n);return Math.ceil(e/8)}class S6{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Gt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.zt(r.value),r=t.next();this.jt()}Ht(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Yt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.zt(r);else if(r<2048)this.zt(960|r>>>6),this.zt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.zt(480|r>>>12),this.zt(128|63&r>>>6),this.zt(128|63&r);else{const a=t.codePointAt(0);this.zt(240|a>>>18),this.zt(128|63&a>>>12),this.zt(128|63&a>>>6),this.zt(128|63&a)}}this.jt()}Xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const a=t.codePointAt(0);this.Jt(240|a>>>18),this.Jt(128|63&a>>>12),this.Jt(128|63&a>>>6),this.Jt(128|63&a)}}this.Yt()}en(e){const t=this.tn(e),r=H1(t);this.nn(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}rn(e){const t=this.tn(e),r=H1(t);this.nn(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}sn(){this._n(Jo),this._n(255)}an(){this.un(Jo),this.un(255)}reset(){this.position=0}seed(e){this.nn(e.length),this.buffer.set(e,this.position),this.position+=e.length}cn(){return this.buffer.slice(0,this.position)}tn(e){const t=function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}zt(e){const t=255&e;t===0?(this._n(0),this._n(255)):t===Jo?(this._n(Jo),this._n(0)):this._n(t)}Jt(e){const t=255&e;t===0?(this.un(0),this.un(255)):t===Jo?(this.un(Jo),this.un(0)):this.un(e)}jt(){this._n(0),this._n(1)}Yt(){this.un(0),this.un(1)}_n(e){this.nn(1),this.buffer[this.position++]=e}un(e){this.nn(1),this.buffer[this.position++]=~e}nn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class k6{constructor(e){this.ln=e}Lt(e){this.ln.Gt(e)}Ot(e){this.ln.Zt(e)}xt(e){this.ln.en(e)}Ft(){this.ln.sn()}}class I6{constructor(e){this.ln=e}Lt(e){this.ln.Ht(e)}Ot(e){this.ln.Xt(e)}xt(e){this.ln.rn(e)}Ft(){this.ln.an()}}class ou{constructor(){this.ln=new S6,this.hn=new k6(this.ln),this.Pn=new I6(this.ln)}seed(e){this.ln.seed(e)}Tn(e){return e===0?this.hn:this.Pn}cn(){return this.ln.cn()}reset(){this.ln.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,t,r,a){this.In=e,this.En=t,this.dn=r,this.An=a}Rn(){const e=this.An.length,t=e===0||this.An[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.An,0),t!==e?r.set([0],this.An.length):++r[r.length-1],new Ia(this.In,this.En,this.dn,r)}Vn(e,t,r){return{indexId:this.In,uid:e,arrayValue:pf(this.dn),directionalValue:pf(this.An),orderedDocumentKey:pf(t),documentKey:r.path.toArray()}}mn(e,t,r){const a=this.Vn(e,t,r);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function gi(n,e){let t=n.In-e.In;return t!==0?t:(t=G1(n.dn,e.dn),t!==0?t:(t=G1(n.An,e.An),t!==0?t:fe.comparator(n.En,e.En)))}function G1(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function pf(n){return xE()?function(t){let r="";for(let a=0;a<t.length;a++)r+=String.fromCharCode(t[a]);return r}(n):n}function K1(n){return typeof n!="string"?n:function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r}(n)}class $1{constructor(e){this.fn=new at((t,r)=>bt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.gn=e.orderBy,this.pn=[];for(const t of e.filters){const r=t;r.isInequality()?this.fn=this.fn.add(r):this.pn.push(r)}}get yn(){return this.fn.size>1}wn(e){if(_e(e.collectionGroup===this.collectionId,49279),this.yn)return!1;const t=Dp(e);if(t!==void 0&&!this.Sn(t))return!1;const r=Ea(e);let a=new Set,l=0,c=0;for(;l<r.length&&this.Sn(r[l]);++l)a=a.add(r[l].fieldPath.canonicalString());if(l===r.length)return!0;if(this.fn.size>0){const h=this.fn.getIterator().getNext();if(!a.has(h.field.canonicalString())){const m=r[l];if(!this.bn(h,m)||!this.Dn(this.gn[c++],m))return!1}++l}for(;l<r.length;++l){const h=r[l];if(c>=this.gn.length||!this.Dn(this.gn[c++],h))return!1}return!0}vn(){if(this.yn)return null;let e=new at(bt.comparator);const t=[];for(const r of this.pn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new lf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new lf(r.field,0))}for(const r of this.gn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new lf(r.field,r.dir==="asc"?0:1)));return new Cf(Cf.UNKNOWN_ID,this.collectionId,t,Uu.empty())}Sn(e){for(const t of this.pn)if(this.bn(t,e))return!0;return!1}bn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}Dn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(n){var e,t;if(_e(n instanceof Ge||n instanceof it,20012),n instanceof Ge){if(n instanceof $T){const a=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(l=>Ge.create(n.field,"==",l)))||[];return it.create(a,"or")}return n}const r=n.filters.map(a=>IA(a));return it.create(r,n.op)}function N6(n){if(n.getFilters().length===0)return[];const e=Xp(IA(n));return _e(NA(e),7391),Yp(e)||Wp(e)?[e]:e.getFilters()}function Yp(n){return n instanceof Ge}function Wp(n){return n instanceof it&&zy(n)}function NA(n){return Yp(n)||Wp(n)||function(t){if(t instanceof it&&Bp(t)){for(const r of t.getFilters())if(!Yp(r)&&!Wp(r))return!1;return!0}return!1}(n)}function Xp(n){if(_e(n instanceof Ge||n instanceof it,34018),n instanceof Ge)return n;if(n.filters.length===1)return Xp(n.filters[0]);const e=n.filters.map(r=>Xp(r));let t=it.create(e,n.op);return t=Bf(t),NA(t)?t:(_e(t instanceof it,64498),_e(Tl(t),40251),_e(t.filters.length>1,57927),t.filters.reduce((r,a)=>Wy(r,a)))}function Wy(n,e){let t;return _e(n instanceof Ge||n instanceof it,38388),_e(e instanceof Ge||e instanceof it,25473),t=n instanceof Ge?e instanceof Ge?function(a,l){return it.create([a,l],"and")}(n,e):Q1(n,e):e instanceof Ge?Q1(e,n):function(a,l){if(_e(a.filters.length>0&&l.filters.length>0,48005),Tl(a)&&Tl(l))return HT(a,l.getFilters());const c=Bp(a)?a:l,h=Bp(a)?l:a,m=c.filters.map(p=>Wy(p,h));return it.create(m,"or")}(n,e),Bf(t)}function Q1(n,e){if(Tl(e))return HT(e,n.getFilters());{const t=e.filters.map(r=>Wy(n,r));return it.create(t,"or")}}function Bf(n){if(_e(n instanceof Ge||n instanceof it,11850),n instanceof Ge)return n;const e=n.getFilters();if(e.length===1)return Bf(e[0]);if(FT(n))return n;const t=e.map(a=>Bf(a)),r=[];return t.forEach(a=>{a instanceof Ge?r.push(a):a instanceof it&&(a.op===n.op?r.push(...a.filters):r.push(a))}),r.length===1?r[0]:it.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(){this.Cn=new Xy}addToCollectionParentIndex(e,t){return this.Cn.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(Qn.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(Qn.min())}updateCollectionGroup(e,t,r){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}}class Xy{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new at(tt.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new at(tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1="IndexedDbIndexManager",$h=new Uint8Array(0);class R6{constructor(e,t){this.databaseId=t,this.Fn=new Xy,this.Mn=new Ms(r=>za(r),(r,a)=>ld(r,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Fn.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.Fn.add(t)});const l={collectionId:r,parent:vn(a)};return W1(e).put(l)}return K.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[mT(t),""],!1,!0);return W1(e).J(a).next(l=>{for(const c of l){if(c.collectionId!==t)break;r.push(Kr(c.parent))}return r})}addFieldIndex(e,t){const r=lu(e),a=function(h){return{indexId:h.indexId,collectionGroup:h.collectionGroup,fields:h.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])}}(t);delete a.indexId;const l=r.add(a);if(t.indexState){const c=el(e);return l.next(h=>{c.put(z1(h,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const r=lu(e),a=el(e),l=Zo(e);return r.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=lu(e),r=Zo(e),a=el(e);return t.X().next(()=>r.X()).next(()=>a.X())}createTargetIndexes(e,t){return K.forEach(this.xn(t),r=>this.getIndexType(e,r).next(a=>{if(a===0||a===1){const l=new $1(r).vn();if(l!=null)return this.addFieldIndex(e,l)}}))}getDocumentsMatchingTarget(e,t){const r=Zo(e);let a=!0;const l=new Map;return K.forEach(this.xn(t),c=>this.On(e,c).next(h=>{a&&(a=!!h),l.set(c,h)})).next(()=>{if(a){let c=Ve();const h=[];return K.forEach(l,(m,p)=>{ce(Y1,`Using index ${function(H){return`id=${H.indexId}|cg=${H.collectionGroup}|f=${H.fields.map(te=>`${te.fieldPath}:${te.kind}`).join(",")}`}(m)} to execute ${za(t)}`);const v=function(H,te){const ee=Dp(te);if(ee===void 0)return null;for(const se of Mf(H,ee.fieldPath))switch(se.op){case"array-contains-any":return se.value.arrayValue.values||[];case"array-contains":return[se.value]}return null}(p,m),b=function(H,te){const ee=new Map;for(const se of Ea(te))for(const O of Mf(H,se.fieldPath))switch(O.op){case"==":case"in":ee.set(se.fieldPath.canonicalString(),O.value);break;case"not-in":case"!=":return ee.set(se.fieldPath.canonicalString(),O.value),Array.from(ee.values())}return null}(p,m),_=function(H,te){const ee=[];let se=!0;for(const O of Ea(te)){const k=O.kind===0?k1(H,O.fieldPath,H.startAt):I1(H,O.fieldPath,H.startAt);ee.push(k.value),se&&(se=k.inclusive)}return new El(ee,se)}(p,m),A=function(H,te){const ee=[];let se=!0;for(const O of Ea(te)){const k=O.kind===0?I1(H,O.fieldPath,H.endAt):k1(H,O.fieldPath,H.endAt);ee.push(k.value),se&&(se=k.inclusive)}return new El(ee,se)}(p,m),I=this.Nn(m,p,_),D=this.Nn(m,p,A),N=this.Bn(m,p,b),V=this.Ln(m.indexId,v,I,_.inclusive,D,A.inclusive,N);return K.forEach(V,B=>r.Z(B,t.limit).next(H=>{H.forEach(te=>{const ee=fe.fromSegments(te.documentKey);c.has(ee)||(c=c.add(ee),h.push(ee))})}))}).next(()=>h)}return K.resolve(null)})}xn(e){let t=this.Mn.get(e);return t||(e.filters.length===0?t=[e]:t=N6(it.create(e.filters,"and")).map(r=>Fp(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Mn.set(e,t),t)}Ln(e,t,r,a,l,c,h){const m=(t!=null?t.length:1)*Math.max(r.length,l.length),p=m/(t!=null?t.length:1),v=[];for(let b=0;b<m;++b){const _=t?this.kn(t[b/p]):$h,A=this.qn(e,_,r[b%p],a),I=this.Qn(e,_,l[b%p],c),D=h.map(N=>this.qn(e,_,N,!0));v.push(...this.createRange(A,I,D))}return v}qn(e,t,r,a){const l=new Ia(e,fe.empty(),t,r);return a?l:l.Rn()}Qn(e,t,r,a){const l=new Ia(e,fe.empty(),t,r);return a?l.Rn():l}On(e,t){const r=new $1(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(l=>{let c=null;for(const h of l)r.wn(h)&&(!c||h.fields.length>c.fields.length)&&(c=h);return c})}getIndexType(e,t){let r=2;const a=this.xn(t);return K.forEach(a,l=>this.On(e,l).next(c=>{c?r!==0&&c.fields.length<function(m){let p=new at(bt.comparator),v=!1;for(const b of m.filters)for(const _ of b.getFlattenedFilters())_.field.isKeyField()||(_.op==="array-contains"||_.op==="array-contains-any"?v=!0:p=p.add(_.field));for(const b of m.orderBy)b.field.isKeyField()||(p=p.add(b.field));return p.size+(v?1:0)}(l)&&(r=1):r=0})).next(()=>function(c){return c.limit!==null}(t)&&a.length>1&&r===2?1:r)}$n(e,t){const r=new ou;for(const a of Ea(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const c=r.Tn(a.kind);ka.Wt.vt(l,c)}return r.cn()}kn(e){const t=new ou;return ka.Wt.vt(e,t.Tn(0)),t.cn()}Un(e,t){const r=new ou;return ka.Wt.vt(Ku(this.databaseId,t),r.Tn(function(l){const c=Ea(l);return c.length===0?0:c[c.length-1].kind}(e))),r.cn()}Bn(e,t,r){if(r===null)return[];let a=[];a.push(new ou);let l=0;for(const c of Ea(e)){const h=r[l++];for(const m of a)if(this.Kn(t,c.fieldPath)&&$u(h))a=this.Wn(a,c,h);else{const p=m.Tn(c.kind);ka.Wt.vt(h,p)}}return this.Gn(a)}Nn(e,t,r){return this.Bn(e,t,r.position)}Gn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].cn();return t}Wn(e,t,r){const a=[...e],l=[];for(const c of r.arrayValue.values||[])for(const h of a){const m=new ou;m.seed(h.cn()),ka.Wt.vt(c,m.Tn(t.kind)),l.push(m)}return l}Kn(e,t){return!!e.filters.find(r=>r instanceof Ge&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=lu(e),a=el(e);return(t?r.J(Op,IDBKeyRange.bound(t,t)):r.J()).next(l=>{const c=[];return K.forEach(l,h=>a.get([h.indexId,this.uid]).next(m=>{c.push(function(v,b){const _=b?new Uu(b.sequenceNumber,new Qn(qa(b.readTime),new fe(Kr(b.documentKey)),b.largestBatchId)):Uu.empty(),A=v.fields.map(([I,D])=>new lf(bt.fromServerFormat(I),D));return new Cf(v.indexId,v.collectionGroup,A,_)}(h,m))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,a)=>{const l=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Ne(r.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const a=lu(e),l=el(e);return this.zn(e).next(c=>a.J(Op,IDBKeyRange.bound(t,t)).next(h=>K.forEach(h,m=>l.put(z1(m.indexId,this.uid,c,r)))))}updateIndexEntries(e,t){const r=new Map;return K.forEach(t,(a,l)=>{const c=r.get(a.collectionGroup);return(c?K.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next(h=>(r.set(a.collectionGroup,h),K.forEach(h,m=>this.jn(e,a,m).next(p=>{const v=this.Hn(l,m);return p.isEqual(v)?K.resolve():this.Jn(e,l,m,p,v)}))))})}Yn(e,t,r,a){return Zo(e).put(a.Vn(this.uid,this.Un(r,t.key),t.key))}Zn(e,t,r,a){return Zo(e).delete(a.mn(this.uid,this.Un(r,t.key),t.key))}jn(e,t,r){const a=Zo(e);let l=new at(gi);return a.te({index:AT,range:IDBKeyRange.only([r.indexId,this.uid,pf(this.Un(r,t))])},(c,h)=>{l=l.add(new Ia(r.indexId,t,K1(h.arrayValue),K1(h.directionalValue)))}).next(()=>l)}Hn(e,t){let r=new at(gi);const a=this.$n(t,e);if(a==null)return r;const l=Dp(t);if(l!=null){const c=e.data.field(l.fieldPath);if($u(c))for(const h of c.arrayValue.values||[])r=r.add(new Ia(t.indexId,e.key,this.kn(h),a))}else r=r.add(new Ia(t.indexId,e.key,$h,a));return r}Jn(e,t,r,a,l){ce(Y1,"Updating index entries for document '%s'",t.key);const c=[];return function(m,p,v,b,_){const A=m.getIterator(),I=p.getIterator();let D=Xo(A),N=Xo(I);for(;D||N;){let V=!1,B=!1;if(D&&N){const H=v(D,N);H<0?B=!0:H>0&&(V=!0)}else D!=null?B=!0:V=!0;V?(b(N),N=Xo(I)):B?(_(D),D=Xo(A)):(D=Xo(A),N=Xo(I))}}(a,l,gi,h=>{c.push(this.Yn(e,t,r,h))},h=>{c.push(this.Zn(e,t,r,h))}),K.waitFor(c)}zn(e){let t=1;return el(e).te({index:TT,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,a,l)=>{l.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,h)=>gi(c,h)).filter((c,h,m)=>!h||gi(c,m[h-1])!==0);const a=[];a.push(e);for(const c of r){const h=gi(c,e),m=gi(c,t);if(h===0)a[0]=e.Rn();else if(h>0&&m<0)a.push(c),a.push(c.Rn());else if(m>0)break}a.push(t);const l=[];for(let c=0;c<a.length;c+=2){if(this.Xn(a[c],a[c+1]))return[];const h=a[c].mn(this.uid,$h,fe.empty()),m=a[c+1].mn(this.uid,$h,fe.empty());l.push(IDBKeyRange.bound(h,m))}return l}Xn(e,t){return gi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(X1)}getMinOffset(e,t){return K.mapArray(this.xn(t),r=>this.On(e,r).next(a=>a||pe(44426))).next(X1)}}function W1(n){return Kt(n,qu)}function Zo(n){return Kt(n,Su)}function lu(n){return Kt(n,Oy)}function el(n){return Kt(n,Au)}function X1(n){_e(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const a=n[r].indexState.offset;jy(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Qn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},CA=41943040;class gn{static withCacheSize(e){return new gn(e,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(n,e,t){const r=n.store(yr),a=n.store(yl),l=[],c=IDBKeyRange.only(t.batchId);let h=0;const m=r.te({range:c},(v,b,_)=>(h++,_.delete()));l.push(m.next(()=>{_e(h===1,47070,{batchId:t.batchId})}));const p=[];for(const v of t.mutations){const b=_T(e,v.key.path,t.batchId);l.push(a.delete(b)),p.push(v.key)}return K.waitFor(l).next(()=>p)}function zf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw pe(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(CA,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);class Em{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.er={}}static St(e,t,r,a){_e(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new Em(l,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return pi(e).te({index:Ca,range:r},(a,l,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,a){const l=al(e),c=pi(e);return c.add({}).next(h=>{_e(typeof h=="number",49019);const m=new Gy(h,t,r,a),p=function(A,I,D){const N=D.baseMutations.map(B=>Lf(A.wt,B)),V=D.mutations.map(B=>Lf(A.wt,B));return{userId:I,batchId:D.batchId,localWriteTimeMs:D.localWriteTime.toMillis(),baseMutations:N,mutations:V}}(this.serializer,this.userId,m),v=[];let b=new at((_,A)=>Ne(_.canonicalString(),A.canonicalString()));for(const _ of a){const A=_T(this.userId,_.key.path,h);b=b.add(_.key.path.popLast()),v.push(c.put(p)),v.push(l.put(A,dj))}return b.forEach(_=>{v.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.er[h]=m.keys()}),K.waitFor(v).next(()=>m)})}lookupMutationBatch(e,t){return pi(e).get(t).next(r=>r?(_e(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),Sa(this.serializer,r)):null)}tr(e,t){return this.er[t]?K.resolve(this.er[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const a=r.keys();return this.er[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return pi(e).te({index:Ca,range:a},(c,h,m)=>{h.userId===this.userId&&(_e(h.batchId>=r,47524,{nr:r}),l=Sa(this.serializer,h)),m.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Da;return pi(e).te({index:Ca,range:t,reverse:!0},(a,l,c)=>{r=l.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Da],[this.userId,Number.POSITIVE_INFINITY]);return pi(e).J(Ca,t).next(r=>r.map(a=>Sa(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=cf(this.userId,t.path),a=IDBKeyRange.lowerBound(r),l=[];return al(e).te({range:a},(c,h,m)=>{const[p,v,b]=c,_=Kr(v);if(p===this.userId&&t.path.isEqual(_))return pi(e).get(b).next(A=>{if(!A)throw pe(61480,{rr:c,batchId:b});_e(A.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:A.userId,batchId:b}),l.push(Sa(this.serializer,A))});m.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new at(Ne);const a=[];return t.forEach(l=>{const c=cf(this.userId,l.path),h=IDBKeyRange.lowerBound(c),m=al(e).te({range:h},(p,v,b)=>{const[_,A,I]=p,D=Kr(A);_===this.userId&&l.path.isEqual(D)?r=r.add(I):b.done()});a.push(m)}),K.waitFor(a).next(()=>this.ir(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,l=cf(this.userId,r),c=IDBKeyRange.lowerBound(l);let h=new at(Ne);return al(e).te({range:c},(m,p,v)=>{const[b,_,A]=m,I=Kr(_);b===this.userId&&r.isPrefixOf(I)?I.length===a&&(h=h.add(A)):v.done()}).next(()=>this.ir(e,h))}ir(e,t){const r=[],a=[];return t.forEach(l=>{a.push(pi(e).get(l).next(c=>{if(c===null)throw pe(35274,{batchId:l});_e(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:l}),r.push(Sa(this.serializer,c))}))}),K.waitFor(a).next(()=>r)}removeMutationBatch(e,t){return RA(e.he,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.sr(t.batchId)}),K.forEach(r,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}sr(e){delete this.er[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return K.resolve();const r=IDBKeyRange.lowerBound(function(c){return[c]}(this.userId)),a=[];return al(e).te({range:r},(l,c,h)=>{if(l[0]===this.userId){const m=Kr(l[1]);a.push(m)}else h.done()}).next(()=>{_e(a.length===0,56720,{_r:a.map(l=>l.canonicalString())})})})}containsKey(e,t){return jA(e,this.userId,t)}ar(e){return DA(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:Da,lastStreamToken:""})}}function jA(n,e,t){const r=cf(e,t.path),a=r[1],l=IDBKeyRange.lowerBound(r);let c=!1;return al(n).te({range:l,ee:!0},(h,m,p)=>{const[v,b,_]=h;v===e&&b===a&&(c=!0),p.done()}).next(()=>c)}function pi(n){return Kt(n,yr)}function al(n){return Kt(n,yl)}function DA(n){return Kt(n,zu)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Ha(0)}static lr(){return new Ha(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.hr(e).next(t=>{const r=new Ha(t.highestTargetId);return t.highestTargetId=r.next(),this.Pr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.hr(e).next(t=>Ee.fromTimestamp(new _t(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.hr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.hr(e).next(a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.Pr(e,a)))}addTargetData(e,t){return this.Tr(e,t).next(()=>this.hr(e).next(r=>(r.targetCount+=1,this.Ir(t,r),this.Pr(e,r))))}updateTargetData(e,t){return this.Tr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>tl(e).delete(t.targetId)).next(()=>this.hr(e)).next(r=>(_e(r.targetCount>0,8065),r.targetCount-=1,this.Pr(e,r)))}removeTargets(e,t,r){let a=0;const l=[];return tl(e).te((c,h)=>{const m=yu(h);m.sequenceNumber<=t&&r.get(m.targetId)===null&&(a++,l.push(this.removeTargetData(e,m)))}).next(()=>K.waitFor(l)).next(()=>a)}forEachTarget(e,t){return tl(e).te((r,a)=>{const l=yu(a);t(l)})}hr(e){return Z1(e).get(Df).next(t=>(_e(t!==null,2888),t))}Pr(e,t){return Z1(e).put(Df,t)}Tr(e,t){return tl(e).put(SA(this.serializer,t))}Ir(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.hr(e).next(t=>t.targetCount)}getTargetData(e,t){const r=za(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return tl(e).te({range:a,index:ET},(c,h,m)=>{const p=yu(h);ld(t,p.target)&&(l=p,m.done())}).next(()=>l)}addMatchingKeys(e,t,r){const a=[],l=wi(e);return t.forEach(c=>{const h=vn(c.path);a.push(l.put({targetId:r,path:h})),a.push(this.referenceDelegate.addReference(e,r,c))}),K.waitFor(a)}removeMatchingKeys(e,t,r){const a=wi(e);return K.forEach(t,l=>{const c=vn(l.path);return K.waitFor([a.delete([r,c]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=wi(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=wi(e);let l=Ve();return a.te({range:r,ee:!0},(c,h,m)=>{const p=Kr(c[1]),v=new fe(p);l=l.add(v)}).next(()=>l)}containsKey(e,t){const r=vn(t.path),a=IDBKeyRange.bound([r],[mT(r)],!1,!0);let l=0;return wi(e).te({index:Py,ee:!0,range:a},([c,h],m,p)=>{c!==0&&(l++,p.done())}).next(()=>l>0)}Rt(e,t){return tl(e).get(t).next(r=>r?yu(r):null)}}function tl(n){return Kt(n,vl)}function Z1(n){return Kt(n,Pa)}function wi(n){return Kt(n,xl)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2="LruGarbageCollector",PA=1048576;function t2([n,e],[t,r]){const a=Ne(n,t);return a===0?Ne(e,r):a}class D6{constructor(e){this.Er=e,this.buffer=new at(t2),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();t2(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class OA{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){ce(e2,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Vi(t)?ce(e2,"Ignoring IndexedDB error during garbage collection: ",t):await Mi(t)}await this.mr(3e5)})}}class P6{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return K.resolve(Cn.le);const r=new D6(t);return this.gr.forEachTarget(e,a=>r.Rr(a.sequenceNumber)).next(()=>this.gr.yr(e,a=>r.Rr(a))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.gr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(J1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),J1):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let r,a,l,c,h,m,p;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(b=>(b>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),a=this.params.maximumSequenceNumbersToCollect):a=b,c=Date.now(),this.nthSequenceNumber(e,a))).next(b=>(r=b,h=Date.now(),this.removeTargets(e,r,t))).next(b=>(l=b,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(b=>(p=Date.now(),nl()<=qe.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${a} in `+(h-c)+`ms
	Removed ${l} targets in `+(m-h)+`ms
	Removed ${b} documents in `+(p-m)+`ms
Total Duration: ${p-v}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:b})))}}function MA(n,e){return new P6(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(e,t){this.db=e,this.garbageCollector=MA(this,t)}pr(e){const t=this.Sr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}Sr(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}yr(e,t){return this.br(e,(r,a)=>t(a))}addReference(e,t,r){return Qh(e,r)}removeReference(e,t,r){return Qh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Qh(e,t)}Dr(e,t){return function(a,l){let c=!1;return DA(a).ne(h=>jA(a,h,l).next(m=>(m&&(c=!0),K.resolve(!m)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.br(e,(c,h)=>{if(h<=t){const m=this.Dr(e,c).next(p=>{if(!p)return l++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Ee.min()),wi(e).delete(function(b){return[0,vn(b.path)]}(c))))});a.push(m)}}).next(()=>K.waitFor(a)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Qh(e,t)}br(e,t){const r=wi(e);let a,l=Cn.le;return r.te({index:Py},([c,h],{path:m,sequenceNumber:p})=>{c===0?(l!==Cn.le&&t(new fe(Kr(a)),l),l=p,a=m):l=Cn.le}).next(()=>{l!==Cn.le&&t(new fe(Kr(a)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Qh(n,e){return wi(n).put(function(r,a){return{targetId:0,path:vn(r.path),sequenceNumber:a}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(){this.changes=new Ms(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,At.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?K.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return _a(e).put(r)}removeEntry(e,t,r){return _a(e).delete(function(l,c){const h=l.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],Uf(c),h[h.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.vr(e,r)))}getEntry(e,t){let r=At.newInvalidDocument(t);return _a(e).te({index:uf,range:IDBKeyRange.only(cu(t))},(a,l)=>{r=this.Cr(t,l)}).next(()=>r)}Fr(e,t){let r={size:0,document:At.newInvalidDocument(t)};return _a(e).te({index:uf,range:IDBKeyRange.only(cu(t))},(a,l)=>{r={document:this.Cr(t,l),size:zf(l)}}).next(()=>r)}getEntries(e,t){let r=Kn();return this.Mr(e,t,(a,l)=>{const c=this.Cr(a,l);r=r.insert(a,c)}).next(()=>r)}Or(e,t){let r=Kn(),a=new mt(fe.comparator);return this.Mr(e,t,(l,c)=>{const h=this.Cr(l,c);r=r.insert(l,h),a=a.insert(l,zf(c))}).next(()=>({documents:r,Nr:a}))}Mr(e,t,r){if(t.isEmpty())return K.resolve();let a=new at(s2);t.forEach(m=>a=a.add(m));const l=IDBKeyRange.bound(cu(a.first()),cu(a.last())),c=a.getIterator();let h=c.getNext();return _a(e).te({index:uf,range:l},(m,p,v)=>{const b=fe.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;h&&s2(h,b)<0;)r(h,null),h=c.getNext();h&&h.isEqual(b)&&(r(h,p),h=c.hasNext()?c.getNext():null),h?v.H(cu(h)):v.done()}).next(()=>{for(;h;)r(h,null),h=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,a,l){const c=t.path,h=[c.popLast().toArray(),c.lastSegment(),Uf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return _a(e).J(IDBKeyRange.bound(h,m,!0)).next(p=>{l==null||l.incrementDocumentReadCount(p.length);let v=Kn();for(const b of p){const _=this.Cr(fe.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);_.isFoundDocument()&&(ud(t,_)||a.has(_.key))&&(v=v.insert(_.key,_))}return v})}getAllFromCollectionGroup(e,t,r,a){let l=Kn();const c=r2(t,r),h=r2(t,Qn.max());return _a(e).te({index:wT,range:IDBKeyRange.bound(c,h,!0)},(m,p,v)=>{const b=this.Cr(fe.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);l=l.insert(b.key,b),l.size===a&&v.done()}).next(()=>l)}newChangeBuffer(e){return new V6(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return n2(e).get(Pp).next(t=>(_e(!!t,20021),t))}vr(e,t){return n2(e).put(Pp,t)}Cr(e,t){if(t){const r=w6(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Ee.min())))return r}return At.newInvalidDocument(e)}}function LA(n){return new M6(n)}class V6 extends VA{constructor(e,t){super(),this.Br=e,this.trackRemovals=t,this.Lr=new Ms(r=>r.toString(),(r,a)=>r.isEqual(a))}applyChanges(e){const t=[];let r=0,a=new at((l,c)=>Ne(l.canonicalString(),c.canonicalString()));return this.changes.forEach((l,c)=>{const h=this.Lr.get(l);if(t.push(this.Br.removeEntry(e,l,h.readTime)),c.isValidDocument()){const m=U1(this.Br.serializer,c);a=a.add(l.path.popLast());const p=zf(m);r+=p-h.size,t.push(this.Br.addEntry(e,l,m))}else if(r-=h.size,this.trackRemovals){const m=U1(this.Br.serializer,c.convertToNoDocument(Ee.min()));t.push(this.Br.addEntry(e,l,m))}}),a.forEach(l=>{t.push(this.Br.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.Br.updateMetadata(e,r)),K.waitFor(t)}getFromCache(e,t){return this.Br.Fr(e,t).next(r=>(this.Lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Br.Or(e,t).next(({documents:r,Nr:a})=>(a.forEach((l,c)=>{this.Lr.set(l,{size:c,readTime:r.get(l).readTime})}),r))}}function n2(n){return Kt(n,Fu)}function _a(n){return Kt(n,jf)}function cu(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function r2(n,e){const t=e.documentKey.path.toArray();return[n,Uf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function s2(n,e){const t=n.path.toArray(),r=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(a=Ne(t[l],r[l]),a)return a;return a=Ne(t.length,r.length),a||(a=Ne(t[t.length-2],r[r.length-2]),a||Ne(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(r=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(r!==null&&Cu(r.mutation,a,Rn.empty(),_t.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ve()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ve()){const a=$r();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,r).next(l=>{let c=gu();return l.forEach((h,m)=>{c=c.insert(h,m.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=$r();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ve()))}populateOverlays(e,t,r){const a=[];return r.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((c,h)=>{t.set(c,h)})})}computeViews(e,t,r,a){let l=Kn();const c=Nu(),h=function(){return Nu()}();return t.forEach((m,p)=>{const v=r.get(p.key);a.has(p.key)&&(v===void 0||v.mutation instanceof Vs)?l=l.insert(p.key,p):v!==void 0?(c.set(p.key,v.mutation.getFieldMask()),Cu(v.mutation,p,v.mutation.getFieldMask(),_t.now())):c.set(p.key,Rn.empty())}),this.recalculateAndSaveOverlays(e,l).next(m=>(m.forEach((p,v)=>c.set(p,v)),t.forEach((p,v)=>{var b;return h.set(p,new L6(v,(b=c.get(p))!==null&&b!==void 0?b:null))}),h))}recalculateAndSaveOverlays(e,t){const r=Nu();let a=new mt((c,h)=>c-h),l=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const h of c)h.keys().forEach(m=>{const p=t.get(m);if(p===null)return;let v=r.get(m)||Rn.empty();v=h.applyToLocalView(p,v),r.set(m,v);const b=(a.get(h.batchId)||Ve()).add(m);a=a.insert(h.batchId,b)})}).next(()=>{const c=[],h=a.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),p=m.key,v=m.value,b=tA();v.forEach(_=>{if(!l.has(_)){const A=lA(t.get(_),r.get(_));A!==null&&b.set(_,A),l=l.add(_)}}),c.push(this.documentOverlayCache.saveOverlays(e,p,b))}return K.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,a){return function(c){return fe.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):YT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next(l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):K.resolve($r());let h=pl,m=l;return c.next(p=>K.forEach(p,(v,b)=>(h<b.largestBatchId&&(h=b.largestBatchId),l.get(v)?K.resolve():this.remoteDocumentCache.getEntry(e,v).next(_=>{m=m.insert(v,_)}))).next(()=>this.populateOverlays(e,p,l)).next(()=>this.computeViews(e,m,p,Ve())).next(v=>({batchId:h,changes:eA(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new fe(t)).next(r=>{let a=gu();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let c=gu();return this.indexManager.getCollectionParents(e,l).next(h=>K.forEach(h,m=>{const p=function(b,_){return new Fl(_,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)}(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,r,a).next(v=>{v.forEach((b,_)=>{c=c.insert(b,_)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a))).next(c=>{l.forEach((m,p)=>{const v=p.getKey();c.get(v)===null&&(c=c.insert(v,At.newInvalidDocument(v)))});let h=gu();return c.forEach((m,p)=>{const v=l.get(m);v!==void 0&&Cu(v.mutation,p,Rn.empty(),_t.now()),ud(t,p)&&(h=h.insert(m,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return K.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:An(a.createTime)}}(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(a){return{name:a.name,query:kA(a.bundledQuery),readTime:An(a.readTime)}}(t)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(){this.overlays=new mt(fe.comparator),this.Qr=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){const r=$r();return K.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&r.set(a,l)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((a,l)=>{this.bt(e,t,l)}),K.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.Qr.get(r);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Qr.delete(r)),K.resolve()}getOverlaysForCollection(e,t,r){const a=$r(),l=t.length+1,c=new fe(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const m=h.getNext().value,p=m.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&m.largestBatchId>r&&a.set(m.getKey(),m)}return K.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new mt((p,v)=>p-v);const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let v=l.get(p.largestBatchId);v===null&&(v=$r(),l=l.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const h=$r(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((p,v)=>h.set(p,v)),!(h.size()>=a)););return K.resolve(h)}bt(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.Qr.get(a.largestBatchId).delete(r.key);this.Qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new $y(t,r));let l=this.Qr.get(t);l===void 0&&(l=Ve(),this.Qr.set(t,l)),this.Qr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(){this.sessionToken=jt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(){this.$r=new at(Jt.Ur),this.Kr=new at(Jt.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const r=new Jt(e,t);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.zr(new Jt(e,t))}jr(e,t){e.forEach(r=>this.removeReference(r,t))}Hr(e){const t=new fe(new tt([])),r=new Jt(t,e),a=new Jt(t,e+1),l=[];return this.Kr.forEachInRange([r,a],c=>{this.zr(c),l.push(c.key)}),l}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new fe(new tt([])),r=new Jt(t,e),a=new Jt(t,e+1);let l=Ve();return this.Kr.forEachInRange([r,a],c=>{l=l.add(c.key)}),l}containsKey(e){const t=new Jt(e,0),r=this.$r.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Jt{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return fe.comparator(e.key,t.key)||Ne(e.Zr,t.Zr)}static Wr(e,t){return Ne(e.Zr,t.Zr)||fe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new at(Jt.Ur)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Gy(l,t,r,a);this.mutationQueue.push(c);for(const h of a)this.Xr=this.Xr.add(new Jt(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return K.resolve(c)}lookupMutationBatch(e,t){return K.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.ti(r),l=a<0?0:a;return K.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?Da:this.nr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Jt(t,0),a=new Jt(t,Number.POSITIVE_INFINITY),l=[];return this.Xr.forEachInRange([r,a],c=>{const h=this.ei(c.Zr);l.push(h)}),K.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new at(Ne);return t.forEach(a=>{const l=new Jt(a,0),c=new Jt(a,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([l,c],h=>{r=r.add(h.Zr)})}),K.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;fe.isDocumentKey(l)||(l=l.child(""));const c=new Jt(new fe(l),0);let h=new at(Ne);return this.Xr.forEachWhile(m=>{const p=m.key.path;return!!r.isPrefixOf(p)&&(p.length===a&&(h=h.add(m.Zr)),!0)},c),K.resolve(this.ni(h))}ni(e){const t=[];return e.forEach(r=>{const a=this.ei(r);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){_e(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return K.forEach(t.mutations,a=>{const l=new Jt(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,t){const r=new Jt(t,0),a=this.Xr.firstAfterOrEqual(r);return K.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(e){this.ii=e,this.docs=function(){return new mt(fe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,c=this.ii(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return K.resolve(r?r.document.mutableCopy():At.newInvalidDocument(t))}getEntries(e,t){let r=Kn();return t.forEach(a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():At.newInvalidDocument(a))}),K.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=Kn();const c=t.path,h=new fe(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:p,value:{document:v}}=m.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||jy(pT(v),r)<=0||(a.has(v.key)||ud(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return K.resolve(l)}getAllFromCollectionGroup(e,t,r,a){pe(9500)}si(e,t){return K.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new H6(this)}getSize(e){return K.resolve(this.size)}}class H6 extends VA{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?t.push(this.Br.addEntry(e,a)):this.Br.removeEntry(r)}),K.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(e){this.persistence=e,this.oi=new Ms(t=>za(t),ld),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this._i=0,this.ai=new Jy,this.targetCount=0,this.ui=Ha.cr()}forEachTarget(e,t){return this.oi.forEach((r,a)=>t(a)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this._i&&(this._i=t),K.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new Ha(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.Tr(t),K.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.oi.forEach((c,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.oi.delete(c),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)}),K.waitFor(l).next(()=>a)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){const r=this.oi.get(t)||null;return K.resolve(r)}addMatchingKeys(e,t,r){return this.ai.Gr(t,r),K.resolve()}removeMatchingKeys(e,t,r){this.ai.jr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(c=>{l.push(a.markPotentiallyOrphaned(e,c))}),K.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),K.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ai.Yr(t);return K.resolve(r)}containsKey(e,t){return K.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(e,t){this.ci={},this.overlays={},this.li=new Cn(0),this.hi=!1,this.hi=!0,this.Pi=new z6,this.referenceDelegate=e(this),this.Ti=new G6(this),this.indexManager=new C6,this.remoteDocumentCache=function(a){return new q6(a)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new AA(t),this.Ei=new U6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new B6,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ci[e.toKey()];return r||(r=new F6(t,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,r){ce("MemoryPersistence","Starting transaction:",e);const a=new K6(this.li.next());return this.referenceDelegate.di(),r(a).next(l=>this.referenceDelegate.Ai(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ri(e,t){return K.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,t)))}}class K6 extends vT{constructor(e){super(),this.currentSequenceNumber=e}}class Tm{constructor(e){this.persistence=e,this.Vi=new Jy,this.mi=null}static fi(e){return new Tm(e)}get gi(){if(this.mi)return this.mi;throw pe(60996)}addReference(e,t,r){return this.Vi.addReference(r,t),this.gi.delete(r.toString()),K.resolve()}removeReference(e,t,r){return this.Vi.removeReference(r,t),this.gi.add(r.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),K.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(a=>this.gi.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.gi.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.gi,r=>{const a=fe.fromPath(r);return this.pi(e,a).next(l=>{l||t.removeEntry(a,Ee.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(r=>{r?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return K.or([()=>K.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class Ff{constructor(e,t){this.persistence=e,this.yi=new Ms(r=>vn(r.path),(r,a)=>r.isEqual(a)),this.garbageCollector=MA(this,t)}static fi(e,t){return new Ff(e,t)}di(){}Ai(e){return K.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}Sr(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}yr(e,t){return K.forEach(this.yi,(r,a)=>this.Dr(e,r,a).next(l=>l?K.resolve():t(a)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.si(e,c=>this.Dr(e,c,t).next(h=>{h||(r++,l.removeEntry(c,Ee.min()))})).next(()=>l.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),K.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),K.resolve()}removeReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),K.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=hf(e.data.value)),t}Dr(e,t,r){return K.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.yi.get(t);return K.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $6{constructor(e){this.serializer=e}q(e,t,r,a){const l=new dm("createOrUpgrade",t);r<1&&a>=1&&(function(m){m.createObjectStore(od)}(e),function(m){m.createObjectStore(zu,{keyPath:uj}),m.createObjectStore(yr,{keyPath:g1,autoIncrement:!0}).createIndex(Ca,p1,{unique:!0}),m.createObjectStore(yl)}(e),i2(e),function(m){m.createObjectStore(Ta)}(e));let c=K.resolve();return r<3&&a>=3&&(r!==0&&(function(m){m.deleteObjectStore(xl),m.deleteObjectStore(vl),m.deleteObjectStore(Pa)}(e),i2(e)),c=c.next(()=>function(m){const p=m.store(Pa),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ee.min().toTimestamp(),targetCount:0};return p.put(Df,v)}(l))),r<4&&a>=4&&(r!==0&&(c=c.next(()=>function(m,p){return p.store(yr).J().next(b=>{m.deleteObjectStore(yr),m.createObjectStore(yr,{keyPath:g1,autoIncrement:!0}).createIndex(Ca,p1,{unique:!0});const _=p.store(yr),A=b.map(I=>_.put(I));return K.waitFor(A)})}(e,l))),c=c.next(()=>{(function(m){m.createObjectStore(bl,{keyPath:xj})})(e)})),r<5&&a>=5&&(c=c.next(()=>this.wi(l))),r<6&&a>=6&&(c=c.next(()=>(function(m){m.createObjectStore(Fu)}(e),this.Si(l)))),r<7&&a>=7&&(c=c.next(()=>this.bi(l))),r<8&&a>=8&&(c=c.next(()=>this.Di(e,l))),r<9&&a>=9&&(c=c.next(()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&a>=10&&(c=c.next(()=>this.Ci(l))),r<11&&a>=11&&(c=c.next(()=>{(function(m){m.createObjectStore(fm,{keyPath:bj})})(e),function(m){m.createObjectStore(mm,{keyPath:_j})}(e)})),r<12&&a>=12&&(c=c.next(()=>{(function(m){const p=m.createObjectStore(gm,{keyPath:Ij});p.createIndex(Mp,Nj,{unique:!1}),p.createIndex(ST,Cj,{unique:!1})})(e)})),r<13&&a>=13&&(c=c.next(()=>function(m){const p=m.createObjectStore(jf,{keyPath:hj});p.createIndex(uf,fj),p.createIndex(wT,mj)}(e)).next(()=>this.Fi(e,l)).next(()=>e.deleteObjectStore(Ta))),r<14&&a>=14&&(c=c.next(()=>this.Mi(e,l))),r<15&&a>=15&&(c=c.next(()=>function(m){m.createObjectStore(Oy,{keyPath:wj,autoIncrement:!0}).createIndex(Op,Ej,{unique:!1}),m.createObjectStore(Au,{keyPath:Tj}).createIndex(TT,Aj,{unique:!1}),m.createObjectStore(Su,{keyPath:Sj}).createIndex(AT,kj,{unique:!1})}(e))),r<16&&a>=16&&(c=c.next(()=>{t.objectStore(Au).clear()}).next(()=>{t.objectStore(Su).clear()})),r<17&&a>=17&&(c=c.next(()=>{(function(m){m.createObjectStore(My,{keyPath:Rj})})(e)})),r<18&&a>=18&&xE()&&(c=c.next(()=>{t.objectStore(Au).clear()}).next(()=>{t.objectStore(Su).clear()})),c}Si(e){let t=0;return e.store(Ta).te((r,a)=>{t+=zf(a)}).next(()=>{const r={byteSize:t};return e.store(Fu).put(Pp,r)})}wi(e){const t=e.store(zu),r=e.store(yr);return t.J().next(a=>K.forEach(a,l=>{const c=IDBKeyRange.bound([l.userId,Da],[l.userId,l.lastAcknowledgedBatchId]);return r.J(Ca,c).next(h=>K.forEach(h,m=>{_e(m.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:m.batchId});const p=Sa(this.serializer,m);return RA(e,l.userId,p).next(()=>{})}))}))}bi(e){const t=e.store(xl),r=e.store(Ta);return e.store(Pa).get(Df).next(a=>{const l=[];return r.te((c,h)=>{const m=new tt(c),p=function(b){return[0,vn(b)]}(m);l.push(t.get(p).next(v=>v?K.resolve():(b=>t.put({targetId:0,path:vn(b),sequenceNumber:a.highestListenSequenceNumber}))(m)))}).next(()=>K.waitFor(l))})}Di(e,t){e.createObjectStore(qu,{keyPath:vj});const r=t.store(qu),a=new Xy,l=c=>{if(a.add(c)){const h=c.lastSegment(),m=c.popLast();return r.put({collectionId:h,parent:vn(m)})}};return t.store(Ta).te({ee:!0},(c,h)=>{const m=new tt(c);return l(m.popLast())}).next(()=>t.store(yl).te({ee:!0},([c,h,m],p)=>{const v=Kr(h);return l(v.popLast())}))}Ci(e){const t=e.store(vl);return t.te((r,a)=>{const l=yu(a),c=SA(this.serializer,l);return t.put(c)})}Fi(e,t){const r=t.store(Ta),a=[];return r.te((l,c)=>{const h=t.store(jf),m=function(b){return b.document?new fe(tt.fromString(b.document.name).popFirst(5)):b.noDocument?fe.fromSegments(b.noDocument.path):b.unknownDocument?fe.fromSegments(b.unknownDocument.path):pe(36783)}(c).path.toArray(),p={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(h.put(p))}).next(()=>K.waitFor(a))}Mi(e,t){const r=t.store(yr),a=LA(this.serializer),l=new Zy(Tm.fi,this.serializer.wt);return r.J().next(c=>{const h=new Map;return c.forEach(m=>{var p;let v=(p=h.get(m.userId))!==null&&p!==void 0?p:Ve();Sa(this.serializer,m).keys().forEach(b=>v=v.add(b)),h.set(m.userId,v)}),K.forEach(h,(m,p)=>{const v=new mn(p),b=wm.St(this.serializer,v),_=l.getIndexManager(v),A=Em.St(v,this.serializer,_,l.referenceDelegate);return new UA(a,A,b,_).recalculateAndSaveOverlaysForDocumentKeys(new Vp(t,Cn.le),m).next()})})}}function i2(n){n.createObjectStore(xl,{keyPath:pj}).createIndex(Py,yj,{unique:!0}),n.createObjectStore(vl,{keyPath:"targetId"}).createIndex(ET,gj,{unique:!0}),n.createObjectStore(Pa)}const yi="IndexedDbPersistence",sp=18e5,ip=5e3,ap="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Q6="main";class ev{constructor(e,t,r,a,l,c,h,m,p,v,b=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.xi=l,this.window=c,this.document=h,this.Oi=p,this.Ni=v,this.Bi=b,this.li=null,this.hi=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Li=null,this.inForeground=!1,this.ki=null,this.qi=null,this.Qi=Number.NEGATIVE_INFINITY,this.$i=_=>Promise.resolve(),!ev.C())throw new he(ne.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new O6(this,a),this.Ui=t+Q6,this.serializer=new AA(m),this.Ki=new Ii(this.Ui,this.Bi,new $6(this.serializer)),this.Pi=new T6,this.Ti=new j6(this.referenceDelegate,this.serializer),this.remoteDocumentCache=LA(this.serializer),this.Ei=new E6,this.window&&this.window.localStorage?this.Wi=this.window.localStorage:(this.Wi=null,v===!1&&Rt(yi,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Gi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new he(ne.FAILED_PRECONDITION,ap);return this.zi(),this.ji(),this.Hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ti.getHighestSequenceNumber(e))}).then(e=>{this.li=new Cn(e,this.Oi)}).then(()=>{this.hi=!0}).catch(e=>(this.Ki&&this.Ki.close(),Promise.reject(e)))}Ji(e){return this.$i=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ki.U(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.xi.enqueueAndForget(async()=>{this.started&&await this.Gi()}))}Gi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Yh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Yi(e).next(t=>{t||(this.isPrimary=!1,this.xi.enqueueRetryable(()=>this.$i(!1)))})}).next(()=>this.Zi(e)).next(t=>this.isPrimary&&!t?this.Xi(e).next(()=>!1):!!t&&this.es(e).next(()=>!0))).catch(e=>{if(Vi(e))return ce(yi,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ce(yi,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.xi.enqueueRetryable(()=>this.$i(e)),this.isPrimary=e})}Yi(e){return uu(e).get(Wo).next(t=>K.resolve(this.ts(t)))}ns(e){return Yh(e).delete(this.clientId)}async rs(){if(this.isPrimary&&!this.ss(this.Qi,sp)){this.Qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=Kt(t,bl);return r.J().next(a=>{const l=this._s(a,sp),c=a.filter(h=>l.indexOf(h)===-1);return K.forEach(c,h=>r.delete(h.clientId)).next(()=>c)})}).catch(()=>[]);if(this.Wi)for(const t of e)this.Wi.removeItem(this.us(t.clientId))}}Hi(){this.qi=this.xi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Gi().then(()=>this.rs()).then(()=>this.Hi()))}ts(e){return!!e&&e.ownerId===this.clientId}Zi(e){return this.Ni?K.resolve(!0):uu(e).get(Wo).next(t=>{if(t!==null&&this.ss(t.leaseTimestampMs,ip)&&!this.cs(t.ownerId)){if(this.ts(t)&&this.networkEnabled)return!0;if(!this.ts(t)){if(!t.allowTabSynchronization)throw new he(ne.FAILED_PRECONDITION,ap);return!1}}return!(!this.networkEnabled||!this.inForeground)||Yh(e).J().next(r=>this._s(r,ip).find(a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,h=this.networkEnabled===a.networkEnabled;if(l||c&&h)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&ce(yi,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.hi=!1,this.ls(),this.qi&&(this.qi.cancel(),this.qi=null),this.hs(),this.Ps(),await this.Ki.runTransaction("shutdown","readwrite",[od,bl],e=>{const t=new Vp(e,Cn.le);return this.Xi(t).next(()=>this.ns(t))}),this.Ki.close(),this.Ts()}_s(e,t){return e.filter(r=>this.ss(r.updateTimeMs,t)&&!this.cs(r.clientId))}Is(){return this.runTransaction("getActiveClients","readonly",e=>Yh(e).J().next(t=>this._s(t,sp).map(r=>r.clientId)))}get started(){return this.hi}getGlobalsCache(){return this.Pi}getMutationQueue(e,t){return Em.St(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new R6(e,this.serializer.wt.databaseId)}getDocumentOverlayCache(e){return wm.St(this.serializer,e)}getBundleCache(){return this.Ei}runTransaction(e,t,r){ce(yi,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=function(m){return m===18?Pj:m===17?CT:m===16?Dj:m===15?Vy:m===14?NT:m===13?IT:m===12?jj:m===11?kT:void pe(60245)}(this.Bi);let c;return this.Ki.runTransaction(e,a,l,h=>(c=new Vp(h,this.li?this.li.next():Cn.le),t==="readwrite-primary"?this.Yi(c).next(m=>!!m||this.Zi(c)).next(m=>{if(!m)throw Rt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.xi.enqueueRetryable(()=>this.$i(!1)),new he(ne.FAILED_PRECONDITION,yT);return r(c)}).next(m=>this.es(c).next(()=>m)):this.Es(c).next(()=>r(c)))).then(h=>(c.raiseOnCommittedEvent(),h))}Es(e){return uu(e).get(Wo).next(t=>{if(t!==null&&this.ss(t.leaseTimestampMs,ip)&&!this.cs(t.ownerId)&&!this.ts(t)&&!(this.Ni||this.allowTabSynchronization&&t.allowTabSynchronization))throw new he(ne.FAILED_PRECONDITION,ap)})}es(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return uu(e).put(Wo,t)}static C(){return Ii.C()}Xi(e){const t=uu(e);return t.get(Wo).next(r=>this.ts(r)?(ce(yi,"Releasing primary lease."),t.delete(Wo)):K.resolve())}ss(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Rt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}zi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ki=()=>{this.xi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Gi()))},this.document.addEventListener("visibilitychange",this.ki),this.inForeground=this.document.visibilityState==="visible")}hs(){this.ki&&(this.document.removeEventListener("visibilitychange",this.ki),this.ki=null)}ji(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Li=()=>{this.ls();const t=/(?:Version|Mobile)\/1[456]/;vE()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.xi.enterRestrictedMode(!0),this.xi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Li))}Ps(){this.Li&&(this.window.removeEventListener("pagehide",this.Li),this.Li=null)}cs(e){var t;try{const r=((t=this.Wi)===null||t===void 0?void 0:t.getItem(this.us(e)))!==null;return ce(yi,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Rt(yi,"Failed to get zombied client id.",r),!1}}ls(){if(this.Wi)try{this.Wi.setItem(this.us(this.clientId),String(Date.now()))}catch(e){Rt("Failed to set zombie client id.",e)}}Ts(){if(this.Wi)try{this.Wi.removeItem(this.us(this.clientId))}catch{}}us(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function uu(n){return Kt(n,od)}function Yh(n){return Kt(n,bl)}function BA(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.ds=r,this.As=a}static Rs(e,t){let r=Ve(),a=Ve();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new tv(e,t.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return vE()?8:xT(Gt())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.ws(e,t).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.Ss(e,t,a,r).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new Y6;return this.bs(e,t,c).next(h=>{if(l.result=h,this.fs)return this.Ds(e,t,c,h.size)})}).next(()=>l.result)}Ds(e,t,r,a){return r.documentReadCount<this.gs?(nl()<=qe.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",rl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),K.resolve()):(nl()<=qe.DEBUG&&ce("QueryEngine","Query:",rl(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ps*a?(nl()<=qe.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",rl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$n(t))):K.resolve())}ws(e,t){if(N1(t))return K.resolve(null);let r=$n(t);return this.indexManager.getIndexType(e,r).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=Hp(t,null,"F"),r=$n(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(l=>{const c=Ve(...l);return this.ys.getDocuments(e,c).next(h=>this.indexManager.getMinOffset(e,r).next(m=>{const p=this.vs(t,h);return this.Cs(t,p,c,m.readTime)?this.ws(e,Hp(t,null,"F")):this.Fs(e,p,t,m)}))})))}Ss(e,t,r,a){return N1(t)||a.isEqual(Ee.min())?K.resolve(null):this.ys.getDocuments(e,r).next(l=>{const c=this.vs(t,l);return this.Cs(t,c,r,a)?K.resolve(null):(nl()<=qe.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),rl(t)),this.Fs(e,c,t,gT(a,pl)).next(h=>h))})}vs(e,t){let r=new at(JT(e));return t.forEach((a,l)=>{ud(e,l)&&(r=r.add(l))}),r}Cs(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}bs(e,t,r){return nl()<=qe.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",rl(t)),this.ys.getDocumentsMatchingQuery(e,t,Qn.min(),r)}Fs(e,t,r,a){return this.ys.getDocumentsMatchingQuery(e,r,a).next(l=>(t.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv="LocalStore",W6=3e8;class X6{constructor(e,t,r,a){this.persistence=e,this.Ms=t,this.serializer=a,this.xs=new mt(Ne),this.Os=new Ms(l=>za(l),ld),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new UA(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function FA(n,e,t,r){return new X6(n,e,t,r)}async function qA(n,e){const t=be(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next(l=>(a=l,t.Ls(e),t.mutationQueue.getAllMutationBatches(r))).next(l=>{const c=[],h=[];let m=Ve();for(const p of a){c.push(p.batchId);for(const v of p.mutations)m=m.add(v.key)}for(const p of l){h.push(p.batchId);for(const v of p.mutations)m=m.add(v.key)}return t.localDocuments.getDocuments(r,m).next(p=>({ks:p,removedBatchIds:c,addedBatchIds:h}))})})}function J6(n,e){const t=be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=e.batch.keys(),l=t.Bs.newChangeBuffer({trackRemovals:!0});return function(h,m,p,v){const b=p.batch,_=b.keys();let A=K.resolve();return _.forEach(I=>{A=A.next(()=>v.getEntry(m,I)).next(D=>{const N=p.docVersions.get(I);_e(N!==null,48541),D.version.compareTo(N)<0&&(b.applyToRemoteDocument(D,p),D.isValidDocument()&&(D.setReadTime(p.commitVersion),v.addEntry(D)))})}),A.next(()=>h.mutationQueue.removeMutationBatch(m,b))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let m=Ve();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(m=m.add(h.batch.mutations[p].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,a))})}function HA(n){const e=be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function Z6(n,e){const t=be(n),r=e.snapshotVersion;let a=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=t.Bs.newChangeBuffer({trackRemovals:!0});a=t.xs;const h=[];e.targetChanges.forEach((v,b)=>{const _=a.get(b);if(!_)return;h.push(t.Ti.removeMatchingKeys(l,v.removedDocuments,b).next(()=>t.Ti.addMatchingKeys(l,v.addedDocuments,b)));let A=_.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(b)!==null?A=A.withResumeToken(jt.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):v.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(v.resumeToken,r)),a=a.insert(b,A),function(D,N,V){return D.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=W6?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(_,A,v)&&h.push(t.Ti.updateTargetData(l,A))});let m=Kn(),p=Ve();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))}),h.push(eD(l,c,e.documentUpdates).next(v=>{m=v.qs,p=v.Qs})),!r.isEqual(Ee.min())){const v=t.Ti.getLastRemoteSnapshotVersion(l).next(b=>t.Ti.setTargetsMetadata(l,l.currentSequenceNumber,r));h.push(v)}return K.waitFor(h).next(()=>c.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,m,p)).next(()=>m)}).then(l=>(t.xs=a,l))}function eD(n,e,t){let r=Ve(),a=Ve();return t.forEach(l=>r=r.add(l)),e.getEntries(n,r).next(l=>{let c=Kn();return t.forEach((h,m)=>{const p=l.get(h);m.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(h)),m.isNoDocument()&&m.version.isEqual(Ee.min())?(e.removeEntry(h,m.readTime),c=c.insert(h,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),c=c.insert(h,m)):ce(nv,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",m.version)}),{qs:c,Qs:a}})}function tD(n,e){const t=be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Da),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function qf(n,e){const t=be(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return t.Ti.getTargetData(r,e).next(l=>l?(a=l,K.resolve(a)):t.Ti.allocateTargetId(r).next(c=>(a=new ks(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Ti.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=t.xs.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.xs=t.xs.insert(r.targetId,r),t.Os.set(e,r.targetId)),r})}async function Cl(n,e,t){const r=be(n),a=r.xs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,c=>r.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!Vi(c))throw c;ce(nv,`Failed to update sequence numbers for target ${e}: ${c}`)}r.xs=r.xs.remove(e),r.Os.delete(a.target)}function Jp(n,e,t){const r=be(n);let a=Ee.min(),l=Ve();return r.persistence.runTransaction("Execute query","readwrite",c=>function(m,p,v){const b=be(m),_=b.Os.get(v);return _!==void 0?K.resolve(b.xs.get(_)):b.Ti.getTargetData(p,v)}(r,c,$n(e)).next(h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(c,h.targetId).next(m=>{l=m})}).next(()=>r.Ms.getDocumentsMatchingQuery(c,e,t?a:Ee.min(),t?l:Ve())).next(h=>($A(r,XT(e),h),{documents:h,$s:l})))}function GA(n,e){const t=be(n),r=be(t.Ti),a=t.xs.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",l=>r.Rt(l,e).next(c=>c?c.target:null))}function KA(n,e){const t=be(n),r=t.Ns.get(e)||Ee.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Bs.getAllFromCollectionGroup(a,e,gT(r,pl),Number.MAX_SAFE_INTEGER)).then(a=>($A(t,e,a),a))}function $A(n,e,t){let r=n.Ns.get(e)||Ee.min();t.forEach((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),n.Ns.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA="firestore_clients";function a2(n,e){return`${QA}_${n}_${e}`}const YA="firestore_mutations";function o2(n,e,t){let r=`${YA}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const WA="firestore_targets";function op(n,e){return`${WA}_${n}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr="SharedClientState";class Hf{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static Gs(e,t,r){const a=JSON.parse(r);let l,c=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return c&&a.error&&(c=typeof a.error.message=="string"&&typeof a.error.code=="string",c&&(l=new he(a.error.code,a.error.message))),c?new Hf(e,t,a.state,l):(Rt(Gr,`Failed to parse mutation state for ID '${t}': ${r}`),null)}zs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ru{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Gs(e,t){const r=JSON.parse(t);let a,l=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return l&&r.error&&(l=typeof r.error.message=="string"&&typeof r.error.code=="string",l&&(a=new he(r.error.code,r.error.message))),l?new Ru(e,r.state,a):(Rt(Gr,`Failed to parse target state for ID '${e}': ${t}`),null)}zs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Gs(e,t){const r=JSON.parse(t);let a=typeof r=="object"&&r.activeTargetIds instanceof Array,l=Fy();for(let c=0;a&&c<r.activeTargetIds.length;++c)a=bT(r.activeTargetIds[c]),l=l.add(r.activeTargetIds[c]);return a?new Gf(e,l):(Rt(Gr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class rv{constructor(e,t){this.clientId=e,this.onlineState=t}static Gs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new rv(t.clientId,t.onlineState):(Rt(Gr,`Failed to parse online state: ${e}`),null)}}class Zp{constructor(){this.activeTargetIds=Fy()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lp{constructor(e,t,r,a,l){this.window=e,this.xi=t,this.persistenceKey=r,this.Js=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ys=this.Zs.bind(this),this.Xs=new mt(Ne),this.started=!1,this.eo=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.no=a2(this.persistenceKey,this.Js),this.ro=function(m){return`firestore_sequence_number_${m}`}(this.persistenceKey),this.Xs=this.Xs.insert(this.Js,new Zp),this.io=new RegExp(`^${QA}_${c}_([^_]*)$`),this.so=new RegExp(`^${YA}_${c}_(\\d+)(?:_(.*))?$`),this.oo=new RegExp(`^${WA}_${c}_(\\d+)$`),this._o=function(m){return`firestore_online_state_${m}`}(this.persistenceKey),this.ao=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.Ys)}static C(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Is();for(const r of e){if(r===this.Js)continue;const a=this.getItem(a2(this.persistenceKey,r));if(a){const l=Gf.Gs(r,a);l&&(this.Xs=this.Xs.insert(l.clientId,l))}}this.uo();const t=this.storage.getItem(this._o);if(t){const r=this.co(t);r&&this.lo(r)}for(const r of this.eo)this.Zs(r);this.eo=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.ro,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ho(this.Xs)}isActiveQueryTarget(e){let t=!1;return this.Xs.forEach((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Po(e,"pending")}updateMutationState(e,t,r){this.Po(e,t,r),this.To(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(op(this.persistenceKey,e));if(a){const l=Ru.Gs(e,a);l&&(r=l.state)}}return t&&this.Io.js(e),this.uo(),r}removeLocalQueryTarget(e){this.Io.Hs(e),this.uo()}isLocalQueryTarget(e){return this.Io.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(op(this.persistenceKey,e))}updateQueryState(e,t,r){this.Eo(e,t,r)}handleUserChange(e,t,r){t.forEach(a=>{this.To(a)}),this.currentUser=e,r.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Ao(e)}notifyBundleLoaded(e){this.Ro(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Ys),this.removeItem(this.no),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ce(Gr,"READ",e,t),t}setItem(e,t){ce(Gr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ce(Gr,"REMOVE",e),this.storage.removeItem(e)}Zs(e){const t=e;if(t.storageArea===this.storage){if(ce(Gr,"EVENT",t.key,t.newValue),t.key===this.no)return void Rt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.xi.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.io.test(t.key)){if(t.newValue==null){const r=this.Vo(t.key);return this.mo(r,null)}{const r=this.fo(t.key,t.newValue);if(r)return this.mo(r.clientId,r)}}else if(this.so.test(t.key)){if(t.newValue!==null){const r=this.po(t.key,t.newValue);if(r)return this.yo(r)}}else if(this.oo.test(t.key)){if(t.newValue!==null){const r=this.wo(t.key,t.newValue);if(r)return this.So(r)}}else if(t.key===this._o){if(t.newValue!==null){const r=this.co(t.newValue);if(r)return this.lo(r)}}else if(t.key===this.ro){const r=function(l){let c=Cn.le;if(l!=null)try{const h=JSON.parse(l);_e(typeof h=="number",30636,{bo:l}),c=h}catch(h){Rt(Gr,"Failed to read sequence number from WebStorage",h)}return c}(t.newValue);r!==Cn.le&&this.sequenceNumberHandler(r)}else if(t.key===this.ao){const r=this.Do(t.newValue);await Promise.all(r.map(a=>this.syncEngine.vo(a)))}}}else this.eo.push(t)})}}get Io(){return this.Xs.get(this.Js)}uo(){this.setItem(this.no,this.Io.zs())}Po(e,t,r){const a=new Hf(this.currentUser,e,t,r),l=o2(this.persistenceKey,this.currentUser,e);this.setItem(l,a.zs())}To(e){const t=o2(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ao(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this._o,JSON.stringify(t))}Eo(e,t,r){const a=op(this.persistenceKey,e),l=new Ru(e,t,r);this.setItem(a,l.zs())}Ro(e){const t=JSON.stringify(Array.from(e));this.setItem(this.ao,t)}Vo(e){const t=this.io.exec(e);return t?t[1]:null}fo(e,t){const r=this.Vo(e);return Gf.Gs(r,t)}po(e,t){const r=this.so.exec(e),a=Number(r[1]),l=r[2]!==void 0?r[2]:null;return Hf.Gs(new mn(l),a,t)}wo(e,t){const r=this.oo.exec(e),a=Number(r[1]);return Ru.Gs(a,t)}co(e){return rv.Gs(e)}Do(e){return JSON.parse(e)}async yo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);ce(Gr,`Ignoring mutation for non-active user ${e.user.uid}`)}So(e){return this.syncEngine.Fo(e.targetId,e.state,e.error)}mo(e,t){const r=t?this.Xs.insert(e,t):this.Xs.remove(e),a=this.ho(this.Xs),l=this.ho(r),c=[],h=[];return l.forEach(m=>{a.has(m)||c.push(m)}),a.forEach(m=>{l.has(m)||h.push(m)}),this.syncEngine.Mo(c,h).then(()=>{this.Xs=r})}lo(e){this.Xs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ho(e){let t=Fy();return e.forEach((r,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class XA{constructor(){this.xo=new Zp,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,r){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Zp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2="ConnectivityMonitor";class c2{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){ce(l2,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){ce(l2,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wh=null;function ey(){return Wh===null?Wh=function(){return 268435456+Math.round(2147483648*Math.random())}():Wh++,"0x"+Wh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp="RestConnection",rD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class sD{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${r}/databases/${a}`,this.Go=this.databaseId.database===Pf?`project_id=${r}`:`project_id=${r}&database_id=${a}`}zo(e,t,r,a,l){const c=ey(),h=this.jo(e,t.toUriEncodedString());ce(cp,`Sending RPC '${e}' ${c}:`,h,r);const m={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(m,a,l);const{host:p}=new URL(h),v=Ya(p);return this.Jo(e,h,m,r,v).then(b=>(ce(cp,`Received RPC '${e}' ${c}: `,b),b),b=>{throw Lu(cp,`RPC '${e}' ${c} failed with error: `,b,"url: ",h,"request:",r),b})}Yo(e,t,r,a,l,c){return this.zo(e,t,r,a,l)}Ho(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+zl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),r&&r.headers.forEach((a,l)=>e[l]=a)}jo(e,t){const r=rD[e];return`${this.Ko}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn="WebChannelConnection";class aD extends sD{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,a,l){const c=ey();return new Promise((h,m)=>{const p=new aT;p.setWithCredentials(!0),p.listenOnce(oT.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case of.NO_ERROR:const b=p.getResponseJson();ce(dn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(b)),h(b);break;case of.TIMEOUT:ce(dn,`RPC '${e}' ${c} timed out`),m(new he(ne.DEADLINE_EXCEEDED,"Request time out"));break;case of.HTTP_ERROR:const _=p.getStatus();if(ce(dn,`RPC '${e}' ${c} failed with status:`,_,"response text:",p.getResponseText()),_>0){let A=p.getResponseJson();Array.isArray(A)&&(A=A[0]);const I=A==null?void 0:A.error;if(I&&I.status&&I.message){const D=function(V){const B=V.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(B)>=0?B:ne.UNKNOWN}(I.status);m(new he(D,I.message))}else m(new he(ne.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new he(ne.UNAVAILABLE,"Connection failed."));break;default:pe(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ce(dn,`RPC '${e}' ${c} completed.`)}});const v=JSON.stringify(a);ce(dn,`RPC '${e}' ${c} sending request:`,a),p.send(t,"POST",v,r,15)})}T_(e,t,r){const a=ey(),l=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=uT(),h=cT(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Ho(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const v=l.join("");ce(dn,`Creating RPC '${e}' stream ${a}: ${v}`,m);const b=c.createWebChannel(v,m);let _=!1,A=!1;const I=new iD({Zo:N=>{A?ce(dn,`Not sending because RPC '${e}' stream ${a} is closed:`,N):(_||(ce(dn,`Opening RPC '${e}' stream ${a} transport.`),b.open(),_=!0),ce(dn,`RPC '${e}' stream ${a} sending:`,N),b.send(N))},Xo:()=>b.close()}),D=(N,V,B)=>{N.listen(V,H=>{try{B(H)}catch(te){setTimeout(()=>{throw te},0)}})};return D(b,mu.EventType.OPEN,()=>{A||(ce(dn,`RPC '${e}' stream ${a} transport opened.`),I.__())}),D(b,mu.EventType.CLOSE,()=>{A||(A=!0,ce(dn,`RPC '${e}' stream ${a} transport closed`),I.u_())}),D(b,mu.EventType.ERROR,N=>{A||(A=!0,Lu(dn,`RPC '${e}' stream ${a} transport errored. Name:`,N.name,"Message:",N.message),I.u_(new he(ne.UNAVAILABLE,"The operation could not be completed")))}),D(b,mu.EventType.MESSAGE,N=>{var V;if(!A){const B=N.data[0];_e(!!B,16349);const H=B,te=(H==null?void 0:H.error)||((V=H[0])===null||V===void 0?void 0:V.error);if(te){ce(dn,`RPC '${e}' stream ${a} received error:`,te);const ee=te.status;let se=function(R){const j=Lt[R];if(j!==void 0)return dA(j)}(ee),O=te.message;se===void 0&&(se=ne.INTERNAL,O="Unknown error status: "+ee+" with message "+te.message),A=!0,I.u_(new he(se,O)),b.close()}else ce(dn,`RPC '${e}' stream ${a} received:`,B),I.c_(B)}}),D(h,lT.STAT_EVENT,N=>{N.stat===Rp.PROXY?ce(dn,`RPC '${e}' stream ${a} detected buffering proxy`):N.stat===Rp.NOPROXY&&ce(dn,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{I.a_()},0),I}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(){return typeof window<"u"?window:null}function yf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(n){return new h6(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,t,r=1e3,a=1.5,l=6e4){this.xi=e,this.timerId=t,this.I_=r,this.E_=a,this.d_=l,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const t=Math.floor(this.A_+this.g_()),r=Math.max(0,Date.now()-this.V_),a=Math.max(0,t-r);a>0&&ce("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.A_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,a,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2="PersistentStream";class eS{constructor(e,t,r,a,l,c,h,m){this.xi=e,this.y_=r,this.w_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new ZA(e,t)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(e){this.k_(),this.stream.send(e)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(e,t){this.k_(),this.q_(),this.C_.cancel(),this.S_++,e!==4?this.C_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(Rt(t.toString()),Rt("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}Q_(){}auth(){this.state=1;const e=this.U_(this.S_),t=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.S_===t&&this.K_(r,a)},r=>{e(()=>{const a=new he(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.W_(a)})})}K_(e,t){const r=this.U_(this.S_);this.stream=this.G_(e,t),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(a=>{r(()=>this.W_(a))}),this.stream.onMessage(a=>{r(()=>++this.v_==1?this.z_(a):this.onNext(a))})}x_(){this.state=5,this.C_.f_(async()=>{this.state=0,this.start()})}W_(e){return ce(u2,`close with error: ${e}`),this.stream=null,this.close(4,e)}U_(e){return t=>{this.xi.enqueueAndForget(()=>this.S_===e?t():(ce(u2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class oD extends eS{constructor(e,t,r,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}G_(e,t){return this.connection.T_("Listen",e,t)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();const t=g6(this.serializer,e),r=function(l){if(!("targetChange"in l))return Ee.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ee.min():c.readTime?An(c.readTime):Ee.min()}(e);return this.listener.j_(t,r)}H_(e){const t={};t.database=$p(this.serializer),t.addTarget=function(l,c){let h;const m=c.target;if(h=Of(m)?{documents:xA(l,m)}:{query:bA(l,m).gt},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=mA(l,c.resumeToken);const p=Gp(l,c.expectedCount);p!==null&&(h.expectedCount=p)}else if(c.snapshotVersion.compareTo(Ee.min())>0){h.readTime=Nl(l,c.snapshotVersion.toTimestamp());const p=Gp(l,c.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,e);const r=y6(this.serializer,e);r&&(t.labels=r),this.L_(t)}J_(e){const t={};t.database=$p(this.serializer),t.removeTarget=e,this.L_(t)}}class lD extends eS{constructor(e,t,r,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,t){return this.connection.T_("Write",e,t)}z_(e){return _e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0,55816),this.listener.X_()}onNext(e){_e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();const t=p6(e.writeResults,e.commitTime),r=An(e.commitTime);return this.listener.ea(r,t)}ta(){const e={};e.database=$p(this.serializer),this.L_(e)}Z_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Lf(this.serializer,r))};this.L_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{}class uD extends cD{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.na=!1}ra(){if(this.na)throw new he(ne.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,r,a){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.zo(e,Kp(t,r),a,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new he(ne.UNKNOWN,l.toString())})}Yo(e,t,r,a,l){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.Yo(e,Kp(t,r),a,c,h,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new he(ne.UNKNOWN,c.toString())})}terminate(){this.na=!0,this.connection.terminate()}}class dD{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(e){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.aa("Offline")))}set(e){this.la(),this.ia=0,e==="Online"&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(Rt(t),this.oa=!1):ce("OnlineStateTracker",t)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ga="RemoteStore";class hD{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=l,this.Ea.No(c=>{r.enqueueAndForget(async()=>{eo(this)&&(ce(Ga,"Restarting streams for network reachability change."),await async function(m){const p=be(m);p.Ta.add(4),await fd(p),p.da.set("Unknown"),p.Ta.delete(4),await Sm(p)}(this))})}),this.da=new dD(r,a)}}async function Sm(n){if(eo(n))for(const e of n.Ia)await e(!0)}async function fd(n){for(const e of n.Ia)await e(!1)}function km(n,e){const t=be(n);t.Pa.has(e.targetId)||(t.Pa.set(e.targetId,e),av(t)?iv(t):Gl(t).M_()&&sv(t,e))}function Rl(n,e){const t=be(n),r=Gl(t);t.Pa.delete(e),r.M_()&&tS(t,e),t.Pa.size===0&&(r.M_()?r.N_():eo(t)&&t.da.set("Unknown"))}function sv(n,e){if(n.Aa.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Gl(n).H_(e)}function tS(n,e){n.Aa.Ke(e),Gl(n).J_(e)}function iv(n){n.Aa=new l6({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n.Pa.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),Gl(n).start(),n.da._a()}function av(n){return eo(n)&&!Gl(n).F_()&&n.Pa.size>0}function eo(n){return be(n).Ta.size===0}function nS(n){n.Aa=void 0}async function fD(n){n.da.set("Online")}async function mD(n){n.Pa.forEach((e,t)=>{sv(n,e)})}async function gD(n,e){nS(n),av(n)?(n.da.ca(e),iv(n)):n.da.set("Unknown")}async function pD(n,e,t){if(n.da.set("Online"),e instanceof fA&&e.state===2&&e.cause)try{await async function(a,l){const c=l.cause;for(const h of l.targetIds)a.Pa.has(h)&&(await a.remoteSyncer.rejectListen(h,c),a.Pa.delete(h),a.Aa.removeTarget(h))}(n,e)}catch(r){ce(Ga,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Kf(n,r)}else if(e instanceof gf?n.Aa.Xe(e):e instanceof hA?n.Aa.ot(e):n.Aa.nt(e),!t.isEqual(Ee.min()))try{const r=await HA(n.localStore);t.compareTo(r)>=0&&await function(l,c){const h=l.Aa.It(c);return h.targetChanges.forEach((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const v=l.Pa.get(p);v&&l.Pa.set(p,v.withResumeToken(m.resumeToken,c))}}),h.targetMismatches.forEach((m,p)=>{const v=l.Pa.get(m);if(!v)return;l.Pa.set(m,v.withResumeToken(jt.EMPTY_BYTE_STRING,v.snapshotVersion)),tS(l,m);const b=new ks(v.target,m,p,v.sequenceNumber);sv(l,b)}),l.remoteSyncer.applyRemoteEvent(h)}(n,t)}catch(r){ce(Ga,"Failed to raise snapshot:",r),await Kf(n,r)}}async function Kf(n,e,t){if(!Vi(e))throw e;n.Ta.add(1),await fd(n),n.da.set("Offline"),t||(t=()=>HA(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ce(Ga,"Retrying IndexedDB access"),await t(),n.Ta.delete(1),await Sm(n)})}function rS(n,e){return e().catch(t=>Kf(n,t,e))}async function Hl(n){const e=be(n),t=ji(e);let r=e.ha.length>0?e.ha[e.ha.length-1].batchId:Da;for(;yD(e);)try{const a=await tD(e.localStore,r);if(a===null){e.ha.length===0&&t.N_();break}r=a.batchId,vD(e,a)}catch(a){await Kf(e,a)}sS(e)&&iS(e)}function yD(n){return eo(n)&&n.ha.length<10}function vD(n,e){n.ha.push(e);const t=ji(n);t.M_()&&t.Y_&&t.Z_(e.mutations)}function sS(n){return eo(n)&&!ji(n).F_()&&n.ha.length>0}function iS(n){ji(n).start()}async function xD(n){ji(n).ta()}async function bD(n){const e=ji(n);for(const t of n.ha)e.Z_(t.mutations)}async function _D(n,e,t){const r=n.ha.shift(),a=Ky.from(r,e,t);await rS(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),await Hl(n)}async function wD(n,e){e&&ji(n).Y_&&await async function(r,a){if(function(c){return a6(c)&&c!==ne.ABORTED}(a.code)){const l=r.ha.shift();ji(r).O_(),await rS(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a)),await Hl(r)}}(n,e),sS(n)&&iS(n)}async function d2(n,e){const t=be(n);t.asyncQueue.verifyOperationInProgress(),ce(Ga,"RemoteStore received new credentials");const r=eo(t);t.Ta.add(3),await fd(t),r&&t.da.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ta.delete(3),await Sm(t)}async function ty(n,e){const t=be(n);e?(t.Ta.delete(2),await Sm(t)):e||(t.Ta.add(2),await fd(t),t.da.set("Unknown"))}function Gl(n){return n.Ra||(n.Ra=function(t,r,a){const l=be(t);return l.ra(),new oD(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(n.datastore,n.asyncQueue,{e_:fD.bind(null,n),n_:mD.bind(null,n),i_:gD.bind(null,n),j_:pD.bind(null,n)}),n.Ia.push(async e=>{e?(n.Ra.O_(),av(n)?iv(n):n.da.set("Unknown")):(await n.Ra.stop(),nS(n))})),n.Ra}function ji(n){return n.Va||(n.Va=function(t,r,a){const l=be(t);return l.ra(),new lD(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:xD.bind(null,n),i_:wD.bind(null,n),X_:bD.bind(null,n),ea:_D.bind(null,n)}),n.Ia.push(async e=>{e?(n.Va.O_(),await Hl(n)):(await n.Va.stop(),n.ha.length>0&&(ce(Ga,`Stopping write stream with ${n.ha.length} pending writes`),n.ha=[]))})),n.Va}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new Wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const c=Date.now()+r,h=new ov(e,t,c,a,l);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function lv(n,e){if(Rt("AsyncQueue",`${e}: ${n}`),Vi(n))return new he(ne.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{static emptySet(e){return new dl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||fe.comparator(t.key,r.key):(t,r)=>fe.comparator(t.key,r.key),this.keyedMap=gu(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof dl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new dl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(){this.ma=new mt(fe.comparator)}track(e){const t=e.doc.key,r=this.ma.get(t);r?e.type!==0&&r.type===3?this.ma=this.ma.insert(t,e):e.type===3&&r.type!==1?this.ma=this.ma.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ma=this.ma.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ma=this.ma.remove(t):e.type===1&&r.type===2?this.ma=this.ma.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):pe(63341,{Vt:e,fa:r}):this.ma=this.ma.insert(t,e)}ga(){const e=[];return this.ma.inorderTraversal((t,r)=>{e.push(r)}),e}}class jl{constructor(e,t,r,a,l,c,h,m,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,a,l){const c=[];return t.forEach(h=>{c.push({type:0,doc:h})}),new jl(e,t,dl.emptySet(t),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(e=>e.Sa())}}class TD{constructor(){this.queries=f2(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(t,r){const a=be(t),l=a.queries;a.queries=f2(),l.forEach((c,h)=>{for(const m of h.ya)m.onError(r)})})(this,new he(ne.ABORTED,"Firestore shutting down"))}}function f2(){return new Ms(n=>WT(n),vm)}async function cv(n,e){const t=be(n);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.wa()&&e.Sa()&&(r=2):(l=new ED,r=e.Sa()?0:1);try{switch(r){case 0:l.pa=await t.onListen(a,!0);break;case 1:l.pa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const h=lv(c,`Initialization of query '${rl(e.query)}' failed`);return void e.onError(h)}t.queries.set(a,l),l.ya.push(e),e.Da(t.onlineState),l.pa&&e.va(l.pa)&&dv(t)}async function uv(n,e){const t=be(n),r=e.query;let a=3;const l=t.queries.get(r);if(l){const c=l.ya.indexOf(e);c>=0&&(l.ya.splice(c,1),l.ya.length===0?a=e.Sa()?0:1:!l.wa()&&e.Sa()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function AD(n,e){const t=be(n);let r=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const h of c.ya)h.va(a)&&(r=!0);c.pa=a}}r&&dv(t)}function SD(n,e,t){const r=be(n),a=r.queries.get(e);if(a)for(const l of a.ya)l.onError(t);r.queries.delete(e)}function dv(n){n.ba.forEach(e=>{e.next()})}var ny,m2;(m2=ny||(ny={})).Ca="default",m2.Cache="cache";class hv{constructor(e,t,r){this.query=e,this.Fa=t,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=r||{}}va(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new jl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),t=!0):this.Na(e,this.onlineState)&&(this.Ba(e),t=!0),this.xa=e,t}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let t=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),t=!0),t}Na(e,t){if(!e.fromCache||!this.Sa())return!0;const r=t!=="Offline";return(!this.options.La||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Oa(e){if(e.docChanges.length>0)return!0;const t=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ba(e){e=jl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==ny.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e){this.key=e}}class oS{constructor(e){this.key=e}}class kD{constructor(e,t){this.query=e,this.Ga=t,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=Ve(),this.mutatedKeys=Ve(),this.Ha=JT(e),this.Ja=new dl(this.Ha)}get Ya(){return this.Ga}Za(e,t){const r=t?t.Xa:new h2,a=t?t.Ja:this.Ja;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,h=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((v,b)=>{const _=a.get(v),A=ud(this.query,b)?b:null,I=!!_&&this.mutatedKeys.has(_.key),D=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let N=!1;_&&A?_.data.isEqual(A.data)?I!==D&&(r.track({type:3,doc:A}),N=!0):this.eu(_,A)||(r.track({type:2,doc:A}),N=!0,(m&&this.Ha(A,m)>0||p&&this.Ha(A,p)<0)&&(h=!0)):!_&&A?(r.track({type:0,doc:A}),N=!0):_&&!A&&(r.track({type:1,doc:_}),N=!0,(m||p)&&(h=!0)),N&&(A?(c=c.add(A),l=D?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),r.track({type:1,doc:v})}return{Ja:c,Xa:r,Cs:h,mutatedKeys:l}}eu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;const c=e.Xa.ga();c.sort((v,b)=>function(A,I){const D=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe(20277,{Vt:N})}};return D(A)-D(I)}(v.type,b.type)||this.Ha(v.doc,b.doc)),this.tu(r),a=a!=null&&a;const h=t&&!a?this.nu():[],m=this.ja.size===0&&this.current&&!a?1:0,p=m!==this.za;return this.za=m,c.length!==0||p?{snapshot:new jl(this.query,e.Ja,l,c,e.mutatedKeys,m===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),ru:h}:{ru:h}}Da(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new h2,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach(t=>this.Ga=this.Ga.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ga=this.Ga.delete(t)),this.current=e.current)}nu(){if(!this.current)return[];const e=this.ja;this.ja=Ve(),this.Ja.forEach(r=>{this.iu(r.key)&&(this.ja=this.ja.add(r.key))});const t=[];return e.forEach(r=>{this.ja.has(r)||t.push(new oS(r))}),this.ja.forEach(r=>{e.has(r)||t.push(new aS(r))}),t}su(e){this.Ga=e.$s,this.ja=Ve();const t=this.Za(e.documents);return this.applyChanges(t,!0)}ou(){return jl.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}}const Kl="SyncEngine";class ID{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class ND{constructor(e){this.key=e,this._u=!1}}class CD{constructor(e,t,r,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.au={},this.uu=new Ms(h=>WT(h),vm),this.cu=new Map,this.lu=new Set,this.hu=new mt(fe.comparator),this.Pu=new Map,this.Tu=new Jy,this.Iu={},this.Eu=new Map,this.du=Ha.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}}async function RD(n,e,t=!0){const r=Im(n);let a;const l=r.uu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.ou()):a=await lS(r,e,t,!0),a}async function jD(n,e){const t=Im(n);await lS(t,e,!0,!1)}async function lS(n,e,t,r){const a=await qf(n.localStore,$n(e)),l=a.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let h;return r&&(h=await fv(n,e,l,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&km(n.remoteStore,a),h}async function fv(n,e,t,r,a){n.Ru=(b,_,A)=>async function(D,N,V,B){let H=N.view.Za(V);H.Cs&&(H=await Jp(D.localStore,N.query,!1).then(({documents:O})=>N.view.Za(O,H)));const te=B&&B.targetChanges.get(N.targetId),ee=B&&B.targetMismatches.get(N.targetId)!=null,se=N.view.applyChanges(H,D.isPrimaryClient,te,ee);return ry(D,N.targetId,se.ru),se.snapshot}(n,b,_,A);const l=await Jp(n.localStore,e,!0),c=new kD(e,l.$s),h=c.Za(l.documents),m=hd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",a),p=c.applyChanges(h,n.isPrimaryClient,m);ry(n,t,p.ru);const v=new ID(e,t,c);return n.uu.set(e,v),n.cu.has(t)?n.cu.get(t).push(e):n.cu.set(t,[e]),p.snapshot}async function DD(n,e,t){const r=be(n),a=r.uu.get(e),l=r.cu.get(a.targetId);if(l.length>1)return r.cu.set(a.targetId,l.filter(c=>!vm(c,e))),void r.uu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await Cl(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),t&&Rl(r.remoteStore,a.targetId),Dl(r,a.targetId)}).catch(Mi)):(Dl(r,a.targetId),await Cl(r.localStore,a.targetId,!0))}async function PD(n,e){const t=be(n),r=t.uu.get(e),a=t.cu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Rl(t.remoteStore,r.targetId))}async function OD(n,e,t){const r=yv(n);try{const a=await function(c,h){const m=be(c),p=_t.now(),v=h.reduce((A,I)=>A.add(I.key),Ve());let b,_;return m.persistence.runTransaction("Locally write mutations","readwrite",A=>{let I=Kn(),D=Ve();return m.Bs.getEntries(A,v).next(N=>{I=N,I.forEach((V,B)=>{B.isValidDocument()||(D=D.add(V))})}).next(()=>m.localDocuments.getOverlayedDocuments(A,I)).next(N=>{b=N;const V=[];for(const B of h){const H=s6(B,b.get(B.key).overlayedDocument);H!=null&&V.push(new Vs(B.key,H,BT(H.value.mapValue),on.exists(!0)))}return m.mutationQueue.addMutationBatch(A,p,V,h)}).next(N=>{_=N;const V=N.applyToLocalDocumentSet(b,D);return m.documentOverlayCache.saveOverlays(A,N.batchId,V)})}).then(()=>({batchId:_.batchId,changes:eA(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),function(c,h,m){let p=c.Iu[c.currentUser.toKey()];p||(p=new mt(Ne)),p=p.insert(h,m),c.Iu[c.currentUser.toKey()]=p}(r,a.batchId,t),await Ui(r,a.changes),await Hl(r.remoteStore)}catch(a){const l=lv(a,"Failed to persist write");t.reject(l)}}async function cS(n,e){const t=be(n);try{const r=await Z6(t.localStore,e);e.targetChanges.forEach((a,l)=>{const c=t.Pu.get(l);c&&(_e(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c._u=!0:a.modifiedDocuments.size>0?_e(c._u,14607):a.removedDocuments.size>0&&(_e(c._u,42227),c._u=!1))}),await Ui(t,r,e)}catch(r){await Mi(r)}}function g2(n,e,t){const r=be(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.uu.forEach((l,c)=>{const h=c.view.Da(e);h.snapshot&&a.push(h.snapshot)}),function(c,h){const m=be(c);m.onlineState=h;let p=!1;m.queries.forEach((v,b)=>{for(const _ of b.ya)_.Da(h)&&(p=!0)}),p&&dv(m)}(r.eventManager,e),a.length&&r.au.j_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function MD(n,e,t){const r=be(n);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Pu.get(e),l=a&&a.key;if(l){let c=new mt(fe.comparator);c=c.insert(l,At.newNoDocument(l,Ee.min()));const h=Ve().add(l),m=new dd(Ee.min(),new Map,new mt(Ne),c,h);await cS(r,m),r.hu=r.hu.remove(l),r.Pu.delete(e),pv(r)}else await Cl(r.localStore,e,!1).then(()=>Dl(r,e,t)).catch(Mi)}async function VD(n,e){const t=be(n),r=e.batch.batchId;try{const a=await J6(t.localStore,e);gv(t,r,null),mv(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ui(t,a)}catch(a){await Mi(a)}}async function LD(n,e,t){const r=be(n);try{const a=await function(c,h){const m=be(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let v;return m.mutationQueue.lookupMutationBatch(p,h).next(b=>(_e(b!==null,37113),v=b.keys(),m.mutationQueue.removeMutationBatch(p,b))).next(()=>m.mutationQueue.performConsistencyCheck(p)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(p,v,h)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v)).next(()=>m.localDocuments.getDocuments(p,v))})}(r.localStore,e);gv(r,e,t),mv(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ui(r,a)}catch(a){await Mi(a)}}function mv(n,e){(n.Eu.get(e)||[]).forEach(t=>{t.resolve()}),n.Eu.delete(e)}function gv(n,e,t){const r=be(n);let a=r.Iu[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.Iu[r.currentUser.toKey()]=a}}function Dl(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.cu.get(e))n.uu.delete(r),t&&n.au.Vu(r,t);n.cu.delete(e),n.isPrimaryClient&&n.Tu.Hr(e).forEach(r=>{n.Tu.containsKey(r)||uS(n,r)})}function uS(n,e){n.lu.delete(e.path.canonicalString());const t=n.hu.get(e);t!==null&&(Rl(n.remoteStore,t),n.hu=n.hu.remove(e),n.Pu.delete(t),pv(n))}function ry(n,e,t){for(const r of t)r instanceof aS?(n.Tu.addReference(r.key,e),UD(n,r)):r instanceof oS?(ce(Kl,"Document no longer in limbo: "+r.key),n.Tu.removeReference(r.key,e),n.Tu.containsKey(r.key)||uS(n,r.key)):pe(19791,{mu:r})}function UD(n,e){const t=e.key,r=t.path.canonicalString();n.hu.get(t)||n.lu.has(r)||(ce(Kl,"New document in limbo: "+t),n.lu.add(r),pv(n))}function pv(n){for(;n.lu.size>0&&n.hu.size<n.maxConcurrentLimboResolutions;){const e=n.lu.values().next().value;n.lu.delete(e);const t=new fe(tt.fromString(e)),r=n.du.next();n.Pu.set(r,new ND(t)),n.hu=n.hu.insert(t,r),km(n.remoteStore,new ks($n(cd(t.path)),r,"TargetPurposeLimboResolution",Cn.le))}}async function Ui(n,e,t){const r=be(n),a=[],l=[],c=[];r.uu.isEmpty()||(r.uu.forEach((h,m)=>{c.push(r.Ru(m,e,t).then(p=>{var v;if((p||t)&&r.isPrimaryClient){const b=p?!p.fromCache:(v=t==null?void 0:t.targetChanges.get(m.targetId))===null||v===void 0?void 0:v.current;r.sharedClientState.updateQueryState(m.targetId,b?"current":"not-current")}if(p){a.push(p);const b=tv.Rs(m.targetId,p);l.push(b)}}))}),await Promise.all(c),r.au.j_(a),await async function(m,p){const v=be(m);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",b=>K.forEach(p,_=>K.forEach(_.ds,A=>v.persistence.referenceDelegate.addReference(b,_.targetId,A)).next(()=>K.forEach(_.As,A=>v.persistence.referenceDelegate.removeReference(b,_.targetId,A)))))}catch(b){if(!Vi(b))throw b;ce(nv,"Failed to update sequence numbers: "+b)}for(const b of p){const _=b.targetId;if(!b.fromCache){const A=v.xs.get(_),I=A.snapshotVersion,D=A.withLastLimboFreeSnapshotVersion(I);v.xs=v.xs.insert(_,D)}}}(r.localStore,l))}async function BD(n,e){const t=be(n);if(!t.currentUser.isEqual(e)){ce(Kl,"User change. New user:",e.toKey());const r=await qA(t.localStore,e);t.currentUser=e,function(l,c){l.Eu.forEach(h=>{h.forEach(m=>{m.reject(new he(ne.CANCELLED,c))})}),l.Eu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ui(t,r.ks)}}function zD(n,e){const t=be(n),r=t.Pu.get(e);if(r&&r._u)return Ve().add(r.key);{let a=Ve();const l=t.cu.get(e);if(!l)return a;for(const c of l){const h=t.uu.get(c);a=a.unionWith(h.view.Ya)}return a}}async function FD(n,e){const t=be(n),r=await Jp(t.localStore,e.query,!0),a=e.view.su(r);return t.isPrimaryClient&&ry(t,e.targetId,a.ru),a}async function qD(n,e){const t=be(n);return KA(t.localStore,e).then(r=>Ui(t,r))}async function HD(n,e,t,r){const a=be(n),l=await function(h,m){const p=be(h),v=be(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",b=>v.tr(b,m).next(_=>_?p.localDocuments.getDocuments(b,_):K.resolve(null)))}(a.localStore,e);l!==null?(t==="pending"?await Hl(a.remoteStore):t==="acknowledged"||t==="rejected"?(gv(a,e,r||null),mv(a,e),function(h,m){be(be(h).mutationQueue).sr(m)}(a.localStore,e)):pe(6720,"Unknown batchState",{fu:t}),await Ui(a,l)):ce(Kl,"Cannot apply mutation batch with id: "+e)}async function GD(n,e){const t=be(n);if(Im(t),yv(t),e===!0&&t.Au!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),a=await p2(t,r.toArray());t.Au=!0,await ty(t.remoteStore,!0);for(const l of a)km(t.remoteStore,l)}else if(e===!1&&t.Au!==!1){const r=[];let a=Promise.resolve();t.cu.forEach((l,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):a=a.then(()=>(Dl(t,c),Cl(t.localStore,c,!0))),Rl(t.remoteStore,c)}),await a,await p2(t,r),function(c){const h=be(c);h.Pu.forEach((m,p)=>{Rl(h.remoteStore,p)}),h.Tu.Jr(),h.Pu=new Map,h.hu=new mt(fe.comparator)}(t),t.Au=!1,await ty(t.remoteStore,!1)}}async function p2(n,e,t){const r=be(n),a=[],l=[];for(const c of e){let h;const m=r.cu.get(c);if(m&&m.length!==0){h=await qf(r.localStore,$n(m[0]));for(const p of m){const v=r.uu.get(p),b=await FD(r,v);b.snapshot&&l.push(b.snapshot)}}else{const p=await GA(r.localStore,c);h=await qf(r.localStore,p),await fv(r,dS(p),c,!1,h.resumeToken)}a.push(h)}return r.au.j_(l),a}function dS(n){return QT(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function KD(n){return function(t){return be(be(t).persistence).Is()}(be(n).localStore)}async function $D(n,e,t,r){const a=be(n);if(a.Au)return void ce(Kl,"Ignoring unexpected query state notification.");const l=a.cu.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const c=await KA(a.localStore,XT(l[0])),h=dd.createSynthesizedRemoteEventForCurrentChange(e,t==="current",jt.EMPTY_BYTE_STRING);await Ui(a,c,h);break}case"rejected":await Cl(a.localStore,e,!0),Dl(a,e,r);break;default:pe(64155,t)}}async function QD(n,e,t){const r=Im(n);if(r.Au){for(const a of e){if(r.cu.has(a)&&r.sharedClientState.isActiveQueryTarget(a)){ce(Kl,"Adding an already active target "+a);continue}const l=await GA(r.localStore,a),c=await qf(r.localStore,l);await fv(r,dS(l),c.targetId,!1,c.resumeToken),km(r.remoteStore,c)}for(const a of t)r.cu.has(a)&&await Cl(r.localStore,a,!1).then(()=>{Rl(r.remoteStore,a),Dl(r,a)}).catch(Mi)}}function Im(n){const e=be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=cS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MD.bind(null,e),e.au.j_=AD.bind(null,e.eventManager),e.au.Vu=SD.bind(null,e.eventManager),e}function yv(n){const e=be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LD.bind(null,e),e}class Yu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Am(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,t){return null}bu(e,t){return null}wu(e){return FA(this.persistence,new zA,e.initialUser,this.serializer)}yu(e){return new Zy(Tm.fi,this.serializer)}pu(e){return new XA}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yu.provider={build:()=>new Yu};class YD extends Yu{constructor(e){super(),this.cacheSizeBytes=e}Su(e,t){_e(this.persistence.referenceDelegate instanceof Ff,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new OA(r,e.asyncQueue,t)}yu(e){const t=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new Zy(r=>Ff.fi(r,t),this.serializer)}}class hS extends Yu{constructor(e,t,r){super(),this.Du=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Du.initialize(this,e),await yv(this.Du.syncEngine),await Hl(this.Du.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}wu(e){return FA(this.persistence,new zA,e.initialUser,this.serializer)}Su(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new OA(r,e.asyncQueue,t)}bu(e,t){const r=new lj(t,this.persistence);return new oj(e.asyncQueue,r)}yu(e){const t=BA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new ev(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,JA(),yf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}pu(e){return new XA}}class WD extends hS{constructor(e,t){super(e,t,!1),this.Du=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Du.syncEngine;this.sharedClientState instanceof lp&&(this.sharedClientState.syncEngine={Co:HD.bind(null,t),Fo:$D.bind(null,t),Mo:QD.bind(null,t),Is:KD.bind(null,t),vo:qD.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await GD(this.Du.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}pu(e){const t=JA();if(!lp.C(t))throw new he(ne.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=BA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new lp(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Wu{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>g2(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=BD.bind(null,this.syncEngine),await ty(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new TD}()}createDatastore(e){const t=Am(e.databaseInfo.databaseId),r=function(l){return new aD(l)}(e.databaseInfo);return function(l,c,h,m){return new uD(l,c,h,m)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,a,l,c,h){return new hD(r,a,l,c,h)}(this.localStore,this.datastore,e.asyncQueue,t=>g2(this.syncEngine,t,0),function(){return c2.C()?new c2:new nD}())}createSyncEngine(e,t){return function(a,l,c,h,m,p,v){const b=new CD(a,l,c,h,m,p);return v&&(b.Au=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const l=be(a);ce(Ga,"RemoteStore shutting down."),l.Ta.add(5),await fd(l),l.Ea.shutdown(),l.da.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Wu.provider={build:()=>new Wu};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):Rt("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di="FirestoreClient";class XD{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=mn.UNAUTHENTICATED,this.clientId=fT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,async c=>{ce(Di,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(ce(Di,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=lv(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function up(n,e){n.asyncQueue.verifyOperationInProgress(),ce(Di,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async a=>{r.isEqual(a)||(await qA(e.localStore,a),r=a)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function y2(n,e){n.asyncQueue.verifyOperationInProgress();const t=await JD(n);ce(Di,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>d2(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,a)=>d2(e.remoteStore,a)),n._onlineComponents=e}async function JD(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ce(Di,"Using user provided OfflineComponentProvider");try{await up(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===ne.FAILED_PRECONDITION||a.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;Lu("Error using user provided cache. Falling back to memory cache: "+t),await up(n,new Yu)}}else ce(Di,"Using default OfflineComponentProvider"),await up(n,new YD(void 0));return n._offlineComponents}async function fS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ce(Di,"Using user provided OnlineComponentProvider"),await y2(n,n._uninitializedComponentsProvider._online)):(ce(Di,"Using default OnlineComponentProvider"),await y2(n,new Wu))),n._onlineComponents}function ZD(n){return fS(n).then(e=>e.syncEngine)}async function $f(n){const e=await fS(n),t=e.eventManager;return t.onListen=RD.bind(null,e.syncEngine),t.onUnlisten=DD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=jD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=PD.bind(null,e.syncEngine),t}function eP(n,e,t={}){const r=new Wr;return n.asyncQueue.enqueueAndForget(async()=>function(l,c,h,m,p){const v=new vv({next:_=>{v.Cu(),c.enqueueAndForget(()=>uv(l,b));const A=_.docs.has(h);!A&&_.fromCache?p.reject(new he(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&_.fromCache&&m&&m.source==="server"?p.reject(new he(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(_)},error:_=>p.reject(_)}),b=new hv(cd(h.path),v,{includeMetadataChanges:!0,La:!0});return cv(l,b)}(await $f(n),n.asyncQueue,e,t,r)),r.promise}function tP(n,e,t={}){const r=new Wr;return n.asyncQueue.enqueueAndForget(async()=>function(l,c,h,m,p){const v=new vv({next:_=>{v.Cu(),c.enqueueAndForget(()=>uv(l,b)),_.fromCache&&m.source==="server"?p.reject(new he(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(_)},error:_=>p.reject(_)}),b=new hv(h,v,{includeMetadataChanges:!0,La:!0});return cv(l,b)}(await $f(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(n,e,t){if(!t)throw new he(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function nP(n,e,t,r){if(e===!0&&r===!0)throw new he(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function x2(n){if(!fe.isDocumentKey(n))throw new he(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function b2(n){if(fe.isDocumentKey(n))throw new he(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Nm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":pe(12329,{type:typeof n})}function br(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new he(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Nm(n);throw new he(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP="firestore.googleapis.com",_2=!0;class w2{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new he(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=rP,this.ssl=_2}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:_2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=CA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<PA)throw new he(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new he(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new he(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new he(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,a){return r.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xv{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new w2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new w2(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new X3;switch(r.type){case"firstParty":return new ej(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=v2.get(t);r&&(ce("ComponentProvider","Removing Datastore"),v2.delete(t),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Bi(this.firestore,e,this._query)}}class Sn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ni(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Sn(this.firestore,e,this._key)}}class Ni extends Bi{constructor(e,t,r){super(e,t,cd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Sn(this.firestore,null,new fe(e))}withConverter(e){return new Ni(this.firestore,e,this._path)}}function Ut(n,e,...t){if(n=dt(n),gS("collection","path",e),n instanceof xv){const r=tt.fromString(e,...t);return b2(r),new Ni(n,null,r)}{if(!(n instanceof Sn||n instanceof Ni))throw new he(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tt.fromString(e,...t));return b2(r),new Ni(n.firestore,null,r)}}function yn(n,e,...t){if(n=dt(n),arguments.length===1&&(e=fT.newId()),gS("doc","path",e),n instanceof xv){const r=tt.fromString(e,...t);return x2(r),new Sn(n,null,new fe(r))}{if(!(n instanceof Sn||n instanceof Ni))throw new he(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tt.fromString(e,...t));return x2(r),new Sn(n.firestore,n instanceof Ni?n.converter:null,new fe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2="AsyncQueue";class T2{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new ZA(this,"async_queue_retry"),this.ec=()=>{const r=yf();r&&ce(E2,"Visibility state changed to "+r.visibilityState),this.C_.p_()},this.tc=e;const t=yf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const t=yf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});const t=new Wr;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}async sc(){if(this.zu.length!==0){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!Vi(e))throw e;ce(E2,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}}rc(e){const t=this.tc.then(()=>(this.Yu=!0,e().catch(r=>{throw this.Ju=r,this.Yu=!1,Rt("INTERNAL UNHANDLED ERROR: ",A2(r)),r}).then(r=>(this.Yu=!1,r))));return this.tc=t,t}enqueueAfterDelay(e,t,r){this.nc(),this.Xu.indexOf(e)>-1&&(t=0);const a=ov.createAndSchedule(this,e,t,r,l=>this.oc(l));return this.Hu.push(a),a}nc(){this.Ju&&pe(47125,{_c:A2(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do e=this.tc,await e;while(e!==this.tc)}uc(e){for(const t of this.Hu)if(t.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Hu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){const t=this.Hu.indexOf(e);this.Hu.splice(t,1)}}function A2(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1}(n,["next","error","complete"])}class Pi extends xv{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new T2,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new T2(e),this._firestoreClient=void 0,await e}}}function sP(n,e,t){t||(t=Pf);const r=Xa(n,"firestore");if(r.isInitialized(t)){const a=r.getImmediate({identifier:t}),l=r.getOptions(t);if(Va(l,e))return a;throw new he(ne.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new he(ne.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<PA)throw new he(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Ya(e.host)&&yy(e.host),r.initialize({options:e,instanceIdentifier:t})}function md(n){if(n._terminated)throw new he(ne.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||iP(n),n._firestoreClient}function iP(n){var e,t,r;const a=n._freezeSettings(),l=function(h,m,p,v){return new Mj(h,m,p,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,mS(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,a);n._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=a.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),n._firestoreClient=new XD(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&function(h){const m=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(m),_online:m}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pl(jt.fromBase64String(e))}catch(t){throw new he(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Pl(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP=/^__.*__$/;class oP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Vs(e,this.data,this.fieldMask,t,this.fieldTransforms):new ql(e,this.data,t,this.fieldTransforms)}}class pS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Vs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function yS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe(40011,{hc:n})}}class wv{constructor(e,t,r,a,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Pc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new wv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Tc({path:r,Ec:!1});return a.dc(e),a}Ac(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Tc({path:r,Ec:!1});return a.Pc(),a}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return Qf(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(e.length===0)throw this.Vc("Document fields must not be empty");if(yS(this.hc)&&aP.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}}class lP{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Am(e)}gc(e,t,r,a=!1){return new wv({hc:e,methodName:t,fc:r,path:bt.emptyPath(),Ec:!1,mc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Cm(n){const e=n._freezeSettings(),t=Am(n._databaseId);return new lP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function vS(n,e,t,r,a,l={}){const c=n.gc(l.merge||l.mergeFields?2:0,e,t,a);Av("Data must be an object, but it was:",c,r);const h=_S(r,c);let m,p;if(l.merge)m=new Rn(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const b of l.mergeFields){const _=sy(e,b,t);if(!c.contains(_))throw new he(ne.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);ES(v,_)||v.push(_)}m=new Rn(v),p=c.fieldTransforms.filter(b=>m.covers(b.field))}else m=null,p=c.fieldTransforms;return new oP(new pn(h),m,p)}class Rm extends pd{_toFieldTransform(e){if(e.hc!==2)throw e.hc===1?e.Vc(`${this._methodName}() can only appear at the top level of your update data`):e.Vc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Rm}}class Ev extends pd{_toFieldTransform(e){return new Hy(e.path,new Al)}isEqual(e){return e instanceof Ev}}class Tv extends pd{constructor(e,t){super(e),this.wc=t}_toFieldTransform(e){const t=new Il(e.serializer,rA(e.serializer,this.wc));return new Hy(e.path,t)}isEqual(e){return e instanceof Tv&&this.wc===e.wc}}function xS(n,e,t,r){const a=n.gc(1,e,t);Av("Data must be an object, but it was:",a,r);const l=[],c=pn.empty();Li(r,(m,p)=>{const v=Sv(e,m,t);p=dt(p);const b=a.Ac(v);if(p instanceof Rm)l.push(v);else{const _=yd(p,b);_!=null&&(l.push(v),c.set(v,_))}});const h=new Rn(l);return new pS(c,h,a.fieldTransforms)}function bS(n,e,t,r,a,l){const c=n.gc(1,e,t),h=[sy(e,r,t)],m=[a];if(l.length%2!=0)throw new he(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<l.length;_+=2)h.push(sy(e,l[_])),m.push(l[_+1]);const p=[],v=pn.empty();for(let _=h.length-1;_>=0;--_)if(!ES(p,h[_])){const A=h[_];let I=m[_];I=dt(I);const D=c.Ac(A);if(I instanceof Rm)p.push(A);else{const N=yd(I,D);N!=null&&(p.push(A),v.set(A,N))}}const b=new Rn(p);return new pS(v,b,c.fieldTransforms)}function cP(n,e,t,r=!1){return yd(t,n.gc(r?4:3,e))}function yd(n,e){if(wS(n=dt(n)))return Av("Unsupported field value:",e,n),_S(n,e);if(n instanceof pd)return function(r,a){if(!yS(a.hc))throw a.Vc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Vc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Ec&&e.hc!==4)throw e.Vc("Nested arrays are not supported");return function(r,a){const l=[];let c=0;for(const h of r){let m=yd(h,a.Rc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}}(n,e)}return function(r,a){if((r=dt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return rA(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=_t.fromDate(r);return{timestampValue:Nl(a.serializer,l)}}if(r instanceof _t){const l=new _t(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Nl(a.serializer,l)}}if(r instanceof bv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pl)return{bytesValue:mA(a.serializer,r._byteString)};if(r instanceof Sn){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.Vc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Yy(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof _v)return function(c,h){return{mapValue:{fields:{[Uy]:{stringValue:By},[_l]:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw h.Vc("VectorValues must only contain numeric values.");return qy(h.serializer,p)})}}}}}}(r,a);throw a.Vc(`Unsupported field value: ${Nm(r)}`)}(n,e)}function _S(n,e){const t={};return RT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Li(n,(r,a)=>{const l=yd(a,e.Ic(r));l!=null&&(t[r]=l)}),{mapValue:{fields:t}}}function wS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof _t||n instanceof bv||n instanceof Pl||n instanceof Sn||n instanceof pd||n instanceof _v)}function Av(n,e,t){if(!wS(t)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(t)){const r=Nm(t);throw r==="an object"?e.Vc(n+" a custom object"):e.Vc(n+" "+r)}}function sy(n,e,t){if((e=dt(e))instanceof gd)return e._internalPath;if(typeof e=="string")return Sv(n,e);throw Qf("Field path arguments must be of type string or ",n,!1,void 0,t)}const uP=new RegExp("[~\\*/\\[\\]]");function Sv(n,e,t){if(e.search(uP)>=0)throw Qf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new gd(...e.split("."))._internalPath}catch{throw Qf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Qf(n,e,t,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${r}`),c&&(m+=` in document ${a}`),m+=")"),new he(ne.INVALID_ARGUMENT,h+n+m)}function ES(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(jm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class dP extends TS{data(){return super.data()}}function jm(n,e){return typeof e=="string"?Sv(n,e):e instanceof gd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new he(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kv{}class SS extends kv{}function kr(n,e,...t){let r=[];e instanceof kv&&r.push(e),r=r.concat(t),function(l){const c=l.filter(m=>m instanceof Iv).length,h=l.filter(m=>m instanceof Dm).length;if(c>1||c>0&&h>0)throw new he(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const a of r)n=a._apply(n);return n}class Dm extends SS{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Dm(e,t,r)}_apply(e){const t=this._parse(e);return kS(e._query,t),new Bi(e.firestore,e.converter,qp(e._query,t))}_parse(e){const t=Cm(e.firestore);return function(l,c,h,m,p,v,b){let _;if(p.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new he(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){I2(b,v);const I=[];for(const D of b)I.push(k2(m,l,D));_={arrayValue:{values:I}}}else _=k2(m,l,b)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||I2(b,v),_=cP(h,c,b,v==="in"||v==="not-in");return Ge.create(p,v,_)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function to(n,e,t){const r=e,a=jm("where",n);return Dm._create(a,r,t)}class Iv extends kv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Iv(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:it.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,l){let c=a;const h=l.getFlattenedFilters();for(const m of h)kS(c,m),c=qp(c,m)}(e._query,t),new Bi(e.firestore,e.converter,qp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Nv extends SS{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Nv(e,t)}_apply(e){const t=function(a,l,c){if(a.startAt!==null)throw new he(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new he(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Qu(l,c)}(e._query,this._field,this._direction);return new Bi(e.firestore,e.converter,function(a,l){const c=a.explicitOrderBy.concat([l]);return new Fl(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}function Ls(n,e="asc"){const t=e,r=jm("orderBy",n);return Nv._create(r,t)}function k2(n,e,t){if(typeof(t=dt(t))=="string"){if(t==="")throw new he(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!YT(e)&&t.indexOf("/")!==-1)throw new he(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(tt.fromString(t));if(!fe.isDocumentKey(r))throw new he(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ku(n,new fe(r))}if(t instanceof Sn)return Ku(n,t._key);throw new he(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nm(t)}.`)}function I2(n,e){if(!Array.isArray(n)||n.length===0)throw new he(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kS(n,e){const t=function(a,l){for(const c of a)for(const h of c.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new he(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class hP{convertValue(e,t="none"){switch(Ci(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Os(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw pe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Li(e,(a,l)=>{r[a]=this.convertValue(l,t)}),r}convertVectorValue(e){var t,r,a;const l=(a=(r=(t=e.fields)===null||t===void 0?void 0:t[_l].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.map(c=>yt(c.doubleValue));return new _v(l)}convertGeoPoint(e){return new bv(yt(e.latitude),yt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=pm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Hu(e));default:return null}}convertTimestamp(e){const t=Ps(e);return new _t(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=tt.fromString(e);_e(TA(r),9688,{name:e});const a=new Ba(r.get(1),r.get(3)),l=new fe(r.popFirst(5));return a.isEqual(t)||Rt(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class NS extends TS{constructor(e,t,r,a,l,c){super(e,t,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new vf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(jm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class vf extends NS{data(e={}){return super.data(e)}}class CS{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new vu(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new vf(this._firestore,this._userDataWriter,r.key,r,new vu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(h=>{const m=new vf(a._firestore,a._userDataWriter,h.doc.key,h.doc,new vu(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(h=>l||h.type!==3).map(h=>{const m=new vf(a._firestore,a._userDataWriter,h.doc.key,h.doc,new vu(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,v=-1;return h.type!==0&&(p=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),v=c.indexOf(h.doc.key)),{type:fP(h.type),doc:m,oldIndex:p,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function fP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(n){n=br(n,Sn);const e=br(n.firestore,Pi);return eP(md(e),n._key).then(t=>RS(e,n,t))}class Rv extends hP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Sn(this.firestore,null,t)}}function hl(n){n=br(n,Bi);const e=br(n.firestore,Pi),t=md(e),r=new Rv(e);return AS(n._query),tP(t,n._query).then(a=>new CS(e,r,n,a))}function Xr(n,e,t,...r){n=br(n,Sn);const a=br(n.firestore,Pi),l=Cm(a);let c;return c=typeof(e=dt(e))=="string"||e instanceof gd?bS(l,"updateDoc",n._key,e,t,r):xS(l,"updateDoc",n._key,e),jv(a,[c.toMutation(n._key,on.exists(!0))])}function Ol(n,e){const t=br(n.firestore,Pi),r=yn(n),a=IS(n.converter,e);return jv(t,[vS(Cm(n.firestore),"addDoc",r._key,a,n.converter!==null,{}).toMutation(r._key,on.exists(!1))]).then(()=>r)}function Us(n,...e){var t,r,a;n=dt(n);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||S2(e[c])||(l=e[c],c++);const h={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(S2(e[c])){const b=e[c];e[c]=(t=b.next)===null||t===void 0?void 0:t.bind(b),e[c+1]=(r=b.error)===null||r===void 0?void 0:r.bind(b),e[c+2]=(a=b.complete)===null||a===void 0?void 0:a.bind(b)}let m,p,v;if(n instanceof Sn)p=br(n.firestore,Pi),v=cd(n._key.path),m={next:b=>{e[c]&&e[c](RS(p,n,b))},error:e[c+1],complete:e[c+2]};else{const b=br(n,Bi);p=br(b.firestore,Pi),v=b._query;const _=new Rv(p);m={next:A=>{e[c]&&e[c](new CS(p,_,b,A))},error:e[c+1],complete:e[c+2]},AS(n._query)}return function(_,A,I,D){const N=new vv(D),V=new hv(A,N,I);return _.asyncQueue.enqueueAndForget(async()=>cv(await $f(_),V)),()=>{N.Cu(),_.asyncQueue.enqueueAndForget(async()=>uv(await $f(_),V))}}(md(p),v,h,m)}function jv(n,e){return function(r,a){const l=new Wr;return r.asyncQueue.enqueueAndForget(async()=>OD(await ZD(r),a,l)),l.promise}(md(n),e)}function RS(n,e,t){const r=t.docs.get(e._key),a=new Rv(n);return new NS(n,a,e._key,r,new vu(t.hasPendingWrites,t.fromCache),e.converter)}class mP{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=vP(),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function gP(n){return new mP(n)}class pP{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Wu.provider,this._offlineComponentProvider={build:t=>new hS(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class yP{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Wu.provider,this._offlineComponentProvider={build:t=>new WD(t,e==null?void 0:e.cacheSizeBytes)}}}function vP(n){return new pP(void 0)}function xP(){return new yP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Cm(e)}set(e,t,r){this._verifyNotCommitted();const a=dp(e,this._firestore),l=IS(a.converter,t,r),c=vS(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,r);return this._mutations.push(c.toMutation(a._key,on.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const l=dp(e,this._firestore);let c;return c=typeof(t=dt(t))=="string"||t instanceof gd?bS(this._dataReader,"WriteBatch.update",l._key,t,r,a):xS(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,on.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=dp(e,this._firestore);return this._mutations=this._mutations.concat(new _m(t._key,on.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new he(ne.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function dp(n,e){if((n=dt(n)).firestore!==e)throw new he(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function Na(){return new Ev("serverTimestamp")}function _P(n){return new Tv("increment",n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wP(n){return md(n=br(n,Pi)),new bP(n,e=>jv(n,e))}(function(e,t=!0){(function(a){zl=a})(Ja),wr(new cr("firestore",(r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),h=new Pi(new J3(r.getProvider("auth-internal")),new tj(c,r.getProvider("app-check-internal")),function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new he(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ba(p.options.projectId,v)}(c,a),c);return l=Object.assign({useFetchStreams:t},l),h._setSettings(l),h},"PUBLIC").setMultipleInstances(!0)),jn(a1,o1,e),jn(a1,o1,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS="firebasestorage.googleapis.com",DS="storageBucket",EP=2*60*1e3,TP=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt extends Sr{constructor(e,t,r=0){super(hp(e),`Firebase Storage: ${t} (${hp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,kt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return hp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var St;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(St||(St={}));function hp(n){return"storage/"+n}function Dv(){const n="An unknown error occurred, please check the error payload for server response.";return new kt(St.UNKNOWN,n)}function AP(n){return new kt(St.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function SP(n){return new kt(St.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function kP(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new kt(St.UNAUTHENTICATED,n)}function IP(){return new kt(St.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function NP(n){return new kt(St.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function CP(){return new kt(St.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function RP(){return new kt(St.CANCELED,"User canceled the upload/download.")}function jP(n){return new kt(St.INVALID_URL,"Invalid URL '"+n+"'.")}function DP(n){return new kt(St.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function PP(){return new kt(St.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+DS+"' property when initializing the app?")}function OP(){return new kt(St.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function MP(){return new kt(St.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function VP(n){return new kt(St.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function iy(n){return new kt(St.INVALID_ARGUMENT,n)}function PS(){return new kt(St.APP_DELETED,"The Firebase app was deleted.")}function LP(n){return new kt(St.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ju(n,e){return new kt(St.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function du(n){throw new kt(St.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Is=class xf{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=xf.makeFromUrl(e,t)}catch{return new xf(e,"")}if(r.path==="")return r;throw DP(e)}static makeFromUrl(e,t){let r=null;const a="([A-Za-z0-9.\\-_]+)";function l(te){te.path.charAt(te.path.length-1)==="/"&&(te.path_=te.path_.slice(0,-1))}const c="(/(.*))?$",h=new RegExp("^gs://"+a+c,"i"),m={bucket:1,path:3};function p(te){te.path_=decodeURIComponent(te.path)}const v="v[A-Za-z0-9_]+",b=t.replace(/[.]/g,"\\."),_="(/([^?#]*).*)?$",A=new RegExp(`^https?://${b}/${v}/b/${a}/o${_}`,"i"),I={bucket:1,path:3},D=t===jS?"(?:storage.googleapis.com|storage.cloud.google.com)":t,N="([^?#]*)",V=new RegExp(`^https?://${D}/${a}/${N}`,"i"),H=[{regex:h,indices:m,postModify:l},{regex:A,indices:I,postModify:p},{regex:V,indices:{bucket:1,path:2},postModify:p}];for(let te=0;te<H.length;te++){const ee=H[te],se=ee.regex.exec(e);if(se){const O=se[ee.indices.bucket];let k=se[ee.indices.path];k||(k=""),r=new xf(O,k),ee.postModify(r);break}}if(r==null)throw jP(e);return r}};class UP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BP(n,e,t){let r=1,a=null,l=null,c=!1,h=0;function m(){return h===2}let p=!1;function v(...N){p||(p=!0,e.apply(null,N))}function b(N){a=setTimeout(()=>{a=null,n(A,m())},N)}function _(){l&&clearTimeout(l)}function A(N,...V){if(p){_();return}if(N){_(),v.call(null,N,...V);return}if(m()||c){_(),v.call(null,N,...V);return}r<64&&(r*=2);let H;h===1?(h=2,H=0):H=(r+Math.random())*1e3,b(H)}let I=!1;function D(N){I||(I=!0,_(),!p&&(a!==null?(N||(h=2),clearTimeout(a),b(0)):N||(h=1)))}return b(0),l=setTimeout(()=>{c=!0,D(!0)},t),D}function zP(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FP(n){return n!==void 0}function qP(n){return typeof n=="object"&&!Array.isArray(n)}function Pv(n){return typeof n=="string"||n instanceof String}function N2(n){return Ov()&&n instanceof Blob}function Ov(){return typeof Blob<"u"}function C2(n,e,t,r){if(r<e)throw iy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw iy(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mv(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function OS(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const a=e(r)+"="+e(n[r]);t=t+a+"&"}return t=t.slice(0,-1),t}var Ma;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Ma||(Ma={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(n,e){const t=n>=500&&n<600,a=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||a||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e,t,r,a,l,c,h,m,p,v,b,_=!0,A=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=m,this.timeout_=p,this.progressCallback_=v,this.connectionFactory_=b,this.retry=_,this.isUsingEmulator=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,D)=>{this.resolve_=I,this.reject_=D,this.start_()})}start_(){const e=(r,a)=>{if(a){r(!1,new Xh(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=h=>{const m=h.loaded,p=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,p)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const h=l.getErrorCode()===Ma.NO_ERROR,m=l.getStatus();if(!h||HP(m,this.additionalRetryCodes_)&&this.retry){const v=l.getErrorCode()===Ma.ABORT;r(!1,new Xh(!1,null,v));return}const p=this.successCodes_.indexOf(m)!==-1;r(!0,new Xh(p,l))})},t=(r,a)=>{const l=this.resolve_,c=this.reject_,h=a.connection;if(a.wasSuccessCode)try{const m=this.callback_(h,h.getResponse());FP(m)?l(m):l()}catch(m){c(m)}else if(h!==null){const m=Dv();m.serverResponse=h.getErrorText(),this.errorCallback_?c(this.errorCallback_(h,m)):c(m)}else if(a.canceled){const m=this.appDelete_?PS():RP();c(m)}else{const m=CP();c(m)}};this.canceled_?t(!1,new Xh(!1,null,!0)):this.backoffId_=BP(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&zP(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Xh{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function KP(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function $P(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function QP(n,e){e&&(n["X-Firebase-GMPID"]=e)}function YP(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function WP(n,e,t,r,a,l,c=!0,h=!1){const m=OS(n.urlParams),p=n.url+m,v=Object.assign({},n.headers);return QP(v,e),KP(v,t),$P(v,l),YP(v,r),new GP(p,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,a,c,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function JP(...n){const e=XP();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Ov())return new Blob(n);throw new kt(St.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function ZP(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eO(n){if(typeof atob>"u")throw VP("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class fp{constructor(e,t){this.data=e,this.contentType=t||null}}function MS(n,e){switch(n){case xr.RAW:return new fp(VS(e));case xr.BASE64:case xr.BASE64URL:return new fp(LS(n,e));case xr.DATA_URL:return new fp(nO(e),rO(e))}throw Dv()}function VS(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const l=r,c=n.charCodeAt(++t);r=65536|(l&1023)<<10|c&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function tO(n){let e;try{e=decodeURIComponent(n)}catch{throw ju(xr.DATA_URL,"Malformed data URL.")}return VS(e)}function LS(n,e){switch(n){case xr.BASE64:{const a=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(a||l)throw ju(n,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case xr.BASE64URL:{const a=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(a||l)throw ju(n,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=eO(e)}catch(a){throw a.message.includes("polyfill")?a:ju(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r}class US{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw ju(xr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=sO(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function nO(n){const e=new US(n);return e.base64?LS(xr.BASE64,e.rest):tO(e.rest)}function rO(n){return new US(n).contentType}function sO(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,t){let r=0,a="";N2(e)?(this.data_=e,r=e.size,a=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,t){if(N2(this.data_)){const r=this.data_,a=ZP(r,e,t);return a===null?null:new Ei(a)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Ei(r,!0)}}static getBlob(...e){if(Ov()){const t=e.map(r=>r instanceof Ei?r.data_:r);return new Ei(JP.apply(null,t))}else{const t=e.map(c=>Pv(c)?MS(xr.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const a=new Uint8Array(r);let l=0;return t.forEach(c=>{for(let h=0;h<c.length;h++)a[l++]=c[h]}),new Ei(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(n){let e;try{e=JSON.parse(n)}catch{return null}return qP(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iO(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function aO(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function zS(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oO(n,e){return e}class Tn{constructor(e,t,r,a){this.server=e,this.local=t||e,this.writable=!!r,this.xform=a||oO}}let Jh=null;function lO(n){return!Pv(n)||n.length<2?n:zS(n)}function FS(){if(Jh)return Jh;const n=[];n.push(new Tn("bucket")),n.push(new Tn("generation")),n.push(new Tn("metageneration")),n.push(new Tn("name","fullPath",!0));function e(l,c){return lO(c)}const t=new Tn("name");t.xform=e,n.push(t);function r(l,c){return c!==void 0?Number(c):c}const a=new Tn("size");return a.xform=r,n.push(a),n.push(new Tn("timeCreated")),n.push(new Tn("updated")),n.push(new Tn("md5Hash",null,!0)),n.push(new Tn("cacheControl",null,!0)),n.push(new Tn("contentDisposition",null,!0)),n.push(new Tn("contentEncoding",null,!0)),n.push(new Tn("contentLanguage",null,!0)),n.push(new Tn("contentType",null,!0)),n.push(new Tn("metadata","customMetadata",!0)),Jh=n,Jh}function cO(n,e){function t(){const r=n.bucket,a=n.fullPath,l=new Is(r,a);return e._makeStorageReference(l)}Object.defineProperty(n,"ref",{get:t})}function uO(n,e,t){const r={};r.type="file";const a=t.length;for(let l=0;l<a;l++){const c=t[l];r[c.local]=c.xform(r,e[c.server])}return cO(r,n),r}function qS(n,e,t){const r=BS(e);return r===null?null:uO(n,r,t)}function dO(n,e,t,r){const a=BS(e);if(a===null||!Pv(a.downloadTokens))return null;const l=a.downloadTokens;if(l.length===0)return null;const c=encodeURIComponent;return l.split(",").map(p=>{const v=n.bucket,b=n.fullPath,_="/b/"+c(v)+"/o/"+c(b),A=Mv(_,t,r),I=OS({alt:"media",token:p});return A+I})[0]}function hO(n,e){const t={},r=e.length;for(let a=0;a<r;a++){const l=e[a];l.writable&&(t[l.server]=n[l.local])}return JSON.stringify(t)}class HS{constructor(e,t,r,a){this.url=e,this.method=t,this.handler=r,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(n){if(!n)throw Dv()}function fO(n,e){function t(r,a){const l=qS(n,a,e);return GS(l!==null),l}return t}function mO(n,e){function t(r,a){const l=qS(n,a,e);return GS(l!==null),dO(l,a,n.host,n._protocol)}return t}function KS(n){function e(t,r){let a;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?a=IP():a=kP():t.getStatus()===402?a=SP(n.bucket):t.getStatus()===403?a=NP(n.path):a=r,a.status=t.getStatus(),a.serverResponse=r.serverResponse,a}return e}function gO(n){const e=KS(n);function t(r,a){let l=e(r,a);return r.getStatus()===404&&(l=AP(n.path)),l.serverResponse=a.serverResponse,l}return t}function pO(n,e,t){const r=e.fullServerUrl(),a=Mv(r,n.host,n._protocol),l="GET",c=n.maxOperationRetryTime,h=new HS(a,l,mO(n,t),c);return h.errorHandler=gO(e),h}function yO(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function vO(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=yO(null,e)),r}function xO(n,e,t,r,a){const l=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function h(){let H="";for(let te=0;te<2;te++)H=H+Math.random().toString().slice(2);return H}const m=h();c["Content-Type"]="multipart/related; boundary="+m;const p=vO(e,r,a),v=hO(p,t),b="--"+m+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+v+`\r
--`+m+`\r
Content-Type: `+p.contentType+`\r
\r
`,_=`\r
--`+m+"--",A=Ei.getBlob(b,r,_);if(A===null)throw OP();const I={name:p.fullPath},D=Mv(l,n.host,n._protocol),N="POST",V=n.maxUploadRetryTime,B=new HS(D,N,fO(n,t),V);return B.urlParams=I,B.headers=c,B.body=A.uploadData(),B.errorHandler=KS(e),B}class bO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ma.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ma.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ma.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,a,l){if(this.sent_)throw du("cannot .send() more than once");if(Ya(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),l!==void 0)for(const c in l)l.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,l[c].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw du("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw du("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw du("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw du("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class _O extends bO{initXhr(){this.xhr_.responseType="text"}}function $S(){return new _O}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,t){this._service=e,t instanceof Is?this._location=t:this._location=Is.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ka(e,t)}get root(){const e=new Is(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return zS(this._location.path)}get storage(){return this._service}get parent(){const e=iO(this._location.path);if(e===null)return null;const t=new Is(this._location.bucket,e);return new Ka(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw LP(e)}}function wO(n,e,t){n._throwIfRoot("uploadBytes");const r=xO(n.storage,n._location,FS(),new Ei(e,!0),t);return n.storage.makeRequestWithTokens(r,$S).then(a=>({metadata:a,ref:n}))}function EO(n,e,t=xr.RAW,r){n._throwIfRoot("uploadString");const a=MS(t,e),l=Object.assign({},r);return l.contentType==null&&a.contentType!=null&&(l.contentType=a.contentType),wO(n,a.data,l)}function TO(n){n._throwIfRoot("getDownloadURL");const e=pO(n.storage,n._location,FS());return n.storage.makeRequestWithTokens(e,$S).then(t=>{if(t===null)throw MP();return t})}function AO(n,e){const t=aO(n._location.path,e),r=new Is(n._location.bucket,t);return new Ka(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SO(n){return/^[A-Za-z]+:\/\//.test(n)}function kO(n,e){return new Ka(n,e)}function QS(n,e){if(n instanceof Vv){const t=n;if(t._bucket==null)throw PP();const r=new Ka(t,t._bucket);return e!=null?QS(r,e):r}else return e!==void 0?AO(n,e):n}function IO(n,e){if(e&&SO(e)){if(n instanceof Vv)return kO(n,e);throw iy("To use ref(service, url), the first argument must be a Storage instance.")}else return QS(n,e)}function R2(n,e){const t=e==null?void 0:e[DS];return t==null?null:Is.makeFromBucketSpec(t,n)}function NO(n,e,t,r={}){n.host=`${e}:${t}`;const a=Ya(e);a&&(yy(`https://${n.host}`),pE("Storage",!0)),n._isUsingEmulator=!0,n._protocol=a?"https":"http";const{mockUserToken:l}=r;l&&(n._overrideAuthToken=typeof l=="string"?l:hC(l,n.app.options.projectId))}class Vv{constructor(e,t,r,a,l,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=a,this._firebaseVersion=l,this._isUsingEmulator=c,this._bucket=null,this._host=jS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=EP,this._maxUploadRetryTime=TP,this._requests=new Set,a!=null?this._bucket=Is.makeFromBucketSpec(a,this._host):this._bucket=R2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Is.makeFromBucketSpec(this._url,e):this._bucket=R2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){C2("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){C2("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(lr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ka(this,e)}_makeRequest(e,t,r,a,l=!0){if(this._deleted)return new UP(PS());{const c=WP(e,this._appId,r,a,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[r,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,a).getPromise()}}const j2="@firebase/storage",D2="0.13.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS="storage";function Lv(n,e,t,r){return n=dt(n),EO(n,e,t,r)}function Uv(n){return n=dt(n),TO(n)}function Bv(n,e){return n=dt(n),IO(n,e)}function CO(n=_y(),e){n=dt(n);const r=Xa(n,YS).getImmediate({identifier:e}),a=uC("storage");return a&&RO(r,...a),r}function RO(n,e,t,r={}){NO(n,e,t,r)}function jO(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),a=n.getProvider("app-check-internal");return new Vv(t,r,a,e,Ja)}function DO(){wr(new cr(YS,jO,"PUBLIC").setMultipleInstances(!0)),jn(j2,D2,""),jn(j2,D2,"esm2017")}DO();const WS="@firebase/installations",zv="0.6.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=1e4,JS=`w:${zv}`,ZS="FIS_v2",PO="https://firebaseinstallations.googleapis.com/v1",OO=60*60*1e3,MO="installations",VO="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},$a=new Wa(MO,VO,LO);function ek(n){return n instanceof Sr&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk({projectId:n}){return`${PO}/projects/${n}/installations`}function nk(n){return{token:n.token,requestStatus:2,expiresIn:BO(n.expiresIn),creationTime:Date.now()}}async function rk(n,e){const r=(await e.json()).error;return $a.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function sk({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function UO(n,{refreshToken:e}){const t=sk(n);return t.append("Authorization",zO(e)),t}async function ik(n){const e=await n();return e.status>=500&&e.status<600?n():e}function BO(n){return Number(n.replace("s","000"))}function zO(n){return`${ZS} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FO({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=tk(n),a=sk(n),l=e.getImmediate({optional:!0});if(l){const p=await l.getHeartbeatsHeader();p&&a.append("x-firebase-client",p)}const c={fid:t,authVersion:ZS,appId:n.appId,sdkVersion:JS},h={method:"POST",headers:a,body:JSON.stringify(c)},m=await ik(()=>fetch(r,h));if(m.ok){const p=await m.json();return{fid:p.fid||t,registrationStatus:2,refreshToken:p.refreshToken,authToken:nk(p.authToken)}}else throw await rk("Create Installation",m)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ak(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qO(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO=/^[cdef][\w-]{21}$/,ay="";function GO(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=KO(n);return HO.test(t)?t:ay}catch{return ay}}function KO(n){return qO(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok=new Map;function lk(n,e){const t=Pm(n);ck(t,e),$O(t,e)}function ck(n,e){const t=ok.get(n);if(t)for(const r of t)r(e)}function $O(n,e){const t=QO();t&&t.postMessage({key:n,fid:e}),YO()}let Ra=null;function QO(){return!Ra&&"BroadcastChannel"in self&&(Ra=new BroadcastChannel("[Firebase] FID Change"),Ra.onmessage=n=>{ck(n.data.key,n.data.fid)}),Ra}function YO(){ok.size===0&&Ra&&(Ra.close(),Ra=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO="firebase-installations-database",XO=1,Qa="firebase-installations-store";let mp=null;function Fv(){return mp||(mp=am(WO,XO,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Qa)}}})),mp}async function Yf(n,e){const t=Pm(n),a=(await Fv()).transaction(Qa,"readwrite"),l=a.objectStore(Qa),c=await l.get(t);return await l.put(e,t),await a.done,(!c||c.fid!==e.fid)&&lk(n,e.fid),e}async function uk(n){const e=Pm(n),r=(await Fv()).transaction(Qa,"readwrite");await r.objectStore(Qa).delete(e),await r.done}async function Om(n,e){const t=Pm(n),a=(await Fv()).transaction(Qa,"readwrite"),l=a.objectStore(Qa),c=await l.get(t),h=e(c);return h===void 0?await l.delete(t):await l.put(h,t),await a.done,h&&(!c||c.fid!==h.fid)&&lk(n,h.fid),h}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qv(n){let e;const t=await Om(n.appConfig,r=>{const a=JO(r),l=ZO(n,a);return e=l.registrationPromise,l.installationEntry});return t.fid===ay?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function JO(n){const e=n||{fid:GO(),registrationStatus:0};return dk(e)}function ZO(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject($a.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=eM(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:tM(n)}:{installationEntry:e}}async function eM(n,e){try{const t=await FO(n,e);return Yf(n.appConfig,t)}catch(t){throw ek(t)&&t.customData.serverCode===409?await uk(n.appConfig):await Yf(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function tM(n){let e=await P2(n.appConfig);for(;e.registrationStatus===1;)await ak(100),e=await P2(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await qv(n);return r||t}return e}function P2(n){return Om(n,e=>{if(!e)throw $a.create("installation-not-found");return dk(e)})}function dk(n){return nM(n)?{fid:n.fid,registrationStatus:0}:n}function nM(n){return n.registrationStatus===1&&n.registrationTime+XS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rM({appConfig:n,heartbeatServiceProvider:e},t){const r=sM(n,t),a=UO(n,t),l=e.getImmediate({optional:!0});if(l){const p=await l.getHeartbeatsHeader();p&&a.append("x-firebase-client",p)}const c={installation:{sdkVersion:JS,appId:n.appId}},h={method:"POST",headers:a,body:JSON.stringify(c)},m=await ik(()=>fetch(r,h));if(m.ok){const p=await m.json();return nk(p)}else throw await rk("Generate Auth Token",m)}function sM(n,{fid:e}){return`${tk(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hv(n,e=!1){let t;const r=await Om(n.appConfig,l=>{if(!hk(l))throw $a.create("not-registered");const c=l.authToken;if(!e&&oM(c))return l;if(c.requestStatus===1)return t=iM(n,e),l;{if(!navigator.onLine)throw $a.create("app-offline");const h=cM(l);return t=aM(n,h),h}});return t?await t:r.authToken}async function iM(n,e){let t=await O2(n.appConfig);for(;t.authToken.requestStatus===1;)await ak(100),t=await O2(n.appConfig);const r=t.authToken;return r.requestStatus===0?Hv(n,e):r}function O2(n){return Om(n,e=>{if(!hk(e))throw $a.create("not-registered");const t=e.authToken;return uM(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function aM(n,e){try{const t=await rM(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await Yf(n.appConfig,r),t}catch(t){if(ek(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await uk(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Yf(n.appConfig,r)}throw t}}function hk(n){return n!==void 0&&n.registrationStatus===2}function oM(n){return n.requestStatus===2&&!lM(n)}function lM(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+OO}function cM(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function uM(n){return n.requestStatus===1&&n.requestTime+XS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dM(n){const e=n,{installationEntry:t,registrationPromise:r}=await qv(e);return r?r.catch(console.error):Hv(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hM(n,e=!1){const t=n;return await fM(t),(await Hv(t,e)).token}async function fM(n){const{registrationPromise:e}=await qv(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mM(n){if(!n||!n.options)throw gp("App Configuration");if(!n.name)throw gp("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw gp(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function gp(n){return $a.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk="installations",gM="installations-internal",pM=n=>{const e=n.getProvider("app").getImmediate(),t=mM(e),r=Xa(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},yM=n=>{const e=n.getProvider("app").getImmediate(),t=Xa(e,fk).getImmediate();return{getId:()=>dM(t),getToken:a=>hM(t,a)}};function vM(){wr(new cr(fk,pM,"PUBLIC")),wr(new cr(gM,yM,"PRIVATE"))}vM();jn(WS,zv);jn(WS,zv,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM="/firebase-messaging-sw.js",bM="/firebase-cloud-messaging-push-scope",mk="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",_M="https://fcmregistrations.googleapis.com/v1",gk="google.c.a.c_id",wM="google.c.a.c_l",EM="google.c.a.ts",TM="google.c.a.e",M2=1e4;var V2;(function(n){n[n.DATA_MESSAGE=1]="DATA_MESSAGE",n[n.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(V2||(V2={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Xu;(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"})(Xu||(Xu={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function AM(n){const e="=".repeat((4-n.length%4)%4),t=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),a=new Uint8Array(r.length);for(let l=0;l<r.length;++l)a[l]=r.charCodeAt(l);return a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp="fcm_token_details_db",SM=5,L2="fcm_token_object_Store";async function kM(n){if("databases"in indexedDB&&!(await indexedDB.databases()).map(l=>l.name).includes(pp))return null;let e=null;return(await am(pp,SM,{upgrade:async(r,a,l,c)=>{var h;if(a<2||!r.objectStoreNames.contains(L2))return;const m=c.objectStore(L2),p=await m.index("fcmSenderId").get(n);if(await m.clear(),!!p){if(a===2){const v=p;if(!v.auth||!v.p256dh||!v.endpoint)return;e={token:v.fcmToken,createTime:(h=v.createTime)!==null&&h!==void 0?h:Date.now(),subscriptionOptions:{auth:v.auth,p256dh:v.p256dh,endpoint:v.endpoint,swScope:v.swScope,vapidKey:typeof v.vapidKey=="string"?v.vapidKey:Ts(v.vapidKey)}}}else if(a===3){const v=p;e={token:v.fcmToken,createTime:v.createTime,subscriptionOptions:{auth:Ts(v.auth),p256dh:Ts(v.p256dh),endpoint:v.endpoint,swScope:v.swScope,vapidKey:Ts(v.vapidKey)}}}else if(a===4){const v=p;e={token:v.fcmToken,createTime:v.createTime,subscriptionOptions:{auth:Ts(v.auth),p256dh:Ts(v.p256dh),endpoint:v.endpoint,swScope:v.swScope,vapidKey:Ts(v.vapidKey)}}}}}})).close(),await X0(pp),await X0("fcm_vapid_details_db"),await X0("undefined"),IM(e)?e:null}function IM(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NM="firebase-messaging-database",CM=1,Ju="firebase-messaging-store";let yp=null;function pk(){return yp||(yp=am(NM,CM,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Ju)}}})),yp}async function RM(n){const e=yk(n),r=await(await pk()).transaction(Ju).objectStore(Ju).get(e);if(r)return r;{const a=await kM(n.appConfig.senderId);if(a)return await Gv(n,a),a}}async function Gv(n,e){const t=yk(n),a=(await pk()).transaction(Ju,"readwrite");return await a.objectStore(Ju).put(e,t),await a.done,e}function yk({appConfig:n}){return n.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},xn=new Wa("messaging","Messaging",jM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DM(n,e){const t=await $v(n),r=vk(e),a={method:"POST",headers:t,body:JSON.stringify(r)};let l;try{l=await(await fetch(Kv(n.appConfig),a)).json()}catch(c){throw xn.create("token-subscribe-failed",{errorInfo:c==null?void 0:c.toString()})}if(l.error){const c=l.error.message;throw xn.create("token-subscribe-failed",{errorInfo:c})}if(!l.token)throw xn.create("token-subscribe-no-token");return l.token}async function PM(n,e){const t=await $v(n),r=vk(e.subscriptionOptions),a={method:"PATCH",headers:t,body:JSON.stringify(r)};let l;try{l=await(await fetch(`${Kv(n.appConfig)}/${e.token}`,a)).json()}catch(c){throw xn.create("token-update-failed",{errorInfo:c==null?void 0:c.toString()})}if(l.error){const c=l.error.message;throw xn.create("token-update-failed",{errorInfo:c})}if(!l.token)throw xn.create("token-update-no-token");return l.token}async function OM(n,e){const r={method:"DELETE",headers:await $v(n)};try{const l=await(await fetch(`${Kv(n.appConfig)}/${e}`,r)).json();if(l.error){const c=l.error.message;throw xn.create("token-unsubscribe-failed",{errorInfo:c})}}catch(a){throw xn.create("token-unsubscribe-failed",{errorInfo:a==null?void 0:a.toString()})}}function Kv({projectId:n}){return`${_M}/projects/${n}/registrations`}async function $v({appConfig:n,installations:e}){const t=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}function vk({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const a={web:{endpoint:t,auth:e,p256dh:n}};return r!==mk&&(a.web.applicationPubKey=r),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM=7*24*60*60*1e3;async function VM(n){const e=await UM(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Ts(e.getKey("auth")),p256dh:Ts(e.getKey("p256dh"))},r=await RM(n.firebaseDependencies);if(r){if(BM(r.subscriptionOptions,t))return Date.now()>=r.createTime+MM?LM(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{await OM(n.firebaseDependencies,r.token)}catch(a){console.warn(a)}return U2(n.firebaseDependencies,t)}else return U2(n.firebaseDependencies,t)}async function LM(n,e){try{const t=await PM(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return await Gv(n.firebaseDependencies,r),t}catch(t){throw t}}async function U2(n,e){const r={token:await DM(n,e),createTime:Date.now(),subscriptionOptions:e};return await Gv(n,r),r.token}async function UM(n,e){const t=await n.pushManager.getSubscription();return t||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:AM(e)})}function BM(n,e){const t=e.vapidKey===n.vapidKey,r=e.endpoint===n.endpoint,a=e.auth===n.auth,l=e.p256dh===n.p256dh;return t&&r&&a&&l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return zM(e,n),FM(e,n),qM(e,n),e}function zM(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const a=e.notification.image;a&&(n.notification.image=a);const l=e.notification.icon;l&&(n.notification.icon=l)}function FM(n,e){e.data&&(n.data=e.data)}function qM(n,e){var t,r,a,l,c;if(!e.fcmOptions&&!(!((t=e.notification)===null||t===void 0)&&t.click_action))return;n.fcmOptions={};const h=(a=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&a!==void 0?a:(l=e.notification)===null||l===void 0?void 0:l.click_action;h&&(n.fcmOptions.link=h);const m=(c=e.fcmOptions)===null||c===void 0?void 0:c.analytics_label;m&&(n.fcmOptions.analyticsLabel=m)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HM(n){return typeof n=="object"&&!!n&&gk in n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GM(n){if(!n||!n.options)throw vp("App Configuration Object");if(!n.name)throw vp("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw vp(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function vp(n){return xn.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const a=GM(e);this.firebaseDependencies={app:e,appConfig:a,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $M(n){try{n.swRegistration=await navigator.serviceWorker.register(xM,{scope:bM}),n.swRegistration.update().catch(()=>{}),await QM(n.swRegistration)}catch(e){throw xn.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function QM(n){return new Promise((e,t)=>{const r=setTimeout(()=>t(new Error(`Service worker not registered after ${M2} ms`)),M2),a=n.installing||n.waiting;n.active?(clearTimeout(r),e()):a?a.onstatechange=l=>{var c;((c=l.target)===null||c===void 0?void 0:c.state)==="activated"&&(a.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),t(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YM(n,e){if(!e&&!n.swRegistration&&await $M(n),!(!e&&n.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw xn.create("invalid-sw-registration");n.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WM(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=mk)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xk(n,e){if(!navigator)throw xn.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw xn.create("permission-blocked");return await WM(n,e==null?void 0:e.vapidKey),await YM(n,e==null?void 0:e.serviceWorkerRegistration),VM(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XM(n,e,t){const r=JM(e);(await n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[gk],message_name:t[wM],message_time:t[EM],message_device_time:Math.floor(Date.now()/1e3)})}function JM(n){switch(n){case Xu.NOTIFICATION_CLICKED:return"notification_open";case Xu.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZM(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===Xu.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(B2(t)):n.onMessageHandler.next(B2(t)));const r=t.data;HM(r)&&r[TM]==="1"&&await XM(n,t.messageType,r)}const z2="@firebase/messaging",F2="0.12.21";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e7=n=>{const e=new KM(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>ZM(e,t)),e},t7=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>xk(e,r)}};function n7(){wr(new cr("messaging",e7,"PUBLIC")),wr(new cr("messaging-internal",t7,"PRIVATE")),jn(z2,F2),jn(z2,F2,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r7(){try{await bE()}catch{return!1}return typeof window<"u"&&vy()&&bC()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s7(n,e){if(!navigator)throw xn.create("only-available-in-window");return n.onMessageHandler=e,()=>{n.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i7(n=_y()){return r7().then(e=>{if(!e)throw xn.create("unsupported-browser")},e=>{throw xn.create("indexed-db-unsupported")}),Xa(dt(n),"messaging").getImmediate()}async function a7(n,e){return n=dt(n),xk(n,e)}function o7(n,e){return n=dt(n),s7(n,e)}n7();const l7={apiKey:"AIzaSyCTKSduZcqmkN2osU6aH5ZaH4rfYO5KQNA",authDomain:"closure-2026.firebaseapp.com",projectId:"closure-2026",storageBucket:"closure-2026.firebasestorage.app",messagingSenderId:"340167651716",appId:"1:340167651716:web:18779909d3e70fe0126dd1",measurementId:"G-GZ9NMNXSS6"},Mm=EE(l7),xu=Q3(Mm),He=sP(Mm,{localCache:gP({tabManager:xP()})}),Qv=CO(Mm),q2=i7(Mm),bk=C.createContext({}),c7=({children:n})=>{const[e,t]=C.useState(null),[r,a]=C.useState(null),[l,c]=C.useState(!0),h=()=>{console.log("Profile refresh requested (handled by real-time listener)")};return C.useEffect(()=>{let m=()=>{};const p=V4(xu,v=>{a(v),v?m=Us(yn(He,"users",v.uid),b=>{b.exists()?t(b.data()):(console.warn("User authenticated but profile not found in Firestore."),t(null)),c(!1)},b=>{console.error("Firestore Listen Error:",b),c(!1)}):(t(null),m(),c(!1))});return()=>{p(),m()}},[]),d.jsx(bk.Provider,{value:{user:e,firebaseUser:r,loading:l,refreshProfile:h},children:n})},Zt=()=>C.useContext(bk),Yv=({className:n="w-6 h-6"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zm0 0c0 1.657 1.007 3 2.25 3S21 13.657 21 12a9 9 0 10-2.636 6.364M16.5 12V8.25"})}),Wf=({className:n="w-6 h-6"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"})}),Xf=({className:n="w-6 h-6"})=>d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Jf=({className:n="w-6 h-6"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88"})}),u7=({onLoginAttempt:n,onOpenModal:e,successMessage:t,errorMessage:r})=>{const[a,l]=C.useState(""),[c,h]=C.useState(""),[m,p]=C.useState(!1),[v,b]=C.useState(!1),[_,A]=C.useState(null),I=async()=>{A(null),b(!0);const N=a.trim(),V=c.trim();if(!N||!V){A("Email and password are required."),b(!1);return}if(!N.includes("@")){A("Please enter a valid email address."),b(!1);return}try{await n(N,V)}catch(B){console.error("Login Error Caught in Component:",B),A(B.message||"An unexpected error occurred.")}finally{b(!1)}},D=()=>{e(Pe.FORGOT_PASSWORD)};return d.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-indigo-700 via-purple-600 to-pink-600 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:[d.jsxs("div",{className:"flex-grow flex flex-col items-center justify-center p-6 text-white text-center",children:[d.jsx("div",{className:"bg-white/20 backdrop-blur-md p-4 rounded-xl shadow-xl mb-6 border border-white/10",children:d.jsx("svg",{className:"w-16 h-16 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})})}),d.jsx("h1",{className:"text-3xl font-bold mb-2 tracking-wide",children:"Welcome Back!"}),d.jsx("p",{className:"text-lg opacity-90 mb-8 font-light",children:"Login to access Closure."})]}),d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 sm:p-8 rounded-t-3xl shadow-top-xl transition-colors duration-200",children:[t&&d.jsx("div",{className:"mb-4 p-3 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 border border-green-300 dark:border-green-700 rounded-lg text-sm text-center",children:t}),r&&!_&&d.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 border border-red-300 dark:border-red-700 rounded-lg text-sm text-center",children:r}),_&&d.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 border border-red-300 dark:border-red-700 rounded-lg text-sm text-center",children:_}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"login-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email Address"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(Yv,{className:"h-5 w-5 text-gray-400 dark:text-gray-500"})}),d.jsx("input",{type:"email",id:"login-email",value:a,onChange:N=>l(N.target.value),placeholder:"your.email@example.com",className:"w-full pl-10 pr-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500",required:!0,disabled:v,autoCapitalize:"none",autoComplete:"username"})]})]}),d.jsxs("div",{className:"mb-2",children:[d.jsx("label",{htmlFor:"login-password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(Wf,{className:"h-5 w-5 text-gray-400 dark:text-gray-500"})}),d.jsx("input",{type:m?"text":"password",id:"login-password",value:c,onChange:N=>h(N.target.value),placeholder:"",className:"w-full pl-10 pr-10 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500",required:!0,disabled:v,autoComplete:"current-password"}),d.jsx("button",{type:"button",onClick:()=>p(!m),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-sm leading-5 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200","aria-label":m?"Hide password":"Show password",disabled:v,children:m?d.jsx(Jf,{className:"h-5 w-5"}):d.jsx(Xf,{className:"h-5 w-5"})})]})]}),d.jsx("div",{className:"text-right mb-6",children:d.jsx("button",{onClick:D,disabled:v,className:"text-xs font-medium text-indigo-600 dark:text-indigo-400 hover:text-indigo-500 dark:hover:text-indigo-300 focus:outline-none focus:underline disabled:opacity-50",children:"Forgot password?"})}),d.jsx("button",{onClick:I,disabled:v,className:"w-full bg-indigo-600 text-white py-3 px-4 rounded-lg flex items-center justify-center font-semibold hover:bg-indigo-700 active:bg-indigo-800 transition-colors text-lg shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:v?d.jsxs("span",{className:"flex items-center",children:[d.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Logging in..."]}):"Login"}),d.jsxs("p",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:["Don't have an account?"," ",d.jsx(py,{to:"/signup",className:`font-medium text-indigo-600 dark:text-indigo-400 hover:text-indigo-500 dark:hover:text-indigo-300 focus:outline-none focus:underline ${v?"pointer-events-none opacity-50":""}`,children:"Sign up"})]})]})]})},d7=({className:n="w-6 h-6"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"})}),h7=n=>{const e=n.split("@");return e.length===2?e[1].toLowerCase():""},f7=async n=>{const e="https://api.closure-app.com/validate-domain";try{const t=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({domain:n})});if(!t.ok)throw console.warn(`API Error: ${t.status}`),new Error("API_FAILURE");return(await t.json()).isValid}catch(t){console.warn("Domain verification API unreachable. Using local fallback list.",t);const r=["harvard.edu","mit.edu","stanford.edu","ox.ac.uk","cam.ac.uk","college.edu","iitb.ac.in","iitd.ac.in","iitm.ac.in","iitk.ac.in","iitkgp.ac.in","iitg.ac.in","iitr.ac.in","iitbhu.ac.in","iiti.ac.in","iith.ac.in","nitt.edu","nitc.ac.in","nitw.ac.in","nitrkl.ac.in","nitk.ac.in","nitdgp.ac.in","nitp.ac.in","nith.ac.in","iiit.ac.in","iiitd.ac.in","iiita.ac.in","iiitb.ac.in","iiitdmj.ac.in","iiserpune.ac.in","iiserkol.ac.in","iiserb.ac.in","iisermohali.ac.in","iisertvm.ac.in","du.ac.in","jnu.ac.in","jmi.ac.in","amu.ac.in","uohyd.ac.in","annauniv.edu","unipune.ac.in","mu.ac.in","caluniv.ac.in","jadavpuruniversity.in","bits-pilani.ac.in","vit.ac.in","srmuniv.ac.in","manipal.edu","amity.edu","lpu.in","sastra.edu","bmsce.ac.in","rvce.edu.in","pes.edu","msrit.edu","vtu.ac.in"];return await new Promise(a=>setTimeout(a,500)),r.includes(n)}},m7=({onSignupAttempt:n,onNavigateToLogin:e,errorMessage:t})=>{const[r,a]=C.useState(""),[l,c]=C.useState(""),[h,m]=C.useState(""),[p,v]=C.useState(""),[b,_]=C.useState(!1),[A,I]=C.useState(!1),[D,N]=C.useState(!1),[V,B]=C.useState(null),[H,te]=C.useState(!1),ee=async()=>{B(null),N(!0);const se=r.trim(),O=l.trim(),k=h.trim(),R=p.trim(),j=h7(O);if(!se||!O||!k||!R){B("All fields are required."),N(!1);return}if(!O.includes("@")){B("Please enter a valid email address."),N(!1);return}if(k.length<6){B("Password must be at least 6 characters long."),N(!1);return}if(k!==R){B("Passwords do not match."),N(!1);return}try{if(!await f7(j)){B(`The domain "@${j}" is not recognized. Please use your official College Email ID.`),N(!1);return}}catch(F){console.error("Domain verification failed:",F),B("Unable to verify college domain. Please try again."),N(!1);return}await n(se,O,k)&&te(!0),N(!1)};return H?d.jsx("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-purple-600 via-pink-500 to-orange-500 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 items-center justify-center p-6 text-white text-center",children:d.jsxs("div",{className:"bg-white/20 backdrop-blur-md p-8 rounded-2xl shadow-2xl max-w-md w-full border border-white/30",children:[d.jsx("div",{className:"bg-green-500/20 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-6",children:d.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),d.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Verify your Email"}),d.jsxs("p",{className:"text-lg mb-6 opacity-90",children:["We've sent a verification link to ",d.jsx("br",{}),d.jsx("span",{className:"font-semibold text-yellow-300",children:l})]}),d.jsx("p",{className:"text-sm mb-8 opacity-75",children:"Please check your inbox (and spam folder) and click the link to activate your account. You cannot log in until you verify."}),d.jsx("button",{onClick:e,className:"w-full bg-white text-purple-700 font-bold py-3 px-6 rounded-lg hover:bg-gray-100 transition-colors shadow-lg",children:"Go to Login"})]})}):d.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-purple-600 via-pink-500 to-orange-500 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 transition-colors duration-200",children:[d.jsxs("div",{className:"flex-grow flex flex-col items-center justify-center p-6 text-white text-center",children:[d.jsx("div",{className:"bg-purple-800/80 backdrop-blur-sm p-4 rounded-lg shadow-xl mb-6 border border-white/10",children:d.jsx("svg",{className:"w-16 h-16 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})})}),d.jsx("h1",{className:"text-3xl font-bold mb-2 tracking-wide",children:"Create Account"}),d.jsx("p",{className:"text-lg opacity-90 mb-8 font-light",children:"Join Closure today!"})]}),d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 sm:p-8 rounded-t-3xl shadow-top-xl transition-colors duration-200",children:[t&&!V&&d.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 border border-red-300 dark:border-red-700 rounded-lg text-sm text-center",children:t}),V&&d.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 border border-red-300 dark:border-red-700 rounded-lg text-sm text-center",children:V}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Full Name"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(d7,{className:"h-5 w-5 text-gray-400 dark:text-gray-500"})}),d.jsx("input",{type:"text",id:"name",value:r,onChange:se=>a(se.target.value),placeholder:"John Doe",className:"w-full pl-10 pr-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-purple-500 focus:border-purple-500 sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500",required:!0,disabled:D,autoComplete:"name"})]})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"signup-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"College Email Address"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(Yv,{className:"h-5 w-5 text-gray-400 dark:text-gray-500"})}),d.jsx("input",{type:"email",id:"signup-email",value:l,onChange:se=>c(se.target.value),placeholder:"your.name@college.edu",className:"w-full pl-10 pr-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-purple-500 focus:border-purple-500 sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500",required:!0,disabled:D,autoCapitalize:"none",autoComplete:"email"})]}),d.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Must be a valid .edu or recognized college domain."})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"signup-password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(Wf,{className:"h-5 w-5 text-gray-400 dark:text-gray-500"})}),d.jsx("input",{type:b?"text":"password",id:"signup-password",value:h,onChange:se=>m(se.target.value),placeholder:" (min. 6 characters)",className:"w-full pl-10 pr-10 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-purple-500 focus:border-purple-500 sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500",required:!0,disabled:D,autoComplete:"new-password"}),d.jsx("button",{type:"button",onClick:()=>_(!b),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-sm leading-5 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200","aria-label":b?"Hide password":"Show password",disabled:D,children:b?d.jsx(Jf,{className:"h-5 w-5"}):d.jsx(Xf,{className:"h-5 w-5"})})]})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Confirm Password"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(Wf,{className:"h-5 w-5 text-gray-400 dark:text-gray-500"})}),d.jsx("input",{type:A?"text":"password",id:"confirm-password",value:p,onChange:se=>v(se.target.value),placeholder:"",className:"w-full pl-10 pr-10 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-purple-500 focus:border-purple-500 sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500",required:!0,disabled:D,autoComplete:"new-password"}),d.jsx("button",{type:"button",onClick:()=>I(!A),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-sm leading-5 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200","aria-label":A?"Hide password":"Show password",disabled:D,children:A?d.jsx(Jf,{className:"h-5 w-5"}):d.jsx(Xf,{className:"h-5 w-5"})})]})]}),d.jsx("button",{onClick:ee,disabled:D,className:"w-full bg-purple-600 dark:bg-purple-700 text-white py-3 px-4 rounded-lg flex items-center justify-center font-semibold hover:bg-purple-700 dark:hover:bg-purple-600 transition-colors text-lg shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50 disabled:cursor-not-allowed",children:D?d.jsxs("span",{className:"flex items-center",children:[d.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Verifying..."]}):"Sign Up"}),d.jsxs("p",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:["Already have an account?"," ",d.jsx("button",{onClick:e,disabled:D,className:"font-medium text-purple-600 dark:text-purple-400 hover:text-purple-500 dark:hover:text-purple-300 focus:outline-none focus:underline disabled:opacity-50",children:"Login"})]})]})]})},xp=({id:n,label:e,value:t,onChange:r,show:a,onToggleShow:l,placeholder:c="",disabled:h=!1})=>d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:n,className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(Wf,{className:"h-5 w-5 text-gray-400 dark:text-gray-500"})}),d.jsx("input",{type:a?"text":"password",id:n,value:t,onChange:m=>r(m.target.value),placeholder:c,className:"w-full pl-10 pr-10 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",required:!0,disabled:h}),d.jsx("button",{type:"button",onClick:l,className:"absolute inset-y-0 right-0 pr-3 flex items-center text-sm leading-5 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200","aria-label":a?"Hide password":"Show password",disabled:h,children:a?d.jsx(Jf,{className:"h-5 w-5"}):d.jsx(Xf,{className:"h-5 w-5"})})]})]}),g7=({onChangePassword:n,onClose:e,onOpenModal:t})=>{const[r,a]=C.useState(""),[l,c]=C.useState(""),[h,m]=C.useState(""),[p,v]=C.useState(!1),[b,_]=C.useState(!1),[A,I]=C.useState(!1),[D,N]=C.useState(null),[V,B]=C.useState(!1),H=async()=>{if(N(null),!r||!l||!h){N("All fields are required.");return}if(l.length<6){N("New password must be at least 6 characters long.");return}if(l!==h){N("New passwords do not match.");return}B(!0);const te=await n(r,l);B(!1),te?e():D||N("Failed to change password. Check your current password.")};return d.jsxs("div",{className:"p-1",children:[D&&d.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 border border-red-300 rounded-lg text-sm text-center",children:D}),d.jsx(xp,{id:"currentPassword",label:"Current Password",value:r,onChange:a,show:p,onToggleShow:()=>v(!p),disabled:V}),d.jsx("div",{className:"flex justify-end mb-4 -mt-2",children:d.jsx("button",{type:"button",onClick:()=>t&&t(Pe.FORGOT_PASSWORD),className:"text-xs text-indigo-600 dark:text-indigo-400 hover:underline disabled:opacity-50",disabled:V,children:"Forgot current password?"})}),d.jsx(xp,{id:"newPassword",label:"New Password",value:l,onChange:c,show:b,onToggleShow:()=>_(!b),placeholder:"Min. 6 characters",disabled:V}),d.jsx(xp,{id:"confirmNewPassword",label:"Confirm New Password",value:h,onChange:m,show:A,onToggleShow:()=>I(!A),disabled:V}),d.jsxs("div",{className:"flex justify-end space-x-3 mt-4 pt-2 border-t border-gray-100 dark:border-gray-700",children:[d.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 focus:outline-none",disabled:V,children:"Cancel"}),d.jsxs("button",{type:"button",onClick:H,disabled:V||!r||!l||l!==h||l.length<6,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 flex items-center",children:[V&&d.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),V?"Changing...":"Change Password"]})]})]})},Wv=({className:n="w-16 h-16"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),p7=({onClose:n,onForgotPasswordRequest:e})=>{const{user:t}=Zt(),[r,a]=C.useState((t==null?void 0:t.email)||""),[l,c]=C.useState(!1),[h,m]=C.useState(!1),[p,v]=C.useState(null),b=async()=>{v(null);const _=r.trim();if(!_){v("Email address is required.");return}if(!_.includes("@")||!_.includes(".")){v("Please enter a valid email address.");return}c(!0);const A=await e(_);c(!1),A?m(!0):v("Failed to send reset email. Please try again later.")};return d.jsx("div",{className:"p-1",children:h?d.jsxs("div",{className:"text-center py-6",children:[d.jsx(Wv,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),d.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"Check your mail"}),d.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2 mb-6",children:["We have sent password reset instructions to ",d.jsx("br",{}),d.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:r})]}),d.jsx("button",{onClick:n,className:"w-full bg-indigo-600 text-white py-2 px-4 rounded-lg font-semibold hover:bg-indigo-700 dark:hover:bg-indigo-500 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-800",children:"Close"})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-1",children:"Reset Password"}),d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Enter your registered college email and we'll send you a link to reset your password."})]}),p&&d.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 border border-red-300 rounded-lg text-sm text-center",children:p}),d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{htmlFor:"forgot-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email Address"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(Yv,{className:"h-5 w-5 text-gray-400 dark:text-gray-500"})}),d.jsx("input",{type:"email",id:"forgot-email",value:r,onChange:_=>a(_.target.value),placeholder:"your.name@college.edu",className:"w-full pl-10 pr-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",required:!0,disabled:l,autoCapitalize:"none"})]})]}),d.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[d.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 dark:bg-gray-700 dark:border-gray-600 dark:hover:bg-gray-600 focus:outline-none",disabled:l,children:"Cancel"}),d.jsx("button",{type:"button",onClick:b,disabled:l||!r.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 flex items-center",children:l?d.jsxs(d.Fragment,{children:[d.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):"Send Reset Link"})]})]})})},y7=({className:n="w-6 h-6"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),Vm=({className:n="w-6 h-6"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0"})}),Lm=({className:n="w-6 h-6"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})}),v7=({className:n="w-6 h-6"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 00-16.536-1.84M7.5 14.25L5.106 5.272M6 20.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"})}),x7=({notifications:n,onClose:e,onNotificationClick:t,onMarkAllRead:r})=>d.jsxs("div",{className:"absolute top-12 right-0 mt-2 w-72 sm:w-80 bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 z-50 overflow-hidden transform origin-top-right transition-all",onClick:a=>a.stopPropagation(),children:[d.jsxs("div",{className:"p-3 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center bg-gray-50 dark:bg-gray-800/50",children:[d.jsx("h3",{className:"font-semibold text-gray-700 dark:text-gray-100 text-sm",children:"Notifications"}),n.some(a=>!a.read)&&d.jsx("button",{onClick:r,className:"text-xs text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 font-medium transition-colors",children:"Mark all read"})]}),n.length===0?d.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[d.jsx(Vm,{className:"w-10 h-10 text-gray-300 dark:text-gray-600 mb-2"}),d.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No new notifications."})]}):d.jsx("ul",{className:"max-h-80 overflow-y-auto divide-y divide-gray-100 dark:divide-gray-700 custom-scrollbar",children:n.map(a=>d.jsxs("li",{onClick:()=>t(a),className:`p-3 hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer transition-colors relative ${a.read?"opacity-60":"bg-indigo-50/30 dark:bg-indigo-900/10"}`,children:[!a.read&&d.jsx("span",{className:"absolute top-4 right-3 w-2 h-2 bg-red-500 rounded-full"}),d.jsx("p",{className:`text-sm ${a.read?"text-gray-600 dark:text-gray-400":"text-gray-800 dark:text-gray-100 font-medium"} pr-4`,children:a.message}),d.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1.5",children:new Date(a.timestamp).toLocaleTimeString([],{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})})]},a.id))}),d.jsx("div",{className:"p-2 bg-gray-50 dark:bg-gray-800/50 text-center border-t border-gray-100 dark:border-gray-700",children:d.jsx("button",{onClick:e,className:"text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors",children:"Close"})})]}),Zu=({title:n,showMenuButton:e=!0,onMenuClick:t,showBackButton:r=!1,onBackClick:a,notifications:l=[],onNotificationClick:c=()=>{},onMarkAllNotificationsRead:h=()=>{},cartItemCount:m=0,onCartClick:p})=>{const{user:v}=Zt(),[b,_]=C.useState(!1),A=l.filter(N=>!N.read).length,I=N=>{c(N.id),_(!1)},D=()=>{h()};return d.jsxs("div",{className:"bg-indigo-700 dark:bg-indigo-800 text-white p-4 flex items-center justify-between shadow-md sticky top-0 z-30 transition-colors duration-200",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[r?d.jsx("button",{onClick:a,className:"p-1 rounded-full hover:bg-indigo-600 dark:hover:bg-indigo-700 transition-colors","aria-label":"Go back",children:d.jsx(Lm,{className:"w-6 h-6 text-white"})}):e&&d.jsx("button",{onClick:t,className:"p-1 rounded-full hover:bg-indigo-600 dark:hover:bg-indigo-700 transition-colors","aria-label":"Open menu",children:d.jsx(y7,{className:"w-6 h-6 text-white"})}),d.jsxs("div",{className:"flex flex-col",children:[d.jsx("h1",{className:"text-xl font-bold leading-tight tracking-tight text-white",children:n}),v&&n==="Closure"&&d.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:d.jsxs("p",{className:"text-xs opacity-90 leading-tight text-indigo-100 dark:text-indigo-200 font-medium",children:["Hi, ",v.name.split(" ")[0],"!"]})})]})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[p&&d.jsxs("button",{onClick:p,className:"relative p-2 rounded-full hover:bg-indigo-600 dark:hover:bg-indigo-700 transition-colors","aria-label":`Cart with ${m} items`,children:[d.jsx(v7,{className:"w-6 h-6 text-white"}),m>0&&d.jsx("span",{className:"absolute top-0 right-0 block h-4 w-4 text-[10px] font-bold flex items-center justify-center rounded-full bg-pink-500 text-white ring-2 ring-indigo-700 dark:ring-indigo-800",children:m>9?"9+":m})]}),d.jsxs("div",{className:"relative",children:[d.jsxs("button",{onClick:()=>_(!b),className:"relative p-2 rounded-full hover:bg-indigo-600 dark:hover:bg-indigo-700 transition-colors","aria-label":`Notifications ${A>0?`(${A} unread)`:""}`,"aria-expanded":b,children:[d.jsx(Vm,{className:"w-6 h-6 text-white"}),A>0&&d.jsx("span",{className:"absolute top-1 right-1.5 block h-2.5 w-2.5 rounded-full bg-red-500 ring-2 ring-indigo-700 dark:ring-indigo-800 animate-pulse"})]}),b&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>_(!1)}),d.jsx("div",{className:"absolute right-0 mt-2 z-50",children:d.jsx(x7,{notifications:l,onClose:()=>_(!1),onNotificationClick:I,onMarkAllRead:D})})]})]})]})]})},$l=({className:n="w-6 h-6"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"})}),_k=({className:n="w-5 h-5"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),b7=({className:n})=>d.jsx("svg",{className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}),_7=({className:n})=>d.jsx("svg",{className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),w7=({className:n})=>d.jsx("svg",{className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),E7=({className:n})=>d.jsxs("svg",{className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0 3.35a1.724 1.724 0 001.066 2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),T7=({className:n})=>d.jsxs("svg",{className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.755 4 3.92C16 12.805 14.5 14 12.5 14.5M12 6V4M12 18v2"}),d.jsx("circle",{cx:"12",cy:"12",r:"10"})]}),A7=({className:n})=>d.jsx("svg",{className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),Xv=({className:n="w-5 h-5"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 100 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186l9.566-5.314m-9.566 7.5l9.566 5.314m0 0a2.25 2.25 0 103.935 2.186 2.25 2.25 0 00-3.935-2.186zm0-12.814a2.25 2.25 0 103.933-2.185 2.25 2.25 0 00-3.933 2.185z"})}),S7=({isOpen:n,onClose:e,onNavigateToSettings:t,onOpenModal:r,onSwitchToProfileTab:a})=>{const{user:l}=Zt(),c=[{label:"Offline Downloads",icon:_k,badge:!1,action:()=>{r(Pe.OFFLINE_DOWNLOADS_LIST),e()}},{label:"Free Material",icon:b7,badge:!1,action:()=>{r(Pe.FREE_MATERIAL_LIST),e()}},{label:"Students Testimonial",icon:_7,badge:!0,action:()=>{r(Pe.TESTIMONIALS),e()}},{label:"Edit Profile",icon:w7,badge:!1,action:()=>{a&&a(),e()}},{label:"Settings",icon:E7,badge:!1,action:()=>{t(),e()}},{label:"Help & Support",icon:T7,badge:!0,action:()=>{r(Pe.HELP_SUPPORT),e()}},{label:"Privacy Policy",icon:A7,badge:!1,action:()=>{r(Pe.PRIVACY_POLICY),e()}}],h=async()=>{try{navigator.share?await navigator.share({title:"Closure App",text:"Join me on Closure, the best app for college students!",url:window.location.origin}):alert("Sharing not supported on this browser.")}catch(m){console.log("Error sharing",m)}};return l?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:`fixed inset-0 bg-black/60 backdrop-blur-sm z-40 transition-opacity duration-300 ease-in-out ${n?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:e}),d.jsxs("div",{className:`fixed top-0 left-0 h-full bg-white dark:bg-gray-800 w-72 shadow-2xl z-50 transform transition-transform duration-300 ease-in-out ${n?"translate-x-0":"-translate-x-full"}`,children:[d.jsx("div",{className:"p-6 border-b border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:d.jsxs("div",{className:"flex flex-col items-center",children:[l.avatarUrl?d.jsx("img",{src:l.avatarUrl,alt:l.name,className:"w-16 h-16 rounded-full object-cover ring-2 ring-indigo-500 dark:ring-indigo-400 mb-3"}):d.jsx($l,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mb-3"}),d.jsx("p",{className:"text-center font-bold text-gray-900 dark:text-gray-100 truncate w-full text-lg",children:l.name}),d.jsx("p",{className:"text-center text-xs text-indigo-600 dark:text-indigo-400 font-medium bg-indigo-50 dark:bg-indigo-900/30 px-2 py-0.5 rounded-full mt-1",children:l.organizationCode})]})}),d.jsx("nav",{className:"flex-grow overflow-y-auto py-2",children:c.map((m,p)=>d.jsxs("button",{onClick:m.action,className:"w-full flex items-center px-6 py-3.5 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors group",children:[d.jsx(m.icon,{className:"w-5 h-5 mr-4 text-gray-400 dark:text-gray-500 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors"}),d.jsx("span",{className:"flex-1 text-left text-sm font-medium",children:m.label}),m.badge&&d.jsx("span",{className:"bg-red-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full",children:"NEW"})]},p))}),d.jsx("div",{className:"p-4 border-t border-gray-100 dark:border-gray-700",children:d.jsxs("button",{onClick:h,className:"w-full flex items-center justify-center bg-indigo-600 text-white py-2.5 px-4 rounded-lg hover:bg-indigo-700 active:bg-indigo-800 transition-colors shadow-sm text-sm font-semibold",children:[d.jsx(Xv,{className:"w-4 h-4 mr-2"}),"Share App"]})})]})]}):null},k7=({className:n="w-6 h-6"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})}),I7=({className:n="w-6 h-6"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 21v-7.5a.75.75 0 01.75-.75h3a.75.75 0 01.75.75V21m-4.5 0H2.36m11.14 0H18m0 0h3.64m-1.39 0V9.349m-16.5 11.65V9.35m0 0a3.001 3.001 0 003.75-.615A2.993 2.993 0 009.75 9.75c.896 0 1.7-.393 2.25-1.016a2.993 2.993 0 002.25 1.016c.896 0 1.7-.393 2.25-1.016a3.001 3.001 0 003.75.614m-16.5 0a3.004 3.004 0 01-.621-4.72L4.318 3.44A1.5 1.5 0 015.378 3h13.243a1.5 1.5 0 011.06.44l1.19 1.189a3 3 0 01-.621 4.72m-13.5 8.65h3.75a.75.75 0 00.75-.75V13.5a.75.75 0 00-.75-.75H6.75a.75.75 0 00-.75.75v3.75c0 .415.336.75.75.75z"})}),N7=({className:n="w-6 h-6"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"})}),C7=({className:n="w-6 h-6"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"})}),Zf=({className:n="w-6 h-6",isActive:e})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:e?"currentColor":"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 01.865-.501 48.172 48.172 0 003.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z"})}),R7=({activeTab:n,onTabChange:e})=>{const t=[{id:fn.HOME,label:"Home",icon:k7},{id:fn.STORE,label:"Store",icon:I7},{id:fn.COMMUNITY,label:"Community",icon:N7},{id:fn.CHATS,label:"Chats",icon:Zf},{id:fn.PROFILE,label:"Profile",icon:C7}];return d.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 flex justify-around items-center shadow-top h-16 z-10 safe-area-bottom",children:t.map(r=>{const a=r.icon,l=n===r.id;return d.jsxs("button",{onClick:()=>e(r.id),className:`flex flex-col items-center justify-center p-2 w-1/5 text-xs ${l?"text-indigo-600 dark:text-indigo-400":"text-gray-500 dark:text-gray-400"} hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors`,"aria-label":r.label,children:[d.jsx(a,{className:"w-6 h-6 mb-0.5",isActive:l}),d.jsx("span",{className:"truncate max-w-[64px]",children:r.label})]},r.id)})})},j7=({user:n,isSidebarOpen:e,setIsSidebarOpen:t,notifications:r,cartItemCount:a,onNavigateToCart:l,onMarkNotificationRead:c,onMarkAllNotificationsRead:h,onLogout:m,onOpenModal:p})=>{const v=Ar(),b=nm(),A=(D=>D.startsWith("/store")?fn.STORE:D.startsWith("/community")?fn.COMMUNITY:D.startsWith("/chats")?fn.CHATS:D.startsWith("/profile")?fn.PROFILE:fn.HOME)(v.pathname),I=D=>{switch(D){case fn.HOME:b("/");break;case fn.STORE:b("/store");break;case fn.COMMUNITY:b("/community");break;case fn.CHATS:b("/chats");break;case fn.PROFILE:b("/profile");break}};return d.jsxs("div",{className:"h-screen w-screen flex flex-col",children:[d.jsx(Zu,{title:"Closure",userName:n.name,showMenuButton:!0,onMenuClick:()=>t(!0),notifications:r,onNotificationClick:c,onMarkAllNotificationsRead:h,cartItemCount:a,onCartClick:l}),d.jsx(S7,{isOpen:e,onClose:()=>t(!1),user:n,onNavigateToSettings:()=>b("/settings"),onOpenModal:p,onSwitchToProfileTab:()=>b("/profile")}),d.jsx("main",{className:"flex-grow overflow-y-auto",children:d.jsx(c5,{})}),d.jsx(R7,{activeTab:A,onTabChange:I})]})},D7=({isOpen:n,onClose:e,title:t,children:r,size:a="md"})=>{const[l,c]=C.useState(!1),[h,m]=C.useState(!1);if(C.useEffect(()=>{n?(m(!0),setTimeout(()=>c(!0),10)):(c(!1),setTimeout(()=>m(!1),300))},[n]),!h)return null;const p={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl"};return d.jsxs("div",{className:`fixed inset-0 z-50 flex items-center justify-center p-4 transition-opacity duration-300 ease-in-out ${l?"opacity-100":"opacity-0"}`,children:[d.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:e}),d.jsxs("div",{className:`relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full transform transition-all duration-300 ease-out ${p[a]} ${l?"scale-100 translate-y-0":"scale-95 translate-y-4"} flex flex-col max-h-[85vh]`,onClick:v=>v.stopPropagation(),children:[d.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-100 dark:border-gray-700",children:[d.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:t}),d.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700/50","aria-label":"Close modal",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsx("div",{className:"p-5 overflow-y-auto custom-scrollbar",children:r})]})]})},em=({className:n="w-5 h-5"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),wk=({className:n="w-5 h-5"})=>d.jsx("svg",{className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),P7=({message:n,type:e,onClose:t,duration:r=3e3})=>{const[a,l]=C.useState(!1);C.useEffect(()=>{const m=setTimeout(()=>l(!0),10),p=setTimeout(()=>{l(!1),setTimeout(t,300)},r);return()=>{clearTimeout(m),clearTimeout(p)}},[t,r]);const c={success:"bg-green-500 border-green-600",error:"bg-red-500 border-red-600",info:"bg-blue-500 border-blue-600"},h=e==="success"?Wv:e==="error"?em:wk;return d.jsx("div",{className:`transform transition-all duration-300 ease-out mb-2 ${a?"translate-x-0 opacity-100":"translate-x-full opacity-0"}`,children:d.jsxs("div",{className:`${c[e]} flex items-center p-4 rounded-lg shadow-lg border text-white min-w-[300px] max-w-sm pointer-events-auto`,children:[d.jsx("div",{className:"flex-shrink-0 mr-3",children:d.jsx(h,{className:"w-5 h-5 text-white"})}),d.jsx("div",{className:"flex-grow text-sm font-medium",children:n}),d.jsx("button",{onClick:()=>{l(!1),setTimeout(t,300)},className:"ml-4 text-white/80 hover:text-white transition-colors focus:outline-none",children:d.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})})},O7=({onClose:n})=>d.jsxs("div",{className:"p-1 space-y-4 text-sm text-gray-700 dark:text-gray-300",children:[d.jsx("h4",{className:"text-md font-semibold text-gray-800 dark:text-gray-100",children:"Terms and Conditions"}),d.jsx("p",{children:"Welcome to Closure!"}),d.jsx("p",{children:"These terms and conditions outline the rules and regulations for the use of Closure's Application."}),d.jsx("p",{children:"By accessing this application we assume you accept these terms and conditions. Do not continue to use Closure if you do not agree to take all of the terms and conditions stated on this page."}),d.jsx("h5",{className:"text-sm font-semibold text-gray-800 dark:text-gray-100 pt-2",children:"Cookies:"}),d.jsx("p",{children:"The Application may use cookies to help personalize your online experience. By accessing Closure, you agreed to use the required cookies."}),d.jsx("h5",{className:"text-sm font-semibold text-gray-800 dark:text-gray-100 pt-2",children:"License:"}),d.jsx("p",{children:"Unless otherwise stated, Closure and/or its licensors own the intellectual property rights for all material on Closure. All intellectual property rights are reserved. You may access this from Closure for your own personal use subjected to restrictions set in these terms and conditions."}),d.jsx("p",{children:"You must not:"}),d.jsxs("ul",{className:"list-disc list-inside pl-4 space-y-1",children:[d.jsx("li",{children:"Republish material from Closure"}),d.jsx("li",{children:"Sell, rent or sub-license material from Closure"}),d.jsx("li",{children:"Reproduce, duplicate or copy material from Closure"}),d.jsx("li",{children:"Redistribute content from Closure"})]}),d.jsx("p",{children:"This Agreement shall begin on the date hereof."}),d.jsx("h5",{className:"text-sm font-semibold text-gray-800 dark:text-gray-100 pt-2",children:"User Comments:"}),d.jsx("p",{children:"Parts of this application offer an opportunity for users to post and exchange opinions and information. Closure does not filter, edit, publish or review Comments prior to their presence on the application. Comments do not reflect the views and opinions of Closure, its agents and/or affiliates."}),d.jsx("h5",{className:"text-sm font-semibold text-gray-800 dark:text-gray-100 pt-2",children:"Disclaimer:"}),d.jsx("p",{children:"To the maximum extent permitted by applicable law, we exclude all representations, warranties and conditions relating to our application and the use of this application. Nothing in this disclaimer will limit or exclude our or your liability for death or personal injury; limit or exclude our or your liability for fraud or fraudulent misrepresentation..."}),d.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 pt-3 italic",children:["Last updated: ",new Date().toLocaleDateString()]}),d.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700 mt-4",children:d.jsx("button",{onClick:n,className:"w-full bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 py-2.5 px-4 rounded-lg font-semibold hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors text-sm border border-gray-300 dark:border-gray-600",children:"I Understand"})})]}),Du=({className:n="w-4 h-4"})=>d.jsx("svg",{className:n,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5"})}),Ek=({className:n="w-4 h-4"})=>d.jsxs("svg",{className:n,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"})]}),Tk=({className:n="w-4 h-4"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.76c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.076-4.076a1.526 1.526 0 011.037-.443h2.284M19.5 12.76c0-1.6-1.123-2.994-2.707-3.227A48.344 48.344 0 0013.5 9.185V6L9.424 9.924a1.526 1.526 0 00-1.037.443H6.113M15 9.75a3 3 0 110-6 3 3 0 010 6z"})}),M7=({className:n="w-4 h-4"})=>d.jsx("svg",{className:n,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"})}),V7=({className:n="w-4 h-4"})=>d.jsx("svg",{className:n,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})}),L7=({onOpenModal:n,announcements:e,events:t,onNavigate:r})=>{const{user:a}=Zt(),[l,c]=C.useState([]),[h,m]=C.useState(!0),p=C.useMemo(()=>a!=null&&a.email?a.email.split("@")[1].toLowerCase():null,[a]);C.useEffect(()=>{if(p){const b=kr(Ut(He,"posts"),to("collegeDomain","==",p),Ls("timestamp","desc")),_=Us(b,A=>{const I=A.docs.map(D=>({id:D.id,...D.data()}));c(I),m(!1)},A=>{console.error("Error fetching posts:",A),m(!1)});return()=>_()}else m(!1)},[p]);const v=async(b,_)=>{try{const A=yn(He,"posts",b);await Xr(A,{upvotes:_P(_)})}catch(A){console.error("Error voting:",A)}};return d.jsxs("div",{className:"p-4 bg-gray-100 dark:bg-gray-900 min-h-full pb-16 transition-colors duration-200",children:[d.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6 overflow-hidden border-l-4 border-indigo-500 transition-colors duration-200",children:d.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start",children:d.jsxs("div",{className:"mb-4 md:mb-0 md:mr-4 w-full",children:[d.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-1",children:"Campus Discussion"}),d.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-4",children:["Viewing feeds for: ",d.jsxs("span",{className:"font-bold text-indigo-600 dark:text-indigo-400",children:["@",p||"Guest"]})]}),d.jsx("button",{onClick:()=>n(Pe.CREATE_POST),className:"w-full bg-gray-100 dark:bg-gray-700 text-left text-gray-500 dark:text-gray-400 px-4 py-3 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors text-sm border border-gray-200 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:"What's on your mind?"})]})})}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-200 mb-3 px-1",children:"Announcements"}),e.length>0?d.jsx("div",{className:"space-y-3",children:e.map(b=>d.jsxs("div",{onClick:()=>n(Pe.ANNOUNCEMENT_DETAIL,b),className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm hover:shadow-md transition-all cursor-pointer border-l-4 border-orange-400 dark:border-orange-500",children:[d.jsx("h4",{className:"font-semibold text-indigo-700 dark:text-indigo-400 mb-1",children:b.title}),d.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1.5",children:b.date}),d.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 line-clamp-2",children:b.content})]},b.id))}):d.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm",children:"No new announcements."})]}),d.jsxs("div",{className:"mb-8",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-200 mb-3 px-1",children:"Upcoming Events"}),t.length>0?d.jsx("div",{className:"space-y-3",children:t.map(b=>d.jsxs("div",{onClick:()=>n(Pe.EVENT_DETAIL,b),className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm hover:shadow-md transition-all cursor-pointer border-l-4 border-green-500",children:[d.jsx("h4",{className:"font-semibold text-green-700 dark:text-green-400 mb-1",children:b.title}),d.jsxs("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400 mb-1.5 space-x-3",children:[d.jsxs("span",{className:"flex items-center",children:[d.jsx(Du,{className:"mr-1 w-4 h-4 text-gray-400 dark:text-gray-500"})," ",b.date," at ",b.time]}),d.jsxs("span",{className:"flex items-center",children:[d.jsx(Ek,{className:"mr-1 w-4 h-4 text-gray-400 dark:text-gray-500"})," ",b.location]})]})]},b.id))}):d.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm",children:"No upcoming events scheduled."})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-200 mb-3 px-1",children:"Recent Discussions"}),h?d.jsxs("div",{className:"text-center py-10",children:[d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-2"}),d.jsx("p",{className:"text-gray-500 text-sm",children:"Loading campus feed..."})]}):l.length>0?d.jsx("div",{className:"space-y-4",children:l.map(b=>d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 border border-gray-100 dark:border-gray-700 cursor-pointer hover:shadow-md transition-all",onClick:()=>r&&r(nd.POST_DETAIL,{postId:b.id}),children:[d.jsxs("div",{className:"flex items-center mb-3",children:[d.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-indigo-500 to-purple-500 flex items-center justify-center text-white font-bold text-xs mr-3 shadow-sm",children:b.isAnonymous?"?":b.authorName?b.authorName.charAt(0).toUpperCase():"U"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:b.isAnonymous?"Anonymous Student":b.authorName}),d.jsx("p",{className:"text-xs text-gray-400",children:"Posted recently"})]})]}),d.jsx("h4",{className:"text-md font-bold text-gray-900 dark:text-white mb-2 leading-tight",children:b.title}),d.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4 leading-relaxed line-clamp-3 whitespace-pre-wrap",children:b.content}),d.jsxs("div",{className:"flex items-center justify-between border-t border-gray-100 dark:border-gray-700 pt-3",children:[d.jsxs("div",{className:"flex items-center space-x-1 bg-gray-50 dark:bg-gray-700/50 rounded-full px-1 py-1",onClick:_=>_.stopPropagation(),children:[d.jsx("button",{onClick:()=>v(b.id,1),className:"p-1.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full hover:text-orange-500 text-gray-400 transition-colors",children:d.jsx(M7,{className:"w-5 h-5"})}),d.jsx("span",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 w-6 text-center",children:b.upvotes||0}),d.jsx("button",{onClick:()=>v(b.id,-1),className:"p-1.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full hover:text-indigo-500 text-gray-400 transition-colors",children:d.jsx(V7,{className:"w-5 h-5"})})]}),d.jsxs("button",{className:"flex items-center space-x-1.5 text-gray-500 hover:text-indigo-600 transition-colors py-1 px-2 rounded-md hover:bg-indigo-50 dark:hover:bg-indigo-900/20",children:[d.jsx(Tk,{className:"w-5 h-5"}),d.jsxs("span",{className:"text-sm font-medium",children:[b.commentsCount||0," Comments"]})]})]})]},b.id))}):d.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-dashed border-gray-300 dark:border-gray-700",children:[d.jsx("p",{className:"text-gray-800 dark:text-gray-200 font-medium mb-1",children:"No discussions here yet!"}),d.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-4",children:["Be the first to start a thread for ",p,"."]}),d.jsx("button",{onClick:()=>n(Pe.CREATE_POST),className:"text-indigo-600 dark:text-indigo-400 font-semibold text-sm hover:underline focus:outline-none",children:"Create a Post"})]})]})]})},Ak=({className:n="w-5 h-5"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),Sk=({className:n="w-4 h-4"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.593l6.202-2.073c1.154-.386 1.552-2.197.696-2.909L12.595 4.382a2.27 2.27 0 00-1.591-.66h-1.436z"})}),U7=({onAddToCart:n,onOpenModal:e})=>{const{user:t}=Zt(),[r,a]=C.useState([]),[l,c]=C.useState(!0),h=C.useMemo(()=>t!=null&&t.email?t.email.split("@")[1].toLowerCase():null,[t]);return C.useEffect(()=>{if(h){const m=kr(Ut(He,"products"),to("collegeDomain","==",h),Ls("createdAt","desc")),p=Us(m,v=>{const b=v.docs.map(_=>({id:_.id,..._.data()}));a(b),c(!1)},v=>{console.error("Error fetching store items:",v),c(!1)});return()=>p()}else c(!1)},[h]),d.jsxs("div",{className:"p-4 bg-gray-100 dark:bg-gray-900 min-h-full pb-20 transition-colors duration-200",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[d.jsxs("div",{className:"mb-4 sm:mb-0",children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Campus Store"}),d.jsx("p",{className:"text-xs text-indigo-600 dark:text-indigo-400 font-medium mt-1",children:h?`Marketplace for @${h}`:"Student Marketplace"})]}),d.jsxs("button",{onClick:()=>e(Pe.ADD_PRODUCT),className:"w-full sm:w-auto bg-indigo-600 text-white px-4 py-2.5 rounded-lg font-semibold hover:bg-indigo-700 dark:hover:bg-indigo-500 transition-colors flex items-center justify-center shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900",children:[d.jsx(Ak,{className:"mr-2 w-5 h-5"}),"Sell Item"]})]}),l?d.jsx("div",{className:"flex justify-center pt-10",children:d.jsxs("svg",{className:"animate-spin h-8 w-8 text-indigo-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):r.length===0?d.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400 mt-10 p-8 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-dashed border-gray-300 dark:border-gray-700",children:[d.jsx(Sk,{className:"mx-auto h-12 w-12 text-gray-300 dark:text-gray-600 mb-3"}),d.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"The store is currently empty."}),d.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Be the first to list a book, notes, or stationary!"}),d.jsx("button",{onClick:()=>e(Pe.ADD_PRODUCT),className:"mt-4 text-indigo-600 dark:text-indigo-400 font-medium text-sm hover:underline focus:outline-none",children:"List an Item Now"})]}):d.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:r.map(m=>d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm hover:shadow-lg transition-shadow overflow-hidden flex flex-col border border-gray-100 dark:border-gray-700",children:[d.jsxs("div",{className:"relative aspect-square w-full bg-gray-100 dark:bg-gray-700",children:[d.jsx("img",{src:m.imageUrl,alt:m.name,className:"w-full h-full object-cover",onError:p=>{p.target.src="https://via.placeholder.com/150?text=No+Image"}}),d.jsxs("div",{className:"absolute top-2 right-2 bg-white/90 dark:bg-black/70 backdrop-blur-sm px-2 py-1 rounded text-xs font-bold text-gray-900 dark:text-white shadow-sm",children:["",m.price.toFixed(0)]})]}),d.jsxs("div",{className:"p-3 flex flex-col flex-grow",children:[d.jsx("div",{className:"flex items-start justify-between mb-1.5",children:d.jsx("span",{className:"inline-flex items-center rounded-full bg-indigo-50 dark:bg-indigo-900/30 px-2 py-0.5 text-[10px] font-semibold text-indigo-700 dark:text-indigo-300 ring-1 ring-inset ring-indigo-700/10 dark:ring-indigo-500/20",children:m.category||"General"})}),d.jsx("h3",{className:"text-sm font-semibold text-gray-800 dark:text-gray-100 mb-1 line-clamp-2 leading-tight min-h-[2.5em]",children:m.name}),d.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3 line-clamp-1 truncate",children:["By: ",m.sellerName||"Student"]}),d.jsx("button",{onClick:()=>n(m),className:"mt-auto w-full bg-indigo-600 text-white py-2 px-3 rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-500 transition-colors text-xs sm:text-sm font-semibold flex items-center justify-center shadow-sm",children:"Add to Cart"})]})]},m.id))})]})},kk=({className:n="w-5 h-5"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})}),B7=({className:n="w-4 h-4",filled:e})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:e?"currentColor":"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:e?d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.633 10.5c.806 0 1.533-.425 2.031-1.085A9.06 9.06 0 018.537 9h.031c.892 0 1.783-.153 2.575-.448A9.037 9.037 0 0112 8.05c.892 0 1.783.153 2.575.448A9.037 9.037 0 0115.463 9h.031c.892 0 1.783-.153 2.575-.448A9.037 9.037 0 0119.5 8.05c.448 0 .878.047 1.293.139.53.114 1.023.296 1.458.539a.75.75 0 01.458.975 10.497 10.497 0 01-2.03 4.041 9.037 9.037 0 01-1.964 2.025 9.037 9.037 0 01-2.025 1.235c-.86.495-1.815.75-2.828.75s-1.968-.255-2.828-.75a9.037 9.037 0 01-2.025-1.235 9.037 9.037 0 01-1.964-2.025A10.497 10.497 0 013.75 9.713a.75.75 0 01.458-.975c.435-.243.928-.425 1.458-.539A12.028 12.028 0 016.633 10.5zM14.25 15.75a3 3 0 11-6 0 3 3 0 016 0z"}):d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.633 10.5c.806 0 1.533-.425 2.031-1.085A9.06 9.06 0 018.537 9h.031c.892 0 1.783-.153 2.575-.448A9.037 9.037 0 0112 8.05c.892 0 1.783.153 2.575.448A9.037 9.037 0 0115.463 9h.031c.892 0 1.783-.153 2.575-.448A9.037 9.037 0 0119.5 8.05c.448 0 .878.047 1.293.139.53.114 1.023.296 1.458.539a.75.75 0 01.458.975 10.497 10.497 0 01-2.03 4.041 9.037 9.037 0 01-1.964 2.025 9.037 9.037 0 01-2.025 1.235c-.86.495-1.815.75-2.828.75s-1.968-.255-2.828-.75a9.037 9.037 0 01-2.025-1.235 9.037 9.037 0 01-1.964-2.025A10.497 10.497 0 013.75 9.713a.75.75 0 01.458-.975c.435-.243.928-.425 1.458-.539A12.028 12.028 0 016.633 10.5zM14.25 15.75a3 3 0 11-6 0 3 3 0 016 0z"})}),z7=({onNavigateToPostDetail:n,onToggleLike:e,onOpenModal:t})=>{const{user:r}=Zt(),[a,l]=C.useState(""),[c,h]=C.useState([]),[m,p]=C.useState(!0),v=C.useMemo(()=>r!=null&&r.email?r.email.split("@")[1].toLowerCase():null,[r]),b=C.useMemo(()=>new Set((r==null?void 0:r.likedPostIds)||[]),[r]);C.useEffect(()=>{if(v){const A=kr(Ut(He,"posts"),to("collegeDomain","==",v),Ls("timestamp","desc")),I=Us(A,D=>{const N=D.docs.map(V=>{var B;return{id:V.id,...V.data(),timestamp:((B=V.data().timestamp)==null?void 0:B.toDate())||new Date}});h(N),p(!1)},D=>{console.error("Error fetching community posts:",D),p(!1)});return()=>I()}else p(!1)},[v]);const _=C.useMemo(()=>{if(!a.trim())return c;const A=a.toLowerCase();return c.filter(I=>{var D,N,V;return((D=I.authorName)==null?void 0:D.toLowerCase().includes(A))||((N=I.title)==null?void 0:N.toLowerCase().includes(A))||((V=I.content)==null?void 0:V.toLowerCase().includes(A))})},[c,a]);return d.jsxs("div",{className:"p-4 bg-gray-100 dark:bg-gray-900 min-h-full pb-20 relative transition-colors duration-200",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 px-1",children:[d.jsxs("div",{className:"mb-3 sm:mb-0 w-full sm:w-auto",children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Community Feed"}),d.jsx("p",{className:"text-xs text-indigo-600 dark:text-indigo-400 font-medium",children:v?`@${v}`:"Global View"})]}),d.jsxs("div",{className:"relative w-full sm:w-auto sm:max-w-xs",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(kk,{className:"text-gray-400 dark:text-gray-500 w-5 h-5"})}),d.jsx("input",{type:"text",placeholder:"Search posts...",value:a,onChange:A=>l(A.target.value),className:"block w-full bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg py-2 pl-10 pr-3 text-sm focus:ring-indigo-500 focus:border-indigo-500 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500"})]})]}),m?d.jsx("div",{className:"flex justify-center pt-10",children:d.jsxs("svg",{className:"animate-spin h-8 w-8 text-indigo-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):_.length===0?d.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400 mt-10 p-6 bg-white dark:bg-gray-800 rounded-lg shadow border border-gray-100 dark:border-gray-700",children:[d.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400 dark:text-gray-500 mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:d.jsx("path",{vectorEffect:"non-scaling-stroke",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),d.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:a?"No posts match your search.":"No posts yet."}),d.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:a?"Try a different search term.":"Be the first to share something with your college!"})]}):d.jsx("div",{className:"space-y-4",children:_.map(A=>{const I=b.has(A.id);return d.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden transition-colors duration-200",children:d.jsxs("div",{className:"p-5",children:[d.jsxs("div",{className:"flex items-center mb-3",children:[A.authorAvatarUrl?d.jsx("img",{src:A.authorAvatarUrl,alt:A.authorName,className:"w-10 h-10 rounded-full mr-3 object-cover border border-gray-200 dark:border-gray-600"}):d.jsx($l,{className:"w-10 h-10 text-gray-400 dark:text-gray-500 mr-3"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-100 text-sm",children:A.authorName||"Anonymous"}),d.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:A.timestamp?new Date(A.timestamp).toLocaleString():""})]})]}),d.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-gray-50 mb-2 leading-tight",children:A.title}),A.imageUrl&&d.jsx("img",{src:A.imageUrl,alt:A.title,className:"rounded-lg max-w-full h-auto my-3 max-h-96 object-contain bg-gray-50 dark:bg-gray-900 border border-gray-100 dark:border-gray-700"}),d.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm line-clamp-4 mb-4 whitespace-pre-wrap",children:A.content}),d.jsxs("div",{className:"flex items-center space-x-6 pt-3 border-t border-gray-100 dark:border-gray-700",children:[d.jsxs("button",{onClick:()=>e(A.id),className:`flex items-center text-sm transition-colors ${I?"text-indigo-600 dark:text-indigo-400 font-semibold":"text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400"}`,"aria-pressed":I,"aria-label":I?`Unlike post, ${A.upvotes} likes`:`Like post, ${A.upvotes} likes`,children:[d.jsx(B7,{className:`mr-1.5 w-5 h-5 ${I?"fill-current":""}`})," ",A.upvotes||0]}),d.jsxs("button",{onClick:()=>n(A),className:"flex items-center text-sm text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors","aria-label":`View comments, ${A.commentsCount} comments`,children:[d.jsx(Tk,{className:"mr-1.5 w-5 h-5"})," ",A.commentsCount||0," Comments"]})]})]})},A.id)})}),d.jsx("button",{onClick:()=>t(Pe.CREATE_POST),className:"fixed bottom-20 right-4 bg-indigo-600 text-white p-4 rounded-full shadow-lg hover:bg-indigo-700 transition-all duration-200 z-30 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-900","aria-label":"Create new post",children:d.jsx(Ak,{className:"w-6 h-6"})})]})},F7=({className:n="w-4 h-4"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"})}),Ik=({className:n="w-5 h-5"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})}),q7=({className:n="w-5 h-5"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"})}),Nk=({className:n="w-5 h-5"})=>d.jsx("svg",{className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),Ck=({className:n="w-5 h-5"})=>d.jsx("svg",{className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})}),H7=({className:n="w-5 h-5"})=>d.jsx("svg",{className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),oy=({className:n="w-5 h-5"})=>d.jsx("svg",{className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 20l4-16m2 16l4-16M5 9h14M5 15h14"})}),G7=({className:n="w-5 h-5"})=>d.jsx("svg",{className:n,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"})}),K7=({className:n="w-5 h-5"})=>d.jsx("svg",{className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.293 4.293a1 1 0 011.414 0L12 10.586l6.293-6.293a1 1 0 111.414 1.414L13.414 12l6.293 6.293a1 1 0 01-1.414 1.414L12 13.414l-6.293 6.293a1 1 0 01-1.414-1.414L10.586 12 4.293 5.707a1 1 0 010-1.414zM14 18v2m-4-2v2m4-15a3 3 0 013 3v2a3 3 0 01-3 3h-4a3 3 0 01-3-3V6a3 3 0 013-3h4z"})}),bu=({className:n="w-5 h-5"})=>d.jsxs("svg",{className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),$7=({className:n="w-5 h-5"})=>d.jsx("svg",{className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),Q7=({className:n="w-5 h-5"})=>d.jsx("svg",{className:n,fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),bp=({title:n,badgeNumber:e,children:t,defaultOpen:r=!1,isEditing:a,onEditToggle:l})=>{const[c,h]=C.useState(r);return d.jsxs("div",{className:"mb-3 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden transition-colors duration-200",children:[d.jsxs("button",{onClick:()=>h(!c),className:"w-full flex justify-between items-center p-3 focus:outline-none hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[d.jsxs("div",{className:"flex items-center",children:[e!==void 0&&d.jsx("span",{className:"bg-indigo-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold mr-3 shadow-sm",children:e}),d.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-100",children:n})]}),d.jsxs("div",{className:"flex items-center",children:[l&&d.jsx("button",{onClick:m=>{m.stopPropagation(),l(),!c&&!a&&h(!0)},className:"text-indigo-600 dark:text-indigo-400 text-xs font-semibold mr-3 hover:underline px-2 py-1 rounded hover:bg-indigo-50 dark:hover:bg-indigo-900/30 transition-colors",children:a?"Cancel":"Edit"}),c?d.jsx(q7,{className:"w-5 h-5 text-gray-400"}):d.jsx(Ik,{className:"w-5 h-5 text-gray-400"})]})]}),c&&d.jsx("div",{className:`p-4 border-t border-gray-100 dark:border-gray-700 ${a?"bg-gray-50/50 dark:bg-gray-700/20":""}`,children:t})]})},qn=({icon:n,label:e,value:t})=>d.jsxs("div",{className:"flex items-start py-2.5 border-b border-gray-50 dark:border-gray-700/50 last:border-0",children:[d.jsx("div",{className:"p-1.5 bg-gray-100 dark:bg-gray-700 rounded-md mr-4 text-gray-500 dark:text-gray-400 flex-shrink-0",children:d.jsx(n,{className:"w-4 h-4"})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium uppercase tracking-wide",children:e}),d.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-100 font-medium break-words mt-0.5",children:t||"N/A"})]})]}),Hn=({label:n,value:e,name:t,onChange:r,type:a="text",placeholder:l,as:c="input"})=>d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:t,className:"block text-xs font-bold text-gray-600 dark:text-gray-300 mb-1.5 uppercase tracking-wide",children:n}),c==="textarea"?d.jsx("textarea",{id:t,name:t,value:e,onChange:h=>r(t,h.target.value),placeholder:l||n,rows:3,className:"w-full p-2.5 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"}):d.jsx("input",{type:a,id:t,name:t,value:e,onChange:h=>r(t,h.target.value),placeholder:l||n,className:"w-full p-2.5 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),Y7=({onLogout:n})=>{var F,P,Ze,Ke,J,ue,me,Le,U,le;const{user:e,refreshProfile:t}=Zt(),[r,a]=C.useState("INFO"),l=["INFO","POSTS","ORDERS","COURSES"],[c,h]=C.useState(!1),[m,p]=C.useState(!1),[v,b]=C.useState(!1),[_,A]=C.useState({}),I=C.useRef(null),[D,N]=C.useState(!1),[V,B]=C.useState([]),[H,te]=C.useState(!1);C.useEffect(()=>{A({}),h(!1),p(!1),b(!1)},[e]),C.useEffect(()=>{r==="POSTS"&&(e!=null&&e.id)&&(async()=>{te(!0);try{const ae=kr(Ut(He,"posts"),to("authorId","==",e.id),Ls("timestamp","desc")),Ae=(await hl(ae)).docs.map(ye=>({id:ye.id,...ye.data()}));B(Ae)}catch(ae){console.error("Error fetching user posts:",ae)}finally{te(!1)}})()},[r,e==null?void 0:e.id]);const ee=Z=>{var ge,Ae,ye,je,Be;if(!e)return;if(Z==="basic"?c:Z==="personal"?m:v)A({});else{const Dt={name:e.name||"",email:e.email||"",mobileNumber:e.mobileNumber||"",organizationCode:e.organizationCode||"",about:e.about||"",rollNumber:e.rollNumber||"",dateOfJoining:e.dateOfJoining||"",dateOfBirth:e.dateOfBirth||"",gender:e.gender||"",streetAddress:((ge=e.address)==null?void 0:ge.streetAddress)||e.streetAddress||"",city:((Ae=e.address)==null?void 0:Ae.city)||e.city||"",postalCode:((ye=e.address)==null?void 0:ye.pincode)||e.postalCode||"",country:((je=e.address)==null?void 0:je.country)||e.country||"",state:((Be=e.address)==null?void 0:Be.state)||e.state||"",avatarUrl:e.avatarUrl||""};A(Dt)}Z==="basic"&&h(!c),Z==="personal"&&p(!m),Z==="address"&&b(!v)},se=(Z,ae)=>{A(ge=>({...ge,[Z]:ae}))},O=async Z=>{var ae,ge,Ae,ye,je,Be;if(e)try{const Dt=yn(He,"users",e.id),ve={..._};Z==="address"&&(ve.address={streetAddress:ve.streetAddress||((ae=e.address)==null?void 0:ae.streetAddress),city:ve.city||((ge=e.address)==null?void 0:ge.city),state:ve.state||((Ae=e.address)==null?void 0:Ae.state),pincode:ve.postalCode||((ye=e.address)==null?void 0:ye.pincode),country:ve.country||((je=e.address)==null?void 0:je.country),addressType:((Be=e.address)==null?void 0:Be.addressType)||"Home"}),await Xr(Dt,ve),await t(),Z==="basic"&&h(!1),Z==="personal"&&p(!1),Z==="address"&&b(!1),A({})}catch(Dt){console.error("Error updating profile:",Dt),alert("Failed to save changes.")}},k=async Z=>{var ge;const ae=(ge=Z.target.files)==null?void 0:ge[0];if(ae&&(e!=null&&e.email)){if(ae.size>1*1024*1024){alert("Image size should not exceed 1MB.");return}N(!0);const Ae=new FileReader;Ae.onloadend=async()=>{const ye=Ae.result;try{const je=e.email.replace(/[^a-zA-Z0-9]/g,"_"),Be=Bv(Qv,`user_avatars/${je}/${ae.name}`);await Lv(Be,ye,"data_url");const Dt=await Uv(Be),ve=yn(He,"users",e.id);await Xr(ve,{avatarUrl:Dt}),t()}catch(je){console.error("Error uploading avatar: ",je),alert("Failed to upload profile picture.")}finally{N(!1)}},Ae.readAsDataURL(ae)}},R=()=>{window.confirm("Are you sure you want to log out?")&&n()},j=Z=>{const ae={Pending:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400",Processing:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",Shipped:"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-400",Delivered:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",Cancelled:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"};return d.jsx("span",{className:`px-2.5 py-1 text-xs font-semibold rounded-full ${ae[Z]||"bg-gray-100 text-gray-700"}`,children:Z})},L=Z=>{try{return Z?Z instanceof Date?Z.toLocaleDateString():typeof Z.toDate=="function"?Z.toDate().toLocaleDateString():typeof Z=="string"?new Date(Z).toLocaleDateString():"":""}catch{return""}};return e?d.jsxs("div",{className:"bg-gray-100 dark:bg-gray-900 min-h-full flex flex-col pb-20 transition-colors duration-200",children:[d.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 shadow-sm border-b border-gray-200 dark:border-gray-700",children:d.jsxs("div",{className:"flex items-center",children:[d.jsxs("div",{className:"relative group flex-shrink-0",children:[D?d.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center ring-4 ring-white dark:ring-gray-800 shadow-md",children:d.jsxs("svg",{className:"animate-spin h-8 w-8 text-indigo-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):e.avatarUrl?d.jsx("img",{src:e.avatarUrl,alt:e.name,className:"w-20 h-20 rounded-full object-cover ring-4 ring-white dark:ring-gray-800 shadow-md bg-gray-100 dark:bg-gray-700"}):d.jsx($l,{className:"w-20 h-20 text-gray-300 dark:text-gray-600 ring-4 ring-white dark:ring-gray-800 rounded-full bg-white dark:bg-gray-800"}),d.jsx("button",{onClick:()=>{var Z;return!D&&((Z=I.current)==null?void 0:Z.click())},disabled:D,className:"absolute bottom-0 right-0 bg-indigo-600 text-white p-2 rounded-full shadow-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 disabled:opacity-50 transition-all transform hover:scale-105","aria-label":"Change profile picture",children:d.jsx(F7,{className:"w-4 h-4"})}),d.jsx("input",{type:"file",ref:I,className:"hidden",accept:"image/png, image/jpeg, image/gif",onChange:k,disabled:D})]}),d.jsxs("div",{className:"ml-5 min-w-0 flex-grow",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white truncate tracking-tight",children:e.name}),d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate font-medium",children:e.email}),d.jsxs("div",{className:"flex flex-wrap items-center mt-3 gap-2",children:[d.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300 border border-purple-200 dark:border-purple-800/50",children:e.organizationCode==="STUDENT"?" Student":" Faculty"}),d.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300 border border-amber-200 dark:border-amber-800/50",children:[d.jsx(Q7,{className:"w-3.5 h-3.5 mr-1 text-amber-500"}),e.karma||0," Karma"]})]})]})]})}),d.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 flex sticky top-0 z-10 overflow-x-auto no-scrollbar shadow-sm",children:l.map(Z=>d.jsx("button",{onClick:()=>a(Z),className:`flex-1 py-3 text-center text-xs sm:text-sm font-semibold transition-all focus:outline-none min-w-[80px]
              ${r===Z?"text-indigo-600 dark:text-indigo-400 border-b-2 border-indigo-600 dark:border-indigo-400":"text-gray-500 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700/30"}`,children:Z},Z))}),d.jsxs("div",{className:"flex-grow p-4 overflow-y-auto",children:[r==="INFO"&&d.jsxs("div",{className:"space-y-4 max-w-3xl mx-auto",children:[d.jsx(bp,{title:"Basic Information",badgeNumber:1,defaultOpen:!0,isEditing:c,onEditToggle:()=>ee("basic"),children:c?d.jsxs(d.Fragment,{children:[d.jsx(Hn,{label:"Full Name",name:"name",value:_.name||e.name||"",onChange:se}),d.jsx(Hn,{label:"Mobile Number",name:"mobileNumber",value:_.mobileNumber||e.mobileNumber||"",onChange:se}),d.jsx(Hn,{label:"Email",name:"email",value:_.email||e.email||"",onChange:se,type:"email"}),d.jsx(Hn,{label:"About",name:"about",value:_.about||e.about||"",onChange:se,as:"textarea"}),d.jsx(Hn,{label:"Roll Number",name:"rollNumber",value:_.rollNumber||e.rollNumber||"",onChange:se}),d.jsx(Hn,{label:"Date of Joining",name:"dateOfJoining",value:_.dateOfJoining||e.dateOfJoining||"",onChange:se,type:"date"}),d.jsx("button",{onClick:()=>O("basic"),className:"mt-4 w-full bg-indigo-600 text-white py-2.5 px-4 rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-500 text-sm font-semibold shadow-sm transition-colors",children:"Save Changes"})]}):d.jsxs(d.Fragment,{children:[d.jsx(qn,{icon:Nk,label:"Name",value:e.name}),d.jsx(qn,{icon:Ck,label:"Mobile Number",value:e.mobileNumber}),d.jsx(qn,{icon:H7,label:"Email",value:e.email}),d.jsx(qn,{icon:wk,label:"About",value:e.about||"Learner, Explorer, Dreamer"}),d.jsx(qn,{icon:oy,label:"Roll Number",value:e.rollNumber||"CS-1024"}),d.jsx(qn,{icon:Du,label:"Date of Joining",value:e.dateOfJoining?L(e.dateOfJoining):"N/A"})]})}),d.jsx(bp,{title:"Personal Details",badgeNumber:2,isEditing:m,onEditToggle:()=>ee("personal"),children:m?d.jsxs(d.Fragment,{children:[d.jsx(Hn,{label:"Date of Birth",name:"dateOfBirth",value:_.dateOfBirth||e.dateOfBirth||"",onChange:se,type:"date"}),d.jsx(Hn,{label:"Gender",name:"gender",value:_.gender||e.gender||"",onChange:se,placeholder:"e.g., Male, Female, Other"}),d.jsx("button",{onClick:()=>O("personal"),className:"mt-4 w-full bg-indigo-600 text-white py-2.5 px-4 rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-500 text-sm font-semibold shadow-sm transition-colors",children:"Save Changes"})]}):d.jsxs(d.Fragment,{children:[d.jsx(qn,{icon:Du,label:"Date of Birth",value:e.dateOfBirth?L(e.dateOfBirth):null}),d.jsx(qn,{icon:K7,label:"Gender",value:e.gender}),!e.dateOfBirth&&!e.gender&&d.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm p-2 italic",children:"No personal details provided."})]})}),d.jsx(bp,{title:"Address",badgeNumber:3,isEditing:v,onEditToggle:()=>ee("address"),children:v?d.jsxs(d.Fragment,{children:[d.jsx(Hn,{label:"Street Address",name:"streetAddress",value:_.streetAddress||e.streetAddress||((F=e.address)==null?void 0:F.streetAddress)||"",onChange:se,placeholder:"e.g., 123 Main St"}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsx(Hn,{label:"City",name:"city",value:_.city||e.city||((P=e.address)==null?void 0:P.city)||"",onChange:se}),d.jsx(Hn,{label:"State",name:"state",value:_.state||e.state||((Ze=e.address)==null?void 0:Ze.state)||"",onChange:se})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsx(Hn,{label:"Postal Code",name:"postalCode",value:_.postalCode||e.postalCode||((Ke=e.address)==null?void 0:Ke.pincode)||"",onChange:se}),d.jsx(Hn,{label:"Country",name:"country",value:_.country||e.country||((J=e.address)==null?void 0:J.country)||"",onChange:se})]}),d.jsx("button",{onClick:()=>O("address"),className:"mt-4 w-full bg-indigo-600 text-white py-2.5 px-4 rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-500 text-sm font-semibold shadow-sm transition-colors",children:"Save Changes"})]}):d.jsxs(d.Fragment,{children:[d.jsx(qn,{icon:bu,label:"Street Address",value:e.streetAddress||((ue=e.address)==null?void 0:ue.streetAddress)}),d.jsx(qn,{icon:bu,label:"City",value:e.city||((me=e.address)==null?void 0:me.city)}),d.jsx(qn,{icon:bu,label:"State",value:e.state||((Le=e.address)==null?void 0:Le.state)}),d.jsx(qn,{icon:oy,label:"Postal Code",value:e.postalCode||((U=e.address)==null?void 0:U.pincode)}),d.jsx(qn,{icon:bu,label:"Country",value:e.country||((le=e.address)==null?void 0:le.country)}),!e.streetAddress&&!e.address&&d.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm p-2 italic",children:"No address details provided."})]})}),d.jsx("div",{className:"mt-8",children:d.jsxs("button",{onClick:R,className:"w-full flex items-center justify-center bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 py-3.5 px-4 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/40 transition-colors text-sm shadow-sm border border-red-100 dark:border-red-900/50",children:[d.jsx(G7,{className:"w-5 h-5 mr-2"}),"Log Out"]})})]}),r==="POSTS"&&d.jsxs("div",{className:"space-y-4 max-w-3xl mx-auto",children:[d.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-2 px-1",children:"My Activity"}),H?d.jsx("div",{className:"flex justify-center py-8",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):V.length>0?V.map(Z=>d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-5 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 hover:shadow-md transition-shadow",children:[d.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-2 truncate text-lg",children:Z.title}),d.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 line-clamp-2 mb-3 leading-relaxed",children:Z.content}),d.jsxs("div",{className:"flex text-xs font-medium text-gray-500 dark:text-gray-400 justify-between items-center border-t border-gray-100 dark:border-gray-700 pt-3",children:[d.jsx("span",{children:new Date(Z.timestamp).toLocaleDateString()}),d.jsxs("span",{className:"text-indigo-600 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-900/30 px-2 py-1 rounded",children:[Z.upvotes," Likes  ",Z.commentsCount," Comments"]})]})]},Z.id)):d.jsx("div",{className:"text-center p-10 bg-white dark:bg-gray-800 rounded-xl border border-dashed border-gray-300 dark:border-gray-700",children:d.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:"You haven't posted anything yet."})})]}),r==="ORDERS"&&d.jsxs("div",{className:"space-y-4 max-w-3xl mx-auto",children:[d.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-2 px-1",children:"My Orders"}),e.orders&&e.orders.length>0?e.orders.slice().reverse().map(Z=>d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-5 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700",children:[d.jsxs("div",{className:"flex justify-between items-start mb-4 pb-3 border-b border-gray-100 dark:border-gray-700",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase font-bold tracking-wider",children:"Order ID"}),d.jsx("p",{className:"font-mono text-sm text-gray-800 dark:text-gray-200",children:Z.id})]}),d.jsxs("div",{className:"text-right",children:[j(Z.status),d.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:L(Z.orderDate)})]})]}),d.jsxs("div",{className:"space-y-3 mb-4",children:[Z.items.slice(0,2).map(ae=>d.jsxs("div",{className:"flex items-center text-sm text-gray-700 dark:text-gray-200",children:[d.jsx("div",{className:"w-10 h-10 rounded bg-gray-100 dark:bg-gray-700 flex-shrink-0 mr-3 flex items-center justify-center overflow-hidden border border-gray-200 dark:border-gray-600",children:ae.imageUrl?d.jsx("img",{src:ae.imageUrl,alt:ae.name,className:"w-full h-full object-cover"}):d.jsx("span",{className:"text-xs text-gray-400",children:"IMG"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"truncate font-medium",children:ae.name}),d.jsxs("p",{className:"text-xs text-gray-500",children:["Qty: ",ae.quantity]})]})]},ae.id)),Z.items.length>2&&d.jsxs("p",{className:"text-xs text-indigo-600 dark:text-indigo-400 font-medium pl-13",children:["+ ",Z.items.length-2," more items"]})]}),d.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/30 -mx-5 -mb-5 p-4 rounded-b-xl",children:[d.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Paid via ",d.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-100",children:Z.paymentMethod})]}),d.jsxs("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:["",Z.totalAmount.toFixed(2)]})]})]},Z.id)):d.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400 mt-10 p-10 bg-white dark:bg-gray-800 rounded-xl border border-dashed border-gray-300 dark:border-gray-700",children:[d.jsx($7,{className:"mx-auto h-12 w-12 text-gray-300 dark:text-gray-600 mb-3"}),d.jsx("h3",{className:"text-md font-bold text-gray-800 dark:text-gray-200",children:"No orders yet"}),d.jsx("p",{className:"mt-1 text-sm",children:"Start shopping to see your orders here!"})]})]}),r==="COURSES"&&d.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[d.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 p-4 rounded-full mb-3",children:d.jsx(Du,{className:"w-8 h-8 text-gray-400 dark:text-gray-500"})}),d.jsx("h3",{className:"text-lg font-bold text-gray-700 dark:text-gray-200",children:"Coming Soon"}),d.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Course management features are on the way."})]})]})]}):d.jsx("div",{className:"p-10 text-center text-gray-500",children:"Loading Profile..."})},W7=({className:n="w-6 h-6"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})}),X7=({className:n="w-6 h-6"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.82.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.82-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"})}),J7=({className:n="w-5 h-5"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 008.25-5.998z"})}),Z7=({className:n="w-5 h-5"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"})}),ja=({className:n="w-4 h-4"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),eV=({className:n="w-5 h-5"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.042 21.374a15.126 15.126 0 01-3.084.038c-2.047.121-3.482-.998-3.482-2.5V5.062c0-1.502 1.435-2.621 3.482-2.5V16.5a.75.75 0 001.5 0V2.562c0-1.502-1.435-2.621-3.482-2.5A15.126 15.126 0 006.958.1C4.614.266 3 2.05 3 4.5v15c0 2.45 1.614 4.233 3.958 4.398a15.256 15.256 0 003.084.038c2.047-.121 3.482.998 3.482 2.5v-1.438c0-1.502-1.435-2.621-3.482-2.5zM19.5 16.5a.75.75 0 00-1.5 0v2.938a.75.75 0 001.5 0V16.5zm0-4.5a.75.75 0 00-1.5 0v2.938a.75.75 0 001.5 0V12zm0-4.5a.75.75 0 00-1.5 0v2.938a.75.75 0 001.5 0V7.5z"})}),tV=({className:n="w-5 h-5"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z"})}),Rk=({className:n="w-5 h-5"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12.56 0c1.153 0 2.243.462 3.032 1.214M5.17 5.79L5 5.79m-.17-1.343a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),jk=({className:n="w-5 h-5"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"})}),nV=({version:n,onLogout:e,onOpenModal:t,currentTheme:r,onSetTheme:a,onBack:l,addPopupMessage:c,onNavigateToAdmin:h,userEmail:m})=>{const[p,v]=C.useState(!0),b=m==="sarimali@bmsce.ac.in",_=()=>{a(r==="light"?"dark":"light")},A=async()=>{const V={title:"Closure App",text:"Check out Closure, the best community app for college students!",url:window.location.origin};try{navigator.share?(await navigator.share(V),c("App shared successfully!","success")):(await navigator.clipboard.writeText(V.url),c("Link copied to clipboard!","success"))}catch(B){console.error("Error sharing:",B),c("Could not share app.","error")}},I=()=>{window.open("https://play.google.com/store/apps/details?id=com.closure.app","_blank")},D=({icon:V,label:B,isChecked:H,onChange:te,id:ee})=>d.jsxs("div",{className:"w-full flex justify-between items-center bg-white dark:bg-gray-800 p-3.5 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 transition-colors",children:[d.jsxs("div",{className:"flex items-center",children:[V,d.jsx("span",{className:"text-gray-700 dark:text-gray-200 ml-3 text-sm font-medium",children:B})]}),d.jsxs("label",{htmlFor:ee,className:"relative inline-flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",id:ee,className:"sr-only peer",checked:H,onChange:te}),d.jsx("div",{className:`w-11 h-6 bg-gray-200 dark:bg-gray-600 rounded-full peer \r
          peer-focus:ring-2 peer-focus:ring-indigo-500 dark:peer-focus:ring-indigo-600 \r
          peer-checked:after:translate-x-full peer-checked:after:border-white \r
          after:content-[''] after:absolute after:top-0.5 after:left-[2px] \r
          after:bg-white after:border-gray-300 dark:after:border-gray-500 \r
          after:border after:rounded-full after:h-5 after:w-5 after:transition-all \r
          peer-checked:bg-indigo-600 dark:peer-checked:bg-indigo-500`})]})]}),N=({icon:V,label:B,onClick:H,subText:te})=>d.jsxs("button",{onClick:H,className:"w-full flex justify-between items-center bg-white dark:bg-gray-800 p-3.5 rounded-lg shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors border border-gray-100 dark:border-gray-700","aria-label":B,children:[d.jsxs("div",{className:"flex items-center",children:[V,d.jsxs("div",{className:"ml-3 text-left",children:[d.jsx("span",{className:"text-gray-700 dark:text-gray-200 text-sm font-medium",children:B}),te&&d.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:te})]})]}),d.jsx(W7,{className:"text-gray-400 dark:text-gray-500 w-5 h-5"})]});return d.jsxs("div",{className:"bg-gray-100 dark:bg-gray-900 min-h-screen flex flex-col transition-colors duration-200",children:[d.jsx(Zu,{title:"Settings",onBackClick:l,showBackButton:!0,showMenuButton:!1}),d.jsxs("div",{className:"flex-grow p-3 space-y-2.5 overflow-y-auto pb-4 custom-scrollbar",children:[b&&h&&d.jsxs(d.Fragment,{children:[d.jsx("h3",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase px-1 pt-2 tracking-wider",children:"Administration"}),d.jsx(N,{icon:d.jsx("svg",{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),label:"Admin Dashboard",subText:"Manage content & view stats",onClick:h})]}),d.jsx("h3",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase px-1 pt-2 tracking-wider",children:"General"}),d.jsx(D,{icon:r==="light"?d.jsx(Z7,{className:"w-5 h-5 text-yellow-500"}):d.jsx(J7,{className:"w-5 h-5 text-indigo-400"}),label:"Dark Mode",isChecked:r==="dark",onChange:_,id:"theme-toggle"}),d.jsx(N,{icon:d.jsx(Vm,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"}),label:"Notification Settings",onClick:()=>t(Pe.NOTIFICATION_SETTINGS)}),d.jsx(D,{icon:d.jsx(eV,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"}),label:"Enable Picture-in-Picture",isChecked:p,onChange:()=>v(!p),id:"pip-toggle"}),d.jsx("h3",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase px-1 pt-3 tracking-wider",children:"Account"}),d.jsx(N,{icon:d.jsx(tV,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"}),label:"Change Password",onClick:()=>t(Pe.CHANGE_PASSWORD)}),d.jsx("h3",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase px-1 pt-3 tracking-wider",children:"Data & Storage"}),d.jsx(N,{icon:d.jsx(Rk,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"}),label:"Clear Cache",onClick:()=>c("Cache cleared successfully.","success")}),d.jsx("h3",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase px-1 pt-3 tracking-wider",children:"Support & Feedback"}),d.jsx(N,{icon:d.jsx(jk,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"}),label:"Help & Support",onClick:()=>t(Pe.HELP_SUPPORT)}),d.jsxs("div",{className:"grid grid-cols-2 gap-2.5 mt-1",children:[d.jsxs("button",{onClick:A,className:"flex flex-col items-center justify-center bg-white dark:bg-gray-800 p-2.5 rounded-lg shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors border border-gray-100 dark:border-gray-700","aria-label":"Share this app",children:[d.jsx(Xv,{className:"text-indigo-600 dark:text-indigo-400 mb-1 w-5 h-5"}),d.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-200 font-medium",children:"Share App"})]}),d.jsxs("button",{onClick:I,className:"flex flex-col items-center justify-center bg-white dark:bg-gray-800 p-2.5 rounded-lg shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors border border-gray-100 dark:border-gray-700","aria-label":"Rate this app",children:[d.jsx(X7,{className:"text-indigo-600 dark:text-indigo-400 mb-1 w-5 h-5"}),d.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-200 font-medium",children:"Rate Us"})]})]}),d.jsx("h3",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase px-1 pt-3 tracking-wider",children:"About"}),d.jsx(N,{icon:d.jsx(ja,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"}),label:"Terms & Conditions",onClick:()=>t(Pe.TERMS_AND_CONDITIONS)}),d.jsx(N,{icon:d.jsx(ja,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"}),label:"Privacy Policy",onClick:()=>t(Pe.PRIVACY_POLICY)}),d.jsx(N,{icon:d.jsx(ja,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"}),label:"Acknowledgements",onClick:()=>t(Pe.ACKNOWLEDGEMENTS)}),d.jsx("div",{className:"bg-white dark:bg-gray-800 p-3.5 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 transition-colors",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(ja,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"}),d.jsxs("div",{className:"ml-3 text-left",children:[d.jsx("span",{className:"text-gray-700 dark:text-gray-200 text-sm font-medium",children:"App Version"}),d.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:n})]})]})}),d.jsx("div",{className:"pt-4",children:d.jsx("button",{onClick:e,className:"w-full bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/40 text-red-600 dark:text-red-400 font-bold py-3.5 px-4 rounded-xl transition-colors border border-red-100 dark:border-red-900/50 shadow-sm",children:"Sign Out"})})]})]})},rV=({cartItems:n,onRemoveItem:e,onUpdateQuantity:t,onNavigate:r,onBack:a})=>{const l=n.reduce((c,h)=>c+h.price*h.quantity,0);return d.jsxs("div",{className:"h-screen w-screen flex flex-col bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[d.jsxs("div",{className:"bg-indigo-700 dark:bg-indigo-800 text-white p-4 flex items-center shadow-md sticky top-0 z-20",children:[d.jsx("button",{onClick:a,className:"mr-3 p-1 rounded-full hover:bg-indigo-600 dark:hover:bg-indigo-700 transition-colors","aria-label":"Back to previous page",children:d.jsx(Lm,{className:"w-6 h-6 text-white"})}),d.jsx("h1",{className:"text-xl font-semibold",children:"Shopping Cart"})]}),n.length===0?d.jsxs("div",{className:"flex-grow flex flex-col items-center justify-center text-gray-500 dark:text-gray-400 p-4",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mb-4 text-gray-400 dark:text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),d.jsx("p",{className:"text-xl mb-2",children:"Your cart is empty."}),d.jsx("button",{onClick:a,className:"text-indigo-600 dark:text-indigo-400 hover:underline font-medium",children:"Continue Shopping"})]}):d.jsx("div",{className:"flex-grow overflow-y-auto p-4 space-y-3 custom-scrollbar",children:n.map(c=>d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg shadow-sm flex items-center border border-gray-100 dark:border-gray-700",children:[d.jsx("img",{src:c.imageUrl,alt:c.name,className:"w-16 h-16 sm:w-20 sm:h-20 object-cover rounded-md mr-3 sm:mr-4 bg-gray-100 dark:bg-gray-700"}),d.jsxs("div",{className:"flex-grow",children:[d.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-100 text-sm sm:text-base line-clamp-1",children:c.name}),d.jsxs("p",{className:"text-xs sm:text-sm text-indigo-600 dark:text-indigo-400 font-medium",children:["",c.price.toFixed(2)]}),d.jsxs("div",{className:"flex items-center mt-2 sm:hidden",children:[d.jsx("button",{onClick:()=>t(c.id,Math.max(1,c.quantity-1)),className:"px-2 py-0.5 border border-gray-300 dark:border-gray-600 rounded-l text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":`Decrease quantity of ${c.name}`,children:"-"}),d.jsx("span",{className:"px-2.5 py-0.5 border-t border-b border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 text-sm font-medium",children:c.quantity}),d.jsx("button",{onClick:()=>t(c.id,c.quantity+1),className:"px-2 py-0.5 border border-gray-300 dark:border-gray-600 rounded-r text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":`Increase quantity of ${c.name}`,children:"+"})]})]}),d.jsxs("div",{className:"hidden sm:flex items-center mr-2 sm:mr-4",children:[d.jsx("button",{onClick:()=>t(c.id,Math.max(1,c.quantity-1)),className:"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-l text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":`Decrease quantity of ${c.name}`,children:"-"}),d.jsx("span",{className:"px-3 py-1 border-t border-b border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 font-medium",children:c.quantity}),d.jsx("button",{onClick:()=>t(c.id,c.quantity+1),className:"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-r text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":`Increase quantity of ${c.name}`,children:"+"})]}),d.jsxs("p",{className:"font-semibold w-16 sm:w-20 text-right mr-2 sm:mr-4 text-sm sm:text-base text-gray-800 dark:text-gray-100",children:["",(c.price*c.quantity).toFixed(2)]}),d.jsx("button",{onClick:()=>e(c.id),className:"text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-500 p-2 rounded-full hover:bg-red-50 dark:hover:bg-red-900/30 transition-colors","aria-label":`Remove ${c.name} from cart`,children:d.jsx(Rk,{className:"w-5 h-5"})})]},c.id))}),n.length>0&&d.jsxs("div",{className:"bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 p-4 shadow-top-xl sticky bottom-0 z-10 safe-area-bottom",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("span",{className:"text-lg font-semibold text-gray-700 dark:text-gray-200",children:"Total:"}),d.jsxs("span",{className:"text-xl font-bold text-indigo-700 dark:text-indigo-400",children:["",l.toFixed(2)]})]}),d.jsx("button",{onClick:()=>r(nd.PAYMENT_DETAILS),className:"w-full bg-indigo-600 text-white py-3 rounded-lg font-semibold hover:bg-indigo-700 dark:hover:bg-indigo-500 transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 shadow-lg",children:"Proceed to Checkout"})]})]})},sV=({onNavigate:n})=>{const{firebaseUser:e}=Zt(),[t,r]=C.useState(""),[a,l]=C.useState([]),[c,h]=C.useState(!0);C.useEffect(()=>{if(!e)return;const p=kr(Ut(He,"chats"),to("participantIds","array-contains",e.uid),Ls("lastMessageTimestamp","desc")),v=Us(p,b=>{const _=b.docs.map(A=>{var H,te,ee,se,O;const I=A.data(),D=I.participantIds.find(k=>k!==e.uid),N=(H=I.lastMessageTimestamp)==null?void 0:H.toDate(),V=(ee=(te=I.lastReadTimestamps)==null?void 0:te[e.uid])==null?void 0:ee.toDate();let B=!1;return N&&(V?B=N>V:B=!0),{id:A.id,participants:[{id:D,name:((se=I.participantNames)==null?void 0:se[D])||"User",avatarUrl:((O=I.participantAvatars)==null?void 0:O[D])||null}],lastMessagePreview:I.lastMessage||"No messages yet",lastMessageTimestamp:N,unreadCount:B?1:0,lastReadTimestamps:I.lastReadTimestamps||{}}});l(_),h(!1)});return()=>v()},[e]);const m=a.filter(p=>{var v;return p.participants.some(b=>b.name.toLowerCase().includes(t.toLowerCase()))||((v=p.lastMessagePreview)==null?void 0:v.toLowerCase().includes(t.toLowerCase()))});return d.jsxs("div",{className:"bg-gray-100 dark:bg-gray-900 min-h-full flex flex-col h-full transition-colors duration-200",children:[d.jsx("div",{className:"p-3 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-10",children:d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(kk,{className:"text-gray-400 dark:text-gray-500 w-5 h-5"})}),d.jsx("input",{type:"text",placeholder:"Search by name or message",value:t,onChange:p=>r(p.target.value),className:"block w-full bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg py-2.5 pl-10 pr-3 text-sm text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-indigo-500 focus:border-indigo-500"})]})}),d.jsxs("div",{className:"flex-grow p-3 space-y-3 overflow-y-auto custom-scrollbar",children:[d.jsx("div",{className:"px-2 py-1",children:d.jsx("h3",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Messages"})}),c?d.jsx("div",{className:"flex justify-center pt-10",children:d.jsxs("svg",{className:"animate-spin h-8 w-8 text-indigo-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):m.length===0?d.jsx("div",{className:"flex flex-col items-center justify-center pt-10 text-gray-500 dark:text-gray-400",children:d.jsx("p",{children:"No chats found."})}):m.map(p=>{var v;return d.jsxs("div",{onClick:()=>n(nd.CHAT_DETAIL,{conversationId:p.id,initialConversation:p}),className:"bg-white dark:bg-gray-800 p-3 rounded-lg shadow-sm flex items-center space-x-3 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors border border-gray-100 dark:border-gray-700",children:[(v=p.participants[0])!=null&&v.avatarUrl?d.jsx("img",{src:p.participants[0].avatarUrl,alt:p.participants[0].name,className:"w-12 h-12 rounded-full flex-shrink-0 object-cover border border-gray-200 dark:border-gray-600"}):d.jsx("div",{className:"w-12 h-12 rounded-full flex-shrink-0 bg-gray-200 dark:bg-gray-700 flex items-center justify-center",children:d.jsx($l,{className:"w-8 h-8 text-gray-400 dark:text-gray-500"})}),d.jsxs("div",{className:"flex-grow overflow-hidden",children:[d.jsxs("div",{className:"flex justify-between items-center mb-0.5",children:[d.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-100 truncate text-sm",children:p.participants.map(b=>b.name).join(", ")||"Unknown Chat"}),p.lastMessageTimestamp&&d.jsx("span",{className:"text-[10px] text-gray-400 dark:text-gray-500 font-medium",children:new Date(p.lastMessageTimestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate pr-2 w-full",children:p.lastMessagePreview||"No messages yet."}),p.unreadCount!==void 0&&p.unreadCount>0&&d.jsx("span",{className:"bg-indigo-600 text-white text-[10px] font-bold w-5 h-5 flex items-center justify-center rounded-full flex-shrink-0",children:p.unreadCount})]})]})]},p.id)})]})]})},iV=({className:n="w-6 h-6"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.158 0a.225.225 0 01.225-.225h.008a.225.225 0 01.225.225v.008a.225.225 0 01-.225.225h-.008a.225.225 0 01-.225-.225V8.25z"})}),Dk=({className:n="w-5 h-5"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:n,children:d.jsx("path",{d:"M3.478 2.405a.75.75 0 00-.926.94l2.432 7.905H13.5a.75.75 0 010 1.5H4.984l-2.432 7.905a.75.75 0 00.926.94 60.519 60.519 0 0018.445-8.986.75.75 0 000-1.218A60.517 60.517 0 003.478 2.405z"})}),aV=({onBack:n})=>{const{conversationId:e}=eE(),{firebaseUser:t}=Zt(),r=t==null?void 0:t.uid,[a,l]=C.useState([]),[c,h]=C.useState(""),[m,p]=C.useState("Chat"),[v,b]=C.useState(void 0),_=C.useRef(null),A=C.useRef(null);C.useEffect(()=>{if(!e||!r)return;(async()=>{var V;try{const B=yn(He,"chats",e),H=await Cv(B);if(H.exists()){const ee=(V=H.data().participants)==null?void 0:V.find(se=>se.id!==r);ee&&(p(ee.name||"Chat"),b(ee.avatarUrl))}}catch(B){console.error("Error fetching chat details:",B)}})()},[e,r]),C.useEffect(()=>{if(!e)return;const N=kr(Ut(He,"chats",e,"messages"),Ls("timestamp","asc")),V=Us(N,B=>{const H=B.docs.map(te=>{var ee;return{id:te.id,...te.data(),timestamp:((ee=te.data().timestamp)==null?void 0:ee.toDate().toISOString())||new Date().toISOString()}});l(H)});return()=>V()},[e]),C.useEffect(()=>{var N;(N=_.current)==null||N.scrollIntoView({behavior:"smooth"})},[a]);const I=async()=>{if(!c.trim()||!r||!e)return;const N=c.trim();h("");try{await Ol(Ut(He,"chats",e,"messages"),{text:N,senderId:r,timestamp:Na(),type:"text"});const V=yn(He,"chats",e);await Xr(V,{lastMessage:N,lastMessageTimestamp:Na(),lastSenderId:r})}catch(V){console.error("Error sending message:",V)}};C.useEffect(()=>{if(!e||!r)return;const N=async()=>{try{const V=yn(He,"chats",e);await Xr(V,{[`lastReadTimestamps.${r}`]:Na()})}catch(V){console.error("Error marking chat as read:",V)}};N(),a.length>0&&a[a.length-1].senderId!==r&&N()},[e,r,a.length]);const D=async N=>{var B;const V=(B=N.target.files)==null?void 0:B[0];if(V&&r&&e){const H=new FileReader;H.onloadend=async()=>{const te=H.result;try{const ee=`${Date.now()}_chat_image`,se=Bv(Qv,`chat_images/${e}/${ee}`);await Lv(se,te,"data_url");const O=await Uv(se);await Ol(Ut(He,"chats",e,"messages"),{imageUrl:O,senderId:r,timestamp:Na(),type:"image"});const k=yn(He,"chats",e);await Xr(k,{lastMessage:" Image",lastMessageTimestamp:Na(),lastSenderId:r})}catch(ee){console.error("Error uploading image:",ee)}},H.readAsDataURL(V)}};return d.jsxs("div",{className:"h-screen w-screen flex flex-col bg-gray-50 dark:bg-gray-900 transition-colors duration-200",children:[d.jsxs("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4 flex items-center shadow-sm z-10 safe-area-top",children:[d.jsx("button",{onClick:n,className:"mr-3 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300 transition-colors",children:d.jsx(Lm,{className:"w-6 h-6"})}),d.jsxs("div",{className:"flex items-center",children:[v?d.jsx("img",{src:v,alt:m,className:"w-10 h-10 rounded-full mr-3 object-cover border border-gray-200 dark:border-gray-600"}):d.jsx("div",{className:"w-10 h-10 rounded-full mr-3 bg-indigo-100 dark:bg-indigo-900/50 text-indigo-600 dark:text-indigo-400 flex items-center justify-center font-bold",children:m.charAt(0)}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 leading-tight",children:m}),d.jsxs("span",{className:"text-xs text-green-500 font-medium flex items-center",children:[d.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-1"}),"Online"]})]})]})]}),d.jsxs("div",{className:"flex-grow overflow-y-auto p-4 space-y-4 bg-gray-50 dark:bg-gray-900 custom-scrollbar",children:[a.map(N=>{const V=N.senderId===r;return d.jsx("div",{className:`flex ${V?"justify-end":"justify-start"}`,children:d.jsxs("div",{className:`max-w-[75%] lg:max-w-[60%] flex flex-col ${V?"items-end":"items-start"}`,children:[d.jsxs("div",{className:`px-4 py-2 rounded-2xl shadow-sm break-words
                            ${V?"bg-indigo-600 text-white rounded-tr-none":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-100 rounded-tl-none border border-gray-100 dark:border-gray-700"}`,children:[N.text&&d.jsx("p",{className:"text-sm md:text-base leading-relaxed whitespace-pre-wrap",children:N.text}),N.imageUrl&&d.jsx("img",{src:N.imageUrl,alt:"Attachment",className:"rounded-lg mt-1 max-h-60 w-full object-cover"})]}),d.jsx("span",{className:"text-[10px] mt-1 px-1 text-gray-400 dark:text-gray-500",children:new Date(N.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},N.id)}),d.jsx("div",{ref:_})]}),d.jsxs("div",{className:"bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 p-3 flex items-end space-x-2 safe-area-bottom",children:[d.jsx("button",{onClick:()=>{var N;return(N=A.current)==null?void 0:N.click()},className:"p-3 text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors","aria-label":"Attach image",children:d.jsx(iV,{className:"w-6 h-6"})}),d.jsx("input",{type:"file",accept:"image/*",ref:A,onChange:D,className:"hidden"}),d.jsx("div",{className:"flex-grow relative",children:d.jsx("textarea",{value:c,onChange:N=>h(N.target.value),onKeyDown:N=>{N.key==="Enter"&&!N.shiftKey&&(N.preventDefault(),I())},placeholder:"Type a message...",rows:1,className:"w-full p-3 pr-10 border border-gray-300 dark:border-gray-600 rounded-2xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 resize-none overflow-hidden",style:{minHeight:"44px",maxHeight:"120px"}})}),d.jsx("button",{onClick:I,disabled:!c.trim(),className:`p-3 rounded-full transition-colors flex-shrink-0 ${c.trim()?"bg-indigo-600 text-white hover:bg-indigo-700 shadow-md":"bg-gray-200 dark:bg-gray-700 text-gray-400 dark:text-gray-500 cursor-not-allowed"}`,children:d.jsx(Dk,{className:"w-5 h-5"})})]})]})},oV=({onBack:n})=>{const{postId:e}=eE(),t=Ar(),{user:r}=Zt(),[a,l]=C.useState(()=>{var B;const V=(B=t.state)==null?void 0:B.post;return V&&V.id===e?V:null}),[c,h]=C.useState(!a),[m,p]=C.useState([]),[v,b]=C.useState(""),[_,A]=C.useState(!1),I=C.useRef(null);C.useEffect(()=>{if(!e)return;if(a&&a.id===e){h(!1);return}(async()=>{h(!0);try{const B=yn(He,"posts",e),H=await Cv(B);H.exists()?l({id:H.id,...H.data()}):l(null)}catch(B){console.error("Error fetching post:",B)}finally{h(!1)}})()},[e]),C.useEffect(()=>{if(!e)return;const V=kr(Ut(He,"posts",e,"comments"),Ls("timestamp","asc")),B=Us(V,H=>{const te=H.docs.map(ee=>({id:ee.id,...ee.data(),timestamp:ee.data().timestamp}));p(te)});return()=>B()},[e]),C.useEffect(()=>{var V;(V=I.current)==null||V.scrollIntoView({behavior:"smooth"})},[m]);const D=async()=>{if(!(!v.trim()||!r||!e)){A(!0);try{await Ol(Ut(He,"posts",e,"comments"),{text:v.trim(),authorId:r.id,authorName:r.name,authorAvatarUrl:r.avatarUrl||null,timestamp:Na()}),b("")}catch(V){console.error("Error posting comment:",V)}finally{A(!1)}}},N=V=>V?(V.toDate?V.toDate():new Date(V)).toLocaleString([],{dateStyle:"medium",timeStyle:"short"}):"";return c?d.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900 text-gray-500 dark:text-gray-400",children:d.jsxs("svg",{className:"animate-spin h-8 w-8 text-indigo-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):a?d.jsxs("div",{className:"h-screen w-screen flex flex-col bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[d.jsx(Zu,{title:"Discussion",onBackClick:n,showBackButton:!0,showMenuButton:!1}),d.jsxs("div",{className:"flex-grow overflow-y-auto pb-24 custom-scrollbar",children:[d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-5 mb-2 shadow-sm border-b border-gray-100 dark:border-gray-700",children:[d.jsxs("div",{className:"flex items-center mb-3",children:[a.authorAvatarUrl?d.jsx("img",{src:a.authorAvatarUrl,alt:a.authorName,className:"w-10 h-10 rounded-full mr-3 object-cover border border-gray-200 dark:border-gray-600"}):d.jsx($l,{className:"w-10 h-10 text-gray-400 dark:text-gray-500 mr-3"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-100 text-sm",children:a.authorName}),d.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:N(a.timestamp)})]})]}),d.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-gray-50 mb-3 leading-tight",children:a.title}),a.imageUrl&&d.jsx("img",{src:a.imageUrl,alt:a.title,className:"rounded-lg max-w-full h-auto my-4 max-h-[50vh] object-contain bg-gray-100 dark:bg-gray-700 border border-gray-100 dark:border-gray-600"}),d.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-md whitespace-pre-wrap leading-relaxed",children:a.content}),d.jsxs("div",{className:"flex items-center space-x-4 pt-4 mt-4 border-t border-gray-100 dark:border-gray-700",children:[d.jsxs("span",{className:"text-sm font-medium text-indigo-600 dark:text-indigo-400",children:[a.upvotes||0," Likes"]}),d.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[m.length," Comments"]})]})]}),d.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 p-4",children:[d.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-4 px-1",children:"Comments"}),m.length===0?d.jsx("div",{className:"text-center py-8 text-gray-400 dark:text-gray-500",children:d.jsx("p",{children:"No comments yet. Be the first to reply!"})}):d.jsxs("div",{className:"space-y-4",children:[m.map(V=>d.jsxs("div",{className:"flex space-x-3",children:[d.jsx("div",{className:"flex-shrink-0",children:d.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-xs font-bold text-indigo-700 dark:text-indigo-300",children:V.authorName?V.authorName.charAt(0):"U"})}),d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-xl rounded-tl-none shadow-sm border border-gray-100 dark:border-gray-700 flex-grow",children:[d.jsxs("div",{className:"flex justify-between items-baseline mb-1",children:[d.jsx("span",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:V.authorName}),d.jsx("span",{className:"text-[10px] text-gray-400 dark:text-gray-500",children:N(V.timestamp)})]}),d.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:V.text})]})]},V.id)),d.jsx("div",{ref:I})]})]})]}),d.jsxs("div",{className:"bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 p-3 fixed bottom-0 w-full flex items-center z-20 safe-area-bottom",children:[d.jsx("input",{type:"text",value:v,onChange:V=>b(V.target.value),placeholder:"Add a comment...",className:"flex-grow bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white rounded-full py-2.5 px-4 focus:outline-none focus:ring-2 focus:ring-indigo-500 border-none mr-2 placeholder-gray-500 dark:placeholder-gray-400",onKeyDown:V=>V.key==="Enter"&&D(),disabled:_}),d.jsx("button",{onClick:D,disabled:!v.trim()||_,className:`p-2.5 rounded-full transition-colors flex-shrink-0 ${!v.trim()||_?"bg-gray-200 dark:bg-gray-700 text-gray-400 cursor-not-allowed":"bg-indigo-600 text-white shadow-md hover:bg-indigo-700"}`,children:d.jsx(Dk,{className:"w-5 h-5"})})]})]}):d.jsxs("div",{className:"h-screen w-screen flex flex-col bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[d.jsx(Zu,{title:"Post Not Found",onBackClick:n,showBackButton:!0,showMenuButton:!1}),d.jsx("div",{className:"flex-grow flex items-center justify-center",children:d.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:"Sorry, the post could not be found."})})]})},lV=({cartItems:n,onNavigate:e,onBack:t,onUpdateUserProfile:r})=>{const{user:a}=Zt(),[l,c]=C.useState({fullName:(a==null?void 0:a.name)||"",mobileNumber:(a==null?void 0:a.mobileNumber)||"",pincode:"",streetAddress:"",city:"",state:"",country:"India",addressType:"Home"}),[h,m]=C.useState({});C.useEffect(()=>{a!=null&&a.address?c(A=>({...A,...a.address})):a&&c(A=>({...A,fullName:a.name||A.fullName,mobileNumber:a.mobileNumber||A.mobileNumber}))},[a]);const p=n.reduce((A,I)=>A+I.price*I.quantity,0),v=A=>{const{name:I,value:D}=A.target;c(N=>({...N,[I]:D})),h[I]&&m(N=>({...N,[I]:void 0}))},b=()=>{const A={};return l.fullName.trim()||(A.fullName="Full Name is required"),(!l.mobileNumber.trim()||l.mobileNumber.length<10)&&(A.mobileNumber="Valid 10-digit mobile number is required"),(!l.pincode.trim()||l.pincode.length<6)&&(A.pincode="Valid 6-digit Pincode is required"),l.streetAddress.trim()||(A.streetAddress="Street Address is required"),l.city.trim()||(A.city="City is required"),l.state.trim()||(A.state="State is required"),m(A),Object.keys(A).length===0},_=()=>{b()&&(r(l),e(nd.UPI_PAYMENT))};return d.jsxs("div",{className:"h-screen w-screen flex flex-col bg-gray-50 dark:bg-gray-900 transition-colors duration-200",children:[d.jsxs("div",{className:"bg-indigo-700 dark:bg-indigo-800 text-white p-4 flex items-center shadow-md sticky top-0 z-20",children:[d.jsx("button",{onClick:t,className:"mr-3 p-1 rounded-full hover:bg-indigo-600 dark:hover:bg-indigo-700 transition-colors","aria-label":"Back",children:d.jsx(Lm,{className:"w-6 h-6"})}),d.jsx("h1",{className:"text-xl font-semibold",children:"Delivery Details"})]}),d.jsxs("div",{className:"flex-grow overflow-y-auto p-4 pb-24 custom-scrollbar",children:[d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-5 rounded-lg shadow-sm space-y-5 border border-gray-100 dark:border-gray-700",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Full Name"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(Nk,{className:"h-5 w-5 text-gray-400 dark:text-gray-500"})}),d.jsx("input",{type:"text",name:"fullName",value:l.fullName,onChange:v,className:`w-full pl-10 pr-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white transition-colors focus:ring-indigo-500 focus:border-indigo-500 ${h.fullName?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter your name"})]}),h.fullName&&d.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.fullName})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Mobile Number"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(Ck,{className:"h-5 w-5 text-gray-400 dark:text-gray-500"})}),d.jsx("input",{type:"tel",name:"mobileNumber",value:l.mobileNumber,onChange:v,maxLength:10,className:`w-full pl-10 pr-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white transition-colors focus:ring-indigo-500 focus:border-indigo-500 ${h.mobileNumber?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"10-digit mobile number"})]}),h.mobileNumber&&d.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.mobileNumber})]}),d.jsxs("div",{className:"flex gap-4",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Pincode"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(oy,{className:"h-4 w-4 text-gray-400 dark:text-gray-500"})}),d.jsx("input",{type:"number",name:"pincode",value:l.pincode,onChange:v,className:`w-full pl-9 pr-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white transition-colors focus:ring-indigo-500 focus:border-indigo-500 ${h.pincode?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"400001"})]}),h.pincode&&d.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.pincode})]}),d.jsxs("div",{className:"flex-1",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"City"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(Ek,{className:"h-4 w-4 text-gray-400 dark:text-gray-500"})}),d.jsx("input",{type:"text",name:"city",value:l.city,onChange:v,className:`w-full pl-9 pr-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white transition-colors focus:ring-indigo-500 focus:border-indigo-500 ${h.city?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Mumbai"})]}),h.city&&d.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.city})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Street Address / Hostel Info"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute top-2.5 left-0 pl-3 flex items-start pointer-events-none",children:d.jsx(bu,{className:"h-5 w-5 text-gray-400 dark:text-gray-500"})}),d.jsx("textarea",{name:"streetAddress",rows:3,value:l.streetAddress,onChange:v,className:`w-full pl-10 pr-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white transition-colors focus:ring-indigo-500 focus:border-indigo-500 ${h.streetAddress?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"e.g. Room 304, Hostel H10, IIT Campus"})]}),h.streetAddress&&d.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.streetAddress})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"State"}),d.jsx("input",{type:"text",name:"state",value:l.state,onChange:v,className:`w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white transition-colors focus:ring-indigo-500 focus:border-indigo-500 ${h.state?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"e.g. Maharashtra"}),h.state&&d.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.state})]}),d.jsxs("div",{className:"flex gap-6 pt-2",children:[d.jsxs("label",{className:"flex items-center cursor-pointer group",children:[d.jsx("input",{type:"radio",name:"addressType",value:"Home",checked:l.addressType==="Home",onChange:v,className:"text-indigo-600 focus:ring-indigo-500 cursor-pointer"}),d.jsx("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:"Home/Hostel"})]}),d.jsxs("label",{className:"flex items-center cursor-pointer group",children:[d.jsx("input",{type:"radio",name:"addressType",value:"Work",checked:l.addressType==="Work",onChange:v,className:"text-indigo-600 focus:ring-indigo-500 cursor-pointer"}),d.jsx("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:"Work/Dept"})]})]})]}),d.jsxs("div",{className:"mt-4 bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700",children:[d.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-100 mb-2",children:"Order Summary"}),d.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400",children:[d.jsxs("span",{children:["Items (",n.reduce((A,I)=>A+I.quantity,0),"):"]}),d.jsxs("span",{children:["",p.toFixed(2)]})]}),d.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400 mt-1",children:[d.jsx("span",{children:"Delivery:"}),d.jsx("span",{className:"text-green-600 dark:text-green-400",children:"Free"})]}),d.jsxs("div",{className:"flex justify-between font-bold text-lg text-gray-800 dark:text-gray-100 mt-2 border-t pt-2 dark:border-gray-700",children:[d.jsx("span",{children:"Total to Pay:"}),d.jsxs("span",{children:["",p.toFixed(2)]})]})]})]}),d.jsx("div",{className:"bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 p-4 shadow-top-xl sticky bottom-0 z-10 safe-area-bottom",children:d.jsxs("button",{onClick:_,className:"w-full bg-indigo-600 text-white py-3 rounded-lg font-semibold hover:bg-indigo-700 dark:hover:bg-indigo-500 transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 flex items-center justify-center shadow-lg",children:["Proceed to Pay",d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M12.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-2.293-2.293a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]})},cV=({deliveryAddress:n,paymentMethod:e,totalAmount:t,onConfirmPayment:r,onBack:a})=>{const[l,c]=C.useState(""),[h,m]=C.useState(""),[p,v]=C.useState(!1);C.useEffect(()=>{const A="merchant@okbank",I="Closure Store",D=`TID${Date.now()}`,N=`upi://pay?pa=${A}&pn=${encodeURIComponent(I)}&am=${t.toFixed(2)}&cu=INR&tr=${D}`;m(N),c(`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(N)}`)},[t]);const b=()=>{window.open(h,"_system")},_=async()=>{v(!0),await new Promise(A=>setTimeout(A,2e3)),r(n,e),v(!1)};return d.jsxs("div",{className:"h-screen w-screen flex flex-col bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[d.jsx(Zu,{title:"UPI Payment",onBackClick:a,showBackButton:!0,showMenuButton:!1}),d.jsxs("div",{className:"flex-grow flex flex-col items-center justify-center p-6 text-center space-y-6",children:[d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-xl w-full max-w-sm border border-gray-100 dark:border-gray-700",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2",children:"Pay via UPI"}),d.jsxs("p",{className:"text-3xl font-bold text-indigo-600 dark:text-indigo-400 mb-6",children:["",t.toFixed(2)]}),l?d.jsxs("div",{className:"mb-6 relative group",children:[d.jsx("img",{src:l,alt:"UPI QR Code",className:"w-48 h-48 mx-auto border-2 border-gray-100 dark:border-gray-700 rounded-lg p-2 bg-white shadow-inner"}),d.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Scan with any UPI App"})]}):d.jsx("div",{className:"w-48 h-48 mx-auto border border-gray-300 dark:border-gray-600 rounded-lg flex items-center justify-center bg-gray-50 dark:bg-gray-700",children:d.jsx("div",{className:"animate-pulse text-sm text-gray-500 dark:text-gray-400",children:"Loading QR..."})}),d.jsxs("button",{onClick:b,className:"mb-4 text-indigo-600 dark:text-indigo-400 text-sm font-medium hover:bg-indigo-50 dark:hover:bg-indigo-900/30 py-2 px-4 rounded-full transition-colors flex items-center justify-center w-full border border-indigo-200 dark:border-indigo-800",children:[d.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Tap to Pay on Phone"]}),d.jsx("div",{className:"text-left bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-100 dark:border-blue-800/50",children:d.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300 leading-relaxed",children:[d.jsx("strong",{children:"Step 1:"})," Scan QR or tap the button above to pay.",d.jsx("br",{}),d.jsx("strong",{children:"Step 2:"}),' Come back here and click "I have Paid".']})})]}),d.jsx("button",{onClick:_,disabled:p,className:"w-full max-w-xs bg-green-600 text-white py-3.5 px-6 rounded-xl font-semibold hover:bg-green-700 dark:hover:bg-green-500 transition-all text-lg shadow-lg hover:shadow-xl focus:outline-none focus:ring-4 focus:ring-green-500/50 disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center",children:p?d.jsxs(d.Fragment,{children:[d.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Verifying..."]}):"I have Paid"}),d.jsx("button",{onClick:a,disabled:p,className:"text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 underline",children:"Cancel Payment"})]})]})},uV=({className:n="w-6 h-6"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),dV=({onSubmit:n,onClose:e})=>{const{user:t,firebaseUser:r}=Zt(),[a,l]=C.useState(""),[c,h]=C.useState(""),[m,p]=C.useState(null),[v,b]=C.useState(void 0),[_,A]=C.useState(!1),I=C.useRef(null),D=B=>{var te;const H=(te=B.target.files)==null?void 0:te[0];if(H){if(H.size>2*1024*1024){alert("Image size should not exceed 2MB."),I.current&&(I.current.value="");return}const ee=new FileReader;ee.onloadend=()=>{p(ee.result),b(ee.result)},ee.readAsDataURL(H)}else N()},N=()=>{p(null),b(void 0),I.current&&(I.current.value="")},V=async()=>{if(!a.trim()||!c.trim()){alert("Please provide a title and content for your post.");return}if(!t||!r){alert("You must be logged in to post.");return}A(!0);let B;try{if(v){const te=`${Date.now()}_post_image`,ee=Bv(Qv,`post_images/${r.uid}/${te}`);await Lv(ee,v,"data_url"),B=await Uv(ee)}const H=t.email?t.email.split("@")[1].toLowerCase():"general";await Ol(Ut(He,"posts"),{title:a.trim(),content:c.trim(),imageUrl:B||null,collegeDomain:H,authorId:r.uid,authorName:t.name||"Anonymous Student",authorEmail:t.email,authorAvatarUrl:t.avatarUrl||null,isAnonymous:!1,upvotes:0,commentCount:0,timestamp:Na()}),e()}catch(H){console.error("Error creating post: ",H),alert("Failed to create post. Please try again.")}finally{A(!1)}};return d.jsxs("div",{className:"p-1",children:[d.jsxs("div",{className:"mb-4",children:[d.jsxs("label",{htmlFor:"postTitle",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Post Title ",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsx("input",{type:"text",id:"postTitle",value:a,onChange:B=>l(B.target.value),className:"w-full p-2.5 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500",placeholder:"Enter a catchy title",disabled:_})]}),d.jsxs("div",{className:"mb-4",children:[d.jsxs("label",{htmlFor:"postContent",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Your Content ",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsx("textarea",{id:"postContent",rows:4,value:c,onChange:B=>h(B.target.value),className:"w-full p-2.5 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500",placeholder:"Share your thoughts in detail...",disabled:_})]}),d.jsxs("div",{className:"mb-6",children:[d.jsxs("label",{htmlFor:"postImage",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-2",children:[d.jsx(uV,{className:"w-4 h-4"})," Add Image (Optional, max 2MB)"]}),d.jsx("input",{type:"file",id:"postImage",ref:I,accept:"image/png, image/jpeg, image/gif",onChange:D,className:`block w-full text-sm text-gray-500 dark:text-gray-400\r
            file:mr-4 file:py-2.5 file:px-4\r
            file:rounded-md file:border-0\r
            file:text-sm file:font-semibold\r
            file:bg-indigo-50 dark:file:bg-indigo-900/30 file:text-indigo-700 dark:file:text-indigo-300\r
            hover:file:bg-indigo-100 dark:hover:file:bg-indigo-800\r
            cursor-pointer`,disabled:_}),m&&d.jsxs("div",{className:"mt-4 relative inline-block",children:[d.jsx("img",{src:m,alt:"Selected preview",className:"max-h-40 rounded-lg border border-gray-300 dark:border-gray-600 shadow-sm"}),d.jsx("button",{onClick:N,disabled:_,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1.5 hover:bg-red-600 shadow-md transition-colors","aria-label":"Remove image",children:d.jsx(em,{className:"w-4 h-4"})})]})]}),d.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700 mt-2",children:[d.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:hover:bg-gray-600 transition-colors",disabled:_,children:"Cancel"}),d.jsx("button",{type:"button",onClick:V,disabled:_||!a.trim()||!c.trim(),className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:_?d.jsxs("span",{className:"flex items-center",children:[d.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Posting..."]}):"Create Post"})]})]})},hV=({testimonials:n})=>d.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900/50 rounded-xl transition-colors duration-200",children:[d.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-6 px-1",children:"Student Testimonials"}),n.length===0?d.jsx("div",{className:"text-center py-12 border border-dashed border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800/50",children:d.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No testimonials available yet. Check back soon!"})}):d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:n.map(e=>d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 hover:shadow-md transition-all duration-200",children:[d.jsxs("div",{className:"flex items-center mb-4",children:[e.avatarUrl?d.jsx("img",{src:e.avatarUrl,alt:e.studentName,className:"w-12 h-12 rounded-full mr-4 object-cover border-2 border-white dark:border-gray-700 shadow-sm"}):d.jsx($l,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mr-4"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-bold text-gray-900 dark:text-gray-100 text-base",children:e.studentName}),d.jsx("p",{className:"text-xs text-indigo-600 dark:text-indigo-400 font-semibold uppercase tracking-wide",children:e.course})]})]}),d.jsxs("div",{className:"relative",children:[d.jsx("span",{className:"absolute -top-2 -left-1 text-4xl text-gray-100 dark:text-gray-700 font-serif select-none pointer-events-none",children:""}),d.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm leading-relaxed italic relative z-10 pl-2",children:e.testimonialText})]})]},e.id))})]}),fV=({onClose:n})=>d.jsxs("div",{className:"p-1 space-y-3 text-sm text-gray-600 dark:text-gray-300",children:[d.jsx("h4",{className:"text-md font-semibold text-gray-800 dark:text-gray-100",children:"Our Commitment to Privacy"}),d.jsx("p",{children:'Closure ("we", "us", "our") is committed to protecting your privacy. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our mobile application (the "Application").'}),d.jsx("h4",{className:"text-md font-semibold text-gray-800 dark:text-gray-100 pt-2",children:"Information We Collect"}),d.jsx("p",{children:"We may collect information about you in a variety of ways. The information we may collect via the Application depends on the content and materials you use, and includes:"}),d.jsxs("ul",{className:"list-disc list-inside pl-4 space-y-1",children:[d.jsxs("li",{children:[d.jsx("strong",{children:"Personal Data:"})," Personally identifiable information, such as your name, email address, and mobile number, that you voluntarily give to us when you register with the Application."]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Usage Data:"})," Information automatically collected when you access and use the Application, such as your IP address, browser type, operating system, access times, and the pages you have viewed directly before and after accessing the Application."]})]}),d.jsx("h4",{className:"text-md font-semibold text-gray-800 dark:text-gray-100 pt-2",children:"Use of Your Information"}),d.jsx("p",{children:"Having accurate information about you permits us to provide you with a smooth, efficient, and customized experience. Specifically, we may use information collected about you via the Application to:"}),d.jsxs("ul",{className:"list-disc list-inside pl-4 space-y-1",children:[d.jsx("li",{children:"Create and manage your account."}),d.jsx("li",{children:"Email you regarding your account or order."}),d.jsx("li",{children:"Enable user-to-user communications."}),d.jsx("li",{children:"Improve the Application and services."})]}),d.jsx("h4",{className:"text-md font-semibold text-gray-800 dark:text-gray-100 pt-2",children:"Security of Your Information"}),d.jsx("p",{children:"We use administrative, technical, and physical security measures to help protect your personal information. While we have taken reasonable steps to secure the personal information you provide to us, please be aware that despite our efforts, no security measures are perfect or impenetrable, and no method of data transmission can be guaranteed against any interception or other type of misuse."}),d.jsx("h4",{className:"text-md font-semibold text-gray-800 dark:text-gray-100 pt-2",children:"Contact Us"}),d.jsxs("p",{children:["If you have questions or comments about this Privacy Policy, please contact us at: ",d.jsx("span",{className:"text-indigo-600 dark:text-indigo-400",children:"support@closure.example.com"})]}),d.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 pt-3 italic",children:"This is a sample privacy policy for demonstration purposes."}),d.jsx("div",{className:"pt-6 border-t border-gray-200 dark:border-gray-700 mt-4",children:d.jsx("button",{onClick:n,className:"w-full bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 py-2.5 px-4 rounded-lg font-semibold hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors text-sm border border-gray-300 dark:border-gray-600",children:"Close"})})]}),mV=({question:n,answer:e})=>{const[t,r]=C.useState(!1);return d.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 py-3 last:border-0",children:[d.jsxs("button",{onClick:()=>r(!t),className:"flex justify-between items-center w-full text-left focus:outline-none group",children:[d.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200 text-sm sm:text-base group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:n}),d.jsx("span",{className:`transform transition-transform duration-200 ml-2 text-gray-400 dark:text-gray-500 ${t?"rotate-180":""}`,children:d.jsx(Ik,{className:"w-5 h-5"})})]}),t&&d.jsx("div",{className:"mt-2 text-sm text-gray-600 dark:text-gray-300 pr-4 leading-relaxed bg-gray-50 dark:bg-gray-700/30 p-3 rounded-lg border border-gray-100 dark:border-gray-700/50",children:e})]})},gV=({onStartSupportChat:n})=>{const[e,t]=C.useState([]),[r,a]=C.useState(!0),l=[{question:"How do I reset my password?",answer:"You can reset your password from the login screen by clicking the 'Forgot Password?' link. Check your email for the reset link."},{question:"How can I update my profile?",answer:"Navigate to the 'Profile' tab, then tap on the 'Edit' icon to update your name, bio, or profile picture."},{question:"Where are my course materials?",answer:"Course materials are located in the 'Free Material' section for institutional resources, or the 'Store' for purchased items."},{question:"Is my data secure?",answer:"Yes. We use industry-standard encryption for all data and secure Firebase authentication."}];return C.useEffect(()=>{(async()=>{try{const h=kr(Ut(He,"faqs"),Ls("order","asc")),m=await hl(h);if(m.empty)t(l);else{const p=m.docs.map(v=>v.data());t(p)}}catch(h){console.warn("Could not fetch FAQs, using defaults.",h),t(l)}finally{a(!1)}})()},[]),d.jsxs("div",{className:"p-4 bg-gray-100 dark:bg-gray-900 min-h-full pb-16 transition-colors duration-200",children:[d.jsxs("div",{className:"mb-6 px-1",children:[d.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-1",children:"Help & Support"}),d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Find answers or contact our team."})]}),d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 mb-6 border border-gray-100 dark:border-gray-700",children:[d.jsxs("h4",{className:"text-md font-semibold text-gray-800 dark:text-gray-100 mb-4 flex items-center",children:[d.jsx("span",{className:"bg-indigo-100 dark:bg-indigo-900/50 text-indigo-600 dark:text-indigo-400 p-1.5 rounded-md mr-2",children:d.jsx(jk,{className:"h-5 w-5"})}),"Frequently Asked Questions"]}),r?d.jsx("div",{className:"space-y-4 animate-pulse",children:[1,2,3].map(c=>d.jsx("div",{className:"h-10 bg-gray-200 dark:bg-gray-700 rounded opacity-50"},c))}):d.jsx("div",{className:"space-y-1",children:e.map((c,h)=>d.jsx(mV,{question:c.question,answer:c.answer},h))})]}),d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 text-center border border-gray-100 dark:border-gray-700",children:[d.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-3",children:d.jsx(Zf,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),d.jsx("h4",{className:"text-md font-semibold text-gray-800 dark:text-gray-100 mb-2",children:"Still need help?"}),d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-5",children:"Can't find the answer you're looking for? Start a live chat with our support team."}),d.jsxs("button",{onClick:n,className:"w-full bg-indigo-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-indigo-700 dark:hover:bg-indigo-500 transition-colors text-sm shadow-md flex items-center justify-center focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[d.jsx(Zf,{className:"h-5 w-5 mr-2"}),"Chat with Support"]}),d.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-4",children:"Support Available: Mon-Fri, 9am - 5pm"})]})]})},pV=({className:n="w-5 h-5"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),H2=({className:n="w-5 h-5"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),yV=({onDownload:n,onViewDownloaded:e})=>{const{user:t}=Zt(),[r,a]=C.useState([]),[l,c]=C.useState(!0),h=C.useMemo(()=>t!=null&&t.email?t.email.split("@")[1].toLowerCase():null,[t]);C.useEffect(()=>{if(h){const p=kr(Ut(He,"offline_downloads"),to("collegeDomain","==",h)),v=Us(p,b=>{const _=b.docs.map(A=>({id:A.id,...A.data()}));a(_),c(!1)},b=>{console.error("Error fetching downloads:",b),c(!1)});return()=>v()}else c(!1)},[h]);const m=p=>{p.url&&window.open(p.url,"_system"),n&&n(p)};return d.jsxs("div",{className:"p-4 bg-gray-100 dark:bg-gray-900 min-h-full transition-colors duration-200",children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:"Offline Downloads"}),d.jsxs("p",{className:"text-xs text-indigo-600 dark:text-indigo-400",children:["Study materials for ",h?`@${h}`:"you"]})]}),l?d.jsx("div",{className:"flex justify-center pt-10",children:d.jsxs("svg",{className:"animate-spin h-8 w-8 text-indigo-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):r.length===0?d.jsxs("div",{className:"text-center py-10 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-dashed border-gray-300 dark:border-gray-700",children:[d.jsx(H2,{className:"w-10 h-10 mx-auto text-gray-300 dark:text-gray-600 mb-2"}),d.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No downloads available yet."})]}):d.jsx("ul",{className:"space-y-3",children:r.map(p=>{var b;const v=(b=t==null?void 0:t.downloadedItemIds)==null?void 0:b.includes(p.id);return d.jsxs("li",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm flex justify-between items-center border border-gray-100 dark:border-gray-700 transition-colors",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/30 p-2 rounded-lg mr-3",children:d.jsx(H2,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-gray-800 dark:text-gray-100 text-sm sm:text-base",children:p.name}),d.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:[p.type,"  ",p.size]})]})]}),d.jsx("button",{onClick:()=>!v&&m(p),disabled:v,className:`px-3 py-2 text-xs sm:text-sm font-medium rounded-md flex items-center transition-colors shadow-sm ${v?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 cursor-default border border-green-200 dark:border-green-800":"bg-indigo-600 text-white hover:bg-indigo-700 dark:hover:bg-indigo-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-900"}`,children:v?d.jsxs(d.Fragment,{children:[d.jsx(pV,{className:"w-4 h-4 mr-1.5"}),"Saved"]}):d.jsxs(d.Fragment,{children:[d.jsx(_k,{className:"w-4 h-4 mr-1.5"}),"Download"]})})]},p.id)})})]})},G2=({className:n="w-5 h-5"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})}),vV=({onOpenModal:n})=>{const{user:e}=Zt(),[t,r]=C.useState([]),[a,l]=C.useState(!0),c=C.useMemo(()=>e!=null&&e.email?e.email.split("@")[1].toLowerCase():null,[e]);C.useEffect(()=>{if(c){const m=kr(Ut(He,"free_materials"),to("collegeDomain","==",c)),p=Us(m,v=>{const b=v.docs.map(_=>({id:_.id,..._.data()}));r(b),l(!1)},v=>{console.error("Error fetching materials:",v),l(!1)});return()=>p()}else l(!1)},[c]);const h=m=>{m.type==="article"&&m.content?n(Pe.VIEW_FREE_MATERIAL_CONTENT,{title:m.title,content:m.content}):m.url?window.open(m.url,"_blank"):alert(`Accessing: ${m.title}

No direct content preview or URL available.`)};return d.jsxs("div",{className:"p-4 bg-gray-100 dark:bg-gray-900 min-h-full transition-colors duration-200",children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:"Free Material"}),d.jsxs("p",{className:"text-xs text-indigo-600 dark:text-indigo-400",children:["Resources for ",c?`@${c}`:"you"]})]}),a?d.jsx("div",{className:"flex justify-center pt-10",children:d.jsxs("svg",{className:"animate-spin h-8 w-8 text-indigo-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):t.length===0?d.jsxs("div",{className:"text-center py-10 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-dashed border-gray-300 dark:border-gray-700",children:[d.jsx(ja,{className:"w-10 h-10 mx-auto text-gray-300 dark:text-gray-600 mb-2"}),d.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No free materials uploaded for your college yet."})]}):d.jsx("ul",{className:"space-y-3",children:t.map(m=>d.jsxs("li",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border-l-4 border-indigo-500 hover:shadow-md transition-shadow dark:border-indigo-600",children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-gray-800 dark:text-gray-100 mb-1",children:m.title}),d.jsx("p",{className:"text-xs text-indigo-600 dark:text-indigo-400 font-semibold uppercase tracking-wide mb-1",children:m.type.replace("_"," ")})]}),d.jsx("div",{className:"p-2 bg-gray-100 dark:bg-gray-700 rounded-full text-gray-500 dark:text-gray-300",children:m.type==="article"?d.jsx(ja,{className:"w-5 h-5"}):d.jsx(G2,{className:"w-5 h-5"})})]}),d.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4 line-clamp-2",children:m.description}),d.jsxs("button",{onClick:()=>h(m),className:"w-full py-2 text-sm font-medium text-indigo-600 dark:text-indigo-300 bg-indigo-50 dark:bg-indigo-900/30 rounded-md hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition-colors flex items-center justify-center border border-indigo-200 dark:border-indigo-800",children:[m.type==="article"?d.jsx(ja,{className:"w-4 h-4 mr-2"}):d.jsx(G2,{className:"w-4 h-4 mr-2"}),m.type==="video_link"?"Watch Video":"View Material"]})]},m.id))})]})},Zh=({icon:n,label:e,isChecked:t,onChange:r,id:a,description:l,disabled:c})=>d.jsxs("div",{className:"w-full flex justify-between items-center bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg shadow-sm mb-2.5 border border-gray-100 dark:border-gray-600",children:[d.jsxs("div",{className:"flex items-center pr-4",children:[n&&d.jsx("div",{className:"mr-3 text-gray-500 dark:text-gray-400",children:n}),d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-800 dark:text-gray-100 text-sm font-medium block",children:e}),l&&d.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:l})]})]}),d.jsxs("label",{htmlFor:a,className:`relative inline-flex items-center cursor-pointer flex-shrink-0 ${c?"opacity-50 cursor-not-allowed":""}`,children:[d.jsx("input",{type:"checkbox",id:a,className:"sr-only peer",checked:t,onChange:r,disabled:c}),d.jsx("div",{className:`w-11 h-6 bg-gray-300 dark:bg-gray-600 rounded-full peer \r
          peer-focus:ring-2 peer-focus:ring-indigo-500 dark:peer-focus:ring-indigo-600 \r
          peer-checked:after:translate-x-full peer-checked:after:border-white \r
          after:content-[''] after:absolute after:top-0.5 after:left-[2px] \r
          after:bg-white after:border-gray-300 dark:after:border-gray-500 \r
          after:border after:rounded-full after:h-5 after:w-5 after:transition-all \r
          peer-checked:bg-indigo-600 dark:peer-checked:bg-indigo-500`})]})]}),xV=({onClose:n})=>{const{user:e,firebaseUser:t,refreshProfile:r}=Zt(),a=(e==null?void 0:e.notificationPreferences)||{newAnnouncements:!0,chatMentions:!0,eventReminders:!0,promotionalUpdates:!1},l=async c=>{if(!t)return;const h={...a,[c]:!a[c]};try{const m=yn(He,"users",t.uid);await Xr(m,{notificationPreferences:h}),r()}catch(m){console.error("Failed to update notification settings",m)}};return d.jsxs("div",{className:"p-1",children:[d.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-4",children:"Manage what notifications you receive from Closure."}),d.jsxs("div",{className:"space-y-1",children:[d.jsx(Zh,{id:"newAnnouncements",icon:d.jsx(Vm,{className:"w-5 h-5"}),label:"New Announcements",description:"Get notified about important college announcements.",isChecked:a.newAnnouncements,onChange:()=>l("newAnnouncements"),disabled:!t}),d.jsx(Zh,{id:"chatMentions",icon:d.jsx(Zf,{className:"w-5 h-5"}),label:"Chat Mentions & Messages",description:"Receive alerts for new DMs or group mentions.",isChecked:a.chatMentions,onChange:()=>l("chatMentions"),disabled:!t}),d.jsx(Zh,{id:"eventReminders",icon:d.jsx(Du,{className:"w-5 h-5"}),label:"Event Reminders",description:"Get reminders for upcoming campus events.",isChecked:a.eventReminders,onChange:()=>l("eventReminders"),disabled:!t}),d.jsx(Zh,{id:"promotionalUpdates",icon:d.jsx(Sk,{className:"w-5 h-5"}),label:"Store Updates",description:"Notifications about new products or offers.",isChecked:a.promotionalUpdates,onChange:()=>l("promotionalUpdates"),disabled:!t})]}),d.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700 flex flex-col items-center",children:[d.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mb-3",children:"Changes are saved automatically to your profile."}),d.jsx("button",{onClick:n,className:"w-full bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 py-2 rounded-lg font-medium hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"Done"})]})]})},bV=({onClose:n})=>d.jsxs("div",{className:"p-1 space-y-3 text-sm text-gray-700 dark:text-gray-300",children:[d.jsx("h4",{className:"text-md font-semibold text-gray-800 dark:text-gray-100",children:"Acknowledgements"}),d.jsx("p",{children:"Closure utilizes several open-source libraries and technologies. We are grateful to the developers and communities behind these projects."}),d.jsx("h5",{className:"text-sm font-semibold text-gray-800 dark:text-gray-100 pt-2",children:"Key Technologies:"}),d.jsxs("ul",{className:"list-disc list-inside pl-4 space-y-1",children:[d.jsxs("li",{children:[d.jsx("strong",{children:"React:"})," A JavaScript library for building user interfaces.",d.jsx("a",{href:"https://reactjs.org/",target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 dark:text-indigo-400 hover:underline ml-2",children:"Visit React"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Tailwind CSS:"})," A utility-first CSS framework for rapid UI development.",d.jsx("a",{href:"https://tailwindcss.com/",target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 dark:text-indigo-400 hover:underline ml-2",children:"Visit Tailwind CSS"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Heroicons:"})," Beautiful hand-crafted SVG icons, by the makers of Tailwind CSS.",d.jsx("a",{href:"https://heroicons.com/",target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 dark:text-indigo-400 hover:underline ml-2",children:"Visit Heroicons"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Picsum Photos:"})," Placeholder images.",d.jsx("a",{href:"https://picsum.photos/",target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 dark:text-indigo-400 hover:underline ml-2",children:"Visit Picsum Photos"})]})]}),d.jsx("h5",{className:"text-sm font-semibold text-gray-800 dark:text-gray-100 pt-2",children:"Special Thanks:"}),d.jsx("p",{children:"We would also like to thank the broader open-source community for their continuous contributions that make projects like Closure possible."}),d.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 pt-3",children:"This list is representative and may not be exhaustive. For any queries regarding licensing or attributions, please contact us."}),d.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700 mt-4",children:d.jsx("button",{onClick:n,className:"w-full bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 py-2.5 px-4 rounded-lg font-semibold hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors text-sm border border-gray-300 dark:border-gray-600",children:"Close"})})]}),_V=({order:n,onViewOrders:e,onContinueShopping:t,onClose:r})=>{if(!n)return d.jsxs("div",{className:"p-4 text-center",children:[d.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Order details not available."}),d.jsx("button",{onClick:r,className:"mt-4 w-full bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 py-2.5 px-4 rounded-lg font-semibold hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors text-sm border border-gray-300 dark:border-gray-600",children:"Close"})]});const{id:a,totalAmount:l,paymentMethod:c,transactionId:h,paymentDetails:m,orderDate:p}=n,v=async()=>{if(navigator.share)try{await navigator.share({title:"Closure Order Receipt",text:`Order Confirmed! 
Order ID: ${a}
Amount: ${l}
Item: Closure Store Purchase`})}catch(_){console.log("Error sharing:",_)}else alert("Sharing is not supported on this browser.")},b=p instanceof Date?p.toLocaleString():p!=null&&p.toDate?p.toDate().toLocaleString():new Date().toLocaleString();return d.jsxs("div",{className:"p-2 sm:p-4 text-center",children:[d.jsx(Wv,{className:"w-12 h-12 sm:w-16 sm:h-16 text-green-500 mx-auto mb-3"}),d.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-800 dark:text-gray-100 mb-1",children:"Order Placed Successfully!"}),d.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300 mb-2",children:"Thank you for your purchase with Closure."}),d.jsx("div",{className:"flex justify-center mb-4",children:d.jsxs("button",{onClick:v,className:"flex items-center text-indigo-600 dark:text-indigo-400 text-xs font-medium hover:underline focus:outline-none",children:[d.jsx(Xv,{className:"w-4 h-4 mr-1"}),"Share Receipt"]})}),d.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mb-4",children:["Order ID: ",d.jsx("span",{className:"font-medium text-indigo-600 dark:text-indigo-400",children:a})]}),d.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 sm:p-4 rounded-lg border border-gray-200 dark:border-gray-600 text-left text-xs sm:text-sm mb-5",children:[d.jsx("h4",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-3 text-sm sm:text-base text-center border-b border-gray-200 dark:border-gray-600 pb-2",children:"Transaction Details"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Status:"}),d.jsx("span",{className:"font-medium text-green-600 dark:text-green-400",children:"Payment Successful"})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Amount Paid:"}),d.jsxs("span",{className:"font-medium text-gray-800 dark:text-gray-100",children:["",l.toFixed(2)]})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Transaction ID:"}),d.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-100 truncate max-w-[150px] text-right",children:h})]}),c==="UPI"&&(m==null?void 0:m.upiTransactionId)&&d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"UPI Ref:"}),d.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-100 truncate max-w-[150px] text-right",children:m.upiTransactionId})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Paid to:"}),d.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-100",children:"Closure Store"})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Date:"}),d.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-100 text-right",children:b})]})]})]}),d.jsxs("div",{className:"space-y-3 mt-4",children:[d.jsx("button",{onClick:()=>{e(),r()},className:"w-full bg-indigo-600 text-white py-2.5 px-4 rounded-lg font-semibold hover:bg-indigo-700 dark:hover:bg-indigo-500 transition-colors text-sm shadow-sm",children:"View My Orders"}),d.jsx("button",{onClick:()=>{t(),r()},className:"w-full bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200 py-2.5 px-4 rounded-lg font-semibold hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors text-sm border border-gray-300 dark:border-gray-600",children:"Continue Shopping"})]})]})},wV=({title:n,content:e,onClose:t})=>d.jsxs("div",{className:"p-1 flex flex-col h-full max-h-[80vh]",children:[d.jsx("div",{className:"mb-4 pb-2 border-b border-gray-100 dark:border-gray-700",children:d.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white leading-tight",children:n})}),d.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 mb-4",children:d.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none text-gray-700 dark:text-gray-300 whitespace-pre-wrap leading-relaxed",children:e})}),d.jsx("div",{className:"pt-2 mt-auto border-t border-gray-100 dark:border-gray-700",children:d.jsx("button",{onClick:t,className:"w-full bg-indigo-600 text-white py-2.5 px-4 rounded-lg font-semibold hover:bg-indigo-700 dark:hover:bg-indigo-500 transition-colors text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-800",children:"Close"})})]}),EV=({onClose:n,onSubmit:e})=>{const{user:t}=Zt(),[r,a]=C.useState(""),[l,c]=C.useState(""),[h,m]=C.useState("stationary"),[p,v]=C.useState(""),[b,_]=C.useState(null),[A,I]=C.useState(void 0),[D,N]=C.useState(!1),[V,B]=C.useState(null),H=C.useRef(null),te=se=>{var k;const O=(k=se.target.files)==null?void 0:k[0];if(O){if(O.size>2*1024*1024){B("Image size must be less than 2MB"),H.current&&(H.current.value="");return}const R=new FileReader;R.onloadend=()=>{const j=R.result;I(j),_(j),B(null)},R.readAsDataURL(O)}},ee=async se=>{if(se.preventDefault(),B(null),!r.trim()||!l||!A){B("Please fill in all required fields and upload an image.");return}N(!0);try{const O=(t==null?void 0:t.name)||"Unknown Seller",k=t!=null&&t.email?t.email.split("@")[1]:"unknown",R={name:r.trim(),price:parseFloat(l),category:h,description:p.trim(),sellerName:O,collegeDomain:k};await e(R,A)}catch(O){console.error("Error adding product: ",O),B("Failed to add product.")}finally{N(!1)}};return d.jsxs("form",{onSubmit:ee,className:"space-y-4 p-1",children:[V&&d.jsx("div",{className:"p-2 text-sm text-red-600 bg-red-100 rounded dark:bg-red-900/30 dark:text-red-400 border border-red-200 dark:border-red-800",children:V}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Product Name ",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsx("input",{type:"text",value:r,onChange:se=>a(se.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm p-2.5 border",placeholder:"e.g. Engineering Mathematics",required:!0,disabled:D})]}),d.jsxs("div",{className:"flex gap-4",children:[d.jsxs("div",{className:"flex-1",children:[d.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Price () ",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsx("input",{type:"number",min:"0",step:"0.01",value:l,onChange:se=>c(se.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm p-2.5 border",placeholder:"0.00",required:!0,disabled:D})]}),d.jsxs("div",{className:"flex-1",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Category"}),d.jsxs("select",{value:h,onChange:se=>m(se.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm p-2.5 border",disabled:D,children:[d.jsx("option",{value:"stationary",children:"Stationary"}),d.jsx("option",{value:"book",children:"Book"}),d.jsx("option",{value:"other",children:"Other"})]})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Description"}),d.jsx("textarea",{rows:3,value:p,onChange:se=>v(se.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm p-2.5 border",placeholder:"Product details...",disabled:D})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Product Image ",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsx("div",{className:"flex items-center space-x-4",children:b?d.jsxs("div",{className:"relative h-24 w-24",children:[d.jsx("img",{src:b,alt:"Preview",className:"h-full w-full object-cover rounded-lg border border-gray-300 dark:border-gray-600 shadow-sm"}),d.jsx("button",{type:"button",onClick:()=>{_(null),I(void 0),H.current&&(H.current.value="")},disabled:D,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1.5 hover:bg-red-600 shadow-md transition-colors",children:d.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}):d.jsxs("div",{className:"w-full",children:[d.jsx("input",{type:"file",ref:H,accept:"image/*",onChange:te,disabled:D,className:`block w-full text-sm text-gray-500 dark:text-gray-400\r
                    file:mr-4 file:py-2.5 file:px-4\r
                    file:rounded-md file:border-0\r
                    file:text-sm file:font-semibold\r
                    file:bg-indigo-50 file:text-indigo-700\r
                    hover:file:bg-indigo-100\r
                    dark:file:bg-indigo-900/30 dark:file:text-indigo-300\r
                    cursor-pointer`}),d.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"PNG, JPG up to 2MB"})]})})]}),d.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700 mt-6",children:[d.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600 dark:hover:bg-gray-600 transition-colors",disabled:D,children:"Cancel"}),d.jsx("button",{type:"submit",disabled:D,className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:D?d.jsxs("span",{className:"flex items-center",children:[d.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Adding..."]}):"Add Product"})]})]})},TV=({onClose:n})=>{const[e,t]=C.useState("overview"),[r,a]=C.useState({users:0,revenue:0,feedback:0}),[l,c]=C.useState([]),[h,m]=C.useState([]),[p,v]=C.useState(""),[b,_]=C.useState(""),[A,I]=C.useState(""),[D,N]=C.useState(""),[V,B]=C.useState(""),[H,te]=C.useState(!1),[ee,se]=C.useState("");C.useEffect(()=>{O()},[]);const O=async()=>{try{const j=await hl(Ut(He,"users")),L=j.docs.map(J=>J.data()),P=(await hl(Ut(He,"orders"))).docs.reduce((J,ue)=>J+(ue.data().totalAmount||0),0),Ze=await hl(Ut(He,"testimonials")),Ke=Ze.docs.map(J=>({id:J.id,...J.data()}));a({users:j.size,revenue:P,feedback:Ze.size}),c(L.slice(0,5)),m(Ke.slice(0,5))}catch(j){console.error("Error fetching admin stats:",j)}},k=async j=>{j.preventDefault(),te(!0);try{await Ol(Ut(He,"announcements"),{title:p,content:b,date:new Date().toLocaleDateString(),timestamp:new Date}),se("Announcement published successfully!"),v(""),_("")}catch{se("Failed to publish announcement.")}te(!1)},R=async j=>{j.preventDefault(),te(!0);try{await Ol(Ut(He,"events"),{title:A,date:D,location:V,timestamp:new Date}),se("Event published successfully!"),I(""),N(""),B("")}catch{se("Failed to publish event.")}te(!1)};return d.jsxs("div",{className:"fixed inset-0 z-50 bg-gray-100 dark:bg-gray-900 overflow-y-auto",children:[d.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-sm sticky top-0 z-10 px-6 py-4 flex justify-between items-center",children:[d.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Admin Dashboard"}),d.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full",children:d.jsx(em,{className:"w-6 h-6 text-gray-600 dark:text-gray-300"})})]}),d.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[d.jsxs("div",{className:"flex space-x-4 mb-8 border-b dark:border-gray-700 pb-4",children:[d.jsx("button",{onClick:()=>t("overview"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${e==="overview"?"bg-indigo-600 text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:"Overview & Stats"}),d.jsx("button",{onClick:()=>t("announcements"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${e==="announcements"?"bg-indigo-600 text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:"Manage Announcements"}),d.jsx("button",{onClick:()=>t("events"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${e==="events"?"bg-indigo-600 text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:"Manage Events"})]}),ee&&d.jsxs("div",{className:"mb-4 p-4 bg-blue-100 text-blue-800 rounded-lg flex justify-between",children:[d.jsx("span",{children:ee}),d.jsx("button",{onClick:()=>se(""),children:d.jsx(em,{className:"w-5 h-5"})})]}),e==="overview"&&d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700",children:[d.jsx("h3",{className:"text-gray-500 dark:text-gray-400 text-sm font-medium",children:"Total Users"}),d.jsx("p",{className:"text-3xl font-bold text-gray-800 dark:text-white mt-2",children:r.users})]}),d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700",children:[d.jsx("h3",{className:"text-gray-500 dark:text-gray-400 text-sm font-medium",children:"Total Revenue"}),d.jsxs("p",{className:"text-3xl font-bold text-green-600 mt-2",children:["",r.revenue.toLocaleString()]})]}),d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700",children:[d.jsx("h3",{className:"text-gray-500 dark:text-gray-400 text-sm font-medium",children:"Feedback Received"}),d.jsx("p",{className:"text-3xl font-bold text-indigo-600 mt-2",children:r.feedback})]})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm",children:[d.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-800 dark:text-white",children:"Recent Users"}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-left",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"border-b dark:border-gray-700 text-gray-500 dark:text-gray-400 text-sm",children:[d.jsx("th",{className:"pb-2",children:"Name"}),d.jsx("th",{className:"pb-2",children:"Email"})]})}),d.jsx("tbody",{className:"text-sm",children:l.map((j,L)=>d.jsxs("tr",{className:"border-b dark:border-gray-700 last:border-0",children:[d.jsx("td",{className:"py-3 text-gray-800 dark:text-gray-200",children:j.name}),d.jsx("td",{className:"py-3 text-gray-500 dark:text-gray-400",children:j.email})]},L))})]})})]}),d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm",children:[d.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-800 dark:text-white",children:"Recent Feedback"}),d.jsxs("div",{className:"space-y-4",children:[h.map((j,L)=>d.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[d.jsx("p",{className:"font-medium text-gray-800 dark:text-gray-200 text-sm",children:j.studentName}),d.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:['"',j.testimonialText,'"']})]},L)),h.length===0&&d.jsx("p",{className:"text-gray-500 text-sm",children:"No feedback yet."})]})]})]})]}),e==="announcements"&&d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm max-w-2xl",children:[d.jsx("h2",{className:"text-xl font-bold mb-6 text-gray-800 dark:text-white",children:"Publish New Announcement"}),d.jsxs("form",{onSubmit:k,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title"}),d.jsx("input",{type:"text",value:p,onChange:j=>v(j.target.value),className:"w-full p-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Content"}),d.jsx("textarea",{value:b,onChange:j=>_(j.target.value),rows:4,className:"w-full p-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:!0})]}),d.jsx("button",{type:"submit",disabled:H,className:"w-full bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700 disabled:opacity-50",children:H?"Publishing...":"Publish Announcement"})]})]}),e==="events"&&d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm max-w-2xl",children:[d.jsx("h2",{className:"text-xl font-bold mb-6 text-gray-800 dark:text-white",children:"Publish Upcoming Event"}),d.jsxs("form",{onSubmit:R,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Event Title"}),d.jsx("input",{type:"text",value:A,onChange:j=>I(j.target.value),className:"w-full p-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Date & Time"}),d.jsx("input",{type:"datetime-local",value:D,onChange:j=>N(j.target.value),className:"w-full p-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Location"}),d.jsx("input",{type:"text",value:V,onChange:j=>B(j.target.value),className:"w-full p-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g. University Hall",required:!0})]}),d.jsx("button",{type:"submit",disabled:H,className:"w-full bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700 disabled:opacity-50",children:H?"Publishing...":"Publish Event"})]})]})]})]})},AV=({children:n})=>{const{user:e,loading:t}=Zt(),r=Ar();return t?d.jsx("div",{className:"flex justify-center items-center h-screen bg-gray-50 dark:bg-gray-900",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):e?n:d.jsx(l5,{to:"/login",state:{from:r},replace:!0})},SV=()=>{const{user:n,firebaseUser:e,loading:t,refreshProfile:r}=Zt(),a=nm(),[l,c]=C.useState(!1),[h,m]=C.useState(null),[p,v]=C.useState(null),[b,_]=C.useState(null),[A,I]=C.useState([]),D="1.5.5.1",[N,V]=C.useState([]),[B,H]=C.useState([]),[te,ee]=C.useState([]),[se,O]=C.useState([]),[k,R]=C.useState([]),[j,L]=C.useState([]),[F,P]=C.useState([]),[Ze,Ke]=C.useState([]),[J,ue]=C.useState(()=>{const ve=localStorage.getItem("theme");return ve==="dark"||ve==="light"?ve:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"});n!=null&&n.notificationPreferences;const me=C.useCallback((ve,Te)=>{const Re=String(Date.now());I(Oe=>[...Oe,{id:Re,message:ve,type:Te}]),setTimeout(()=>I(Oe=>Oe.filter(Dn=>Dn.id!==Re)),3e3)},[]);C.useEffect(()=>{if(!e)return;(async()=>{try{if(_f.isNativePlatform())(await Yo.requestPermissions()).receive==="granted"&&(await Yo.register(),Yo.addListener("registration",async Re=>{console.log("Push Registration Token:",Re.value),await Xr(yn(He,"users",e.uid),{fcmToken:Re.value})}),Yo.addListener("registrationError",Re=>{console.error("Push Registration Error:",Re)}),Yo.addListener("pushNotificationReceived",Re=>{me(Re.title||"New Notification","info")}),Yo.addListener("pushNotificationActionPerformed",Re=>{const Oe=Re.notification.data;Oe.chatId&&a(`/chats/${Oe.chatId}`)}));else if(await Notification.requestPermission()==="granted"){const Re=await a7(q2,{vapidKey:"YOUR_VAPID_KEY_HERE"});Re&&await Xr(yn(He,"users",e.uid),{fcmToken:Re}),o7(q2,Oe=>{var Dn;me(((Dn=Oe.notification)==null?void 0:Dn.title)||"New Message","info")})}}catch(Te){console.error("Error setting up notifications:",Te)}})()},[e,me,a]),C.useEffect(()=>{(async()=>{const Te=await kw.addListener("backButton",({canGoBack:Re})=>{Re?window.history.back():kw.exitApp()});return()=>Te.remove()})()},[]),C.useEffect(()=>{n&&(e!=null&&e.emailVerified)&&(async()=>{try{const Te=kr(Ut(He,"users",n.id,"notifications"),Ls("timestamp","desc")),Re=await hl(Te);H(Re.docs.map(Oe=>({id:Oe.id,...Oe.data(),timestamp:Oe.data().timestamp.toDate()})))}catch(Te){console.error("Error fetching notifications",Te)}})()},[n,e]),C.useEffect(()=>{ee([{id:"anno1",title:"Mid-term Exams Schedule Released",content:"The schedule for the upcoming mid-term examinations has been released.",fullContent:"Detailed content here...",date:"Oct 26, 2023"}]),O([{id:"event1",title:"Annual Sports Day",date:"Nov 10, 2023",time:"09:00 AM",location:"University Ground",description:"Sports day!",fullDescription:"Full description..."}]),R([{id:"dl1",name:"Introduction to Programming (PDF)",type:"PDF",size:"2.5 MB",url:"#"}]),L([{id:"fm1",title:"Understanding React Hooks",description:"A comprehensive guide.",type:"article",content:"React Hooks content..."}]),P([{id:"t1",studentName:"Alice Wonderland",course:"Computer Science",testimonialText:"Great platform!",avatarUrl:"https://picsum.photos/seed/alice/100/100"}]),Ke([{id:"chat1",participants:[{id:"closure_admin",name:"Closure Admin",avatarUrl:"https://picsum.photos/seed/closure_avatar/40/40"}],messages:[{id:"msg1",senderId:"closure_admin",text:"Welcome to Closure! How can we help?",timestamp:new Date(Date.now()-2e5).toISOString()}],unreadCount:1,lastMessagePreview:"Welcome to Closure!",lastMessageTimestamp:new Date(Date.now()-2e5)}])},[]),C.useEffect(()=>{const ve=document.documentElement;J==="dark"?ve.classList.add("dark"):ve.classList.remove("dark"),localStorage.setItem("theme",J)},[J]);const Le=C.useCallback(async()=>{try{await tp(xu),V([]),c(!1),a("/login"),me("Logged out successfully.","info")}catch{me("Failed to logout.","error")}},[me,a]),U=C.useCallback(async(ve,Te)=>{m(null);try{const Re=await P4(xu,ve,Te);if(!Re.user.emailVerified)return await tp(xu),m("Please verify your email address."),!1;const Oe=yn(He,"users",Re.user.uid);return(await Cv(Oe)).exists()?(a("/"),!0):(await tp(xu),m("Profile missing."),!1)}catch(Re){return Re.code==="auth/invalid-credential"?m("Invalid email or password."):m(Re.message||"Failed to login."),!1}},[a]),le=C.useCallback(ve=>{V(Te=>Te.find(Oe=>Oe.id===ve.id)?Te.map(Oe=>Oe.id===ve.id?{...Oe,quantity:Oe.quantity+1}:Oe):[...Te,{...ve,quantity:1}]),me(`${ve.name} added to cart!`,"success")},[me]),Z=C.useCallback(ve=>{V(Te=>Te.filter(Re=>Re.id!==ve)),me("Item removed.","info")},[me]),ae=C.useCallback((ve,Te)=>{V(Re=>Re.map(Oe=>Oe.id===ve?{...Oe,quantity:Math.max(0,Te)}:Oe).filter(Oe=>Oe.quantity>0))},[]),ge=C.useCallback(async ve=>{if(e)try{const Te=yn(He,"users",e.uid,"notifications",ve);await Xr(Te,{read:!0}),H(Re=>Re.map(Oe=>Oe.id===ve?{...Oe,read:!0}:Oe))}catch(Te){console.error("Error marking read:",Te)}},[e]),Ae=C.useCallback(async()=>{if(!e||B.every(Te=>Te.read))return;const ve=wP(He);B.forEach(Te=>{if(!Te.read){const Re=yn(He,"users",e.uid,"notifications",Te.id);ve.update(Re,{read:!0})}});try{await ve.commit(),H(Te=>Te.map(Re=>({...Re,read:!0})))}catch{me("Failed to mark all as read.","error")}},[e,B,me]),ye=C.useCallback((ve,Te)=>{v(ve),_(Te)},[]),je=C.useCallback(()=>{v(null),_(null)},[]),Be=()=>{switch(p){case Pe.CREATE_POST:return d.jsx(dV,{onSubmit:async(ve,Te,Re)=>{je(),me("Post created","success")},onClose:je,currentUserId:e==null?void 0:e.uid});case Pe.ADD_PRODUCT:return d.jsx(EV,{onSubmit:async()=>{je(),me("Product added","success")},onClose:je});case Pe.TESTIMONIALS:return d.jsx(hV,{testimonials:F});case Pe.PRIVACY_POLICY:return d.jsx(fV,{onClose:je});case Pe.HELP_SUPPORT:return d.jsx(gV,{onStartSupportChat:()=>{je(),a("/chats/support")}});case Pe.OFFLINE_DOWNLOADS_LIST:return d.jsx(yV,{items:k,user:n,onDownload:()=>{},onViewDownloaded:()=>{}});case Pe.FREE_MATERIAL_LIST:return d.jsx(vV,{materials:j,onOpenModal:ye});case Pe.VIEW_FREE_MATERIAL_CONTENT:return d.jsx(wV,{title:b==null?void 0:b.title,content:b==null?void 0:b.content});case Pe.ANNOUNCEMENT_DETAIL:return d.jsx("div",{className:"p-4",children:b==null?void 0:b.fullContent});case Pe.EVENT_DETAIL:return d.jsx("div",{className:"p-4",children:b==null?void 0:b.fullDescription});case Pe.NOTIFICATION_SETTINGS:return d.jsx(xV,{onClose:je});case Pe.CHANGE_PASSWORD:return d.jsx(g7,{onChangePassword:async()=>!0,onClose:je});case Pe.TERMS_AND_CONDITIONS:return d.jsx(O7,{onClose:je});case Pe.ACKNOWLEDGEMENTS:return d.jsx(bV,{onClose:je});case Pe.FORGOT_PASSWORD:return d.jsx(p7,{onClose:je,onForgotPasswordRequest:async()=>!0});case Pe.ORDER_SUCCESS_MODAL:return d.jsx(_V,{order:b==null?void 0:b.order,onViewOrders:()=>{je(),a("/profile")},onContinueShopping:()=>{je(),a("/store")},onClose:je});default:return null}},Dt=()=>p===Pe.CREATE_POST?"Create New Post":p===Pe.ADD_PRODUCT?"Add New Product":p||"";return d.jsxs(d.Fragment,{children:[d.jsxs(d5,{children:[d.jsx(hn,{path:"/login",element:d.jsx(u7,{onLoginAttempt:U,onOpenModal:ye,errorMessage:h})}),d.jsx(hn,{path:"/signup",element:d.jsx(m7,{onSignupAttempt:async()=>!0,onNavigateToLogin:()=>a("/login"),errorMessage:h})}),d.jsxs(hn,{element:d.jsx(AV,{children:d.jsx(j7,{user:n,isSidebarOpen:l,setIsSidebarOpen:c,notifications:B,cartItemCount:N.length,onNavigateToCart:()=>a("/cart"),onMarkNotificationRead:ge,onMarkAllNotificationsRead:Ae,onLogout:Le,onOpenModal:ye})}),children:[d.jsx(hn,{path:"/",element:d.jsx(L7,{onOpenModal:ye,announcements:te,events:se,userName:(n==null?void 0:n.name)||""})}),d.jsx(hn,{path:"/store",element:d.jsx(U7,{onAddToCart:le,onOpenModal:ye})}),d.jsx(hn,{path:"/community",element:d.jsx(z7,{onNavigateToPostDetail:ve=>a(`/posts/${ve.id}`,{state:{post:ve}}),onToggleLike:async()=>{},onOpenModal:ye})}),d.jsx(hn,{path:"/chats",element:d.jsx(sV,{conversations:Ze,onNavigate:(ve,Te)=>a(`/chats/${Te==null?void 0:Te.conversationId}`)})}),d.jsx(hn,{path:"/profile",element:d.jsx(Y7,{onLogout:Le})}),d.jsx(hn,{path:"/cart",element:d.jsx(rV,{cartItems:N,onRemoveItem:Z,onUpdateQuantity:ae,onNavigate:ve=>{ve==="PAYMENT_DETAILS"&&a("/payment")},onBack:()=>a(-1)})}),d.jsx(hn,{path:"/settings",element:d.jsx(nV,{version:D,onLogout:Le,onOpenModal:ye,currentTheme:{mode:J},onSetTheme:ue,onBack:()=>a("/"),addPopupMessage:me,userEmail:n==null?void 0:n.email,onNavigateToAdmin:()=>a("/admin")})}),d.jsx(hn,{path:"/payment",element:d.jsx(lV,{currentUser:n,cartItems:N,onNavigate:(ve,Te)=>{ve==="UPI_PAYMENT"&&a("/upi-payment",{state:Te})},onBack:()=>a("/cart"),onUpdateUserProfile:async()=>{}})}),d.jsx(hn,{path:"/upi-payment",element:d.jsx(cV,{deliveryAddress:{},paymentMethod:"",totalAmount:0,onConfirmPayment:async()=>{},onBack:()=>a("/payment")})}),d.jsx(hn,{path:"/admin",element:d.jsx(TV,{onClose:()=>a("/settings")})}),d.jsx(hn,{path:"/posts/:postId",element:d.jsx(oV,{onBack:()=>a(-1)})}),d.jsx(hn,{path:"/chats/:conversationId",element:d.jsx(aV,{onBack:()=>a("/chats")})})]})]}),d.jsx(D7,{isOpen:p!==null,onClose:je,title:Dt(),size:p===Pe.ORDER_SUCCESS_MODAL?"sm":"md",children:Be()}),d.jsx("div",{className:"fixed top-5 right-5 z-[100] space-y-2",children:A.map(ve=>d.jsx(P7,{message:ve.message,type:ve.type,onClose:()=>I(Te=>Te.filter(Re=>Re.id!==ve.id))},ve.id))})]})},Pk=document.getElementById("root");if(!Pk)throw new Error("Could not find root element to mount to");const kV=pN.createRoot(Pk);kV.render(d.jsx(lN.StrictMode,{children:d.jsx(c7,{children:d.jsx(O5,{children:d.jsx(SV,{})})})}));export{lE as W};
